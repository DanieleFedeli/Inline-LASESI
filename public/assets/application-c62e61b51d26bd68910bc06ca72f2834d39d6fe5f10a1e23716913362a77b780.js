function buildObjectForMap(t,e){for(var n=init(t),r=[],i=n.length,o=0;o<i;o++){var a;if(null==n[o].longitude||null==n[o].latitude){if(null==(a=retriveCoords(e))[1]||null==a[0])continue}else a=[n[o].longitude,n[o].latitude];r[o]={type:"Feature",geometry:{type:"Point",coordinates:a},properties:{id:n[o].id,title:n[o].name,address:n[o].address,description:n[o].description,visible:!0,avatar:n[o].avatar,room_host:n[o].room_host}}}return{type:"FeatureCollection",features:r=r.filter(function(t){return t!=undefined})}}function init(t){return $.ajax({async:!1,url:t,success:function(t){jsonTemp=t}}),jsonTemp}function getRightUrl(){var t=window.location.protocol,e=window.location.hostname,n=window.location.port;if(window.location.pathname!=undefined){var r=window.location.pathname;return"/"==r.substr(-1)&&(r=r.slice(0,-1)),t+"//"+e+":"+n+r}return t+"//"+e+":"+n}function render_map(a){mapboxgl.accessToken="pk.eyJ1IjoibGV0c2ZlZCIsImEiOiJjamhkamxmYXcwNTBvMzBva3VyOG50NjFtIn0.EuqkJJgJMWazgpxc6YJp4A",map=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/streets-v8?optimize=true",center:[12.48197078704834,41.893460648167355],zoom:15,attributionControl:!1});var s=buildObjectForMap(window.location.protocol+"//"+window.location.hostname+":"+window.location.port+"/dashboard.json",1);buildLocationList(s,!1),map.addControl(new mapboxgl.AttributionControl,"top-left"),map.on("load",function(){function t(r){r.features.forEach(function(t,e){if(r.features[e].properties.visible){var n=document.createElement("div");n.id="marker-"+e,n.className="marker",n.innerHTML="I' here for testing!",new mapboxgl.Marker(n,{offset:[0,0]}).setLngLat(t.geometry.coordinates).addTo(map)}})}function o(t,e){if(map.getLayer("circle")&&map.removeLayer("circle"),map.getSource("circle-point")&&map.removeSource("circle-point"),!(n<.1)){var n=e,r={steps:64,units:"kilometers"},i=turf.circle(t,n,r);map.addSource("circle-point",{type:"geojson",data:i}),map.addLayer({id:"circle",type:"fill",source:"circle-point",layout:{},paint:{"fill-color":"#33ccff","fill-opacity":.2}})}}map.addSource("places",{type:"geojson",data:a}),map.addSource("single-point",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),map.addLayer({id:"center",type:"circle",source:"single-point",paint:{"circle-radius":7,"circle-color":"#33ccff"}}),map.addLayer({id:"locations",type:"symbol",source:"places",layout:{"icon-image":"marker-15","text-field":"{title}","text-offset":[0,.6],"text-anchor":"top"}});var e=new MapboxGeocoder({accessToken:mapboxgl.accessToken}),n=new mapboxgl.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0});document.getElementById("geocoder").appendChild(e.onAdd(map)),document.getElementById("geolocate").appendChild(n.onAdd(map)),map.on("click","locations",function(t){flyToStore(t.features[0])}),map.on("mouseenter","locations",function(){map.getCanvas().style.cursor="pointer"}),map.on("mouseleave","locations",function(){map.getCanvas().style.cursor=""}),e.on("clear",function(){buildLocationList(s,!1)}),n.on("geolocate",function(t){function e(t){var e=i.latitude,n=i.longitude,r=[a.features[t].geometry.coordinates[1],e];[a.features[t].geometry.coordinates[0],n].sort(function(t,e){return e<t?1:t.distance<e.distance?-1:0}),r.sort(function(t,e){return e<t?1:t.distance<e.distance?-1:0})}var i=t.coords,n={units:"kilometers"};a.features.forEach(function(t){var e=[i.longitude,i.latitude];Object.defineProperty(t.properties,"distance",{value:turf.distance(e,t.geometry,n),writable:!0,enumerable:!0,configurable:!0})}),o([i.longitude,i.latitude],document.getElementById("radius").value),a.features.sort(function(t,e){return t.properties.distance>e.properties.distance?1:t.properties.distance<e.properties.distance?-1:0});for(var r=document.getElementById("listings");r.firstChild;)r.removeChild(r.firstChild);buildLocationList(a,!0),e(0)}),n.on("trackuserlocationend",function(){buildLocationList(s,!1)}),e.on("result",function(t){function e(t){var e=[a.features[t].geometry.coordinates[1],n.coordinates[1]];[a.features[t].geometry.coordinates[0],n.coordinates[0]].sort(function(t,e){return e<t?1:t.distance<e.distance?-1:0}),e.sort(function(t,e){return e<t?1:t.distance<e.distance?-1:0})}var n=t.result.geometry;map.getSource("single-point").setData(n);var r={units:"kilometers"};s.features.forEach(function(t){0===t.geometry.coordinates[0]&&0===t.geometry.coordinates[1]||Object.defineProperty(t.properties,"distance",{value:turf.distance(n.coordinates,t.geometry,r),writable:!0,enumerable:!0,configurable:!0})}),a.features.sort(function(t,e){return t.properties.distance>e.properties.distance?1:t.properties.distance<e.properties.distance?-1:0}),o(n.coordinates,document.getElementById("radius").value);for(var i=document.getElementById("listings");i.firstChild;)i.removeChild(i.firstChild);buildLocationList(s,!0),e(0)}),$("#searchbyname_form").keyup(function(){updateByParam(s,$(".rooms").length)}),t(a)})}function buildLocationList(t,e){(w=document.getElementById("num_rooms")).innerHTML="";for(var n,r=document.getElementById("listings");null!==r&&r.hasChildNodes();)r.removeChild(r.childNodes[0]);if(document.getElementById("radius").value<.1&&e){var i=document.getElementById("listings").appendChild(document.createElement("div"));return i.className="alert alert-danger text-center",void(i.innerHTML="Il raggio deve essere un numero reale maggiore o uguale a 0.1")}var o=document.getElementById("listings").appendChild(document.createElement("div"));for(o.className="card-deck",n=0;n<t.features.length;n++){var a=t.features[n],s=a.properties;if(s.visible&&!(e&&(0===a.geometry.coordinates[0]||0===a.geometry.coordinates[1])||e&&(s.distance<0||s.distance>document.getElementById("radius").value))){var l=o.appendChild(document.createElement("div"));l.className="col-xl-2 col-lg-3 col-md-4 col-sm-6 col-xs-6 col-12 rooms",l.addEventListener("mouseenter",handlerin),l.addEventListener("mouseleave",handlerout);var u=l.appendChild(document.createElement("figure")),c=u.appendChild(document.createElement("img"));c.src=s.avatar,c.className="mx-auto";var h=u.appendChild(document.createElement("figcaption")),p=h.appendChild(document.createElement("h3")),f=s.room_host;p.innerHTML=1<f.length?"Roomhosts: ":"Roomhost: ";for(var d=0;d<f.length;d++){h.appendChild(document.createElement("span")).innerHTML="<a href = "+f[d].url+">"+f[d].username+"</a>";h.appendChild(document.createElement("br"))}var m=l.appendChild(document.createElement("div"));m.className="card-body";var g=m.appendChild(document.createElement("h4"));g.className="card-title",g.dataPosition=n,g.innerHTML=s.title;var y=m.appendChild(document.createElement("p"));if(y.className="card-text",s.address?(y.innerHTML=s.address,g.addEventListener("click",function(){flyToStore(t.features[this.dataPosition])})):y.innerHTML="Room senza location",s.description&&(y.innerHTML+="<br><small>"+s.description+"</small>"),s.distance&&e){var v=Math.round(100*s.distance)/100;y.innerHTML+="<p><strong>"+v+" kilometers away</strong></p>"}var _=m.appendChild(document.createElement("a"));_.href="/rooms/"+s.id,_.className="card-link",_.innerHTML="Visita la room"}}if(e){var x,b,w=document.getElementById("num_rooms");1===count?(x=" stanza",b="E' stata trovata "):(x=" stanze",b="Sono state trovate "),w.innerHTML=b+count+x+" nel raggio di "+document.getElementById("radius").value+" km."}}function updateByParam(t,e){var n=0,r=t;if(""!==$("#searchbyname_form").val())for(var i=0;i<r.features.length;i++){var o=document.getElementById("searchbyname_form").value,a=new RegExp("(.*)"+o+"(.*)","i");r.features[i].properties.visible=a.test(r.features[i].properties.title),r.features[i].properties.visible&&n++}else for(i=0;i<r.features.length;i++)r.features[i].properties.visible=!0,n++;e!=n&&($("#listings").animate({opacity:0},200),setTimeout(function(){$("#listings").animate({opacity:1},200,buildLocationList(r,!1))},200))}function retriveCoords(t){return 0<t?[0,0]:[null,null]}function flyToStore(t){map.flyTo({center:t.geometry.coordinates,zoom:16,curve:.7,speed:.5,bearing:30,pitch:45})}function render_map_for_room_show(t){var e=init(t);mapboxgl.accessToken="pk.eyJ1IjoibGV0c2ZlZCIsImEiOiJjamhkamxmYXcwNTBvMzBva3VyOG50NjFtIn0.EuqkJJgJMWazgpxc6YJp4A";var n=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/streets-v8",center:[e.longitude,e.latitude],zoom:15,attributionControl:!1,interactive:!1}),r={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[e.longitude,e.latitude]},properties:{id:e.id,title:e.name,address:e.address,owner:e.user_id,description:e.description}}]};n.on("load",function(){function t(t){t.features.forEach(function(t){var e=document.createElement("div");e.id="marker-0",e.className="marker",new mapboxgl.Marker(e,{offset:[0,0]}).setLngLat(t.geometry.coordinates).addTo(n)})}n.addSource("place",{type:"geojson",data:r}),n.addLayer({id:"places",type:"symbol",source:"place",layout:{"icon-image":"marker-15","text-field":"{title}","text-offset":[0,.6],"text-anchor":"top"}}),t(r)})}function render_map_for_room(){mapboxgl.accessToken="pk.eyJ1IjoibGV0c2ZlZCIsImEiOiJjamhkamxmYXcwNTBvMzBva3VyOG50NjFtIn0.EuqkJJgJMWazgpxc6YJp4A",map=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/streets-v8",center:[12.48197078704834,41.893460648167355],zoom:15,attributionControl:!1}),map.on("load",function(){map.addSource("single-point",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),map.addLayer({id:"location",type:"symbol",source:"single-point",layout:{"icon-image":"marker-15","text-offset":[0,.6],"text-anchor":"top"}}),geocoder=new MapboxGeocoder({accessToken:mapboxgl.accessToken}),document.getElementById("geocoder").appendChild(geocoder.onAdd(map)),geocoder.on("result",function(t){var e=t.result.geometry;map.getSource("single-point").setData(t.result.geometry);var n=document.getElementById("lats_input"),r=document.getElementById("lons_input"),i=document.getElementById("addr_input");n.value=e.coordinates[1],r.value=e.coordinates[0],i.value=t.result.place_name})})}function FlatpickrInstance(t,e){function n(){vt.element=vt.input=t,vt.instanceConfig=e||{},vt.parseDate=FlatpickrInstance.prototype.parseDate.bind(vt),vt.formatDate=FlatpickrInstance.prototype.formatDate.bind(vt),Q(),$(),q(),tt(),K(),J(),vt.isOpen=!1,vt.isMobile=!vt.config.disableMobile&&!vt.config.inline&&"single"===vt.config.mode&&!vt.config.disable.length&&!vt.config.enable.length&&!vt.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),vt.isMobile||_(),h(),(vt.selectedDates.length||vt.config.noCalendar)&&(vt.config.enableTime&&s(vt.config.noCalendar?vt.latestSelectedDateObj||vt.config.minDate:null),lt()),vt.showTimeInput=0<vt.selectedDates.length||vt.config.noCalendar,vt.config.weekNumbers&&(vt.calendarContainer.style.width=vt.daysContainer.offsetWidth+vt.weekWrapper.offsetWidth+"px"),vt.isMobile||U(),rt("Ready")}function l(t){return t.bind(vt)}function u(t){vt.config.noCalendar&&!vt.selectedDates.length&&(vt.selectedDates=[vt.now]),yt(t),vt.selectedDates.length&&(!vt.minDateHasTime||"input"!==t.type||2<=t.target.value.length?(c(),lt()):setTimeout(function(){c(),lt()},1e3))}function c(){if(vt.config.enableTime){var t=(parseInt(vt.hourElement.value,10)||0)%(vt.amPM?12:24),e=(parseInt(vt.minuteElement.value,10)||0)%60,n=vt.config.enableSeconds?(parseInt(vt.secondElement.value,10)||0)%60:0;vt.amPM!==undefined&&(t=t%12+12*("PM"===vt.amPM.textContent)),vt.minDateHasTime&&0===gt(vt.latestSelectedDateObj,vt.config.minDate)&&(t=Math.max(t,vt.config.minDate.getHours()))===vt.config.minDate.getHours()&&(e=Math.max(e,vt.config.minDate.getMinutes())),vt.maxDateHasTime&&0===gt(vt.latestSelectedDateObj,vt.config.maxDate)&&(t=Math.min(t,vt.config.maxDate.getHours()))===vt.config.maxDate.getHours()&&(e=Math.min(e,vt.config.maxDate.getMinutes())),r(t,e,n)}}function s(t){var e=t||vt.latestSelectedDateObj;e&&r(e.getHours(),e.getMinutes(),e.getSeconds())}function r(t,e,n){vt.selectedDates.length&&vt.latestSelectedDateObj.setHours(t%24,e,n||0,0),vt.config.enableTime&&!vt.isMobile&&(vt.hourElement.value=vt.pad(vt.config.time_24hr?t:(12+t)%12+12*(t%12==0)),vt.minuteElement.value=vt.pad(e),vt.config.time_24hr||(vt.amPM.textContent=12<=t?"PM":"AM"),!0===vt.config.enableSeconds&&(vt.secondElement.value=vt.pad(n)))}function i(t){var e=t.target.value;t.delta&&(e=(parseInt(e)+t.delta).toString()),4!==e.length&&"Enter"!==t.key||(vt.currentYearElement.blur(),/[^\d]/.test(e)||O(e))}function o(e,n,r){return n instanceof Array?n.forEach(function(t){return o(e,t,r)}):e instanceof Array?e.forEach(function(t){return o(t,n,r)}):(e.addEventListener(n,r),void vt._handlers.push({element:e,event:n,handler:r}))}function a(e){return function(t){return 1===t.which&&e(t)}}function h(){if(vt._handlers=[],vt._animationLoop=[],vt.config.wrap&&["open","close","toggle","clear"].forEach(function(e){Array.prototype.forEach.call(vt.element.querySelectorAll("[data-"+e+"]"),function(t){return o(t,"mousedown",a(vt[e]))})}),vt.isMobile)return et();if(vt.debouncedResize=mt(N,50),vt.triggerChange=function(){rt("Change")},vt.debouncedChange=mt(vt.triggerChange,300),"range"===vt.config.mode&&vt.daysContainer&&o(vt.daysContainer,"mouseover",function(t){return F(t.target)}),o(window.document.body,"keydown",B),vt.config["static"]||o(vt._input,"keydown",B),vt.config.inline||vt.config["static"]||o(window,"resize",vt.debouncedResize),window.ontouchstart!==undefined&&o(window.document,"touchstart",L),o(window.document,"mousedown",a(L)),o(vt._input,"blur",L),!0===vt.config.clickOpens&&(o(vt._input,"focus",vt.open),o(vt._input,"mousedown",a(vt.open))),vt.config.noCalendar||(vt.monthNav.addEventListener("wheel",function(t){return t.preventDefault()}),o(vt.monthNav,"wheel",mt(ct,10)),o(vt.monthNav,"mousedown",a(ht)),o(vt.monthNav,["keyup","increment"],i),o(vt.daysContainer,"mousedown",a(W)),vt.config.animate&&(o(vt.daysContainer,["webkitAnimationEnd","animationend"],f),o(vt.monthNav,["webkitAnimationEnd","animationend"],d))),vt.config.enableTime){var t=function(t){return t.target.select()};o(vt.timeContainer,["wheel","input","increment"],u),o(vt.timeContainer,"mousedown",a(g)),o(vt.timeContainer,["wheel","increment"],vt.debouncedChange),o(vt.timeContainer,"input",vt.triggerChange),o([vt.hourElement,vt.minuteElement],"focus",t),vt.secondElement!==undefined&&o(vt.secondElement,"focus",function(){return vt.secondElement.select()}),vt.amPM!==undefined&&o(vt.amPM,"mousedown",a(function(t){u(t),vt.triggerChange(t)}))}}function p(){for(var t=vt._animationLoop.length;t--;)vt._animationLoop[t](),vt._animationLoop.splice(t,1)}function f(t){if(1<vt.daysContainer.childNodes.length)switch(t.animationName){case"fpSlideLeft":vt.daysContainer.lastChild.classList.remove("slideLeftNew"),vt.daysContainer.removeChild(vt.daysContainer.firstChild),vt.days=vt.daysContainer.firstChild,p();break;case"fpSlideRight":vt.daysContainer.firstChild.classList.remove("slideRightNew"),vt.daysContainer.removeChild(vt.daysContainer.lastChild),vt.days=vt.daysContainer.firstChild,p()}}function d(t){switch(t.animationName){case"fpSlideLeftNew":case"fpSlideRightNew":vt.navigationCurrentMonth.classList.remove("slideLeftNew"),vt.navigationCurrentMonth.classList.remove("slideRightNew");for(var e=vt.navigationCurrentMonth;e.nextSibling&&/curr/.test(e.nextSibling.className);)vt.monthNav.removeChild(e.nextSibling);for(;e.previousSibling&&/curr/.test(e.previousSibling.className);)vt.monthNav.removeChild(e.previousSibling);vt.oldCurMonth=null}}function m(t){t=t?vt.parseDate(t):vt.latestSelectedDateObj||(vt.config.minDate>vt.now?vt.config.minDate:vt.config.maxDate&&vt.config.maxDate<vt.now?vt.config.maxDate:vt.now);try{vt.currentYear=t.getFullYear(),vt.currentMonth=t.getMonth()}catch(e){console.error(e.stack),console.warn("Invalid date supplied: "+t)}vt.redraw()}function g(t){~t.target.className.indexOf("arrow")&&y(t,t.target.classList.contains("arrowUp")?1:-1)}function y(t,e,n){var r=n||t.target.parentNode.childNodes[0],i=it("increment");i.delta=e,r.dispatchEvent(i)}function v(t){var e=pt("div","numInputWrapper"),n=pt("input","numInput "+t),r=pt("span","arrowUp"),i=pt("span","arrowDown");return n.type="text",n.pattern="\\d*",e.appendChild(n),e.appendChild(r),e.appendChild(i),e}function _(){var t=window.document.createDocumentFragment();vt.calendarContainer=pt("div","flatpickr-calendar"),vt.calendarContainer.tabIndex=-1,vt.config.noCalendar||(t.appendChild(S()),vt.innerContainer=pt("div","flatpickr-innerContainer"),vt.config.weekNumbers&&vt.innerContainer.appendChild(I()),vt.rContainer=pt("div","flatpickr-rContainer"),vt.rContainer.appendChild(A()),vt.daysContainer||(vt.daysContainer=pt("div","flatpickr-days"),vt.daysContainer.tabIndex=-1),E(),vt.rContainer.appendChild(vt.daysContainer),vt.innerContainer.appendChild(vt.rContainer),t.appendChild(vt.innerContainer)),vt.config.enableTime&&t.appendChild(C()),dt(vt.calendarContainer,"rangeMode","range"===vt.config.mode),dt(vt.calendarContainer,"animate",vt.config.animate),vt.calendarContainer.appendChild(t);var e=vt.config.appendTo&&vt.config.appendTo.nodeType;if(vt.config.inline||vt.config["static"]){if(vt.calendarContainer.classList.add(vt.config.inline?"inline":"static"),vt.config.inline&&!e)return vt.element.parentNode.insertBefore(vt.calendarContainer,vt._input.nextSibling);if(vt.config["static"]){var n=pt("div","flatpickr-wrapper");return vt.element.parentNode.insertBefore(n,vt.element),n.appendChild(vt.element),vt.altInput&&n.appendChild(vt.altInput),void n.appendChild(vt.calendarContainer)}}(e?vt.config.appendTo:window.document.body).appendChild(vt.calendarContainer)}function x(t,e,n,r){var i=R(e,!0),o=pt("span","flatpickr-day "+t,e.getDate());return o.dateObj=e,o.$i=r,o.setAttribute("aria-label",vt.formatDate(e,vt.config.ariaDateFormat)),0===gt(e,vt.now)&&(vt.todayDateElem=o).classList.add("today"),i?(o.tabIndex=-1,ot(e)&&(o.classList.add("selected"),vt.selectedDateElem=o,"range"===vt.config.mode&&(dt(o,"startRange",0===gt(e,vt.selectedDates[0])),dt(o,"endRange",0===gt(e,vt.selectedDates[1]))))):(o.classList.add("disabled"),vt.selectedDates[0]&&e>vt.minRangeDate&&e<vt.selectedDates[0]?vt.minRangeDate=e:vt.selectedDates[0]&&e<vt.maxRangeDate&&e>vt.selectedDates[0]&&(vt.maxRangeDate=e)),"range"===vt.config.mode&&(at(e)&&!ot(e)&&o.classList.add("inRange"),1===vt.selectedDates.length&&(e<vt.minRangeDate||e>vt.maxRangeDate)&&o.classList.add("notAllowed")),vt.config.weekNumbers&&"prevMonthDay"!==t&&n%7==1&&vt.weekNumbers.insertAdjacentHTML("beforeend","<span class='disabled flatpickr-day'>"+vt.config.getWeek(e)+"</span>"),rt("DayCreate",o),o}function b(t,e){var n=t+e||0,r=t!==undefined?vt.days.childNodes[n]:vt.selectedDateElem||vt.todayDateElem||vt.days.childNodes[0],i=function(){(r=r||vt.days.childNodes[n]).focus(),"range"===vt.config.mode&&F(r)};if(r===undefined&&0!==e)return 0<e?(vt.changeMonth(1),n%=42):e<0&&(vt.changeMonth(-1),n+=42),w(i);i()}function w(t){if(!0===vt.config.animate)return vt._animationLoop.push(t);t()}function E(t){var e=(new Date(vt.currentYear,vt.currentMonth,1).getDay()-vt.l10n.firstDayOfWeek+7)%7,n="range"===vt.config.mode;vt.prevMonthDays=vt.utils.getDaysinMonth((vt.currentMonth-1+12)%12),vt.selectedDateElem=undefined,vt.todayDateElem=undefined;var r=vt.utils.getDaysinMonth(),i=window.document.createDocumentFragment(),o=vt.prevMonthDays+1-e,a=0;for(vt.config.weekNumbers&&vt.weekNumbers.firstChild&&(vt.weekNumbers.textContent=""),n&&(vt.minRangeDate=new Date(vt.currentYear,vt.currentMonth-1,o),vt.maxRangeDate=new Date(vt.currentYear,vt.currentMonth+1,(42-e)%r));o<=vt.prevMonthDays;o++,a++)i.appendChild(x("prevMonthDay",new Date(vt.currentYear,vt.currentMonth-1,o),o,a));for(o=1;o<=r;o++,a++)i.appendChild(x("",new Date(vt.currentYear,vt.currentMonth,o),o,a));for(var s=r+1;s<=42-e;s++,a++)i.appendChild(x("nextMonthDay",new Date(vt.currentYear,vt.currentMonth+1,s%r),s,a));n&&1===vt.selectedDates.length&&i.childNodes[0]?(vt._hidePrevMonthArrow=vt._hidePrevMonthArrow||vt.minRangeDate>i.childNodes[0].dateObj,vt._hideNextMonthArrow=vt._hideNextMonthArrow||vt.maxRangeDate<new Date(vt.currentYear,vt.currentMonth+1,1)):st();var l=pt("div","dayContainer");if(l.appendChild(i),vt.config.animate&&t!==undefined)for(;1<vt.daysContainer.childNodes.length;)vt.daysContainer.removeChild(vt.daysContainer.firstChild);else T(vt.daysContainer);return 0<=t?vt.daysContainer.appendChild(l):vt.daysContainer.insertBefore(l,vt.daysContainer.firstChild),vt.days=vt.daysContainer.firstChild,vt.daysContainer}function T(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function S(){var t=window.document.createDocumentFragment();vt.monthNav=pt("div","flatpickr-month"),vt.prevMonthNav=pt("span","flatpickr-prev-month"),vt.prevMonthNav.innerHTML=vt.config.prevArrow,vt.currentMonthElement=pt("span","cur-month"),vt.currentMonthElement.title=vt.l10n.scrollTitle;var e=v("cur-year");return vt.currentYearElement=e.childNodes[0],vt.currentYearElement.title=vt.l10n.scrollTitle,vt.config.minDate&&(vt.currentYearElement.min=vt.config.minDate.getFullYear()),vt.config.maxDate&&(vt.currentYearElement.max=vt.config.maxDate.getFullYear(),vt.currentYearElement.disabled=vt.config.minDate&&vt.config.minDate.getFullYear()===vt.config.maxDate.getFullYear()),vt.nextMonthNav=pt("span","flatpickr-next-month"),vt.nextMonthNav.innerHTML=vt.config.nextArrow,vt.navigationCurrentMonth=pt("span","flatpickr-current-month"),vt.navigationCurrentMonth.appendChild(vt.currentMonthElement),vt.navigationCurrentMonth.appendChild(e),t.appendChild(vt.prevMonthNav),t.appendChild(vt.navigationCurrentMonth),t.appendChild(vt.nextMonthNav),vt.monthNav.appendChild(t),Object.defineProperty(vt,"_hidePrevMonthArrow",{get:function(){return this.__hidePrevMonthArrow},set:function(t){this.__hidePrevMonthArrow!==t&&(vt.prevMonthNav.style.display=t?"none":"block"),this.__hidePrevMonthArrow=t}}),Object.defineProperty(vt,"_hideNextMonthArrow",{get:function(){return this.__hideNextMonthArrow},set:function(t){this.__hideNextMonthArrow!==t&&(vt.nextMonthNav.style.display=t?"none":"block"),this.__hideNextMonthArrow=t}}),st(),vt.monthNav}function C(){vt.calendarContainer.classList.add("hasTime"),vt.config.noCalendar&&vt.calendarContainer.classList.add("noCalendar"),vt.timeContainer=pt("div","flatpickr-time"),vt.timeContainer.tabIndex=-1;var t=pt("span","flatpickr-time-separator",":"),e=v("flatpickr-hour");vt.hourElement=e.childNodes[0];var n=v("flatpickr-minute");if(vt.minuteElement=n.childNodes[0],vt.hourElement.tabIndex=vt.minuteElement.tabIndex=-1,vt.hourElement.value=vt.pad(vt.latestSelectedDateObj?vt.latestSelectedDateObj.getHours():vt.config.defaultHour),vt.minuteElement.value=vt.pad(vt.latestSelectedDateObj?vt.latestSelectedDateObj.getMinutes():vt.config.defaultMinute),vt.hourElement.step=vt.config.hourIncrement,vt.minuteElement.step=vt.config.minuteIncrement,vt.hourElement.min=vt.config.time_24hr?0:1,vt.hourElement.max=vt.config.time_24hr?23:12,vt.minuteElement.min=0,vt.minuteElement.max=59,vt.hourElement.title=vt.minuteElement.title=vt.l10n.scrollTitle,vt.timeContainer.appendChild(e),vt.timeContainer.appendChild(t),vt.timeContainer.appendChild(n),vt.config.time_24hr&&vt.timeContainer.classList.add("time24hr"),vt.config.enableSeconds){vt.timeContainer.classList.add("hasSeconds");var r=v("flatpickr-second");vt.secondElement=r.childNodes[0],vt.secondElement.value=vt.latestSelectedDateObj?vt.pad(vt.latestSelectedDateObj.getSeconds()):"00",vt.secondElement.step=vt.minuteElement.step,vt.secondElement.min=vt.minuteElement.min,vt.secondElement.max=vt.minuteElement.max,vt.timeContainer.appendChild(pt("span","flatpickr-time-separator",":")),vt.timeContainer.appendChild(r)}return vt.config.time_24hr||(vt.amPM=pt("span","flatpickr-am-pm",["AM","PM"][11<vt.hourElement.value|0]),vt.amPM.title=vt.l10n.toggleTitle,vt.amPM.tabIndex=-1,vt.timeContainer.appendChild(vt.amPM)),vt.timeContainer}function A(){vt.weekdayContainer||(vt.weekdayContainer=pt("div","flatpickr-weekdays"));var t=vt.l10n.firstDayOfWeek,e=vt.l10n.weekdays.shorthand.slice();return 0<t&&t<e.length&&(e=[].concat(e.splice(t,e.length),e.splice(0,t))),vt.weekdayContainer.innerHTML="\n\t\t<span class=flatpickr-weekday>\n\t\t\t"+e.join("</span><span class=flatpickr-weekday>")+"\n\t\t</span>\n\t\t",vt.weekdayContainer}function I(){return vt.calendarContainer.classList.add("hasWeeks"),vt.weekWrapper=pt("div","flatpickr-weekwrapper"),vt.weekWrapper.appendChild(pt("span","flatpickr-weekday",vt.l10n.weekAbbreviation)),vt.weekNumbers=pt("div","flatpickr-weeks"),vt.weekWrapper.appendChild(vt.weekNumbers),vt.weekWrapper}function M(t,e,n){var r=(e=e===undefined||e)?t:t-vt.currentMonth,i=!vt.config.animate||!1===n;if(!(r<0&&vt._hidePrevMonthArrow||0<r&&vt._hideNextMonthArrow)){if(vt.currentMonth+=r,(vt.currentMonth<0||11<vt.currentMonth)&&(vt.currentYear+=11<vt.currentMonth?1:-1,vt.currentMonth=(vt.currentMonth+12)%12,rt("YearChange")),E(i?undefined:r),i)return rt("MonthChange"),st();var o=vt.navigationCurrentMonth;if(r<0)for(;o.nextSibling&&/curr/.test(o.nextSibling.className);)vt.monthNav.removeChild(o.nextSibling);else if(0<r)for(;o.previousSibling&&/curr/.test(o.previousSibling.className);)vt.monthNav.removeChild(o.previousSibling);if(vt.oldCurMonth=vt.navigationCurrentMonth,vt.navigationCurrentMonth=vt.monthNav.insertBefore(vt.oldCurMonth.cloneNode(!0),0<r?vt.oldCurMonth.nextSibling:vt.oldCurMonth),0<r?(vt.daysContainer.firstChild.classList.add("slideLeft"),vt.daysContainer.lastChild.classList.add("slideLeftNew"),vt.oldCurMonth.classList.add("slideLeft"),vt.navigationCurrentMonth.classList.add("slideLeftNew")):r<0&&(vt.daysContainer.firstChild.classList.add("slideRightNew"),vt.daysContainer.lastChild.classList.add("slideRight"),vt.oldCurMonth.classList.add("slideRight"),vt.navigationCurrentMonth.classList.add("slideRightNew")),vt.currentMonthElement=vt.navigationCurrentMonth.firstChild,vt.currentYearElement=vt.navigationCurrentMonth.lastChild.childNodes[0],st(),vt.oldCurMonth.firstChild.textContent=vt.utils.monthToStr(vt.currentMonth-r),rt("MonthChange"),document.activeElement&&document.activeElement.$i){var a=document.activeElement.$i;w(function(){b(a,0)})}}}function k(t){vt.input.value="",vt.altInput&&(vt.altInput.value=""),vt.mobileInput&&(vt.mobileInput.value=""),vt.selectedDates=[],vt.latestSelectedDateObj=undefined,vt.showTimeInput=!1,vt.redraw(),!1!==t&&rt("Change")}function D(){vt.isOpen=!1,vt.isMobile||(vt.calendarContainer.classList.remove("open"),vt._input.classList.remove("active")),rt("Close")}function z(){vt.config!==undefined&&rt("Destroy");for(var t=vt._handlers.length;t--;){var e=vt._handlers[t];e.element.removeEventListener(e.event,e.handler)}vt._handlers=[],vt.mobileInput?(vt.mobileInput.parentNode&&vt.mobileInput.parentNode.removeChild(vt.mobileInput),vt.mobileInput=null):vt.calendarContainer&&vt.calendarContainer.parentNode&&vt.calendarContainer.parentNode.removeChild(vt.calendarContainer),vt.altInput&&(vt.input.type="text",vt.altInput.parentNode&&vt.altInput.parentNode.removeChild(vt.altInput),delete vt.altInput),vt.input&&(vt.input.type=vt.input._type,vt.input.classList.remove("flatpickr-input"),vt.input.removeAttribute("readonly"),vt.input.value=""),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(t){return delete vt[t]})}function P(t){return!(!vt.config.appendTo||!vt.config.appendTo.contains(t))||vt.calendarContainer.contains(t)}function L(t){if(vt.isOpen&&!vt.config.inline){var e=P(t.target),n=t.target===vt.input||t.target===vt.altInput||vt.element.contains(t.target)||t.path&&t.path.indexOf&&(~t.path.indexOf(vt.input)||~t.path.indexOf(vt.altInput));("blur"===t.type?n&&t.relatedTarget&&!P(t.relatedTarget):!n&&!e)&&-1===vt.config.ignoredFocusElements.indexOf(t.target)&&(vt.close(),"range"===vt.config.mode&&1===vt.selectedDates.length&&(vt.clear(!1),vt.redraw()))}}function O(t){if(!(!t||vt.currentYearElement.min&&t<vt.currentYearElement.min||vt.currentYearElement.max&&t>vt.currentYearElement.max)){var e=parseInt(t,10),n=vt.currentYear!==e;vt.currentYear=e||vt.currentYear,vt.config.maxDate&&vt.currentYear===vt.config.maxDate.getFullYear()?vt.currentMonth=Math.min(vt.config.maxDate.getMonth(),vt.currentMonth):vt.config.minDate&&vt.currentYear===vt.config.minDate.getFullYear()&&(vt.currentMonth=Math.max(vt.config.minDate.getMonth(),vt.currentMonth)),n&&(vt.redraw(),rt("YearChange"))}}function R(t,e){if(vt.config.minDate&&gt(t,vt.config.minDate,e!==undefined?e:!vt.minDateHasTime)<0||vt.config.maxDate&&0<gt(t,vt.config.maxDate,e!==undefined?e:!vt.maxDateHasTime))return!1;if(!vt.config.enable.length&&!vt.config.disable.length)return!0;for(var n,r=vt.parseDate(t,null,!0),i=0<vt.config.enable.length,o=i?vt.config.enable:vt.config.disable,a=0;a<o.length;a++){if((n=o[a])instanceof Function&&n(r))return i;if(n instanceof Date&&n.getTime()===r.getTime())return i;if("string"==typeof n&&vt.parseDate(n,null,!0).getTime()===r.getTime())return i;if("object"===(void 0===n?"undefined":_typeof(n))&&n.from&&n.to&&r>=n.from&&r<=n.to)return i}return!i}function B(t){var e=t.target===vt._input,n=P(t.target),r=vt.config.allowInput,i=vt.isOpen&&(!r||!e),o=vt.config.inline&&e&&!r;if("Enter"===t.key&&r&&e)return vt.setDate(vt._input.value,!0,t.target===vt.altInput?vt.config.altFormat:vt.config.dateFormat),t.target.blur();if(n||i||o){var a=vt.timeContainer&&vt.timeContainer.contains(t.target);switch(t.key){case"Enter":a?lt():W(t);break;case"Escape":t.preventDefault(),vt.close();break;case"ArrowLeft":case"ArrowRight":if(!a)if(t.preventDefault(),vt.daysContainer){var s="ArrowRight"===t.key?1:-1;t.ctrlKey?M(s,!0):b(t.target.$i,s)}else vt.config.enableTime&&!a&&vt.hourElement.focus();break;case"ArrowUp":case"ArrowDown":t.preventDefault();var l="ArrowDown"===t.key?1:-1;vt.daysContainer?t.ctrlKey?(O(vt.currentYear-l),b(t.target.$i,0)):a||b(t.target.$i,7*l):vt.config.enableTime&&(a||vt.hourElement.focus(),u(t));break;case"Tab":t.target===vt.hourElement?(t.preventDefault(),vt.minuteElement.select()):t.target===vt.minuteElement&&(vt.secondElement||vt.amPM)?(t.preventDefault(),(vt.secondElement||vt.amPM).focus()):t.target===vt.secondElement&&(t.preventDefault(),vt.amPM.focus());break;case"a":t.target===vt.amPM&&(vt.amPM.textContent="AM",c(),lt());break;case"p":t.target===vt.amPM&&(vt.amPM.textContent="PM",c(),lt())}rt("KeyDown",t)}}function F(a){if(1===vt.selectedDates.length&&a.classList.contains("flatpickr-day")){for(var s=a.dateObj,l=vt.parseDate(vt.selectedDates[0],null,!0),u=Math.min(s.getTime(),vt.selectedDates[0].getTime()),c=Math.max(s.getTime(),vt.selectedDates[0].getTime()),h=!1,t=u;t<c;t+=vt.utils.duration.DAY)if(!R(new Date(t))){h=!0;break}for(var e=function(t,e){var n=t<vt.minRangeDate.getTime()||t>vt.maxRangeDate.getTime(),r=vt.days.childNodes[e];if(n)return vt.days.childNodes[e].classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(t){r.classList.remove(t)}),"continue";if(h&&!n)return"continue";["startRange","inRange","endRange","notAllowed"].forEach(function(t){r.classList.remove(t)});var i=Math.max(vt.minRangeDate.getTime(),u),o=Math.min(vt.maxRangeDate.getTime(),c);a.classList.add(s<vt.selectedDates[0]?"startRange":"endRange"),l<s&&t===l.getTime()?r.classList.add("startRange"):s<l&&t===l.getTime()&&r.classList.add("endRange"),i<=t&&t<=o&&r.classList.add("inRange")},n=vt.days.childNodes[0].dateObj.getTime(),r=0;r<42;r++,n+=vt.utils.duration.DAY)e(n,r)}}function N(){!vt.isOpen||vt.config["static"]||vt.config.inline||U()}function j(t,e){if(vt.isMobile)return t&&(t.preventDefault(),t.target.blur()),setTimeout(function(){vt.mobileInput.click()},0),void rt("Open");vt.isOpen||vt._input.disabled||vt.config.inline||(vt.isOpen=!0,vt.calendarContainer.classList.add("open"),U(e),vt._input.classList.add("active"),rt("Open"))}function V(i){return function(t){var e=vt.config["_"+i+"Date"]=vt.parseDate(t),n=vt.config["_"+("min"===i?"max":"min")+"Date"],r=t&&e instanceof Date;r&&(vt[i+"DateHasTime"]=e.getHours()||e.getMinutes()||e.getSeconds()),vt.selectedDates&&(vt.selectedDates=vt.selectedDates.filter(function(t){return R(t)}),vt.selectedDates.length||"min"!==i||s(e),lt()),vt.daysContainer&&(H(),r?vt.currentYearElement[i]=e.getFullYear():vt.currentYearElement.removeAttribute(i),vt.currentYearElement.disabled=n&&e&&n.getFullYear()===e.getFullYear())}}function $(){
var t=["wrap","weekNumbers","allowInput","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],e=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange"];vt.config=Object.create(flatpickr.defaultConfig);var n=_extends({},vt.instanceConfig,JSON.parse(JSON.stringify(vt.element.dataset||{})));vt.config.parseDate=n.parseDate,vt.config.formatDate=n.formatDate,Object.defineProperty(vt.config,"enable",{get:function(){return vt.config._enable||[]},set:function(t){return vt.config._enable=X(t)}}),Object.defineProperty(vt.config,"disable",{get:function(){return vt.config._disable||[]},set:function(t){return vt.config._disable=X(t)}}),_extends(vt.config,n),!n.dateFormat&&n.enableTime&&(vt.config.dateFormat=vt.config.noCalendar?"H:i"+(vt.config.enableSeconds?":S":""):flatpickr.defaultConfig.dateFormat+" H:i"+(vt.config.enableSeconds?":S":"")),n.altInput&&n.enableTime&&!n.altFormat&&(vt.config.altFormat=vt.config.noCalendar?"h:i"+(vt.config.enableSeconds?":S K":" K"):flatpickr.defaultConfig.altFormat+" h:i"+(vt.config.enableSeconds?":S":"")+" K"),Object.defineProperty(vt.config,"minDate",{get:function(){return this._minDate},set:V("min")}),Object.defineProperty(vt.config,"maxDate",{get:function(){return this._maxDate},set:V("max")}),vt.config.minDate=n.minDate,vt.config.maxDate=n.maxDate;for(var r=0;r<t.length;r++)vt.config[t[r]]=!0===vt.config[t[r]]||"true"===vt.config[t[r]];for(var i=e.length;i--;)vt.config[e[i]]!==undefined&&(vt.config[e[i]]=ft(vt.config[e[i]]||[]).map(l));for(var o=0;o<vt.config.plugins.length;o++){var a=vt.config.plugins[o](vt)||{};for(var s in a)vt.config[s]instanceof Array||~e.indexOf(s)?vt.config[s]=ft(a[s]).map(l).concat(vt.config[s]):"undefined"==typeof n[s]&&(vt.config[s]=a[s])}rt("ParseConfig")}function q(){"object"!==_typeof(vt.config.locale)&&"undefined"==typeof flatpickr.l10ns[vt.config.locale]&&console.warn("flatpickr: invalid locale "+vt.config.locale),vt.l10n=_extends(Object.create(flatpickr.l10ns["default"]),"object"===_typeof(vt.config.locale)?vt.config.locale:"default"!==vt.config.locale&&flatpickr.l10ns[vt.config.locale]||{})}function U(t){var e=0<arguments.length&&t!==undefined?t:vt._positionElement;if(vt.calendarContainer!==undefined){var n=vt.calendarContainer.offsetHeight,r=vt.calendarContainer.offsetWidth,i=vt.config.position,o=e.getBoundingClientRect(),a=window.innerHeight-o.bottom,s="above"===i||"below"!==i&&a<n&&o.top>n,l=window.pageYOffset+o.top+(s?-n-2:e.offsetHeight+2);if(dt(vt.calendarContainer,"arrowTop",!s),dt(vt.calendarContainer,"arrowBottom",s),!vt.config.inline){var u=window.pageXOffset+o.left,c=window.document.body.offsetWidth-o.right,h=u+r>window.document.body.offsetWidth;dt(vt.calendarContainer,"rightMost",h),vt.config["static"]||(vt.calendarContainer.style.top=l+"px",h?(vt.calendarContainer.style.left="auto",vt.calendarContainer.style.right=c+"px"):(vt.calendarContainer.style.left=u+"px",vt.calendarContainer.style.right="auto"))}}}function H(){vt.config.noCalendar||vt.isMobile||(A(),st(),E())}function W(t){if(t.preventDefault(),t.stopPropagation(),t.target.classList.contains("flatpickr-day")&&!t.target.classList.contains("disabled")&&!t.target.classList.contains("notAllowed")){var e=vt.latestSelectedDateObj=new Date(t.target.dateObj.getTime()),n=e.getMonth()!==vt.currentMonth&&"range"!==vt.config.mode;if(vt.selectedDateElem=t.target,"single"===vt.config.mode)vt.selectedDates=[e];else if("multiple"===vt.config.mode){var r=ot(e);r?vt.selectedDates.splice(r,1):vt.selectedDates.push(e)}else"range"===vt.config.mode&&(2===vt.selectedDates.length&&vt.clear(),vt.selectedDates.push(e),0!==gt(e,vt.selectedDates[0],!0)&&vt.selectedDates.sort(function(t,e){return t.getTime()-e.getTime()}));if(c(),n){var i=vt.currentYear!==e.getFullYear();vt.currentYear=e.getFullYear(),vt.currentMonth=e.getMonth(),i&&rt("YearChange"),rt("MonthChange")}if(E(),vt.minDateHasTime&&vt.config.enableTime&&0===gt(e,vt.config.minDate)&&s(vt.config.minDate),lt(),vt.config.enableTime&&setTimeout(function(){return vt.showTimeInput=!0},50),"range"===vt.config.mode&&(1===vt.selectedDates.length?(F(t.target),vt._hidePrevMonthArrow=vt._hidePrevMonthArrow||vt.minRangeDate>vt.days.childNodes[0].dateObj,vt._hideNextMonthArrow=vt._hideNextMonthArrow||vt.maxRangeDate<new Date(vt.currentYear,vt.currentMonth+1,1)):st()),rt("Change"),n?w(function(){return vt.selectedDateElem.focus()}):b(t.target.$i,0),vt.config.enableTime&&setTimeout(function(){return vt.hourElement.select()},451),vt.config.closeOnSelect){var o="single"===vt.config.mode&&!vt.config.enableTime,a="range"===vt.config.mode&&2===vt.selectedDates.length&&!vt.config.enableTime;(o||a)&&vt.close()}}}function G(t,e){vt.config[t]=e,vt.redraw(),m()}function Z(t,e){if(t instanceof Array)vt.selectedDates=t.map(function(t){return vt.parseDate(t,e)});else if(t instanceof Date||!isNaN(t))vt.selectedDates=[vt.parseDate(t,e)];else if(t&&t.substring)switch(vt.config.mode){case"single":vt.selectedDates=[vt.parseDate(t,e)];break;case"multiple":vt.selectedDates=t.split("; ").map(function(t){return vt.parseDate(t,e)});break;case"range":vt.selectedDates=t.split(vt.l10n.rangeSeparator).map(function(t){return vt.parseDate(t,e)})}vt.selectedDates=vt.selectedDates.filter(function(t){return t instanceof Date&&R(t,!1)}),vt.selectedDates.sort(function(t,e){return t.getTime()-e.getTime()})}function Y(t,e,n){if(0!==t&&!t)return vt.clear(e);Z(t,n),vt.showTimeInput=0<vt.selectedDates.length,vt.latestSelectedDateObj=vt.selectedDates[0],vt.redraw(),m(),s(),lt(e),e&&rt("Change")}function X(t){for(var e=t.length;e--;)"string"==typeof t[e]||+t[e]?t[e]=vt.parseDate(t[e],null,!0):t[e]&&t[e].from&&t[e].to&&(t[e].from=vt.parseDate(t[e].from),t[e].to=vt.parseDate(t[e].to));return t.filter(function(t){return t})}function K(){vt.selectedDates=[],vt.now=new Date;var t=vt.config.defaultDate||vt.input.value;t&&Z(t,vt.config.dateFormat);var e=vt.selectedDates.length?vt.selectedDates[0]:vt.config.minDate&&vt.config.minDate.getTime()>vt.now?vt.config.minDate:vt.config.maxDate&&vt.config.maxDate.getTime()<vt.now?vt.config.maxDate:vt.now;vt.currentYear=e.getFullYear(),vt.currentMonth=e.getMonth(),vt.selectedDates.length&&(vt.latestSelectedDateObj=vt.selectedDates[0]),vt.minDateHasTime=vt.config.minDate&&(vt.config.minDate.getHours()||vt.config.minDate.getMinutes()||vt.config.minDate.getSeconds()),vt.maxDateHasTime=vt.config.maxDate&&(vt.config.maxDate.getHours()||vt.config.maxDate.getMinutes()||vt.config.maxDate.getSeconds()),Object.defineProperty(vt,"latestSelectedDateObj",{get:function(){return vt._selectedDateObj||vt.selectedDates[vt.selectedDates.length-1]},set:function(t){vt._selectedDateObj=t}}),vt.isMobile||Object.defineProperty(vt,"showTimeInput",{get:function(){return vt._showTimeInput},set:function(t){vt._showTimeInput=t,vt.calendarContainer&&dt(vt.calendarContainer,"showTimeInput",t),U()}})}function J(){vt.utils={duration:{DAY:864e5},getDaysinMonth:function(t,e){return t=void 0===t?vt.currentMonth:t,e=void 0===e?vt.currentYear:e,1===t&&(e%4==0&&e%100!=0||e%400==0)?29:vt.l10n.daysInMonth[t]},monthToStr:function(t,e){return e=void 0===e?vt.config.shorthandCurrentMonth:e,vt.l10n.months[(e?"short":"long")+"hand"][t]}}}function Q(){vt.formats=Object.create(FlatpickrInstance.prototype.formats),["D","F","J","M","W","l"].forEach(function(t){vt.formats[t]=FlatpickrInstance.prototype.formats[t].bind(vt)}),vt.revFormat.F=FlatpickrInstance.prototype.revFormat.F.bind(vt),vt.revFormat.M=FlatpickrInstance.prototype.revFormat.M.bind(vt)}function tt(){if(vt.input=vt.config.wrap?vt.element.querySelector("[data-input]"):vt.element,!vt.input)return console.warn("Error: invalid input element specified",vt.input);vt.input._type=vt.input.type,vt.input.type="text",vt.input.classList.add("flatpickr-input"),vt._input=vt.input,vt.config.altInput&&(vt.altInput=pt(vt.input.nodeName,vt.input.className+" "+vt.config.altInputClass),vt._input=vt.altInput,vt.altInput.placeholder=vt.input.placeholder,vt.altInput.disabled=vt.input.disabled,vt.altInput.required=vt.input.required,vt.altInput.type="text",vt.input.type="hidden",!vt.config["static"]&&vt.input.parentNode&&vt.input.parentNode.insertBefore(vt.altInput,vt.input.nextSibling)),vt.config.allowInput||vt._input.setAttribute("readonly","readonly"),vt._positionElement=vt.config.positionElement||vt._input}function et(){var t=vt.config.enableTime?vt.config.noCalendar?"time":"datetime-local":"date";vt.mobileInput=pt("input",vt.input.className+" flatpickr-mobile"),vt.mobileInput.step="any",vt.mobileInput.tabIndex=1,vt.mobileInput.type=t,vt.mobileInput.disabled=vt.input.disabled,vt.mobileInput.placeholder=vt.input.placeholder,vt.mobileFormatStr="datetime-local"===t?"Y-m-d\\TH:i:S":"date"===t?"Y-m-d":"H:i:S",vt.selectedDates.length&&(vt.mobileInput.defaultValue=vt.mobileInput.value=vt.formatDate(vt.selectedDates[0],vt.mobileFormatStr)),vt.config.minDate&&(vt.mobileInput.min=vt.formatDate(vt.config.minDate,"Y-m-d")),vt.config.maxDate&&(vt.mobileInput.max=vt.formatDate(vt.config.maxDate,"Y-m-d")),vt.input.type="hidden",vt.config.altInput&&(vt.altInput.type="hidden");try{vt.input.parentNode.insertBefore(vt.mobileInput,vt.input.nextSibling)}catch(e){}vt.mobileInput.addEventListener("change",function(t){vt.setDate(t.target.value,!1,vt.mobileFormatStr),rt("Change"),rt("Close")})}function nt(){if(vt.isOpen)return vt.close();vt.open()}function rt(t,e){var n=vt.config["on"+t];if(n!==undefined&&0<n.length)for(var r=0;n[r]&&r<n.length;r++)n[r](vt.selectedDates,vt.input.value,vt,e);"Change"===t&&(vt.input.dispatchEvent(it("change")),vt.input.dispatchEvent(it("input")))}function it(t){return vt._supportsEvents?new Event(t,{bubbles:!0}):(vt._[t+"Event"]=document.createEvent("Event"),vt._[t+"Event"].initEvent(t,!0,!0),vt._[t+"Event"])}function ot(t){for(var e=0;e<vt.selectedDates.length;e++)if(0===gt(vt.selectedDates[e],t))return""+e;return!1}function at(t){return!("range"!==vt.config.mode||vt.selectedDates.length<2)&&(0<=gt(t,vt.selectedDates[0])&&gt(t,vt.selectedDates[1])<=0)}function st(){vt.config.noCalendar||vt.isMobile||!vt.monthNav||(vt.currentMonthElement.textContent=vt.utils.monthToStr(vt.currentMonth)+" ",vt.currentYearElement.value=vt.currentYear,vt._hidePrevMonthArrow=vt.config.minDate&&(vt.currentYear===vt.config.minDate.getFullYear()?vt.currentMonth<=vt.config.minDate.getMonth():vt.currentYear<vt.config.minDate.getFullYear()),vt._hideNextMonthArrow=vt.config.maxDate&&(vt.currentYear===vt.config.maxDate.getFullYear()?vt.currentMonth+1>vt.config.maxDate.getMonth():vt.currentYear>vt.config.maxDate.getFullYear()))}function lt(t){if(!vt.selectedDates.length)return vt.clear(t);vt.isMobile&&(vt.mobileInput.value=vt.selectedDates.length?vt.formatDate(vt.latestSelectedDateObj,vt.mobileFormatStr):"");var e="range"!==vt.config.mode?"; ":vt.l10n.rangeSeparator;vt.input.value=vt.selectedDates.map(function(t){return vt.formatDate(t,vt.config.dateFormat)}).join(e),vt.config.altInput&&(vt.altInput.value=vt.selectedDates.map(function(t){return vt.formatDate(t,vt.config.altFormat)}).join(e)),!1!==t&&rt("ValueUpdate")}function ut(t){return Math.max(-1,Math.min(1,t.wheelDelta||-t.deltaY))}function ct(t){t.preventDefault();var e=vt.currentYearElement.parentNode.contains(t.target);if(t.target===vt.currentMonthElement||e){var n=ut(t);e?(O(vt.currentYear+n),t.target.value=vt.currentYear):vt.changeMonth(n,!0,!1)}}function ht(t){var e=vt.prevMonthNav.contains(t.target),n=vt.nextMonthNav.contains(t.target);e||n?M(e?-1:1):t.target===vt.currentYearElement?(t.preventDefault(),vt.currentYearElement.select()):"arrowUp"===t.target.className?vt.changeYear(vt.currentYear+1):"arrowDown"===t.target.className&&vt.changeYear(vt.currentYear-1)}function pt(t,e,n){var r=window.document.createElement(t);return e=e||"",n=n||"",r.className=e,n!==undefined&&(r.textContent=n),r}function ft(t){return t instanceof Array?t:[t]}function dt(t,e,n){if(n)return t.classList.add(e);t.classList.remove(e)}function mt(n,r,i){var o=void 0;return function(){var t=this,e=arguments;clearTimeout(o),o=setTimeout(function(){o=null,i||n.apply(t,e)},r),i&&!o&&n.apply(t,e)}}function gt(t,e,n){return t instanceof Date&&e instanceof Date&&(!1!==n?new Date(t.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):t.getTime()-e.getTime())}function yt(t){t.preventDefault();var e="keydown"===t.type,n=(t.type,t.type,t.target);if(vt.amPM&&t.target===vt.amPM)return t.target.textContent=["AM","PM"]["AM"===t.target.textContent|0];var r=Number(n.min),i=Number(n.max),o=Number(n.step),a=parseInt(n.value,10),s=a+o*(t.delta||(e?38===t.which?1:-1:Math.max(-1,Math.min(1,t.wheelDelta||-t.deltaY))||0));if("undefined"!=typeof n.value&&2===n.value.length){var l=n===vt.hourElement,u=n===vt.minuteElement;s<r?(s=i+s+!l+(l&&!vt.amPM),u&&y(null,-1,vt.hourElement)):i<s&&(s=n===vt.hourElement?s-i-!vt.amPM:r,u&&y(null,1,vt.hourElement)),vt.amPM&&l&&(1===o?s+a===23:Math.abs(s-a)>o)&&(vt.amPM.textContent="PM"===vt.amPM.textContent?"AM":"PM"),n.value=vt.pad(s)}}var vt=this;return vt._={},vt._.afterDayAnim=w,vt._bind=o,vt._compareDates=gt,vt._setHoursFromDate=s,vt.changeMonth=M,vt.changeYear=O,vt.clear=k,vt.close=D,vt._createElement=pt,vt.destroy=z,vt.isEnabled=R,vt.jumpToDate=m,vt.open=j,vt.redraw=H,vt.set=G,vt.setDate=Y,vt.toggle=nt,n(),vt}function _flatpickr(t,e){for(var n=Array.prototype.slice.call(t),r=[],i=0;i<n.length;i++)try{if(null!==n[i].getAttribute("data-fp-omit"))continue;n[i]._flatpickr&&(n[i]._flatpickr.destroy(),n[i]._flatpickr=null),n[i]._flatpickr=new FlatpickrInstance(n[i],e||{}),r.push(n[i]._flatpickr)}catch(o){console.warn(o,o.stack)}return 1===r.length?r[0]:r}function flatpickr(t,e){return t instanceof NodeList?_flatpickr(t,e):t instanceof HTMLElement?_flatpickr([t],e):_flatpickr(window.document.querySelectorAll(t),e)}(function(){var t=this;(function(){(function(){var n=[].slice;this.ActionCable={INTERNAL:{message_types:{welcome:"welcome",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]},WebSocket:window.WebSocket,logger:window.console,createConsumer:function(t){var e;return null==t&&(t=null!=(e=this.getConfig("url"))?e:this.INTERNAL.default_mount_path),new l.Consumer(this.createWebSocketURL(t))},getConfig:function(t){var e;return null!=(e=document.head.querySelector("meta[name='action-cable-"+t+"']"))?e.getAttribute("content"):void 0},createWebSocketURL:function(t){var e;return t&&!/^wss?:/i.test(t)?((e=document.createElement("a")).href=t,e.href=e.href,e.protocol=e.protocol.replace("http","ws"),e.href):t},startDebugging:function(){return this.debugging=!0},stopDebugging:function(){return this.debugging=null},log:function(){var t,e;if(t=1<=arguments.length?n.call(arguments,0):[],this.debugging)return t.push(Date.now()),(e=this.logger).log.apply(e,["[ActionCable]"].concat(n.call(t)))}}}).call(this)}).call(t);var l=t.ActionCable;(function(){(function(){var r=function(t,e){return function(){return t.apply(e,arguments)}};l.ConnectionMonitor=function(){function t(t){this.connection=t,this.visibilityDidChange=r(this.visibilityDidChange,this),this.reconnectAttempts=0}var i,e,n;return t.pollInterval={min:3,max:30},t.staleThreshold=6,t.prototype.start=function(){if(!this.isRunning())return this.startedAt=e(),delete this.stoppedAt,this.startPolling(),document.addEventListener("visibilitychange",this.visibilityDidChange),l.log("ConnectionMonitor started. pollInterval = "+this.getPollInterval()+" ms")},t.prototype.stop=function(){if(this.isRunning())return this.stoppedAt=e(),this.stopPolling(),document.removeEventListener("visibilitychange",this.visibilityDidChange),l.log("ConnectionMonitor stopped")},t.prototype.isRunning=function(){return null!=this.startedAt&&null==this.stoppedAt},t.prototype.recordPing=function(){return this.pingedAt=e()},t.prototype.recordConnect=function(){return this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,l.log("ConnectionMonitor recorded connect")},t.prototype.recordDisconnect=function(){return this.disconnectedAt=e(),l.log("ConnectionMonitor recorded disconnect")},t.prototype.startPolling=function(){return this.stopPolling(),this.poll()},t.prototype.stopPolling=function(){return clearTimeout(this.pollTimeout)},t.prototype.poll=function(){return this.pollTimeout=setTimeout((t=this,function(){return t.reconnectIfStale(),t.poll()}),this.getPollInterval());var t},t.prototype.getPollInterval=function(){var t,e,n,r;return n=(r=this.constructor.pollInterval).min,e=r.max,t=5*Math.log(this.reconnectAttempts+1),Math.round(1e3*i(t,n,e))},t.prototype.reconnectIfStale=function(){if(this.connectionIsStale())return l.log("ConnectionMonitor detected stale connection. reconnectAttempts = "+this.reconnectAttempts+", pollInterval = "+this.getPollInterval()+" ms, time disconnected = "+n(this.disconnectedAt)+" s, stale threshold = "+this.constructor.staleThreshold+" s"),this.reconnectAttempts++,this.disconnectedRecently()?l.log("ConnectionMonitor skipping reopening recent disconnect"):(l.log("ConnectionMonitor reopening"),this.connection.reopen())},t.prototype.connectionIsStale=function(){var t;return n(null!=(t=this.pingedAt)?t:this.startedAt)>this.constructor.staleThreshold},t.prototype.disconnectedRecently=function(){return this.disconnectedAt&&n(this.disconnectedAt)<this.constructor.staleThreshold},t.prototype.visibilityDidChange=function(){if("visible"===document.visibilityState)return setTimeout((t=this,function(){if(t.connectionIsStale()||!t.connection.isOpen())return l.log("ConnectionMonitor reopening stale connection on visibilitychange. visbilityState = "+document.visibilityState),t.connection.reopen()}),200);var t},e=function(){return(new Date).getTime()},n=function(t){return(e()-t)/1e3},i=function(t,e,n){return Math.max(e,Math.min(n,t))},t}()}).call(this),function(){var t,i,e,n,r,o=[].slice,a=function(t,e){return function(){return t.apply(e,arguments)}},s=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};n=l.INTERNAL,i=n.message_types,e=n.protocols,r=2<=e.length?o.call(e,0,t=e.length-1):(t=0,[]),e[t++],l.Connection=function(){function t(t){this.consumer=t,this.open=a(this.open,this),this.subscriptions=this.consumer.subscriptions,this.monitor=new l.ConnectionMonitor(this),this.disconnected=!0}return t.reopenDelay=500,t.prototype.send=function(t){return!!this.isOpen()&&(this.webSocket.send(JSON.stringify(t)),!0)},t.prototype.open=function(){return this.isActive()?(l.log("Attempted to open WebSocket, but existing socket is "+this.getState()),!1):(l.log("Opening WebSocket, current state is "+this.getState()+", subprotocols: "+e),null!=this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new l.WebSocket(this.consumer.url,e),this.installEventHandlers(),this.monitor.start(),!0)},t.prototype.close=function(t){var e;if((null!=t?t:{allowReconnect:!0}).allowReconnect||this.monitor.stop(),this.isActive())return null!=(e=this.webSocket)?e.close():void 0},t.prototype.reopen=function(){var t;if(l.log("Reopening WebSocket, current state is "+this.getState()),!this.isActive())return this.open();try{return this.close()}catch(e){return t=e,l.log("Failed to reopen WebSocket",t)}finally{l.log("Reopening WebSocket in "+this.constructor.reopenDelay+"ms"),setTimeout(this.open,this.constructor.reopenDelay)}},t.prototype.getProtocol=function(){var t;return null!=(t=this.webSocket)?t.protocol:void 0},t.prototype.isOpen=function(){return this.isState("open")},t.prototype.isActive=function(){return this.isState("open","connecting")},t.prototype.isProtocolSupported=function(){var t;return t=this.getProtocol(),0<=s.call(r,t)},t.prototype.isState=function(){var t,e;return e=1<=arguments.length?o.call(arguments,0):[],t=this.getState(),0<=s.call(e,t)},t.prototype.getState=function(){var t,e;for(e in WebSocket)if(WebSocket[e]===(null!=(t=this.webSocket)?t.readyState:void 0))return e.toLowerCase();return null},t.prototype.installEventHandlers=function(){var t,e;for(t in this.events)e=this.events[t].bind(this),this.webSocket["on"+t]=e},t.prototype.uninstallEventHandlers=function(){var t;for(t in this.events)this.webSocket["on"+t]=function(){}},t.prototype.events={message:function(t){var e,n,r;if(this.isProtocolSupported())switch(e=(r=JSON.parse(t.data)).identifier,n=r.message,r.type){case i.welcome:return this.monitor.recordConnect(),this.subscriptions.reload();case i.ping:return this.monitor.recordPing();case i.confirmation:return this.subscriptions.notify(e,"connected");case i.rejection:return this.subscriptions.reject(e);default:return this.subscriptions.notify(e,"received",n)}},open:function(){if(l.log("WebSocket onopen event, using '"+this.getProtocol()+"' subprotocol"),this.disconnected=!1,!this.isProtocolSupported())return l.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close:function(){if(l.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error:function(){return l.log("WebSocket onerror event")}},t}()}.call(this),function(){var u=[].slice;l.Subscriptions=function(){function t(t){this.consumer=t,this.subscriptions=[]}return t.prototype.create=function(t,e){var n,r,i;return r="object"==typeof(n=t)?n:{channel:n},i=new l.Subscription(this.consumer,r,e),this.add(i)},t.prototype.add=function(t){return this.subscriptions.push(t),this.consumer.ensureActiveConnection(),this.notify(t,"initialized"),this.sendCommand(t,"subscribe"),t},t.prototype.remove=function(t){return this.forget(t),this.findAll(t.identifier).length||this.sendCommand(t,"unsubscribe"),t},t.prototype.reject=function(t){var e,n,r,i,o;for(i=[],e=0,n=(r=this.findAll(t)).length;e<n;e++)o=r[e],this.forget(o),this.notify(o,"rejected"),i.push(o);return i},t.prototype.forget=function(i){var o;return this.subscriptions=function(){var t,e,n,r;for(r=[],t=0,e=(n=this.subscriptions).length;t<e;t++)(o=n[t])!==i&&r.push(o);return r}.call(this),i},t.prototype.findAll=function(t){var e,n,r,i,o;for(i=[],e=0,n=(r=this.subscriptions).length;e<n;e++)(o=r[e]).identifier===t&&i.push(o);return i},t.prototype.reload=function(){var t,e,n,r,i;for(r=[],t=0,e=(n=this.subscriptions).length;t<e;t++)i=n[t],r.push(this.sendCommand(i,"subscribe"));return r},t.prototype.notifyAll=function(t){var e,n,r,i,o,a,s;for(n=t,e=2<=arguments.length?u.call(arguments,1):[],a=[],r=0,i=(o=this.subscriptions).length;r<i;r++)s=o[r],a.push(this.notify.apply(this,[s,n].concat(u.call(e))));return a},t.prototype.notify=function(t,e){var n,r,i,o,a,s,l;for(s=t,r=e,n=3<=arguments.length?u.call(arguments,2):[],a=[],i=0,o=(l="string"==typeof s?this.findAll(s):[s]).length;i<o;i++)s=l[i],a.push("function"==typeof s[r]?s[r].apply(s,n):void 0);return a},t.prototype.sendCommand=function(t,e){var n;return n=t.identifier,this.consumer.send({command:e,identifier:n})},t}()}.call(this),function(){l.Subscription=function(){function t(t,e,n){this.consumer=t,null==e&&(e={}),this.identifier=JSON.stringify(e),r(this,n)}var r;return t.prototype.perform=function(t,e){return null==e&&(e={}),e.action=t,this.send(e)},t.prototype.send=function(t){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(t)})},t.prototype.unsubscribe=function(){return this.consumer.subscriptions.remove(this)},r=function(t,e){var n,r;if(null!=e)for(n in e)r=e[n],t[n]=r;return t},t}()}.call(this),function(){l.Consumer=function(){function t(t){this.url=t,this.subscriptions=new l.Subscriptions(this),this.connection=new l.Connection(this)}return t.prototype.send=function(t){return this.connection.send(t)},t.prototype.connect=function(){return this.connection.open()},t.prototype.disconnect=function(){return this.connection.close({allowReconnect:!1})},t.prototype.ensureActiveConnection=function(){if(!this.connection.isActive())return this.connection.open()},t}()}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=l:"function"==typeof define&&define.amd&&define(l)}).call(this);var handlerin=function(){$(".rooms").addClass("rooms_not_hover"),$(this).addClass("rooms_hover"),$(".rooms").removeClass("no_focus")},handlerout=function(){$(".rooms").removeClass("rooms_not_hover"),$(this).removeClass("rooms_hover"),$(".rooms").addClass("no_focus")};!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(T,t){"use strict";function m(t,e,n){var r,i=(e=e||at).createElement("script");if(i.text=t,n)for(r in xt)n[r]&&(i[r]=n[r]);e.head.appendChild(i).parentNode.removeChild(i)}function g(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?pt[ft.call(t)]||"object":typeof t}function s(t){var e=!!t&&"length"in t&&t.length,n=g(t);return!vt(t)&&!_t(t)&&("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t)}function u(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}function e(t,n,r){return vt(n)?wt.grep(t,function(t,e){return!!n.call(t,e,t)!==r}):n.nodeType?wt.grep(t,function(t){return t===n!==r}):"string"!=typeof n?wt.grep(t,function(t){return-1<ht.call(n,t)!==r}):wt.filter(n,t,r)}function n(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function c(t){var n={};return wt.each(t.match(Pt)||[],function(t,e){n[e]=!0}),n}function h(t){return t}function p(t){throw t}function l(t,e,n,r){var i;try{t&&vt(i=t.promise)?i.call(t).done(e).fail(n):t&&vt(i=t.then)?i.call(t,e,n):e.apply(undefined,[t].slice(r))}catch(t){n.apply(undefined,[t])}}function r(){at.removeEventListener("DOMContentLoaded",r),T.removeEventListener("load",r),wt.ready()}function i(t,e){return e.toUpperCase()}function f(t){return t.replace(Bt,"ms-").replace(Ft,i)}function o(){this.expando=wt.expando+o.uid++}function a(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:$t.test(t)?JSON.parse(t):t)}function d(t,e,n){var r;if(n===undefined&&1===t.nodeType)if(r="data-"+e.replace(qt,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n=a(n)}catch(i){}Vt.set(t,e,n)}else n=undefined;return n}function y(t,e,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return wt.css(t,e,"")},l=s(),u=n&&n[3]||(wt.cssNumber[e]?"":"px"),c=(wt.cssNumber[e]||"px"!==u&&+l)&&Ht.exec(wt.css(t,e));if(c&&c[3]!==u){for(l/=2,u=u||c[3],c=+l||1;a--;)wt.style(t,e,c+u),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),c/=o;c*=2,wt.style(t,e,c+u),n=n||[]}return n&&(c=+c||+l||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=c,r.end=i)),i}function v(t){var e,n=t.ownerDocument,r=t.nodeName,i=Yt[r];return i||(e=n.body.appendChild(n.createElement(r)),i=wt.css(e,"display"),e.parentNode.removeChild(e),"none"===i&&(i="block"),Yt[r]=i)}function _(t,e){for(var n,r,i=[],o=0,a=t.length;o<a;o++)(r=t[o]).style&&(n=r.style.display,e?("none"===n&&(i[o]=jt.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&Gt(r)&&(i[o]=v(r))):"none"!==n&&(i[o]="none",jt.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(t[o].style.display=i[o]);return t}function x(t,e){var n;return n="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e||"*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll(e||"*"):[],e===undefined||e&&u(t,e)?wt.merge([t],n):n}function b(t,e){for(var n=0,r=t.length;n<r;n++)jt.set(t[n],"globalEval",!e||jt.get(e[n],"globalEval"))}function w(t,e,n,r,i){for(var o,a,s,l,u,c,h=e.createDocumentFragment(),p=[],f=0,d=t.length;f<d;f++)if((o=t[f])||0===o)if("object"===g(o))wt.merge(p,o.nodeType?[o]:o);else if(ne.test(o)){for(a=a||h.appendChild(e.createElement("div")),s=(Kt.exec(o)||["",""])[1].toLowerCase(),l=Qt[s]||Qt._default,a.innerHTML=l[1]+wt.htmlPrefilter(o)+l[2],c=l[0];c--;)a=a.lastChild;wt.merge(p,a.childNodes),(a=h.firstChild).textContent=""}else p.push(e.createTextNode(o));for(h.textContent="",f=0;o=p[f++];)if(r&&-1<wt.inArray(o,r))i&&i.push(o);else if(u=wt.contains(o.ownerDocument,o),a=x(h.appendChild(o),"script"),u&&b(a),n)for(c=0;o=a[c++];)Jt.test(o.type||"")&&n.push(o);return h}function E(){return!0}function S(){return!1}function C(){try{return at.activeElement}catch(t){}}function A(t,e,n,r,i,o){var a,s;if("object"==typeof e){for(s in"string"!=typeof n&&(r=r||n,n=undefined),e)A(t,s,n,r,e[s],o);return t}if(null==r&&null==i?(i=n,r=n=undefined):null==i&&("string"==typeof n?(i=r,r=undefined):(i=r,r=n,n=undefined)),!1===i)i=S;else if(!i)return t;return 1===o&&(a=i,(i=function(t){return wt().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=wt.guid++)),t.each(function(){wt.event.add(this,e,i,r,n)})}function I(t,e){return u(t,"table")&&u(11!==e.nodeType?e:e.firstChild,"tr")&&wt(t).children("tbody")[0]||t}function M(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function k(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function D(t,e){var n,r,i,o,a,s,l,u;if(1===e.nodeType){if(jt.hasData(t)&&(o=jt.access(t),a=jt.set(e,o),u=o.events))for(i in delete a.handle,a.events={},u)for(n=0,r=u[i].length;n<r;n++)wt.event.add(e,i,u[i][n]);Vt.hasData(t)&&(s=Vt.access(t),l=wt.extend({},s),Vt.set(e,l))}}function z(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Xt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function P(n,r,i,o){r=ut.apply([],r);var t,e,a,s,l,u,c=0,h=n.length,p=h-1,f=r[0],d=vt(f);if(d||1<h&&"string"==typeof f&&!yt.checkClone&&ue.test(f))return n.each(function(t){var e=n.eq(t);d&&(r[0]=f.call(this,t,e.html())),P(e,r,i,o)});if(h&&(e=(t=w(r,n[0].ownerDocument,!1,n,o)).firstChild,1===t.childNodes.length&&(t=e),e||o)){for(s=(a=wt.map(x(t,"script"),M)).length;c<h;c++)l=t,c!==p&&(l=wt.clone(l,!0,!0),s&&wt.merge(a,x(l,"script"))),i.call(n[c],l,c);if(s)for(u=a[a.length-1].ownerDocument,wt.map(a,k),c=0;c<s;c++)l=a[c],Jt.test(l.type||"")&&!jt.access(l,"globalEval")&&wt.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?wt._evalUrl&&wt._evalUrl(l.src):m(l.textContent.replace(ce,""),u,l))}return n}function L(t,e,n){for(var r,i=e?wt.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||wt.cleanData(x(r)),r.parentNode&&(n&&wt.contains(r.ownerDocument,r)&&b(x(r,"script")),r.parentNode.removeChild(r));return t}function O(t,e,n){var r,i,o,a,s=t.style;return(n=n||pe(t))&&(""!==(a=n.getPropertyValue(e)||n[e])||wt.contains(t.ownerDocument,t)||(a=wt.style(t,e)),!yt.pixelBoxStyles()&&he.test(a)&&fe.test(e)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),a!==undefined?a+"":a}function R(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}function B(t){if(t in _e)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=ve.length;n--;)if((t=ve[n]+e)in _e)return t}function F(t){var e=wt.cssProps[t];return e||(e=wt.cssProps[t]=B(t)||t),e}function N(t,e,n){var r=Ht.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function j(t,e,n,r,i,o){var a="width"===e?1:0,s=0,l=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=wt.css(t,n+Wt[a],!0,i)),r?("content"===n&&(l-=wt.css(t,"padding"+Wt[a],!0,i)),"margin"!==n&&(l-=wt.css(t,"border"+Wt[a]+"Width",!0,i))):(l+=wt.css(t,"padding"+Wt[a],!0,i),"padding"!==n?l+=wt.css(t,"border"+Wt[a]+"Width",!0,i):s+=wt.css(t,"border"+Wt[a]+"Width",!0,i));return!r&&0<=o&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-l-s-.5))),l}function V(t,e,n){var r=pe(t),i=O(t,e,r),o="border-box"===wt.css(t,"boxSizing",!1,r),a=o;if(he.test(i)){if(!n)return i;i="auto"}return a=a&&(yt.boxSizingReliable()||i===t.style[e]),("auto"===i||!parseFloat(i)&&"inline"===wt.css(t,"display",!1,r))&&(i=t["offset"+e[0].toUpperCase()+e.slice(1)],a=!0),(i=parseFloat(i)||0)+j(t,e,n||(o?"border":"content"),a,r,i)+"px"}function $(t,e,n,r,i){return new $.prototype.init(t,e,n,r,i)}function q(){be&&(!1===at.hidden&&T.requestAnimationFrame?T.requestAnimationFrame(q):T.setTimeout(q,wt.fx.interval),wt.fx.tick())}function U(){return T.setTimeout(function(){xe=undefined}),xe=Date.now()}function H(t,e){var n,r=0,i={height:t};for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=Wt[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function W(t,e,n){for(var r,i=(Y.tweeners[e]||[]).concat(Y.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,e,t))return r}function G(t,e,n){var r,i,o,a,s,l,u,c,h="width"in e||"height"in e,p=this,f={},d=t.style,m=t.nodeType&&Gt(t),g=jt.get(t,"fxshow");for(r in n.queue||(null==(
a=wt._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,wt.queue(t,"fx").length||a.empty.fire()})})),e)if(i=e[r],Te.test(i)){if(delete e[r],o=o||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!g||g[r]===undefined)continue;m=!0}f[r]=g&&g[r]||wt.style(t,r)}if((l=!wt.isEmptyObject(e))||!wt.isEmptyObject(f))for(r in h&&1===t.nodeType&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],null==(u=g&&g.display)&&(u=jt.get(t,"display")),"none"===(c=wt.css(t,"display"))&&(u?c=u:(_([t],!0),u=t.style.display||u,c=wt.css(t,"display"),_([t]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===wt.css(t,"float")&&(l||(p.done(function(){d.display=u}),null==u&&(c=d.display,u="none"===c?"":c)),d.display="inline-block")),n.overflow&&(d.overflow="hidden",p.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]})),l=!1,f)l||(g?"hidden"in g&&(m=g.hidden):g=jt.access(t,"fxshow",{display:u}),o&&(g.hidden=!m),m&&_([t],!0),p.done(function(){for(r in m||_([t]),jt.remove(t,"fxshow"),f)wt.style(t,r,f[r])})),l=W(m?g[r]:0,r,p),r in g||(g[r]=l.start,m&&(l.end=l.start,l.start=0))}function Z(t,e){var n,r,i,o,a;for(n in t)if(i=e[r=f(n)],o=t[n],Array.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),(a=wt.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete t[r],o)n in t||(t[n]=o[n],e[n]=i);else e[r]=i}function Y(o,t,e){var n,a,r=0,i=Y.prefilters.length,s=wt.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var t=xe||U(),e=Math.max(0,u.startTime+u.duration-t),n=1-(e/u.duration||0),r=0,i=u.tweens.length;r<i;r++)u.tweens[r].run(n);return s.notifyWith(o,[u,n,e]),n<1&&i?e:(i||s.notifyWith(o,[u,1,0]),s.resolveWith(o,[u]),!1)},u=s.promise({elem:o,props:wt.extend({},t),opts:wt.extend(!0,{specialEasing:{},easing:wt.easing._default},e),originalProperties:t,originalOptions:e,startTime:xe||U(),duration:e.duration,tweens:[],createTween:function(t,e){var n=wt.Tween(o,u.opts,t,e,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(n),n},stop:function(t){var e=0,n=t?u.tweens.length:0;if(a)return this;for(a=!0;e<n;e++)u.tweens[e].run(1);return t?(s.notifyWith(o,[u,1,0]),s.resolveWith(o,[u,t])):s.rejectWith(o,[u,t]),this}}),c=u.props;for(Z(c,u.opts.specialEasing);r<i;r++)if(n=Y.prefilters[r].call(u,o,c,u.opts))return vt(n.stop)&&(wt._queueHooks(u.elem,u.opts.queue).stop=n.stop.bind(n)),n;return wt.map(c,W,u),vt(u.opts.start)&&u.opts.start.call(o,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),wt.fx.timer(wt.extend(l,{elem:o,anim:u,queue:u.opts.queue})),u}function X(t){return(t.match(Pt)||[]).join(" ")}function K(t){return t.getAttribute&&t.getAttribute("class")||""}function J(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(Pt)||[]}function Q(n,t,r,i){var e;if(Array.isArray(t))wt.each(t,function(t,e){r||Re.test(n)?i(n,e):Q(n+"["+("object"==typeof e&&null!=e?t:"")+"]",e,r,i)});else if(r||"object"!==g(t))i(n,t);else for(e in t)Q(n+"["+e+"]",t[e],r,i)}function tt(o){return function(t,e){"string"!=typeof t&&(e=t,t="*");var n,r=0,i=t.toLowerCase().match(Pt)||[];if(vt(e))for(;n=i[r++];)"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(e)):(o[n]=o[n]||[]).push(e)}}function et(e,i,o,a){function s(t){var r;return l[t]=!0,wt.each(e[t]||[],function(t,e){var n=e(i,o,a);return"string"!=typeof n||u||l[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),s(n),!1)}),r}var l={},u=e===Ze;return s(i.dataTypes[0])||!l["*"]&&s("*")}function nt(t,e){var n,r,i=wt.ajaxSettings.flatOptions||{};for(n in e)e[n]!==undefined&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&wt.extend(!0,t,r),t}function rt(t,e,n){for(var r,i,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),r===undefined&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||t.converters[i+" "+l[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}function it(t,e,n,r){var i,o,a,s,l,u={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)u[a.toLowerCase()]=t.converters[a];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=u[l+" "+o]||u["* "+o]))for(i in u)if((s=i.split(" "))[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[i]:!0!==u[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&t["throws"])e=a(e);else try{e=a(e)}catch(h){return{state:"parsererror",error:a?h:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}var ot=[],at=T.document,st=Object.getPrototypeOf,lt=ot.slice,ut=ot.concat,ct=ot.push,ht=ot.indexOf,pt={},ft=pt.toString,dt=pt.hasOwnProperty,mt=dt.toString,gt=mt.call(Object),yt={},vt=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},_t=function(t){return null!=t&&t===t.window},xt={type:!0,src:!0,noModule:!0},bt="3.3.1",wt=function(t,e){return new wt.fn.init(t,e)},Et=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;wt.fn=wt.prototype={jquery:bt,constructor:wt,length:0,toArray:function(){return lt.call(this)},get:function(t){return null==t?lt.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=wt.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return wt.each(this,t)},map:function(n){return this.pushStack(wt.map(this,function(t,e){return n.call(t,e,t)}))},slice:function(){return this.pushStack(lt.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(0<=n&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:ct,sort:ot.sort,splice:ot.splice},wt.extend=wt.fn.extend=function(t){var e,n,r,i,o,a,s=t||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[l]||{},l++),"object"==typeof s||vt(s)||(s={}),l===u&&(s=this,l--);l<u;l++)if(null!=(e=arguments[l]))for(n in e)r=s[n],s!==(i=e[n])&&(c&&i&&(wt.isPlainObject(i)||(o=Array.isArray(i)))?(o?(o=!1,a=r&&Array.isArray(r)?r:[]):a=r&&wt.isPlainObject(r)?r:{},s[n]=wt.extend(c,a,i)):i!==undefined&&(s[n]=i));return s},wt.extend({expando:"jQuery"+(bt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==ft.call(t))&&(!(e=st(t))||"function"==typeof(n=dt.call(e,"constructor")&&e.constructor)&&mt.call(n)===gt)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t){m(t)},each:function(t,e){var n,r=0;if(s(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},trim:function(t){return null==t?"":(t+"").replace(Et,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(s(Object(t))?wt.merge(n,"string"==typeof t?[t]:t):ct.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:ht.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,a=!n;i<o;i++)!e(t[i],i)!==a&&r.push(t[i]);return r},map:function(t,e,n){var r,i,o=0,a=[];if(s(t))for(r=t.length;o<r;o++)null!=(i=e(t[o],o,n))&&a.push(i);else for(o in t)null!=(i=e(t[o],o,n))&&a.push(i);return ut.apply([],a)},guid:1,support:yt}),"function"==typeof Symbol&&(wt.fn[Symbol.iterator]=ot[Symbol.iterator]),wt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){pt["[object "+e+"]"]=e.toLowerCase()});var Tt=function(n){function x(t,e,n,r){var i,o,a,s,l,u,c,h=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&((e?e.ownerDocument||e:V)!==P&&z(e),e=e||P,O)){if(11!==p&&(l=yt.exec(t)))if(i=l[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(h&&(a=h.getElementById(i))&&N(e,a)&&a.id===i)return n.push(a),n}else{if(l[2])return J.apply(n,e.getElementsByTagName(t)),n;if((i=l[3])&&w.getElementsByClassName&&e.getElementsByClassName)return J.apply(n,e.getElementsByClassName(i)),n}if(w.qsa&&!W[t+" "]&&(!R||!R.test(t))){if(1!==p)h=e,c=t;else if("object"!==e.nodeName.toLowerCase()){for((s=e.getAttribute("id"))?s=s.replace(bt,wt):e.setAttribute("id",s=j),o=(u=C(t)).length;o--;)u[o]="#"+s+" "+m(u[o]);c=u.join(","),h=vt.test(t)&&d(e.parentNode)||e}if(c)try{return J.apply(n,h.querySelectorAll(c)),n}catch(f){}finally{s===j&&e.removeAttribute("id")}}}return I(t.replace(st,"$1"),e,n,r)}function t(){function n(t,e){return r.push(t+" ")>E.cacheLength&&delete n[r.shift()],n[t+" "]=e}var r=[];return n}function l(t){return t[j]=!0,t}function i(t){var e=P.createElement("fieldset");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function e(t,e){for(var n=t.split("|"),r=n.length;r--;)E.attrHandle[n[r]]=e}function u(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function r(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function o(n){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===n}}function a(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Tt(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function s(a){return l(function(o){return o=+o,l(function(t,e){for(var n,r=a([],t.length,o),i=r.length;i--;)t[n=r[i]]&&(t[n]=!(e[n]=t[n]))})})}function d(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function c(){}function m(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function h(s,t,e){var l=t.dir,u=t.next,c=u||l,h=e&&"parentNode"===c,p=q++;return t.first?function(t,e,n){for(;t=t[l];)if(1===t.nodeType||h)return s(t,e,n);return!1}:function(t,e,n){var r,i,o,a=[$,p];if(n){for(;t=t[l];)if((1===t.nodeType||h)&&s(t,e,n))return!0}else for(;t=t[l];)if(1===t.nodeType||h)if(i=(o=t[j]||(t[j]={}))[t.uniqueID]||(o[t.uniqueID]={}),u&&u===t.nodeName.toLowerCase())t=t[l]||t;else{if((r=i[c])&&r[0]===$&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(t,e,n))return!0}return!1}}function p(i){return 1<i.length?function(t,e,n){for(var r=i.length;r--;)if(!i[r](t,e,n))return!1;return!0}:i[0]}function v(t,e,n){for(var r=0,i=e.length;r<i;r++)x(t,e[r],n);return n}function b(t,e,n,r,i){for(var o,a=[],s=0,l=t.length,u=null!=e;s<l;s++)(o=t[s])&&(n&&!n(o,r,i)||(a.push(o),u&&e.push(s)));return a}function _(f,d,m,g,y,t){return g&&!g[j]&&(g=_(g)),y&&!y[j]&&(y=_(y,t)),l(function(t,e,n,r){var i,o,a,s=[],l=[],u=e.length,c=t||v(d||"*",n.nodeType?[n]:n,[]),h=!f||!t&&d?c:b(c,s,f,n,r),p=m?y||(t?f:u||g)?[]:e:h;if(m&&m(h,p,n,r),g)for(i=b(p,l),g(i,[],n,r),o=i.length;o--;)(a=i[o])&&(p[l[o]]=!(h[l[o]]=a));if(t){if(y||f){if(y){for(i=[],o=p.length;o--;)(a=p[o])&&i.push(h[o]=a);y(null,p=[],i,r)}for(o=p.length;o--;)(a=p[o])&&-1<(i=y?tt(t,a):s[o])&&(t[i]=!(e[i]=a))}}else p=b(p===e?p.splice(u,p.length):p),y?y(null,e,p,r):J.apply(e,p)})}function f(t){for(var i,e,n,r=t.length,o=E.relative[t[0].type],a=o||E.relative[" "],s=o?1:0,l=h(function(t){return t===i},a,!0),u=h(function(t){return-1<tt(i,t)},a,!0),c=[function(t,e,n){var r=!o&&(n||e!==M)||((i=e).nodeType?l(t,e,n):u(t,e,n));return i=null,r}];s<r;s++)if(e=E.relative[t[s].type])c=[h(p(c),e)];else{if((e=E.filter[t[s].type].apply(null,t[s].matches))[j]){for(n=++s;n<r&&!E.relative[t[n].type];n++);return _(1<s&&p(c),1<s&&m(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(st,"$1"),e,s<n&&f(t.slice(s,n)),n<r&&f(t=t.slice(n)),n<r&&m(t))}c.push(e)}return p(c)}function g(g,y){var v=0<y.length,_=0<g.length,t=function(t,e,n,r,i){var o,a,s,l=0,u="0",c=t&&[],h=[],p=M,f=t||_&&E.find.TAG("*",i),d=$+=null==p?1:Math.random()||.1,m=f.length;for(i&&(M=e===P||e||i);u!==m&&null!=(o=f[u]);u++){if(_&&o){for(a=0,e||o.ownerDocument===P||(z(o),n=!O);s=g[a++];)if(s(o,e||P,n)){r.push(o);break}i&&($=d)}v&&((o=!s&&o)&&l--,t&&c.push(o))}if(l+=u,v&&u!==l){for(a=0;s=y[a++];)s(c,h,e,n);if(t){if(0<l)for(;u--;)c[u]||h[u]||(h[u]=X.call(r));h=b(h)}J.apply(r,h),i&&!t&&0<h.length&&1<l+y.length&&x.uniqueSort(r)}return i&&($=d,M=p),c};return v?l(t):t}var y,w,E,T,S,C,A,I,M,k,D,z,P,L,O,R,B,F,N,j="sizzle"+1*new Date,V=n.document,$=0,q=0,U=t(),H=t(),W=t(),G=function(t,e){return t===e&&(D=!0),0},Z={}.hasOwnProperty,Y=[],X=Y.pop,K=Y.push,J=Y.push,Q=Y.slice,tt=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",rt="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",it="\\["+nt+"*("+rt+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+rt+"))|)"+nt+"*\\]",ot=":("+rt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+it+")*)|.*)\\)|)",at=new RegExp(nt+"+","g"),st=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),lt=new RegExp("^"+nt+"*,"+nt+"*"),ut=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ct=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),ht=new RegExp(ot),pt=new RegExp("^"+rt+"$"),ft={ID:new RegExp("^#("+rt+")"),CLASS:new RegExp("^\\.("+rt+")"),TAG:new RegExp("^("+rt+"|[*])"),ATTR:new RegExp("^"+it),PSEUDO:new RegExp("^"+ot),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},dt=/^(?:input|select|textarea|button)$/i,mt=/^h\d$/i,gt=/^[^{]+\{\s*\[native \w/,yt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,vt=/[+~]/,_t=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),xt=function(t,e,n){var r="0x"+e-65536;return r!=r||n?e:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},bt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,wt=function(t,e){return e?"\0"===t?"\ufffd":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},Et=function(){z()},Tt=h(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{J.apply(Y=Q.call(V.childNodes),V.childNodes),Y[V.childNodes.length].nodeType}catch(St){J={apply:Y.length?function(t,e){K.apply(t,Q.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}for(y in w=x.support={},S=x.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},z=x.setDocument=function(t){var e,n,r=t?t.ownerDocument||t:V;return r!==P&&9===r.nodeType&&r.documentElement&&(L=(P=r).documentElement,O=!S(P),V!==P&&(n=P.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Et,!1):n.attachEvent&&n.attachEvent("onunload",Et)),w.attributes=i(function(t){return t.className="i",!t.getAttribute("className")}),w.getElementsByTagName=i(function(t){return t.appendChild(P.createComment("")),!t.getElementsByTagName("*").length}),w.getElementsByClassName=gt.test(P.getElementsByClassName),w.getById=i(function(t){return L.appendChild(t).id=j,!P.getElementsByName||!P.getElementsByName(j).length}),w.getById?(E.filter.ID=function(t){var e=t.replace(_t,xt);return function(t){return t.getAttribute("id")===e}},E.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&O){var n=e.getElementById(t);return n?[n]:[]}}):(E.filter.ID=function(t){var n=t.replace(_t,xt);return function(t){var e="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return e&&e.value===n}},E.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&O){var n,r,i,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(i=e.getElementsByName(t),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),E.find.TAG=w.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):w.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},E.find.CLASS=w.getElementsByClassName&&function(t,e){if("undefined"!=typeof e.getElementsByClassName&&O)return e.getElementsByClassName(t)},B=[],R=[],(w.qsa=gt.test(P.querySelectorAll))&&(i(function(t){L.appendChild(t).innerHTML="<a id='"+j+"'></a><select id='"+j+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&R.push("[*^$]="+nt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||R.push("\\["+nt+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+j+"-]").length||R.push("~="),t.querySelectorAll(":checked").length||R.push(":checked"),t.querySelectorAll("a#"+j+"+*").length||R.push(".#.+[+~]")}),i(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=P.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&R.push("name"+nt+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&R.push(":enabled",":disabled"),L.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&R.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),R.push(",.*:")})),(w.matchesSelector=gt.test(F=L.matches||L.webkitMatchesSelector||L.mozMatchesSelector||L.oMatchesSelector||L.msMatchesSelector))&&i(function(t){w.disconnectedMatch=F.call(t,"*"),F.call(t,"[s!='']:x"),B.push("!=",ot)}),R=R.length&&new RegExp(R.join("|")),B=B.length&&new RegExp(B.join("|")),e=gt.test(L.compareDocumentPosition),N=e||gt.test(L.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},G=e?function(t,e){if(t===e)return D=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!w.sortDetached&&e.compareDocumentPosition(t)===n?t===P||t.ownerDocument===V&&N(V,t)?-1:e===P||e.ownerDocument===V&&N(V,e)?1:k?tt(k,t)-tt(k,e):0:4&n?-1:1)}:function(t,e){if(t===e)return D=!0,0;var n,r=0,i=t.parentNode,o=e.parentNode,a=[t],s=[e];if(!i||!o)return t===P?-1:e===P?1:i?-1:o?1:k?tt(k,t)-tt(k,e):0;if(i===o)return u(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?u(a[r],s[r]):a[r]===V?-1:s[r]===V?1:0}),P},x.matches=function(t,e){return x(t,null,null,e)},x.matchesSelector=function(t,e){if((t.ownerDocument||t)!==P&&z(t),e=e.replace(ct,"='$1']"),w.matchesSelector&&O&&!W[e+" "]&&(!B||!B.test(e))&&(!R||!R.test(e)))try{var n=F.call(t,e);if(n||w.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(St){}return 0<x(e,P,null,[t]).length},x.contains=function(t,e){return(t.ownerDocument||t)!==P&&z(t),N(t,e)},x.attr=function(t,e){(t.ownerDocument||t)!==P&&z(t);var n=E.attrHandle[e.toLowerCase()],r=n&&Z.call(E.attrHandle,e.toLowerCase())?n(t,e,!O):undefined;return r!==undefined?r:w.attributes||!O?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},x.escape=function(t){return(t+"").replace(bt,wt)},x.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},x.uniqueSort=function(t){var e,n=[],r=0,i=0;if(D=!w.detectDuplicates,k=!w.sortStable&&t.slice(0),t.sort(G),D){for(;e=t[i++];)e===t[i]&&(r=n.push(i));for(;r--;)t.splice(n[r],1)}return k=null,t},T=x.getText=function(t){var e,n="",r=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=T(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[r++];)n+=T(e);return n},(E=x.selectors={cacheLength:50,createPseudo:l,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(_t,xt),t[3]=(t[3]||t[4]||t[5]||"").replace(_t,xt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||x.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&x.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return ft.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&ht.test(n)&&(e=C(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(_t,xt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=U[t+" "];return e||(e=new RegExp("(^|"+nt+")"+t+"("+nt+"|$)"))&&U(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(t){var e=x.attr(t,n);return null==e?"!="===r:!r||(e+="","="===r?e===i:"!="===r?e!==i:"^="===r?i&&0===e.indexOf(i):"*="===r?i&&-1<e.indexOf(i):"$="===r?i&&e.slice(-i.length)===i:"~="===r?-1<(" "+e.replace(at," ")+" ").indexOf(i):"|="===r&&(e===i||e.slice(0,i.length+1)===i+"-"))}},CHILD:function(d,t,e,m,g){var y="nth"!==d.slice(0,3),v="last"!==d.slice(-4),_="of-type"===t;return 1===m&&0===g?function(t){return!!t.parentNode}:function(t,e,n){var r,i,o,a,s,l,u=y!==v?"nextSibling":"previousSibling",c=t.parentNode,h=_&&t.nodeName.toLowerCase(),p=!n&&!_,f=!1;if(c){if(y){for(;u;){for(a=t;a=a[u];)if(_?a.nodeName.toLowerCase()===h:1===a.nodeType)return!1;l=u="only"===d&&!l&&"nextSibling"}return!0}if(l=[v?c.firstChild:c.lastChild],v&&p){for(f=(s=(r=(i=(o=(a=c)[j]||(a[j]={}))[a.uniqueID]||(o[a.uniqueID]={}))[d]||[])[0]===$&&r[1])&&r[2],a=s&&c.childNodes[s];a=++s&&a&&a[u]||(f=s=0)||l.pop();)if(1===a.nodeType&&++f&&a===t){i[d]=[$,s,f];break}}else if(p&&(f=s=(r=(i=(o=(a=t)[j]||(a[j]={}))[a.uniqueID]||(o[a.uniqueID]={}))[d]||[])[0]===$&&r[1]),!1===f)for(;(a=++s&&a&&a[u]||(f=s=0)||l.pop())&&((_?a.nodeName.toLowerCase()!==h:1!==a.nodeType)||!++f||(p&&((i=(o=a[j]||(a[j]={}))[a.uniqueID]||(o[a.uniqueID]={}))[d]=[$,f]),a!==t)););return(f-=g)===m||f%m==0&&0<=f/m}}},PSEUDO:function(t,o){var e,a=E.pseudos[t]||E.setFilters[t.toLowerCase()]||x.error("unsupported pseudo: "+t);return a[j]?a(o):1<a.length?(e=[t,t,"",o],E.setFilters.hasOwnProperty(t.toLowerCase())?l(function(t,e){for(var n,r=a(t,o),i=r.length;i--;)t[n=tt(t,r[i])]=!(e[n]=r[i])}):function(t){return a(t,0,e)}):a}},pseudos:{not:l(function(t){var r=[],i=[],s=A(t.replace(st,"$1"));return s[j]?l(function(t,e,n,r){for(var i,o=s(t,null,r,[]),a=t.length;a--;)(i=o[a])&&(t[a]=!(e[a]=i))}):function(t,e,n){return r[0]=t,s(r,null,n,i),r[0]=null,!i.pop()}}),has:l(function(e){return function(t){return 0<x(e,t).length}}),contains:l(function(e){return e=e.replace(_t,xt),function(t){return-1<(t.textContent||t.innerText||T(t)).indexOf(e)}}),lang:l(function(n){return pt.test(n||"")||x.error("unsupported lang: "+n),n=n.replace(_t,xt).toLowerCase(),function(t){var e;do{if(e=O?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===n||0===e.indexOf(n+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=n.location&&n.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===L},focus:function(t){return t===P.activeElement&&(!P.hasFocus||P.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:a(!1),disabled:a(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!E.pseudos.empty(t)},header:function(t){return mt.test(t.nodeName)},input:function(t){return dt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:s(function(){return[0]}),last:s(function(t,e){return[e-1]}),eq:s(function(t,e,n){return[n<0?n+e:n]}),even:s(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:s(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:s(function(t,e,n){for(var r=n<0?n+e:n;0<=--r;)t.push(r);return t}),gt:s(function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t})}}).pseudos.nth=E.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})E.pseudos[y]=r(y);for(y in{submit:!0,reset:!0})E.pseudos[y]=o(y);return c.prototype=E.filters=E.pseudos,E.setFilters=new c,C=x.tokenize=function(t,e){var n,r,i,o,a,s,l,u=H[t+" "];if(u)return e?0:u.slice(0);for(a=t,s=[],l=E.preFilter;a;){for(o in n&&!(r=lt.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=ut.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(st," ")}),a=a.slice(n.length)),E.filter)!(r=ft[o].exec(a))||l[o]&&!(r=l[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return e?a.length:a?x.error(t):H(t,s).slice(0)},A=x.compile=function(t,e){var n,r=[],i=[],o=W[t+" "];if(!o){for(e||(e=C(t)),n=e.length;n--;)(o=f(e[n]))[j]?r.push(o):i.push(o);(o=W(t,g(i,r))).selector=t}return o},I=x.select=function(t,e,n,r){var i,o,a,s,l,u="function"==typeof t&&t,c=!r&&C(t=u.selector||t);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===e.nodeType&&O&&E.relative[o[1].type]){if(!(e=(E.find.ID(a.matches[0].replace(_t,xt),e)||[])[0]))return n;u&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(i=ft.needsContext.test(t)?0:o.length;i--&&(a=o[i],!E.relative[s=a.type]);)if((l=E.find[s])&&(r=l(a.matches[0].replace(_t,xt),vt.test(o[0].type)&&d(e.parentNode)||e))){if(o.splice(i,1),!(t=r.length&&m(o)))return J.apply(n,r),n;break}}return(u||A(t,c))(r,e,!O,n,!e||vt.test(t)&&d(e.parentNode)||e),n},w.sortStable=j.split("").sort(G).join("")===j,w.detectDuplicates=!!D,z(),w.sortDetached=i(function(t){return 1&t.compareDocumentPosition(P.createElement("fieldset"))}),i(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||e("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),w.attributes&&i(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||e("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),i(function(t){return null==t.getAttribute("disabled")})||e(et,function(t,e,n){var r;if(!n)return!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),x}(T);wt.find=Tt,wt.expr=Tt.selectors,wt.expr[":"]=wt.expr.pseudos,wt.uniqueSort=wt.unique=Tt.uniqueSort,wt.text=Tt.getText,wt.isXMLDoc=Tt.isXML,wt.contains=Tt.contains,wt.escapeSelector=Tt.escape;var St=function(t,e,n){for(var r=[],i=n!==undefined;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&wt(t).is(n))break;r.push(t)}return r},Ct=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},At=wt.expr.match.needsContext,It=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;wt.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?wt.find.matchesSelector(r,t)?[r]:[]:wt.find.matches(t,wt.grep(e,function(t){return 1===t.nodeType}))},wt.fn.extend({find:function(t){var e,n,r=this.length,i=this;if("string"!=typeof t)return this.pushStack(wt(t).filter(function(){for(e=0;e<r;e++)if(wt.contains(i[e],this))return!0}));for(n=this.pushStack([]),e=0;e<r;e++)wt.find(t,i[e],n);return 1<r?wt.uniqueSort(n):n},filter:function(t){return this.pushStack(e(this,t||[],!1))},not:function(t){return this.pushStack(e(this,t||[],!0))},is:function(t){return!!e(this,"string"==typeof t&&At.test(t)?wt(t):t||[],!1).length}});var Mt,kt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(wt.fn.init=function(t,e,n){var r,i;if(!t)return this;if(n=n||Mt,"string"==typeof t){if(!(r="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:kt.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof wt?e[0]:e,wt.merge(this,wt.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:at,!0)),It.test(r[1])&&wt.isPlainObject(e))for(r in e)vt(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(i=at.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):vt(t)?n.ready!==undefined?n.ready(t):t(wt):wt.makeArray(t,this)}).prototype=wt.fn,Mt=wt(at);var Dt=/^(?:parents|prev(?:Until|All))/,zt={children:!0,contents:!0,next:!0,prev:!0};wt.fn.extend({has:function(t){var e=wt(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(wt.contains(this,e[t]))return!0})},closest:function(t,e){var n,r=0,i=this.length,o=[],a="string"!=typeof t&&wt(t);if(!At.test(t))for(;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&wt.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(1<o.length?wt.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?ht.call(wt(t),this[0]):ht.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(wt.uniqueSort(wt.merge(this.get(),wt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),wt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return St(t,"parentNode")},parentsUntil:function(t,e,n){return St(t,"parentNode",n)},next:function(t){return n(t,"nextSibling")},prev:function(t){return n(t,"previousSibling")},nextAll:function(t){return St(t,"nextSibling")},prevAll:function(t){return St(t,"previousSibling")},nextUntil:function(t,e,n){return St(t,"nextSibling",n)},prevUntil:function(t,e,n){return St(t,"previousSibling",n)},siblings:function(t){return Ct((t.parentNode||{}).firstChild,t)},children:function(t){return Ct(t.firstChild)},contents:function(t){return u(t,"iframe")?t.contentDocument:(u(t,"template")&&(t=t.content||t),wt.merge([],t.childNodes))}},function(r,i){wt.fn[r]=function(t,e){var n=wt.map(this,i,t);return"Until"!==r.slice(-5)&&(e=t),e&&"string"==typeof e&&(n=wt.filter(e,n)),1<this.length&&(zt[r]||wt.uniqueSort(n),Dt.test(r)&&n.reverse()),this.pushStack(n)}});var Pt=/[^\x20\t\r\n\f]+/g;wt.Callbacks=function(r){r="string"==typeof r?c(r):wt.extend({},r);var i,t,e,n,o=[],a=[],s=-1,l=function(){for(n=n||r.once,e=i=!0;a.length;s=-1)for(t=a.shift();++s<o.length;)!1===o[s].apply(t[0],t[1])&&r.stopOnFalse&&(s=o.length,t=!1);r.memory||(t=!1),i=!1,n&&(o=t?[]:"")},u={add:function(){return o&&(t&&!i&&(s=o.length-1,a.push(t)),function n(t){wt.each(t,function(t,e){vt(e)?r.unique&&u.has(e)||o.push(e):e&&e.length&&"string"!==g(e)&&n(e)})}(arguments),t&&!i&&l()),this},remove:function(){return wt.each(arguments,function(t,e){for(var n;-1<(n=wt.inArray(e,o,n));)o.splice(n,1),n<=s&&s--}),this},has:function(t){return t?-1<wt.inArray(t,o):0<o.length},empty:function(){return o&&(o=[]),this},disable:function(){return n=a=[],o=t="",this},disabled:function(){return!o},lock:function(){return n=a=[],t||i||(o=t=""),this},locked:function(){return!!n},fireWith:function(t,e){return n||(e=[t,(e=e||[]).slice?e.slice():e],a.push(e),i||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!e}};return u},wt.extend({Deferred:function(t){var o=[["notify","progress",wt.Callbacks("memory"),wt.Callbacks("memory"),2],["resolve","done",wt.Callbacks("once memory"),wt.Callbacks("once memory"),0,"resolved"],["reject","fail",wt.Callbacks("once memory"),wt.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(t){return a.then(null,t)},pipe:function(){var i=arguments;return wt.Deferred(function(r){wt.each(o,function(t,e){var n=vt(i[e[4]])&&i[e[4]];s[e[1]](function(){var t=n&&n.apply(this,arguments);t&&vt(t.promise)?t.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[e[0]+"With"](this,n?[t]:arguments)})}),i=null}).promise()},then:function(e,n,r){function u(o,a,s,l){
return function(){var n=this,r=arguments,e=function(){var t,e;if(!(o<c)){if((t=s.apply(n,r))===a.promise())throw new TypeError("Thenable self-resolution");e=t&&("object"==typeof t||"function"==typeof t)&&t.then,vt(e)?l?e.call(t,u(c,a,h,l),u(c,a,p,l)):(c++,e.call(t,u(c,a,h,l),u(c,a,p,l),u(c,a,h,a.notifyWith))):(s!==h&&(n=undefined,r=[t]),(l||a.resolveWith)(n,r))}},i=l?e:function(){try{e()}catch(t){wt.Deferred.exceptionHook&&wt.Deferred.exceptionHook(t,i.stackTrace),c<=o+1&&(s!==p&&(n=undefined,r=[t]),a.rejectWith(n,r))}};o?i():(wt.Deferred.getStackHook&&(i.stackTrace=wt.Deferred.getStackHook()),T.setTimeout(i))}}var c=0;return wt.Deferred(function(t){o[0][3].add(u(0,t,vt(r)?r:h,t.notifyWith)),o[1][3].add(u(0,t,vt(e)?e:h)),o[2][3].add(u(0,t,vt(n)?n:p))}).promise()},promise:function(t){return null!=t?wt.extend(t,a):a}},s={};return wt.each(o,function(t,e){var n=e[2],r=e[5];a[e[1]]=n.add,r&&n.add(function(){i=r},o[3-t][2].disable,o[3-t][3].disable,o[0][2].lock,o[0][3].lock),n.add(e[3].fire),s[e[0]]=function(){return s[e[0]+"With"](this===s?undefined:this,arguments),this},s[e[0]+"With"]=n.fireWith}),a.promise(s),t&&t.call(s,s),s},when:function(t){var n=arguments.length,e=n,r=Array(e),i=lt.call(arguments),o=wt.Deferred(),a=function(e){return function(t){r[e]=this,i[e]=1<arguments.length?lt.call(arguments):t,--n||o.resolveWith(r,i)}};if(n<=1&&(l(t,o.done(a(e)).resolve,o.reject,!n),"pending"===o.state()||vt(i[e]&&i[e].then)))return o.then();for(;e--;)l(i[e],a(e),o.reject);return o.promise()}});var Lt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;wt.Deferred.exceptionHook=function(t,e){T.console&&T.console.warn&&t&&Lt.test(t.name)&&T.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},wt.readyException=function(t){T.setTimeout(function(){throw t})};var Ot=wt.Deferred();wt.fn.ready=function(t){return Ot.then(t)["catch"](function(t){wt.readyException(t)}),this},wt.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--wt.readyWait:wt.isReady)||(wt.isReady=!0)!==t&&0<--wt.readyWait||Ot.resolveWith(at,[wt])}}),wt.ready.then=Ot.then,"complete"===at.readyState||"loading"!==at.readyState&&!at.documentElement.doScroll?T.setTimeout(wt.ready):(at.addEventListener("DOMContentLoaded",r),T.addEventListener("load",r));var Rt=function(t,e,n,r,i,o,a){var s=0,l=t.length,u=null==n;if("object"===g(n))for(s in i=!0,n)Rt(t,e,s,n[s],!0,o,a);else if(r!==undefined&&(i=!0,vt(r)||(a=!0),u&&(a?(e.call(t,r),e=null):(u=e,e=function(t,e,n){return u.call(wt(t),n)})),e))for(;s<l;s++)e(t[s],n,a?r:r.call(t[s],s,e(t[s],n)));return i?t:u?e.call(t):l?e(t[0],n):o},Bt=/^-ms-/,Ft=/-([a-z])/g,Nt=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};o.uid=1,o.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Nt(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[f(e)]=n;else for(r in e)i[f(r)]=e[r];return i},get:function(t,e){return e===undefined?this.cache(t):t[this.expando]&&t[this.expando][f(e)]},access:function(t,e,n){return e===undefined||e&&"string"==typeof e&&n===undefined?this.get(t,e):(this.set(t,e,n),n!==undefined?n:e)},remove:function(t,e){var n,r=t[this.expando];if(r!==undefined){if(e!==undefined){n=(e=Array.isArray(e)?e.map(f):(e=f(e))in r?[e]:e.match(Pt)||[]).length;for(;n--;)delete r[e[n]]}(e===undefined||wt.isEmptyObject(r))&&(t.nodeType?t[this.expando]=undefined:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return e!==undefined&&!wt.isEmptyObject(e)}};var jt=new o,Vt=new o,$t=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,qt=/[A-Z]/g;wt.extend({hasData:function(t){return Vt.hasData(t)||jt.hasData(t)},data:function(t,e,n){return Vt.access(t,e,n)},removeData:function(t,e){Vt.remove(t,e)},_data:function(t,e,n){return jt.access(t,e,n)},_removeData:function(t,e){jt.remove(t,e)}}),wt.fn.extend({data:function(n,t){var e,r,i,o=this[0],a=o&&o.attributes;if(n===undefined){if(this.length&&(i=Vt.get(o),1===o.nodeType&&!jt.get(o,"hasDataAttrs"))){for(e=a.length;e--;)a[e]&&0===(r=a[e].name).indexOf("data-")&&(r=f(r.slice(5)),d(o,r,i[r]));jt.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){Vt.set(this,n)}):Rt(this,function(t){var e;if(o&&t===undefined)return(e=Vt.get(o,n))!==undefined?e:(e=d(o,n))!==undefined?e:void 0;this.each(function(){Vt.set(this,n,t)})},null,t,1<arguments.length,null,!0)},removeData:function(t){return this.each(function(){Vt.remove(this,t)})}}),wt.extend({queue:function(t,e,n){var r;if(t)return e=(e||"fx")+"queue",r=jt.get(t,e),n&&(!r||Array.isArray(n)?r=jt.access(t,e,wt.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){e=e||"fx";var n=wt.queue(t,e),r=n.length,i=n.shift(),o=wt._queueHooks(t,e),a=function(){wt.dequeue(t,e)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return jt.get(t,n)||jt.access(t,n,{empty:wt.Callbacks("once memory").add(function(){jt.remove(t,[e+"queue",n])})})}}),wt.fn.extend({queue:function(e,n){var t=2;return"string"!=typeof e&&(n=e,e="fx",t--),arguments.length<t?wt.queue(this[0],e):n===undefined?this:this.each(function(){var t=wt.queue(this,e,n);wt._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&wt.dequeue(this,e)})},dequeue:function(t){return this.each(function(){wt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=wt.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=undefined),t=t||"fx";a--;)(n=jt.get(o[a],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}});var Ut=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ht=new RegExp("^(?:([+-])=|)("+Ut+")([a-z%]*)$","i"),Wt=["Top","Right","Bottom","Left"],Gt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&wt.contains(t.ownerDocument,t)&&"none"===wt.css(t,"display")},Zt=function(t,e,n,r){var i,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];for(o in i=n.apply(t,r||[]),e)t.style[o]=a[o];return i},Yt={};wt.fn.extend({show:function(){return _(this,!0)},hide:function(){return _(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Gt(this)?wt(this).show():wt(this).hide()})}});var Xt=/^(?:checkbox|radio)$/i,Kt=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Jt=/^$|^module$|\/(?:java|ecma)script/i,Qt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Qt.optgroup=Qt.option,Qt.tbody=Qt.tfoot=Qt.colgroup=Qt.caption=Qt.thead,Qt.th=Qt.td;var te,ee,ne=/<|&#?\w+;/;te=at.createDocumentFragment().appendChild(at.createElement("div")),(ee=at.createElement("input")).setAttribute("type","radio"),ee.setAttribute("checked","checked"),ee.setAttribute("name","t"),te.appendChild(ee),yt.checkClone=te.cloneNode(!0).cloneNode(!0).lastChild.checked,te.innerHTML="<textarea>x</textarea>",yt.noCloneChecked=!!te.cloneNode(!0).lastChild.defaultValue;var re=at.documentElement,ie=/^key/,oe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ae=/^([^.]*)(?:\.(.+)|)/;wt.event={global:{},add:function(e,t,n,r,i){var o,a,s,l,u,c,h,p,f,d,m,g=jt.get(e);if(g)for(n.handler&&(n=(o=n).handler,i=o.selector),i&&wt.find.matchesSelector(re,i),n.guid||(n.guid=wt.guid++),(l=g.events)||(l=g.events={}),(a=g.handle)||(a=g.handle=function(t){return void 0!==wt&&wt.event.triggered!==t.type?wt.event.dispatch.apply(e,arguments):undefined}),u=(t=(t||"").match(Pt)||[""]).length;u--;)f=m=(s=ae.exec(t[u])||[])[1],d=(s[2]||"").split(".").sort(),f&&(h=wt.event.special[f]||{},f=(i?h.delegateType:h.bindType)||f,h=wt.event.special[f]||{},c=wt.extend({type:f,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&wt.expr.match.needsContext.test(i),namespace:d.join(".")},o),(p=l[f])||((p=l[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,r,d,a)||e.addEventListener&&e.addEventListener(f,a)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),wt.event.global[f]=!0)},remove:function(t,e,n,r,i){var o,a,s,l,u,c,h,p,f,d,m,g=jt.hasData(t)&&jt.get(t);if(g&&(l=g.events)){for(u=(e=(e||"").match(Pt)||[""]).length;u--;)if(f=m=(s=ae.exec(e[u])||[])[1],d=(s[2]||"").split(".").sort(),f){for(h=wt.event.special[f]||{},p=l[f=(r?h.delegateType:h.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;o--;)c=p[o],!i&&m!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,h.remove&&h.remove.call(t,c));a&&!p.length&&(h.teardown&&!1!==h.teardown.call(t,d,g.handle)||wt.removeEvent(t,f,g.handle),delete l[f])}else for(f in l)wt.event.remove(t,f+e[u],n,r,!0);wt.isEmptyObject(l)&&jt.remove(t,"handle events")}},dispatch:function(t){var e,n,r,i,o,a,s=wt.event.fix(t),l=new Array(arguments.length),u=(jt.get(this,"events")||{})[s.type]||[],c=wt.event.special[s.type]||{};for(l[0]=s,e=1;e<arguments.length;e++)l[e]=arguments[e];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){for(a=wt.event.handlers.call(this,s,u),e=0;(i=a[e++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,(r=((wt.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,l))!==undefined&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(t,e){var n,r,i,o,a,s=[],l=e.delegateCount,u=t.target;if(l&&u.nodeType&&!("click"===t.type&&1<=t.button))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==t.type||!0!==u.disabled)){for(o=[],a={},n=0;n<l;n++)a[i=(r=e[n]).selector+" "]===undefined&&(a[i]=r.needsContext?-1<wt(i,this).index(u):wt.find(i,this,null,[u]).length),a[i]&&o.push(r);o.length&&s.push({elem:u,handlers:o})}return u=this,l<e.length&&s.push({elem:u,handlers:e.slice(l)}),s},addProp:function(e,t){Object.defineProperty(wt.Event.prototype,e,{enumerable:!0,configurable:!0,get:vt(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(t){return t[wt.expando]?t:new wt.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==C()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===C()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&u(this,"input"))return this.click(),!1},_default:function(t){return u(t.target,"a")}},beforeunload:{postDispatch:function(t){t.result!==undefined&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},wt.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},wt.Event=function(t,e){if(!(this instanceof wt.Event))return new wt.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.defaultPrevented===undefined&&!1===t.returnValue?E:S,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&wt.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[wt.expando]=!0},wt.Event.prototype={constructor:wt.Event,isDefaultPrevented:S,isPropagationStopped:S,isImmediatePropagationStopped:S,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=E,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=E,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=E,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},wt.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&ie.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&e!==undefined&&oe.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},wt.event.addProp),wt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,o){wt.event.special[t]={delegateType:o,bindType:o,handle:function(t){var e,n=this,r=t.relatedTarget,i=t.handleObj;return r&&(r===n||wt.contains(n,r))||(t.type=i.origType,e=i.handler.apply(this,arguments),t.type=o),e}}}),wt.fn.extend({on:function(t,e,n,r){return A(this,t,e,n,r)},one:function(t,e,n,r){return A(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,wt(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=undefined),!1===n&&(n=S),this.each(function(){wt.event.remove(this,t,n,e)})}});var se=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,le=/<script|<style|<link/i,ue=/checked\s*(?:[^=]|=\s*.checked.)/i,ce=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;wt.extend({htmlPrefilter:function(t){return t.replace(se,"<$1></$2>")},clone:function(t,e,n){var r,i,o,a,s=t.cloneNode(!0),l=wt.contains(t.ownerDocument,t);if(!(yt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||wt.isXMLDoc(t)))for(a=x(s),r=0,i=(o=x(t)).length;r<i;r++)z(o[r],a[r]);if(e)if(n)for(o=o||x(t),a=a||x(s),r=0,i=o.length;r<i;r++)D(o[r],a[r]);else D(t,s);return 0<(a=x(s,"script")).length&&b(a,!l&&x(t,"script")),s},cleanData:function(t){for(var e,n,r,i=wt.event.special,o=0;(n=t[o])!==undefined;o++)if(Nt(n)){if(e=n[jt.expando]){if(e.events)for(r in e.events)i[r]?wt.event.remove(n,r):wt.removeEvent(n,r,e.handle);n[jt.expando]=undefined}n[Vt.expando]&&(n[Vt.expando]=undefined)}}}),wt.fn.extend({detach:function(t){return L(this,t,!0)},remove:function(t){return L(this,t)},text:function(t){return Rt(this,function(t){return t===undefined?wt.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return P(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||I(this,t).appendChild(t)})},prepend:function(){return P(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=I(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return P(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return P(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(wt.cleanData(x(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return wt.clone(this,t,e)})},html:function(t){return Rt(this,function(t){var e=this[0]||{},n=0,r=this.length;if(t===undefined&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!le.test(t)&&!Qt[(Kt.exec(t)||["",""])[1].toLowerCase()]){t=wt.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(wt.cleanData(x(e,!1)),e.innerHTML=t);e=0}catch(i){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var n=[];return P(this,arguments,function(t){var e=this.parentNode;wt.inArray(this,n)<0&&(wt.cleanData(x(this)),e&&e.replaceChild(t,this))},n)}}),wt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,a){wt.fn[t]=function(t){for(var e,n=[],r=wt(t),i=r.length-1,o=0;o<=i;o++)e=o===i?this:this.clone(!0),wt(r[o])[a](e),ct.apply(n,e.get());return this.pushStack(n)}});var he=new RegExp("^("+Ut+")(?!px)[a-z%]+$","i"),pe=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=T),e.getComputedStyle(t)},fe=new RegExp(Wt.join("|"),"i");!function(){function t(){if(l){s.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(s).appendChild(l);var t=T.getComputedStyle(l);n="1%"!==t.top,a=12===e(t.marginLeft),l.style.right="60%",o=36===e(t.right),r=36===e(t.width),l.style.position="absolute",i=36===l.offsetWidth||"absolute",re.removeChild(s),l=null}}function e(t){return Math.round(parseFloat(t))}var n,r,i,o,a,s=at.createElement("div"),l=at.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",yt.clearCloneStyle="content-box"===l.style.backgroundClip,wt.extend(yt,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),a},scrollboxSize:function(){return t(),i}}))}();var de=/^(none|table(?!-c[ea]).+)/,me=/^--/,ge={position:"absolute",visibility:"hidden",display:"block"},ye={letterSpacing:"0",fontWeight:"400"},ve=["Webkit","Moz","ms"],_e=at.createElement("div").style;wt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=O(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,s=f(e),l=me.test(e),u=t.style;if(l||(e=F(s)),a=wt.cssHooks[e]||wt.cssHooks[s],n===undefined)return a&&"get"in a&&(i=a.get(t,!1,r))!==undefined?i:u[e];"string"===(o=typeof n)&&(i=Ht.exec(n))&&i[1]&&(n=y(t,e,i),o="number"),null!=n&&n==n&&("number"===o&&(n+=i&&i[3]||(wt.cssNumber[s]?"":"px")),yt.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),a&&"set"in a&&(n=a.set(t,n,r))===undefined||(l?u.setProperty(e,n):u[e]=n))}},css:function(t,e,n,r){var i,o,a,s=f(e);return me.test(e)||(e=F(s)),(a=wt.cssHooks[e]||wt.cssHooks[s])&&"get"in a&&(i=a.get(t,!0,n)),i===undefined&&(i=O(t,e,r)),"normal"===i&&e in ye&&(i=ye[e]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),wt.each(["height","width"],function(t,s){wt.cssHooks[s]={get:function(t,e,n){if(e)return!de.test(wt.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?V(t,s,n):Zt(t,ge,function(){return V(t,s,n)})},set:function(t,e,n){var r,i=pe(t),o="border-box"===wt.css(t,"boxSizing",!1,i),a=n&&j(t,s,n,o,i);return o&&yt.scrollboxSize()===i.position&&(a-=Math.ceil(t["offset"+s[0].toUpperCase()+s.slice(1)]-parseFloat(i[s])-j(t,s,"border",!1,i)-.5)),a&&(r=Ht.exec(e))&&"px"!==(r[3]||"px")&&(t.style[s]=e,e=wt.css(t,s)),N(t,e,a)}}}),wt.cssHooks.marginLeft=R(yt.reliableMarginLeft,function(t,e){if(e)return(parseFloat(O(t,"marginLeft"))||t.getBoundingClientRect().left-Zt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),wt.each({margin:"",padding:"",border:"Width"},function(i,o){wt.cssHooks[i+o]={expand:function(t){for(var e=0,n={},r="string"==typeof t?t.split(" "):[t];e<4;e++)n[i+Wt[e]+o]=r[e]||r[e-2]||r[0];return n}},"margin"!==i&&(wt.cssHooks[i+o].set=N)}),wt.fn.extend({css:function(t,e){return Rt(this,function(t,e,n){var r,i,o={},a=0;if(Array.isArray(e)){for(r=pe(t),i=e.length;a<i;a++)o[e[a]]=wt.css(t,e[a],!1,r);return o}return n!==undefined?wt.style(t,e,n):wt.css(t,e)},t,e,1<arguments.length)}}),(wt.Tween=$).prototype={constructor:$,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||wt.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(wt.cssNumber[n]?"":"px")},cur:function(){var t=$.propHooks[this.prop];return t&&t.get?t.get(this):$.propHooks._default.get(this)},run:function(t){var e,n=$.propHooks[this.prop];return this.options.duration?this.pos=e=wt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):$.propHooks._default.set(this),this}},$.prototype.init.prototype=$.prototype,$.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=wt.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){wt.fx.step[t.prop]?wt.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[wt.cssProps[t.prop]]&&!wt.cssHooks[t.prop]?t.elem[t.prop]=t.now:wt.style(t.elem,t.prop,t.now+t.unit)}}},$.propHooks.scrollTop=$.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},wt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},wt.fx=$.prototype.init,wt.fx.step={};var xe,be,we,Ee,Te=/^(?:toggle|show|hide)$/,Se=/queueHooks$/;wt.Animation=wt.extend(Y,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return y(n.elem,t,Ht.exec(e),n),n}]},tweener:function(t,e){vt(t)?(e=t,t=["*"]):t=t.match(Pt);for(var n,r=0,i=t.length;r<i;r++)n=t[r],Y.tweeners[n]=Y.tweeners[n]||[],Y.tweeners[n].unshift(e)},prefilters:[G],prefilter:function(t,e){e?Y.prefilters.unshift(t):Y.prefilters.push(t)}}),wt.speed=function(t,e,n){var r=t&&"object"==typeof t?wt.extend({},t):{complete:n||!n&&e||vt(t)&&t,duration:t,easing:n&&e||e&&!vt(e)&&e};return wt.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in wt.fx.speeds?r.duration=wt.fx.speeds[r.duration]:r.duration=wt.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){vt(r.old)&&r.old.call(this),r.queue&&wt.dequeue(this,r.queue)},r},wt.fn.extend({fadeTo:function(t,e,n,r){return this.filter(Gt).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(e,t,n,r){var i=wt.isEmptyObject(e),o=wt.speed(t,n,r),a=function(){var t=Y(this,wt.extend({},e),o);(i||jt.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,t,o){var a=function(t){var e=t.stop;delete t.stop,e(o)};return"string"!=typeof i&&(o=t,t=i,i=undefined),t&&!1!==i&&this.queue(i||"fx",[]),this.each(function(){var t=!0,e=null!=i&&i+"queueHooks",n=wt.timers,r=jt.get(this);if(e)r[e]&&r[e].stop&&a(r[e]);else for(e in r)r[e]&&r[e].stop&&Se.test(e)&&a(r[e]);for(e=n.length;e--;)n[e].elem!==this||null!=i&&n[e].queue!==i||(n[e].anim.stop(o),t=!1,n.splice(e,1));!t&&o||wt.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var t,e=jt.get(this),n=e[a+"queue"],r=e[a+"queueHooks"],i=wt.timers,o=n?n.length:0;for(e.finish=!0,wt.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===a&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<o;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete e.finish})}}),wt.each(["toggle","show","hide"],function(t,r){var i=wt.fn[r];wt.fn[r]=function(t,e,n){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(H(r,!0),t,e,n)}}),wt.each({slideDown:H("show"),slideUp:H("hide"),slideToggle:H("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,r){wt.fn[t]=function(t,e,n){return this.animate(r,t,e,n)}}),wt.timers=[],wt.fx.tick=function(){var t,e=0,n=wt.timers;for(xe=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||wt.fx.stop(),xe=undefined},wt.fx.timer=function(t){wt.timers.push(t),wt.fx.start()},wt.fx.interval=13,wt.fx.start=function(){be||(be=!0,q())},wt.fx.stop=function(){be=null},wt.fx.speeds={slow:600,fast:200,_default:400},wt.fn.delay=function(r,t){return r=wt.fx&&wt.fx.speeds[r]||r,t=t||"fx",this.queue(t,function(t,e){var n=T.setTimeout(t,r);e.stop=function(){T.clearTimeout(n)}})},we=at.createElement("input"),Ee=at.createElement("select").appendChild(at.createElement("option")),we.type="checkbox",yt.checkOn=""!==we.value,yt.optSelected=Ee.selected,(we=at.createElement("input")).value="t",we.type="radio",yt.radioValue="t"===we.value;var Ce,Ae=wt.expr.attrHandle;wt.fn.extend({attr:function(t,e){return Rt(this,wt.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){wt.removeAttr(this,t)})}}),wt.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof t.getAttribute?wt.prop(t,e,n):(1===o&&wt.isXMLDoc(t)||(i=wt.attrHooks[e.toLowerCase()]||(wt.expr.match.bool.test(e)?Ce:undefined)),n!==undefined?null===n?void wt.removeAttr(t,e):i&&"set"in i&&(r=i.set(t,n,e))!==undefined?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=wt.find.attr(t,e))?undefined:r)},attrHooks:{type:{set:function(t,e){if(!yt.radioValue&&"radio"===e&&u(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,i=e&&e.match(Pt);if(i&&1===t.nodeType)for(;n=i[r++];)t.removeAttribute(n)}}),Ce={set:function(t,e,n){return!1===e?wt.removeAttr(t,n):t.setAttribute(n,n),n}},wt.each(wt.expr.match.bool.source.match(/\w+/g),function(t,e){var a=Ae[e]||wt.find.attr;Ae[e]=function(t,e,n){var r,i,o=e.toLowerCase();return n||(i=Ae[o],Ae[o]=r,r=null!=a(t,e,n)?o:null,Ae[o]=i),r}});var Ie=/^(?:input|select|textarea|button)$/i,Me=/^(?:a|area)$/i;wt.fn.extend({prop:function(t,e){return Rt(this,wt.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[wt.propFix[t]||t]})}}),wt.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&wt.isXMLDoc(t)||(e=wt.propFix[e]||e,i=wt.propHooks[e]),n!==undefined?i&&"set"in i&&(r=i.set(t,n,e))!==undefined?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=wt.find.attr(t,"tabindex");return e?parseInt(e,10):Ie.test(t.nodeName)||Me.test(t.nodeName)&&t.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),yt.optSelected||(wt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),wt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){wt.propFix[this.toLowerCase()]=this}),wt.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,l=0;if(vt(e))return this.each(function(t){wt(this).addClass(e.call(this,t,K(this)))});if((t=J(e)).length)for(;n=this[l++];)if(i=K(n),r=1===n.nodeType&&" "+X(i)+" "){for(a=0;o=t[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=X(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,l=0;if(vt(e))return this.each(function(t){wt(this).removeClass(e.call(this,t,K(this)))});if(!arguments.length)return this.attr("class","");if((t=J(e)).length)for(;n=this[l++];)if(i=K(n),r=1===n.nodeType&&" "+X(i)+" "){for(a=0;o=t[a++];)for(;-1<r.indexOf(" "+o+" ");)r=r.replace(" "+o+" "," ");i!==(s=X(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,e){var o=typeof i,a="string"===o||Array.isArray(i);return"boolean"==typeof e&&a?e?this.addClass(i):this.removeClass(i):vt(i)?this.each(function(t){wt(this).toggleClass(i.call(this,t,K(this),e),e)}):this.each(function(){var t,e,n,r;if(a)for(e=0,n=wt(this),r=J(i);t=r[e++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else i!==undefined&&"boolean"!==o||((t=K(this))&&jt.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===i?"":jt.get(this,"__className__")||""))})},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&-1<(" "+X(K(n))+" ").indexOf(e))return!0;return!1}});var ke=/\r/g;wt.fn.extend({val:function(n){var r,t,i,e=this[0];return arguments.length?(i=vt(n),this.each(function(t){var e;1===this.nodeType&&(null==(e=i?n.call(this,t,wt(this).val()):n)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=wt.map(e,function(t){return null==t?"":t+""})),(r=wt.valHooks[this.type]||wt.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&r.set(this,e,"value")!==undefined||(this.value=e))})):e?(r=wt.valHooks[e.type]||wt.valHooks[e.nodeName.toLowerCase()])&&"get"in r&&(t=r.get(e,"value"))!==undefined?t:"string"==typeof(t=e.value)?t.replace(ke,""):null==t?"":t:void 0}}),wt.extend({valHooks:{option:{get:function(t){var e=wt.find.attr(t,"value");return null!=e?e:X(wt.text(t))}},select:{get:function(t){var e,n,r,i=t.options,o=t.selectedIndex,a="select-one"===t.type,s=a?null:[],l=a?o+1:i.length;for(r=o<0?l:a?o:0;r<l;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!u(n.parentNode,"optgroup"))){if(e=wt(n).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var n,r,i=t.options,o=wt.makeArray(e),a=i.length;a--;)((r=i[a]).selected=-1<wt.inArray(wt.valHooks.option.get(r),o))&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),wt.each(["radio","checkbox"],function(){wt.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<wt.inArray(wt(t).val(),e)}},yt.checkOn||(wt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),yt.focusin="onfocusin"in T;var De=/^(?:focusinfocus|focusoutblur)$/,ze=function(t){t.stopPropagation()};wt.extend(wt.event,{trigger:function(t,e,n,r){var i,o,a,s,l,u,c,h,p=[n||at],f=dt.call(t,"type")?t.type:t,d=dt.call(t,"namespace")?t.namespace.split("."):[];if(o=h=a=n=n||at,3!==n.nodeType&&8!==n.nodeType&&!De.test(f+wt.event.triggered)&&(-1<f.indexOf(".")&&(f=(d=f.split(".")).shift(),d.sort()),l=f.indexOf(":")<0&&"on"+f,(t=t[wt.expando]?t:new wt.Event(f,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=d.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=undefined,t.target||(t.target=n),e=null==e?[t]:wt.makeArray(e,[t]),c=wt.event.special[f]||{},r||!c.trigger||!1!==c.trigger.apply(n,e))){if(!r&&!c.noBubble&&!_t(n)){for(s=c.delegateType||f,De.test(s+f)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||at)&&p.push(a.defaultView||a.parentWindow||T)}for(i=0;(o=p[i++])&&!t.isPropagationStopped();)h=o,t.type=1<i?s:c.bindType||f,(u=(jt.get(o,"events")||{})[t.type]&&jt.get(o,"handle"))&&u.apply(o,e),(u=l&&o[l])&&u.apply&&Nt(o)&&(t.result=u.apply(o,e),!1===t.result&&t.preventDefault());return t.type=f,r||t.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),e)||!Nt(n)||l&&vt(n[f])&&!_t(n)&&((a=n[l])&&(n[l]=null),wt.event.triggered=f,t.isPropagationStopped()&&h.addEventListener(f,ze),n[f](),t.isPropagationStopped()&&h.removeEventListener(f,ze),wt.event.triggered=undefined,a&&(n[l]=a)),t.result}},simulate:function(t,e,n){var r=wt.extend(new wt.Event,n,{type:t,isSimulated:!0});wt.event.trigger(r,null,e)}}),wt.fn.extend({trigger:function(t,e){return this.each(function(){wt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return wt.event.trigger(t,e,n,!0)}}),yt.focusin||wt.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(t){wt.event.simulate(r,t.target,wt.event.fix(t))};wt.event.special[r]={setup:function(){var t=this.ownerDocument||this,e=jt.access(t,r);e||t.addEventListener(n,i,!0),jt.access(t,r,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this,e=jt.access(t,r)-1;e?jt.access(t,r,e):(t.removeEventListener(n,i,!0),jt.remove(t,r))}}});var Pe=T.location,Le=Date.now(),Oe=/\?/;wt.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new T.DOMParser).parseFromString(t,"text/xml")}catch(n){e=undefined}return e&&!e.getElementsByTagName("parsererror").length||wt.error("Invalid XML: "+t),e};var Re=/\[\]$/,Be=/\r?\n/g,Fe=/^(?:submit|button|image|reset|file)$/i,Ne=/^(?:input|select|textarea|keygen)/i;wt.param=function(t,e){var n,r=[],i=function(t,e){var n=vt(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(t)||t.jquery&&!wt.isPlainObject(t))wt.each(t,function(){i(this.name,this.value)});else for(n in t)Q(n,t[n],e,i);return r.join("&")},wt.fn.extend({serialize:function(){return wt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){
var t=wt.prop(this,"elements");return t?wt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!wt(this).is(":disabled")&&Ne.test(this.nodeName)&&!Fe.test(t)&&(this.checked||!Xt.test(t))}).map(function(t,e){var n=wt(this).val();return null==n?null:Array.isArray(n)?wt.map(n,function(t){return{name:e.name,value:t.replace(Be,"\r\n")}}):{name:e.name,value:n.replace(Be,"\r\n")}}).get()}});var je=/%20/g,Ve=/#.*$/,$e=/([?&])_=[^&]*/,qe=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ue=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,He=/^(?:GET|HEAD)$/,We=/^\/\//,Ge={},Ze={},Ye="*/".concat("*"),Xe=at.createElement("a");Xe.href=Pe.href,wt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Pe.href,type:"GET",isLocal:Ue.test(Pe.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ye,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":wt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?nt(nt(t,wt.ajaxSettings),e):nt(wt.ajaxSettings,t)},ajaxPrefilter:tt(Ge),ajaxTransport:tt(Ze),ajax:function(t,e){function n(t,e,n,r){var i,o,a,s,l,u=e;d||(d=!0,f&&T.clearTimeout(f),c=undefined,p=r||"",w.readyState=0<t?4:0,i=200<=t&&t<300||304===t,n&&(s=rt(g,w,n)),s=it(g,s,w,i),i?(g.ifModified&&((l=w.getResponseHeader("Last-Modified"))&&(wt.lastModified[h]=l),(l=w.getResponseHeader("etag"))&&(wt.etag[h]=l)),204===t||"HEAD"===g.type?u="nocontent":304===t?u="notmodified":(u=s.state,o=s.data,i=!(a=s.error))):(a=u,!t&&u||(u="error",t<0&&(t=0))),w.status=t,w.statusText=(e||u)+"",i?_.resolveWith(y,[o,u,w]):_.rejectWith(y,[w,u,a]),w.statusCode(b),b=undefined,m&&v.trigger(i?"ajaxSuccess":"ajaxError",[w,g,i?o:a]),x.fireWith(y,[w,u]),m&&(v.trigger("ajaxComplete",[w,g]),--wt.active||wt.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=undefined),e=e||{};var c,h,p,r,f,i,d,m,o,a,g=wt.ajaxSetup({},e),y=g.context||g,v=g.context&&(y.nodeType||y.jquery)?wt(y):wt.event,_=wt.Deferred(),x=wt.Callbacks("once memory"),b=g.statusCode||{},s={},l={},u="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(d){if(!r)for(r={};e=qe.exec(p);)r[e[1].toLowerCase()]=e[2];e=r[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return d?p:null},setRequestHeader:function(t,e){return null==d&&(t=l[t.toLowerCase()]=l[t.toLowerCase()]||t,s[t]=e),this},overrideMimeType:function(t){return null==d&&(g.mimeType=t),this},statusCode:function(t){var e;if(t)if(d)w.always(t[w.status]);else for(e in t)b[e]=[b[e],t[e]];return this},abort:function(t){var e=t||u;return c&&c.abort(e),n(0,e),this}};if(_.promise(w),g.url=((t||g.url||Pe.href)+"").replace(We,Pe.protocol+"//"),g.type=e.method||e.type||g.method||g.type,g.dataTypes=(g.dataType||"*").toLowerCase().match(Pt)||[""],null==g.crossDomain){i=at.createElement("a");try{i.href=g.url,i.href=i.href,g.crossDomain=Xe.protocol+"//"+Xe.host!=i.protocol+"//"+i.host}catch(E){g.crossDomain=!0}}if(g.data&&g.processData&&"string"!=typeof g.data&&(g.data=wt.param(g.data,g.traditional)),et(Ge,g,e,w),d)return w;for(o in(m=wt.event&&g.global)&&0==wt.active++&&wt.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!He.test(g.type),h=g.url.replace(Ve,""),g.hasContent?g.data&&g.processData&&0===(g.contentType||"").indexOf("application/x-www-form-urlencoded")&&(g.data=g.data.replace(je,"+")):(a=g.url.slice(h.length),g.data&&(g.processData||"string"==typeof g.data)&&(h+=(Oe.test(h)?"&":"?")+g.data,delete g.data),!1===g.cache&&(h=h.replace($e,"$1"),a=(Oe.test(h)?"&":"?")+"_="+Le+++a),g.url=h+a),g.ifModified&&(wt.lastModified[h]&&w.setRequestHeader("If-Modified-Since",wt.lastModified[h]),wt.etag[h]&&w.setRequestHeader("If-None-Match",wt.etag[h])),(g.data&&g.hasContent&&!1!==g.contentType||e.contentType)&&w.setRequestHeader("Content-Type",g.contentType),w.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+Ye+"; q=0.01":""):g.accepts["*"]),g.headers)w.setRequestHeader(o,g.headers[o]);if(g.beforeSend&&(!1===g.beforeSend.call(y,w,g)||d))return w.abort();if(u="abort",x.add(g.complete),w.done(g.success),w.fail(g.error),c=et(Ze,g,e,w)){if(w.readyState=1,m&&v.trigger("ajaxSend",[w,g]),d)return w;g.async&&0<g.timeout&&(f=T.setTimeout(function(){w.abort("timeout")},g.timeout));try{d=!1,c.send(s,n)}catch(E){if(d)throw E;n(-1,E)}}else n(-1,"No Transport");return w},getJSON:function(t,e,n){return wt.get(t,e,n,"json")},getScript:function(t,e){return wt.get(t,undefined,e,"script")}}),wt.each(["get","post"],function(t,i){wt[i]=function(t,e,n,r){return vt(e)&&(r=r||n,n=e,e=undefined),wt.ajax(wt.extend({url:t,type:i,dataType:r,data:e,success:n},wt.isPlainObject(t)&&t))}}),wt._evalUrl=function(t){return wt.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},wt.fn.extend({wrapAll:function(t){var e;return this[0]&&(vt(t)&&(t=t.call(this[0])),e=wt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(n){return vt(n)?this.each(function(t){wt(this).wrapInner(n.call(this,t))}):this.each(function(){var t=wt(this),e=t.contents();e.length?e.wrapAll(n):t.append(n)})},wrap:function(e){var n=vt(e);return this.each(function(t){wt(this).wrapAll(n?e.call(this,t):e)})},unwrap:function(t){return this.parent(t).not("body").each(function(){wt(this).replaceWith(this.childNodes)}),this}}),wt.expr.pseudos.hidden=function(t){return!wt.expr.pseudos.visible(t)},wt.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},wt.ajaxSettings.xhr=function(){try{return new T.XMLHttpRequest}catch(t){}};var Ke={0:200,1223:204},Je=wt.ajaxSettings.xhr();yt.cors=!!Je&&"withCredentials"in Je,yt.ajax=Je=!!Je,wt.ajaxTransport(function(o){var a,s;if(yt.cors||Je&&!o.crossDomain)return{send:function(t,e){var n,r=o.xhr();if(r.open(o.type,o.url,o.async,o.username,o.password),o.xhrFields)for(n in o.xhrFields)r[n]=o.xhrFields[n];for(n in o.mimeType&&r.overrideMimeType&&r.overrideMimeType(o.mimeType),o.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)r.setRequestHeader(n,t[n]);a=function(t){return function(){a&&(a=s=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===t?r.abort():"error"===t?"number"!=typeof r.status?e(0,"error"):e(r.status,r.statusText):e(Ke[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=a(),s=r.onerror=r.ontimeout=a("error"),r.onabort!==undefined?r.onabort=s:r.onreadystatechange=function(){4===r.readyState&&T.setTimeout(function(){a&&s()})},a=a("abort");try{r.send(o.hasContent&&o.data||null)}catch(i){if(a)throw i}},abort:function(){a&&a()}}}),wt.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),wt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return wt.globalEval(t),t}}}),wt.ajaxPrefilter("script",function(t){t.cache===undefined&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),wt.ajaxTransport("script",function(n){var r,i;if(n.crossDomain)return{send:function(t,e){r=wt("<script>").prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(t){r.remove(),i=null,t&&e("error"===t.type?404:200,t.type)}),at.head.appendChild(r[0])},abort:function(){i&&i()}}});var Qe,tn=[],en=/(=)\?(?=&|$)|\?\?/;wt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=tn.pop()||wt.expando+"_"+Le++;return this[t]=!0,t}}),wt.ajaxPrefilter("json jsonp",function(t,e,n){var r,i,o,a=!1!==t.jsonp&&(en.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&en.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=vt(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(en,"$1"+r):!1!==t.jsonp&&(t.url+=(Oe.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return o||wt.error(r+" was not called"),o[0]},t.dataTypes[0]="json",i=T[r],T[r]=function(){o=arguments},n.always(function(){i===undefined?wt(T).removeProp(r):T[r]=i,t[r]&&(t.jsonpCallback=e.jsonpCallback,tn.push(r)),o&&vt(i)&&i(o[0]),o=i=undefined}),"script"}),yt.createHTMLDocument=((Qe=at.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Qe.childNodes.length),wt.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(yt.createHTMLDocument?((r=(e=at.implementation.createHTMLDocument("")).createElement("base")).href=at.location.href,e.head.appendChild(r)):e=at),o=!n&&[],(i=It.exec(t))?[e.createElement(i[1])]:(i=w([t],e,o),o&&o.length&&wt(o).remove(),wt.merge([],i.childNodes)));var r,i,o},wt.fn.load=function(t,e,n){var r,i,o,a=this,s=t.indexOf(" ");return-1<s&&(r=X(t.slice(s)),t=t.slice(0,s)),vt(e)?(n=e,e=undefined):e&&"object"==typeof e&&(i="POST"),0<a.length&&wt.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done(function(t){o=arguments,a.html(r?wt("<div>").append(wt.parseHTML(t)).find(r):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},wt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){wt.fn[e]=function(t){return this.on(e,t)}}),wt.expr.pseudos.animated=function(e){return wt.grep(wt.timers,function(t){return e===t.elem}).length},wt.offset={setOffset:function(t,e,n){var r,i,o,a,s,l,u=wt.css(t,"position"),c=wt(t),h={};"static"===u&&(t.style.position="relative"),s=c.offset(),o=wt.css(t,"top"),l=wt.css(t,"left"),("absolute"===u||"fixed"===u)&&-1<(o+l).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),vt(e)&&(e=e.call(t,n,wt.extend({},s))),null!=e.top&&(h.top=e.top-s.top+a),null!=e.left&&(h.left=e.left-s.left+i),"using"in e?e.using.call(t,h):c.css(h)}},wt.fn.extend({offset:function(e){if(arguments.length)return e===undefined?this:this.each(function(t){wt.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],i={top:0,left:0};if("fixed"===wt.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===wt.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((i=wt(t).offset()).top+=wt.css(t,"borderTopWidth",!0),i.left+=wt.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-wt.css(r,"marginTop",!0),left:e.left-i.left-wt.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===wt.css(t,"position");)t=t.offsetParent;return t||re})}}),wt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var o="pageYOffset"===i;wt.fn[e]=function(t){return Rt(this,function(t,e,n){var r;if(_t(t)?r=t:9===t.nodeType&&(r=t.defaultView),n===undefined)return r?r[i]:t[e];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):t[e]=n},e,t,arguments.length)}}),wt.each(["top","left"],function(t,n){wt.cssHooks[n]=R(yt.pixelPosition,function(t,e){if(e)return e=O(t,n),he.test(e)?wt(t).position()[n]+"px":e})}),wt.each({Height:"height",Width:"width"},function(a,s){wt.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){wt.fn[o]=function(t,e){var n=arguments.length&&(r||"boolean"!=typeof t),i=r||(!0===t||!0===e?"margin":"border");return Rt(this,function(t,e,n){var r;return _t(t)?0===o.indexOf("outer")?t["inner"+a]:t.document.documentElement["client"+a]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+a],r["scroll"+a],t.body["offset"+a],r["offset"+a],r["client"+a])):n===undefined?wt.css(t,e,i):wt.style(t,e,n,i)},s,n?t:undefined,n)}})}),wt.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,n){wt.fn[n]=function(t,e){return 0<arguments.length?this.on(n,null,t,e):this.trigger(n)}}),wt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),wt.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),wt.proxy=function(t,e){var n,r,i;return"string"==typeof e&&(n=t[e],e=t,t=n),vt(t)?(r=lt.call(arguments,2),(i=function(){return t.apply(e||this,r.concat(lt.call(arguments)))}).guid=t.guid=t.guid||wt.guid++,i):undefined},wt.holdReady=function(t){t?wt.readyWait++:wt.ready(!0)},wt.isArray=Array.isArray,wt.parseJSON=JSON.parse,wt.nodeName=u,wt.isFunction=vt,wt.isWindow=_t,wt.camelCase=f,wt.type=g,wt.now=Date.now,wt.isNumeric=function(t){var e=wt.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return wt});var nn=T.jQuery,rn=T.$;return wt.noConflict=function(t){return T.$===wt&&(T.$=rn),t&&T.jQuery===wt&&(T.jQuery=nn),wt},t||(T.jQuery=T.$=wt),wt}),function(c,l){"use strict";var u;c.rails!==l&&c.error("jquery-ujs has already been loaded!");var t=c(document);c.rails=u={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not([form]):not(form button), button[data-confirm]:not([form]):not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]), textarea[name][required]:not([disabled])",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return c("meta[name=csrf-token]").attr("content")},csrfParam:function(){return c("meta[name=csrf-param]").attr("content")},CSRFProtection:function(t){var e=u.csrfToken();e&&t.setRequestHeader("X-CSRF-Token",e)},refreshCSRFTokens:function(){c('form input[name="'+u.csrfParam()+'"]').val(u.csrfToken())},fire:function(t,e,n){var r=c.Event(e);return t.trigger(r,n),!1!==r.result},confirm:function(t){return confirm(t)},ajax:function(t){return c.ajax(t)},href:function(t){return t[0].href},isRemote:function(t){return t.data("remote")!==l&&!1!==t.data("remote")},handleRemote:function(r){var t,e,n,i,o,a;if(u.fire(r,"ajax:before")){if(i=r.data("with-credentials")||null,o=r.data("type")||c.ajaxSettings&&c.ajaxSettings.dataType,r.is("form")){t=r.data("ujs:submit-button-formmethod")||r.attr("method"),e=r.data("ujs:submit-button-formaction")||r.attr("action"),n=c(r[0]).serializeArray();var s=r.data("ujs:submit-button");s&&(n.push(s),r.data("ujs:submit-button",null)),r.data("ujs:submit-button-formmethod",null),r.data("ujs:submit-button-formaction",null)}else r.is(u.inputChangeSelector)?(t=r.data("method"),e=r.data("url"),n=r.serialize(),r.data("params")&&(n=n+"&"+r.data("params"))):r.is(u.buttonClickSelector)?(t=r.data("method")||"get",e=r.data("url"),n=r.serialize(),r.data("params")&&(n=n+"&"+r.data("params"))):(t=r.data("method"),e=u.href(r),n=r.data("params")||null);return a={type:t||"GET",data:n,dataType:o,beforeSend:function(t,e){if(e.dataType===l&&t.setRequestHeader("accept","*/*;q=0.5, "+e.accepts.script),!u.fire(r,"ajax:beforeSend",[t,e]))return!1;r.trigger("ajax:send",t)},success:function(t,e,n){r.trigger("ajax:success",[t,e,n])},complete:function(t,e){r.trigger("ajax:complete",[t,e])},error:function(t,e,n){r.trigger("ajax:error",[t,e,n])},crossDomain:u.isCrossDomain(e)},i&&(a.xhrFields={withCredentials:i}),e&&(a.url=e),u.ajax(a)}return!1},isCrossDomain:function(t){var e=document.createElement("a");e.href=location.href;var n=document.createElement("a");try{return n.href=t,n.href=n.href,!((!n.protocol||":"===n.protocol)&&!n.host||e.protocol+"//"+e.host==n.protocol+"//"+n.host)}catch(r){return!0}},handleMethod:function(t){var e=u.href(t),n=t.data("method"),r=t.attr("target"),i=u.csrfToken(),o=u.csrfParam(),a=c('<form method="post" action="'+e+'"></form>'),s='<input name="_method" value="'+n+'" type="hidden" />';o===l||i===l||u.isCrossDomain(e)||(s+='<input name="'+o+'" value="'+i+'" type="hidden" />'),r&&a.attr("target",r),a.hide().append(s).appendTo("body"),a.submit()},formElements:function(t,e){return t.is("form")?c(t[0].elements).filter(e):t.find(e)},disableFormElements:function(t){u.formElements(t,u.disableSelector).each(function(){u.disableFormElement(c(this))})},disableFormElement:function(t){var e,n;e=t.is("button")?"html":"val",(n=t.data("disable-with"))!==l&&(t.data("ujs:enable-with",t[e]()),t[e](n)),t.prop("disabled",!0),t.data("ujs:disabled",!0)},enableFormElements:function(t){u.formElements(t,u.enableSelector).each(function(){u.enableFormElement(c(this))})},enableFormElement:function(t){var e=t.is("button")?"html":"val";t.data("ujs:enable-with")!==l&&(t[e](t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.prop("disabled",!1),t.removeData("ujs:disabled")},allowAction:function(t){var e,n=t.data("confirm"),r=!1;if(!n)return!0;if(u.fire(t,"confirm")){try{r=u.confirm(n)}catch(i){(console.error||console.log).call(console,i.stack||i)}e=u.fire(t,"confirm:complete",[r])}return r&&e},blankInputs:function(t,e,n){var r,i,o,a=c(),s=e||"input,textarea",l=t.find(s),u={};return l.each(function(){(r=c(this)).is("input[type=radio]")?(o=r.attr("name"),u[o]||(0===t.find('input[type=radio]:checked[name="'+o+'"]').length&&(i=t.find('input[type=radio][name="'+o+'"]'),a=a.add(i)),u[o]=o)):(r.is("input[type=checkbox],input[type=radio]")?r.is(":checked"):!!r.val())===n&&(a=a.add(r))}),!!a.length&&a},nonBlankInputs:function(t,e){return u.blankInputs(t,e,!0)},stopEverything:function(t){return c(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(t){var e=t.data("disable-with");e!==l&&(t.data("ujs:enable-with",t.html()),t.html(e)),t.bind("click.railsDisable",function(t){return u.stopEverything(t)}),t.data("ujs:disabled",!0)},enableElement:function(t){t.data("ujs:enable-with")!==l&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable"),t.removeData("ujs:disabled")}},u.fire(t,"rails:attachBindings")&&(c.ajaxPrefilter(function(t,e,n){t.crossDomain||u.CSRFProtection(n)}),c(window).on("pageshow.rails",function(){c(c.rails.enableSelector).each(function(){var t=c(this);t.data("ujs:disabled")&&c.rails.enableFormElement(t)}),c(c.rails.linkDisableSelector).each(function(){var t=c(this);t.data("ujs:disabled")&&c.rails.enableElement(t)})}),t.on("ajax:complete",u.linkDisableSelector,function(){u.enableElement(c(this))}),t.on("ajax:complete",u.buttonDisableSelector,function(){u.enableFormElement(c(this))}),t.on("click.rails",u.linkClickSelector,function(t){var e=c(this),n=e.data("method"),r=e.data("params"),i=t.metaKey||t.ctrlKey;if(!u.allowAction(e))return u.stopEverything(t);if(!i&&e.is(u.linkDisableSelector)&&u.disableElement(e),u.isRemote(e)){if(i&&(!n||"GET"===n)&&!r)return!0;var o=u.handleRemote(e);return!1===o?u.enableElement(e):o.fail(function(){u.enableElement(e)}),!1}return n?(u.handleMethod(e),!1):void 0}),t.on("click.rails",u.buttonClickSelector,function(t){var e=c(this);if(!u.allowAction(e)||!u.isRemote(e))return u.stopEverything(t);e.is(u.buttonDisableSelector)&&u.disableFormElement(e);var n=u.handleRemote(e);return!1===n?u.enableFormElement(e):n.fail(function(){u.enableFormElement(e)}),!1}),t.on("change.rails",u.inputChangeSelector,function(t){var e=c(this);return u.allowAction(e)&&u.isRemote(e)?(u.handleRemote(e),!1):u.stopEverything(t)}),t.on("submit.rails",u.formSubmitSelector,function(t){var e,n,r=c(this),i=u.isRemote(r);if(!u.allowAction(r))return u.stopEverything(t);if(r.attr("novalidate")===l)if(r.data("ujs:formnovalidate-button")===l){if((e=u.blankInputs(r,u.requiredInputSelector,!1))&&u.fire(r,"ajax:aborted:required",[e]))return u.stopEverything(t)}else r.data("ujs:formnovalidate-button",l);if(i){if(n=u.nonBlankInputs(r,u.fileInputSelector)){setTimeout(function(){u.disableFormElements(r)},13);var o=u.fire(r,"ajax:aborted:file",[n]);return o||setTimeout(function(){u.enableFormElements(r)},13),o}return u.handleRemote(r),!1}setTimeout(function(){u.disableFormElements(r)},13)}),t.on("click.rails",u.formInputClickSelector,function(t){var e=c(this);if(!u.allowAction(e))return u.stopEverything(t);var n=e.attr("name"),r=n?{name:n,value:e.val()}:null,i=e.closest("form");0===i.length&&(i=c("#"+e.attr("form"))),i.data("ujs:submit-button",r),i.data("ujs:formnovalidate-button",e.attr("formnovalidate")),i.data("ujs:submit-button-formaction",e.attr("formaction")),i.data("ujs:submit-button-formmethod",e.attr("formmethod"))}),t.on("ajax:send.rails",u.formSubmitSelector,function(t){this===t.target&&u.disableFormElements(c(this))}),t.on("ajax:complete.rails",u.formSubmitSelector,function(t){this===t.target&&u.enableFormElements(c(this))}),c(function(){u.refreshCSRFTokens()}))}(jQuery),function(){var e=function(t,e){return function(){return t.apply(e,arguments)}};window.RecurringSelectDialog=function(){function t(t){this.recurring_selector=t,this.weekOfMonthChanged=e(this.weekOfMonthChanged,this),this.dateOfMonthChanged=e(this.dateOfMonthChanged,this),this.daysChanged=e(this.daysChanged,this),this.intervalChanged=e(this.intervalChanged,this),this.freqChanged=e(this.freqChanged,this),this.toggle_month_view=e(this.toggle_month_view,this),this.init_calendar_weeks=e(this.init_calendar_weeks,this),this.init_calendar_days=e(this.init_calendar_days,this),this.summaryFetchSuccess=e(this.summaryFetchSuccess,this),this.summaryUpdate=e(this.summaryUpdate,this),this.save=e(this.save,this),this.outerCancel=e(this.outerCancel,this),this.cancel=e(this.cancel,this),this.positionDialogVert=e(this.positionDialogVert,this),this.current_rule=this.recurring_selector.recurring_select("current_rule"),this.initDialogBox(),null==this.current_rule.hash||null==this.current_rule.hash.rule_type?this.freqChanged():setTimeout(this.positionDialogVert,10)}return t.prototype.initDialogBox=function(){var t;return $(".rs_dialog_holder").remove(),t=$("body"),$(".ui-page-active").length&&(t=$(".ui-page-active")),$(".modal:visible").length&&(t=$(".modal-with-recurring")),t.append(this.template()),this.outer_holder=$(".rs_dialog_holder"),this.inner_holder=this.outer_holder.find(".rs_dialog"),this.content=this.outer_holder.find(".rs_dialog_content"),this.positionDialogVert(!0),this.mainEventInit(),this.freqInit(),this.summaryInit(),this.outer_holder.trigger("recurring_select:dialog_opened"),this.freq_select.focus()},t.prototype.positionDialogVert=function(t){var e,n,r,i,o;return i=$(window).height(),$(window).width(),(e=this.content.outerHeight())<80&&(e=80),(n=(i-e)/2-30)<10&&(n=10),r={"margin-top":n+"px","min-height":e+"px"},null!=t?(this.inner_holder.css(r),this.inner_holder.trigger("recurring_select:dialog_positioned")):(this.inner_holder.addClass("animated"),this.inner_holder.animate(r,200,(o=this,function(){return o.inner_holder.removeClass("animated"),o.content.css({width:"auto"}),o.inner_holder.trigger("recurring_select:dialog_positioned")})))},t.prototype.cancel=function(){return this.outer_holder.remove(),this.recurring_selector.recurring_select("cancel")},t.prototype.outerCancel=function(t){if($(t.target).hasClass("rs_dialog_holder"))return this.cancel()},t.prototype.save=function(){if(null!=this.current_rule.str)return this.outer_holder.remove(),this.recurring_selector.recurring_select("save",this.current_rule)},t.prototype.mainEventInit=function(){return this.outer_holder.on("click tap",this.outerCancel),this.content.on("click tap","h1 a",this.cancel),this.save_button=this.content.find("input.rs_save").on("click tap",this.save),this.content.find("input.rs_cancel").on("click tap",this.cancel)},t.prototype.freqInit=function(){var t;return this.freq_select=this.outer_holder.find(".rs_frequency"),null!=this.current_rule.hash&&null!=(t=this.current_rule.hash.rule_type)&&(-1!==t.search(/Weekly/)?(this.freq_select.prop("selectedIndex",1),this.initWeeklyOptions()):-1!==t.search(/Monthly/)?(this.freq_select.prop("selectedIndex",2),this.initMonthlyOptions()):-1!==t.search(/Yearly/)?(this.freq_select.prop("selectedIndex",3),this.initYearlyOptions()):this.initDailyOptions()),this.freq_select.on("change",this.freqChanged)},t.prototype.initDailyOptions=function(){var t,e;return(t=(e=this.content.find(".daily_options")).find(".rs_daily_interval")).val(this.current_rule.hash.interval),t.on("change keyup",this.intervalChanged),e.show()},t.prototype.initWeeklyOptions=function(){var t,n;return(t=(n=this.content.find(".weekly_options")).find(".rs_weekly_interval")).val(this.current_rule.hash.interval),t.on("change keyup",this.intervalChanged),n.find(".day_holder a").each(function(t,e){return $(e).removeClass("selected")}),null!=this.current_rule.hash.validations&&null!=this.current_rule.hash.validations.day&&$(this.current_rule.hash.validations.day).each(function(t,e){return n.find(".day_holder a[data-value='"+e+"']").addClass("selected")}),n.off("click",".day_holder a").on("click",".day_holder a",this.daysChanged),n.show()},t.prototype.initMonthlyOptions=function(){var t,e,n,r,i,o;return(i=(o=this.content.find(".monthly_options")).find(".rs_monthly_interval")).val(this.current_rule.hash.interval),i.on("change keyup",this.intervalChanged),(t=this.current_rule.hash).validations||(t.validations={}),(e=this.current_rule.hash.validations).day_of_month||(e.day_of_month=[]),(n=this.current_rule.hash.validations).day_of_week||(n.day_of_week={}),this.init_calendar_days(o),this.init_calendar_weeks(o),r=0<Object.keys(this.current_rule.hash.validations.day_of_week).length,o.find(".monthly_rule_type_week").prop("checked",r),o.find(".monthly_rule_type_day").prop("checked",!r),this.toggle_month_view(),o.find("input[name=monthly_rule_type]").on("change",this.toggle_month_view),o.show()},t.prototype.initYearlyOptions=function(){var t,e;return(t=(e=this.content.find(".yearly_options")).find(".rs_yearly_interval")).val(this.current_rule.hash.interval),t.on("change keyup",this.intervalChanged),e.show()},t.prototype.summaryInit=function(){return this.summary=this.outer_holder.find(".rs_summary"),this.summaryUpdate()},t.prototype.summaryUpdate=function(){var t;return this.summary.width(this.content.width()),null!=this.current_rule.hash&&null!=this.current_rule.str?(this.summary.removeClass("fetching"),this.save_button.removeClass("disabled"),(t=this.current_rule.str.replace("*","")).length<20&&(t=$.fn.recurring_select.texts.summary+": "+t),this.summary.find("span").html(t)):(this.summary.addClass("fetching"),this.save_button.addClass("disabled"),this.summary.find("span").html(""),this.summaryFetch())},t.prototype.summaryFetch=function(){if(null!=this.current_rule.hash&&null!=this.current_rule.hash.rule_type)return this.current_rule.hash.week_start=$.fn.recurring_select.texts.first_day_of_week,$.ajax({url:"/recurring_select/translate/"+$.fn.recurring_select.texts.locale_iso_code,type:"POST",data:this.current_rule.hash,success:this.summaryFetchSuccess})},t.prototype.summaryFetchSuccess=function(t){return this.current_rule.str=t,this.summaryUpdate(),this.content.css({width:"auto"})},t.prototype.init_calendar_days=function(t){var e,n,r,i,o;for((i=t.find(".rs_calendar_day")).html(""),o=r=1;r<=31;o=++r)i.append(e=$(document.createElement("a")).text(o)),-1!==$.inArray(o,this.current_rule.hash.validations.day_of_month)&&e.addClass("selected");return i.append(n=$(document.createElement("a")).text($.fn.recurring_select.texts.last_day)),n.addClass("end_of_month"),-1!==$.inArray(-1,this.current_rule.hash.validations.day_of_month)&&n.addClass("selected"),i.find("a").on("click tap",this.dateOfMonthChanged)},t.prototype.init_calendar_weeks=function(r){var t,e,n,i,o,a,s,l,u,c,h,p,f,d;for((l=r.find(".rs_calendar_week")).html(""),f=$.fn.recurring_select.texts.order,d=$.fn.recurring_select.options.monthly.show_week,t=$.fn.recurring_select.texts.days_first_letter,o=i=0,s=(c=[1,2,3,4,5,-1]).length;i<s;o=++i)if(u=c[o],d[o])for(l.append("<span>"+f[u-1]+"</span>"),n=a=h=$.fn.recurring_select.texts.first_day_of_week,p=7+$.fn.recurring_select.texts.first_day_of_week;h<=p?a<p:p<a;n=h<=p?++a:--a)n%=7,(e=$("<a>",{text:t[n]})).attr("day",n),e.attr("instance",u),l.append(e);return $.each(this.current_rule.hash.validations.day_of_week,function(n,t){return $.each(t,function(t,e){return r.find("a[day='"+n+"'][instance='"+e+"']").addClass("selected")})}),l.find("a").on("click tap",this.weekOfMonthChanged)},t.prototype.toggle_month_view=function(){var t;return t=this.content.find(".monthly_rule_type_week").prop("checked"),this.content.find(".rs_calendar_week").toggle(t),this.content.find(".rs_calendar_day").toggle(!t)},t.prototype.freqChanged=function(){var t;switch($.isPlainObject(this.current_rule.hash)||(this.current_rule.hash=null),(t=this.current_rule).hash||(t.hash={}),this.current_rule.hash.interval=1,this.current_rule.hash.until=null,this.current_rule.hash.count=null,this.current_rule.hash.validations=null,this.content.find(".freq_option_section").hide(),this.content.find("input[type=radio], input[type=checkbox]").prop("checked",!1),this.freq_select.val()){case"Weekly":this.current_rule.hash.rule_type="IceCube::WeeklyRule",this.current_rule.str=$.fn.recurring_select.texts.weekly,this.initWeeklyOptions();break;case"Monthly":this.current_rule.hash.rule_type="IceCube::MonthlyRule",this.current_rule.str=$.fn.recurring_select.texts.monthly,this.initMonthlyOptions();break;case"Yearly":this.current_rule.hash.rule_type="IceCube::YearlyRule",this.current_rule.str=$.fn.recurring_select.texts.yearly,this.initYearlyOptions();break;default:this.current_rule.hash.rule_type="IceCube::DailyRule",this.current_rule.str=$.fn.recurring_select.texts.daily,this.initDailyOptions()}return this.summaryUpdate(),this.positionDialogVert()},t.prototype.intervalChanged=function(t){var e;return this.current_rule.str=null,(e=this.current_rule).hash||(e.hash={}),this.current_rule.hash.interval=parseInt($(t.currentTarget).val()),(this.current_rule.hash.interval<1||isNaN(this.current_rule.hash.interval))&&(this.current_rule.hash.interval=1),this.summaryUpdate()},t.prototype.daysChanged=function(t){var e,n;return $(t.currentTarget).toggleClass("selected"),this.current_rule.str=null,(e=this.current_rule).hash||(e.hash={}),this.current_rule.hash.validations={},n=this.content.find(".day_holder a.selected").map(function(){return parseInt($(this).data("value"))}),this.current_rule.hash.validations.day=n.get(),this.summaryUpdate(),!1},t.prototype.dateOfMonthChanged=function(t){var e,n;return $(t.currentTarget).toggleClass("selected"),this.current_rule.str=null,(e=this.current_rule).hash||(e.hash={}),this.current_rule.hash.validations={},n=this.content.find(".monthly_options .rs_calendar_day a.selected").map(function(){return $(this).text()===$.fn.recurring_select.texts.last_day?-1:parseInt($(this).text())}),this.current_rule.hash.validations.day_of_week={},this.current_rule.hash.validations.day_of_month=n.get(),this.summaryUpdate(),!1},t.prototype.weekOfMonthChanged=function(t){var e,o;return $(t.currentTarget).toggleClass("selected"),this.current_rule.str=null,(e=this.current_rule).hash||(e.hash={}),this.current_rule.hash.validations={},
this.current_rule.hash.validations.day_of_month=[],this.current_rule.hash.validations.day_of_week={},this.content.find(".monthly_options .rs_calendar_week a.selected").each((o=this,function(t,e){var n,r,i;return r=parseInt($(e).attr("day")),i=parseInt($(e).attr("instance")),(n=o.current_rule.hash.validations.day_of_week)[r]||(n[r]=[]),o.current_rule.hash.validations.day_of_week[r].push(i)})),this.summaryUpdate(),!1},t.prototype.template=function(){var t,e,n,r,i;for(i="<div class='rs_dialog_holder'> <div class='rs_dialog'> <div class='rs_dialog_content'> <h1>"+$.fn.recurring_select.texts.repeat+" <a href='#' title='"+$.fn.recurring_select.texts.cancel+"' Alt='"+$.fn.recurring_select.texts.cancel+"'></a> </h1> <p class='frequency-select-wrapper'> <label for='rs_frequency'>"+$.fn.recurring_select.texts.frequency+":</label> <select data-wrapper-class='ui-recurring-select' id='rs_frequency' class='rs_frequency' name='rs_frequency'> <option value='Daily'>"+$.fn.recurring_select.texts.daily+"</option> <option value='Weekly'>"+$.fn.recurring_select.texts.weekly+"</option> <option value='Monthly'>"+$.fn.recurring_select.texts.monthly+"</option> <option value='Yearly'>"+$.fn.recurring_select.texts.yearly+"</option> </select> </p> <div class='daily_options freq_option_section'> <p> "+$.fn.recurring_select.texts.every+" <input type='text' data-wrapper-class='ui-recurring-select' name='rs_daily_interval' class='rs_daily_interval rs_interval' value='1' size='2' /> "+$.fn.recurring_select.texts.days+" </p> </div> <div class='weekly_options freq_option_section'> <p> "+$.fn.recurring_select.texts.every+" <input type='text' data-wrapper-class='ui-recurring-select' name='rs_weekly_interval' class='rs_weekly_interval rs_interval' value='1' size='2' /> "+$.fn.recurring_select.texts.weeks_on+": </p> <div class='day_holder'>",t=e=n=$.fn.recurring_select.texts.first_day_of_week,r=7+$.fn.recurring_select.texts.first_day_of_week;n<=r?e<r:r<e;t=n<=r?++e:--e)i+="<a href='#' data-value='"+(t%=7)+"'>"+$.fn.recurring_select.texts.days_first_letter[t]+"</a>";return i+"</div> <span style='clear:both; visibility:hidden; height:1px;'>.</span> </div> <div class='monthly_options freq_option_section'> <p> "+$.fn.recurring_select.texts.every+" <input type='text' data-wrapper-class='ui-recurring-select' name='rs_monthly_interval' class='rs_monthly_interval rs_interval' value='1' size='2' /> "+$.fn.recurring_select.texts.months+": </p> <p class='monthly_rule_type'> <span><label for='monthly_rule_type_day'>"+$.fn.recurring_select.texts.day_of_month+"</label><input type='radio' class='monthly_rule_type_day' name='monthly_rule_type' id='monthly_rule_type_day' value='true' /></span> <span><label for='monthly_rule_type_week'>"+$.fn.recurring_select.texts.day_of_week+"</label><input type='radio' class='monthly_rule_type_week' name='monthly_rule_type' id='monthly_rule_type_week' value='true' /></span> </p> <p class='rs_calendar_day'></p> <p class='rs_calendar_week'></p> </div> <div class='yearly_options freq_option_section'> <p> "+$.fn.recurring_select.texts.every+" <input type='text' data-wrapper-class='ui-recurring-select' name='rs_yearly_interval' class='rs_yearly_interval rs_interval' value='1' size='2' /> "+$.fn.recurring_select.texts.years+" </p> </div> <p class='rs_summary'> <span></span> </p> <div class='controls'> <input type='button' data-wrapper-class='ui-recurring-select' class='rs_save' value='"+$.fn.recurring_select.texts.ok+"' /> <input type='button' data-wrapper-class='ui-recurring-select' class='rs_cancel' value='"+$.fn.recurring_select.texts.cancel+"' /> </div> </div> </div> </div>"},t}()}.call(this),function(){var i,n;(i=jQuery)(function(){return i(document).on("focus",".recurring_select",function(){return i(this).recurring_select("set_initial_values")}),i(document).on("change",".recurring_select",function(){return i(this).recurring_select("changed")})}),n={set_initial_values:function(){return this.data("initial-value-hash",this.val()),this.data("initial-value-str",i(this.find("option").get()[this.prop("selectedIndex")]).text())},changed:function(){return"custom"===this.val()?n.open_custom.apply(this):n.set_initial_values.apply(this)},open_custom:function(){return this.data("recurring-select-active",!0),new RecurringSelectDialog(this),this.blur()},save:function(t){var e;return this.find("option[data-custom]").remove(),e=JSON.stringify(t.hash),-1===i.inArray(e,this.find("option").map(function(){return i(this).val()}))&&n.insert_option.apply(this,[t.str,e]),this.val(e),n.set_initial_values.apply(this),this.trigger("recurring_select:save")},current_rule:function(){return{str:this.data("initial-value-str"),hash:i.parseJSON(this.data("initial-value-hash"))}},cancel:function(){return this.val(this.data("initial-value-hash")),this.data("recurring-select-active",!1),this.trigger("recurring_select:cancel")},insert_option:function(t,e){var n,r;return 0===(r=this.find("option:disabled")).length&&(r=this.find("option")),r=r.last(),(n=i(document.createElement("option"))).attr("data-custom",!0),"*"!==t.substr(t.length-1)&&(t+="*"),n.text(t),n.val(e),n.insertBefore(r)},methods:function(){return n}},i.fn.recurring_select=function(t){return t in n?n[t].apply(this,Array.prototype.slice.call(arguments,1)):i.error("Method "+t+" does not exist on jQuery.recurring_select")},i.fn.recurring_select.options={monthly:{show_week:[!0,!0,!0,!0,!1,!1]}},i.fn.recurring_select.texts={locale_iso_code:"en",repeat:"Repeat",last_day:"Last Day",frequency:"Frequency",daily:"Daily",weekly:"Weekly",monthly:"Monthly",yearly:"Yearly",every:"Every",days:"day(s)",weeks_on:"week(s) on",months:"month(s)",years:"year(s)",day_of_month:"Day of month",day_of_week:"Day of week",cancel:"Cancel",ok:"OK",summary:"Summary",first_day_of_week:0,days_first_letter:["S","M","T","W","T","F","S"],order:["1st","2nd","3rd","4th","5th","Last"],show_week:[!0,!0,!0,!0,!1,!1]}}.call(this);var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};FlatpickrInstance.prototype={formats:{Z:function(t){return t.toISOString()},D:function(t){return this.l10n.weekdays.shorthand[this.formats.w(t)]},F:function(t){return this.utils.monthToStr(this.formats.n(t)-1,!1)},G:function(t){return FlatpickrInstance.prototype.pad(FlatpickrInstance.prototype.formats.h(t))},H:function(t){return FlatpickrInstance.prototype.pad(t.getHours())},J:function(t){return t.getDate()+this.l10n.ordinal(t.getDate())},K:function(t){return 11<t.getHours()?"PM":"AM"},M:function(t){return this.utils.monthToStr(t.getMonth(),!0)},S:function(t){return FlatpickrInstance.prototype.pad(t.getSeconds())},U:function(t){return t.getTime()/1e3},W:function(t){return this.config.getWeek(t)},Y:function(t){return t.getFullYear()},d:function(t){return FlatpickrInstance.prototype.pad(t.getDate())},h:function(t){return t.getHours()%12?t.getHours()%12:12},i:function(t){return FlatpickrInstance.prototype.pad(t.getMinutes())},j:function(t){return t.getDate()},l:function(t){return this.l10n.weekdays.longhand[t.getDay()]},m:function(t){return FlatpickrInstance.prototype.pad(t.getMonth()+1)},n:function(t){return t.getMonth()+1},s:function(t){return t.getSeconds()},w:function(t){return t.getDay()},y:function(t){return String(t.getFullYear()).substring(2)}},formatDate:function(r,t){var i=this;return this.config!==undefined&&this.config.formatDate!==undefined?this.config.formatDate(r,t):t.split("").map(function(t,e,n){return i.formats[t]&&"\\"!==n[e-1]?i.formats[t](r):"\\"!==t?t:""}).join("")},revFormat:{D:function(){},F:function(t,e){t.setMonth(this.l10n.months.longhand.indexOf(e))},G:function(t,e){t.setHours(parseFloat(e))},H:function(t,e){t.setHours(parseFloat(e))},J:function(t,e){t.setDate(parseFloat(e))},K:function(t,e){var n=t.getHours();12!==n&&t.setHours(n%12+12*/pm/i.test(e))},M:function(t,e){t.setMonth(this.l10n.months.shorthand.indexOf(e))},S:function(t,e){t.setSeconds(e)},U:function(t,e){return new Date(1e3*parseFloat(e))},W:function(t,e){return e=parseInt(e),new Date(t.getFullYear(),0,2+7*(e-1),0,0,0,0,0)},Y:function(t,e){t.setFullYear(e)},Z:function(t,e){return new Date(e)},d:function(t,e){t.setDate(parseFloat(e))},h:function(t,e){t.setHours(parseFloat(e))},i:function(t,e){t.setMinutes(parseFloat(e))},j:function(t,e){t.setDate(parseFloat(e))},l:function(){},m:function(t,e){t.setMonth(parseFloat(e)-1)},n:function(t,e){t.setMonth(parseFloat(e)-1)},s:function(t,e){t.setSeconds(parseFloat(e))},w:function(){},y:function(t,e){t.setFullYear(2e3+parseFloat(e))}},tokenRegex:{D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"(am|AM|Am|aM|pm|PM|Pm|pM)",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},pad:function(t){return("0"+t).slice(-2)},parseDate:function(t,e,n){if(0!==t&&!t)return null;var r=t;if(t instanceof Date)t=new Date(t.getTime());else if(t.toFixed!==undefined)t=new Date(t);else{var i=e||(this.config||flatpickr.defaultConfig).dateFormat;if("today"===(t=String(t).trim()))t=new Date,n=!0;else if(/Z$/.test(t)||/GMT$/.test(t))t=new Date(t);else if(this.config&&this.config.parseDate)t=this.config.parseDate(t,i);else{for(var o=this.config&&this.config.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0),a=void 0,s=0,l=0,u="";s<i.length;s++){var c=i[s],h="\\"===c,p="\\"===i[s-1]||h;if(this.tokenRegex[c]&&!p){u+=this.tokenRegex[c];var f=new RegExp(u).exec(t);f&&(a=!0)&&(o=this.revFormat[c](o,f[++l])||o)}else h||(u+=".")}t=a?o:null}}return t instanceof Date?(!0===n&&t.setHours(0,0,0,0),t):(console.warn("flatpickr: invalid date "+r),console.info(this.element),null)}},"undefined"!=typeof HTMLElement&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(t){return _flatpickr(this,t)},HTMLElement.prototype.flatpickr=function(t){return _flatpickr([this],t)}),flatpickr.defaultConfig=FlatpickrInstance.defaultConfig={mode:"single",position:"auto",animate:-1===window.navigator.userAgent.indexOf("MSIE"),wrap:!1,weekNumbers:!1,allowInput:!1,clickOpens:!0,closeOnSelect:!0,time_24hr:!1,enableTime:!1,noCalendar:!1,dateFormat:"Y-m-d",ariaDateFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",altFormat:"F j, Y",defaultDate:null,minDate:null,maxDate:null,parseDate:null,formatDate:null,getWeek:function(t){var e=new Date(t.getTime()),n=new Date(e.getFullYear(),0,1);return Math.ceil(((e-n)/864e5+n.getDay()+1)/7)},enable:[],disable:[],shorthandCurrentMonth:!1,inline:!1,"static":!1,appendTo:null,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",enableSeconds:!1,hourIncrement:1,minuteIncrement:5,defaultHour:12,defaultMinute:0,disableMobile:!1,locale:"default",plugins:[],ignoredFocusElements:[],onClose:undefined,onChange:undefined,onDayCreate:undefined,onMonthChange:undefined,onOpen:undefined,onParseConfig:undefined,onReady:undefined,onValueUpdate:undefined,onYearChange:undefined,onKeyDown:undefined,onDestroy:undefined},flatpickr.l10ns={en:{weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(t){var e=t%100;if(3<e&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle"}},flatpickr.l10ns["default"]=Object.create(flatpickr.l10ns.en),flatpickr.localize=function(t){return _extends(flatpickr.l10ns["default"],t||{})},flatpickr.setDefaults=function(t){return _extends(flatpickr.defaultConfig,t||{})},"undefined"!=typeof jQuery&&(jQuery.fn.flatpickr=function(t){return _flatpickr(this,t)}),Date.prototype.fp_incr=function(t){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+parseInt(t,10))},"undefined"!=typeof module&&(module.exports=flatpickr),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("jquery"),require("popper.js")):"function"==typeof define&&define.amd?define(["exports","jquery","popper.js"],e):e(t.bootstrap={},t.jQuery,t.Popper)}(this,function(t,e,c){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(t){i(e,t,n[t])})}return e}function n(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}e=e&&e.hasOwnProperty("default")?e["default"]:e,c=c&&c.hasOwnProperty("default")?c["default"]:c;var o,l,u,h,p,f,d,m,g,y,v,_,x,b,w,E,T,S,C,A,I,M,k,D,z,P,L,O,R,B,F,N,j,V,$,q,U,H,W,G,Z,Y,X,K,J,Q,tt,et,nt,rt,it,ot,at,st,lt,ut,ct,ht,pt,ft,dt,mt,gt,yt,vt,_t,xt,bt,wt,Et,Tt,St,Ct,At,It,Mt,kt,Dt,zt,Pt,Lt,Ot,Rt,Bt,Ft,Nt,jt,Vt,$t,qt,Ut,Ht,Wt,Gt,Zt,Yt,Xt,Kt,Jt,Qt,te,ee,ne,re,ie,oe,ae,se,le,ue,ce,he,pe,fe,de,me,ge,ye,ve,_e,xe,be,we,Ee,Te,Se,Ce,Ae,Ie,Me,ke,De,ze,Pe,Le,Oe,Re,Be,Fe,Ne,je,Ve,$e,qe,Ue=function(r){function s(t){return{}.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase()}function t(){return{bindType:i,delegateType:i,handle:function(t){return r(t.target).is(this)?t.handleObj.handler.apply(this,arguments):undefined}}}function e(t){var e=this,n=!1;return r(this).one(l.TRANSITION_END,function(){n=!0}),setTimeout(function(){n||l.triggerTransitionEnd(e)},t),this}function n(){r.fn.emulateTransitionEnd=e,r.event.special[l.TRANSITION_END]=t()}var i="transitionend",o=1e6,a=1e3,l={TRANSITION_END:"bsTransitionEnd",getUID:function(t){for(;t+=~~(Math.random()*o),document.getElementById(t););return t},getSelectorFromElement:function(t){var e=t.getAttribute("data-target");e&&"#"!==e||(e=t.getAttribute("href")||"");try{return 0<r(document).find(e).length?e:null}catch(n){return null}},getTransitionDurationFromElement:function(t){if(!t)return 0;var e=r(t).css("transition-duration");return parseFloat(e)?(e=e.split(",")[0],parseFloat(e)*a):0},reflow:function(t){return t.offsetHeight},triggerTransitionEnd:function(t){r(t).trigger(i)},supportsTransitionEnd:function(){return Boolean(i)},isElement:function(t){return(t[0]||t).nodeType},typeCheckConfig:function(t,e,n){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r],o=e[r],a=o&&l.isElement(o)?"element":s(o);if(!new RegExp(i).test(a))throw new Error(t.toUpperCase()+': Option "'+r+'" provided type "'+a+'" but expected type "'+i+'".')}}};return n(),l}(e),He=(l="alert",u="4.1.1",p="."+(h="bs.alert"),f=".data-api",d=(o=e).fn[l],m={DISMISS:'[data-dismiss="alert"]'},g={CLOSE:"close"+p,CLOSED:"closed"+p,CLICK_DATA_API:"click"+p+f},y={ALERT:"alert",FADE:"fade",SHOW:"show"},v=function(){function r(t){this._element=t}var t=r.prototype;return t.close=function(t){var e=this._element;t&&(e=this._getRootElement(t)),this._triggerCloseEvent(e).isDefaultPrevented()||this._removeElement(e)},t.dispose=function(){o.removeData(this._element,h),this._element=null},t._getRootElement=function(t){var e=Ue.getSelectorFromElement(t),n=!1;return e&&(n=o(e)[0]),n||(n=o(t).closest("."+y.ALERT)[0]),n},t._triggerCloseEvent=function(t){var e=o.Event(g.CLOSE);return o(t).trigger(e),e},t._removeElement=function(e){var n=this;if(o(e).removeClass(y.SHOW),o(e).hasClass(y.FADE)){var t=Ue.getTransitionDurationFromElement(e);o(e).one(Ue.TRANSITION_END,function(t){return n._destroyElement(e,t)}).emulateTransitionEnd(t)}else this._destroyElement(e)},t._destroyElement=function(t){o(t).detach().trigger(g.CLOSED).remove()},r._jQueryInterface=function(n){return this.each(function(){var t=o(this),e=t.data(h);e||(e=new r(this),t.data(h,e)),"close"===n&&e[n](this)})},r._handleDismiss=function(e){return function(t){t&&t.preventDefault(),e.close(this)}},a(r,null,[{key:"VERSION",get:function(){return u}}]),r}(),o(document).on(g.CLICK_DATA_API,m.DISMISS,v._handleDismiss(new v)),o.fn[l]=v._jQueryInterface,o.fn[l].Constructor=v,o.fn[l].noConflict=function(){return o.fn[l]=d,v._jQueryInterface},v),We=(x="button",b="4.1.1",E="."+(w="bs.button"),T=".data-api",S=(_=e).fn[x],C={ACTIVE:"active",BUTTON:"btn",FOCUS:"focus"},A={DATA_TOGGLE_CARROT:'[data-toggle^="button"]',DATA_TOGGLE:'[data-toggle="buttons"]',INPUT:"input",ACTIVE:".active",BUTTON:".btn"},I={CLICK_DATA_API:"click"+E+T,FOCUS_BLUR_DATA_API:"focus"+E+T+" blur"+E+T},M=function(){function n(t){this._element=t}var t=n.prototype;return t.toggle=function(){var t=!0,e=!0,n=_(this._element).closest(A.DATA_TOGGLE)[0];if(n){var r=_(this._element).find(A.INPUT)[0];if(r){if("radio"===r.type)if(r.checked&&_(this._element).hasClass(C.ACTIVE))t=!1;else{var i=_(n).find(A.ACTIVE)[0];i&&_(i).removeClass(C.ACTIVE)}if(t){if(r.hasAttribute("disabled")||n.hasAttribute("disabled")||r.classList.contains("disabled")||n.classList.contains("disabled"))return;r.checked=!_(this._element).hasClass(C.ACTIVE),_(r).trigger("change")}r.focus(),e=!1}}e&&this._element.setAttribute("aria-pressed",!_(this._element).hasClass(C.ACTIVE)),t&&_(this._element).toggleClass(C.ACTIVE)},t.dispose=function(){_.removeData(this._element,w),this._element=null},n._jQueryInterface=function(e){return this.each(function(){var t=_(this).data(w);t||(t=new n(this),_(this).data(w,t)),"toggle"===e&&t[e]()})},a(n,null,[{key:"VERSION",get:function(){return b}}]),n}(),_(document).on(I.CLICK_DATA_API,A.DATA_TOGGLE_CARROT,function(t){t.preventDefault();var e=t.target;_(e).hasClass(C.BUTTON)||(e=_(e).closest(A.BUTTON)),M._jQueryInterface.call(_(e),"toggle")}).on(I.FOCUS_BLUR_DATA_API,A.DATA_TOGGLE_CARROT,function(t){var e=_(t.target).closest(A.BUTTON)[0];_(e).toggleClass(C.FOCUS,/^focus(in)?$/.test(t.type))}),_.fn[x]=M._jQueryInterface,_.fn[x].Constructor=M,_.fn[x].noConflict=function(){return _.fn[x]=S,M._jQueryInterface},M),Ge=(D="carousel",z="4.1.1",L="."+(P="bs.carousel"),O=".data-api",R=(k=e).fn[D],B=37,F=39,j={interval:5e3,keyboard:!0,slide:!(N=500),pause:"hover",wrap:!0},V={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean"},$={NEXT:"next",PREV:"prev",LEFT:"left",RIGHT:"right"},q={SLIDE:"slide"+L,SLID:"slid"+L,KEYDOWN:"keydown"+L,MOUSEENTER:"mouseenter"+L,MOUSELEAVE:"mouseleave"+L,TOUCHEND:"touchend"+L,LOAD_DATA_API:"load"+L+O,CLICK_DATA_API:"click"+L+O},U={CAROUSEL:"carousel",ACTIVE:"active",SLIDE:"slide",RIGHT:"carousel-item-right",LEFT:"carousel-item-left",NEXT:"carousel-item-next",PREV:"carousel-item-prev",ITEM:"carousel-item"},H={ACTIVE:".active",ACTIVE_ITEM:".active.carousel-item",ITEM:".carousel-item",NEXT_PREV:".carousel-item-next, .carousel-item-prev",INDICATORS:".carousel-indicators",DATA_SLIDE:"[data-slide], [data-slide-to]",DATA_RIDE:'[data-ride="carousel"]'},W=function(){function o(t,e){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this._config=this._getConfig(e),this._element=k(t)[0],this._indicatorsElement=k(this._element).find(H.INDICATORS)[0],this._addEventListeners()}var t=o.prototype;return t.next=function(){this._isSliding||this._slide($.NEXT)},t.nextWhenVisible=function(){!document.hidden&&k(this._element).is(":visible")&&"hidden"!==k(this._element).css("visibility")&&this.next()},t.prev=function(){this._isSliding||this._slide($.PREV)},t.pause=function(t){t||(this._isPaused=!0),k(this._element).find(H.NEXT_PREV)[0]&&(Ue.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},t.cycle=function(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},t.to=function(t){var e=this;this._activeElement=k(this._element).find(H.ACTIVE_ITEM)[0];var n=this._getItemIndex(this._activeElement);if(!(t>this._items.length-1||t<0))if(this._isSliding)k(this._element).one(q.SLID,function(){return e.to(t)});else{if(n===t)return this.pause(),void this.cycle();var r=n<t?$.NEXT:$.PREV;this._slide(r,this._items[t])}},t.dispose=function(){k(this._element).off(L),k.removeData(this._element,P),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},t._getConfig=function(t){return t=s({},j,t),Ue.typeCheckConfig(D,t,V),t},t._addEventListeners=function(){var e=this;this._config.keyboard&&k(this._element).on(q.KEYDOWN,function(t){return e._keydown(t)}),"hover"===this._config.pause&&(k(this._element).on(q.MOUSEENTER,function(t){return e.pause(t)}).on(q.MOUSELEAVE,function(t){return e.cycle(t)}),"ontouchstart"in document.documentElement&&k(this._element).on(q.TOUCHEND,function(){e.pause(),e.touchTimeout&&clearTimeout(e.touchTimeout),e.touchTimeout=setTimeout(function(t){return e.cycle(t)},N+e._config.interval)}))},t._keydown=function(t){if(!/input|textarea/i.test(t.target.tagName))switch(t.which){case B:t.preventDefault(),this.prev();break;case F:t.preventDefault(),this.next()}},t._getItemIndex=function(t){return this._items=k.makeArray(k(t).parent().find(H.ITEM)),this._items.indexOf(t)},t._getItemByDirection=function(t,e){var n=t===$.NEXT,r=t===$.PREV,i=this._getItemIndex(e),o=this._items.length-1;if((r&&0===i||n&&i===o)&&!this._config.wrap)return e;var a=(i+(t===$.PREV?-1:1))%this._items.length;return-1===a?this._items[this._items.length-1]:this._items[a]},t._triggerSlideEvent=function(t,e){var n=this._getItemIndex(t),r=this._getItemIndex(k(this._element).find(H.ACTIVE_ITEM)[0]),i=k.Event(q.SLIDE,{relatedTarget:t,direction:e,from:r,to:n});return k(this._element).trigger(i),i},t._setActiveIndicatorElement=function(t){if(this._indicatorsElement){k(this._indicatorsElement).find(H.ACTIVE).removeClass(U.ACTIVE);var e=this._indicatorsElement.children[this._getItemIndex(t)];e&&k(e).addClass(U.ACTIVE)}},t._slide=function(t,e){var n,r,i,o=this,a=k(this._element).find(H.ACTIVE_ITEM)[0],s=this._getItemIndex(a),l=e||a&&this._getItemByDirection(t,a),u=this._getItemIndex(l),c=Boolean(this._interval);if(t===$.NEXT?(n=U.LEFT,r=U.NEXT,i=$.LEFT):(n=U.RIGHT,r=U.PREV,i=$.RIGHT),l&&k(l).hasClass(U.ACTIVE))this._isSliding=!1;else if(!this._triggerSlideEvent(l,i).isDefaultPrevented()&&a&&l){this._isSliding=!0,c&&this.pause(),this._setActiveIndicatorElement(l);var h=k.Event(q.SLID,{relatedTarget:l,direction:i,from:s,to:u});if(k(this._element).hasClass(U.SLIDE)){k(l).addClass(r),Ue.reflow(l),k(a).addClass(n),k(l).addClass(n);var p=Ue.getTransitionDurationFromElement(a);k(a).one(Ue.TRANSITION_END,function(){k(l).removeClass(n+" "+r).addClass(U.ACTIVE),k(a).removeClass(U.ACTIVE+" "+r+" "+n),o._isSliding=!1,setTimeout(function(){return k(o._element).trigger(h)},0)}).emulateTransitionEnd(p)}else k(a).removeClass(U.ACTIVE),k(l).addClass(U.ACTIVE),this._isSliding=!1,k(this._element).trigger(h);c&&this.cycle()}},o._jQueryInterface=function(r){return this.each(function(){var t=k(this).data(P),e=s({},j,k(this).data());"object"==typeof r&&(e=s({},e,r));var n="string"==typeof r?r:e.slide;if(t||(t=new o(this,e),k(this).data(P,t)),"number"==typeof r)t.to(r);else if("string"==typeof n){if("undefined"==typeof t[n])throw new TypeError('No method named "'+n+'"');t[n]()}else e.interval&&(t.pause(),t.cycle())})},o._dataApiClickHandler=function(t){var e=Ue.getSelectorFromElement(this);if(e){var n=k(e)[0];if(n&&k(n).hasClass(U.CAROUSEL)){var r=s({},k(n).data(),k(this).data()),i=this.getAttribute("data-slide-to");i&&(r.interval=!1),o._jQueryInterface.call(k(n),r),i&&k(n).data(P).to(i),t.preventDefault()}}},a(o,null,[{key:"VERSION",get:function(){return z}},{key:"Default",get:function(){return j}}]),o}(),k(document).on(q.CLICK_DATA_API,H.DATA_SLIDE,W._dataApiClickHandler),k(window).on(q.LOAD_DATA_API,function(){k(H.DATA_RIDE).each(function(){var t=k(this);W._jQueryInterface.call(t,t.data())})}),k.fn[D]=W._jQueryInterface,k.fn[D].Constructor=W,k.fn[D].noConflict=function(){return k.fn[D]=R,W._jQueryInterface},W),Ze=(Z="collapse",Y="4.1.1",K="."+(X="bs.collapse"),J=".data-api",Q=(G=e).fn[Z],tt={toggle:!0,parent:""},et={toggle:"boolean",parent:"(string|element)"},nt={SHOW:"show"+K,SHOWN:"shown"+K,HIDE:"hide"+K,HIDDEN:"hidden"+K,CLICK_DATA_API:"click"+K+J},rt={SHOW:"show",COLLAPSE:"collapse",COLLAPSING:"collapsing",COLLAPSED:"collapsed"},it={WIDTH:"width",HEIGHT:"height"},ot={ACTIVES:".show, .collapsing",DATA_TOGGLE:'[data-toggle="collapse"]'},at=function(){function l(t,e){this._isTransitioning=!1,this._element=t,this._config=this._getConfig(e),this._triggerArray=G.makeArray(G('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'));for(var n=G(ot.DATA_TOGGLE),r=0;r<n.length;r++){var i=n[r],o=Ue.getSelectorFromElement(i);null!==o&&0<G(o).filter(t).length&&(this._selector=o,this._triggerArray.push(i))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var t=l.prototype;return t.toggle=function(){G(this._element).hasClass(rt.SHOW)?this.hide():this.show()},t.show=function(){var t,e,n=this;if(!this._isTransitioning&&!G(this._element).hasClass(rt.SHOW)&&(this._parent&&0===(t=G.makeArray(G(this._parent).find(ot.ACTIVES).filter('[data-parent="'+this._config.parent+'"]'))).length&&(t=null),!(t&&(e=G(t).not(this._selector).data(X))&&e._isTransitioning))){var r=G.Event(nt.SHOW);if(G(this._element).trigger(r),!r.isDefaultPrevented()){t&&(l._jQueryInterface.call(G(t).not(this._selector),"hide"),e||G(t).data(X,null));var i=this._getDimension();G(this._element).removeClass(rt.COLLAPSE).addClass(rt.COLLAPSING),(this._element.style[i]=0)<this._triggerArray.length&&G(this._triggerArray).removeClass(rt.COLLAPSED).attr("aria-expanded",!0),this.setTransitioning(!0);var o=function(){G(n._element).removeClass(rt.COLLAPSING).addClass(rt.COLLAPSE).addClass(rt.SHOW),n._element.style[i]="",n.setTransitioning(!1),G(n._element).trigger(nt.SHOWN)},a="scroll"+(i[0].toUpperCase()+i.slice(1)),s=Ue.getTransitionDurationFromElement(this._element);G(this._element).one(Ue.TRANSITION_END,o).emulateTransitionEnd(s),this._element.style[i]=this._element[a]+"px"}}},t.hide=function(){var t=this;if(!this._isTransitioning&&G(this._element).hasClass(rt.SHOW)){var e=G.Event(nt.HIDE);if(G(this._element).trigger(e),!e.isDefaultPrevented()){var n=this._getDimension();if(this._element.style[n]=this._element.getBoundingClientRect()[n]+"px",Ue.reflow(this._element),G(this._element).addClass(rt.COLLAPSING).removeClass(rt.COLLAPSE).removeClass(rt.SHOW),0<this._triggerArray.length)for(var r=0;r<this._triggerArray.length;r++){var i=this._triggerArray[r],o=Ue.getSelectorFromElement(i);if(null!==o)G(o).hasClass(rt.SHOW)||G(i).addClass(rt.COLLAPSED).attr("aria-expanded",!1)}this.setTransitioning(!0);var a=function(){t.setTransitioning(!1),G(t._element).removeClass(rt.COLLAPSING).addClass(rt.COLLAPSE).trigger(nt.HIDDEN)};this._element.style[n]="";var s=Ue.getTransitionDurationFromElement(this._element);G(this._element).one(Ue.TRANSITION_END,a).emulateTransitionEnd(s)}}},t.setTransitioning=function(t){this._isTransitioning=t},t.dispose=function(){G.removeData(this._element,X),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},t._getConfig=function(t){return(t=s({},tt,t)).toggle=Boolean(t.toggle),Ue.typeCheckConfig(Z,t,et),t},t._getDimension=function(){return G(this._element).hasClass(it.WIDTH)?it.WIDTH:it.HEIGHT},t._getParent=function(){var n=this,t=null;Ue.isElement(this._config.parent)?(t=this._config.parent,"undefined"!=typeof this._config.parent.jquery&&(t=this._config.parent[0])):t=G(this._config.parent)[0];var e='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]';return G(t).find(e).each(function(t,e){n._addAriaAndCollapsedClass(l._getTargetFromElement(e),[e])}),t},t._addAriaAndCollapsedClass=function(t,e){if(t){var n=G(t).hasClass(rt.SHOW);0<e.length&&G(e).toggleClass(rt.COLLAPSED,!n).attr("aria-expanded",n)}},l._getTargetFromElement=function(t){var e=Ue.getSelectorFromElement(t);return e?G(e)[0]:null},l._jQueryInterface=function(r){return this.each(function(){var t=G(this),e=t.data(X),n=s({},tt,t.data(),"object"==typeof r&&r?r:{});if(!e&&n.toggle&&/show|hide/.test(r)&&(n.toggle=!1),e||(e=new l(this,n),t.data(X,e)),"string"==typeof r){if("undefined"==typeof e[r])throw new TypeError('No method named "'+r+'"');e[r]()}})},a(l,null,[{key:"VERSION",get:function(){return Y}},{key:"Default",get:function(){return tt}}]),l}(),G(document).on(nt.CLICK_DATA_API,ot.DATA_TOGGLE,function(t){"A"===t.currentTarget.tagName&&t.preventDefault();var n=G(this),e=Ue.getSelectorFromElement(this);G(e).each(function(){var t=G(this),e=t.data(X)?"toggle":n.data();at._jQueryInterface.call(t,e)})}),G.fn[Z]=at._jQueryInterface,G.fn[Z].Constructor=at,G.fn[Z].noConflict=function(){return G.fn[Z]=Q,at._jQueryInterface},at),Ye=(lt="dropdown",ut="4.1.1",ht="."+(ct="bs.dropdown"),pt=".data-api",ft=(st=e).fn[lt],dt=27,mt=32,gt=9,yt=38,vt=40,_t=3,xt=new RegExp(yt+"|"+vt+"|"+dt),bt={HIDE:"hide"+ht,HIDDEN:"hidden"+ht,SHOW:"show"+ht,SHOWN:"shown"+ht,CLICK:"click"+ht,CLICK_DATA_API:"click"+ht+pt,KEYDOWN_DATA_API:"keydown"+ht+pt,KEYUP_DATA_API:"keyup"+ht+pt},wt={DISABLED:"disabled",SHOW:"show",DROPUP:"dropup",DROPRIGHT:"dropright",DROPLEFT:"dropleft",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",POSITION_STATIC:"position-static"},Et={DATA_TOGGLE:'[data-toggle="dropdown"]',FORM_CHILD:".dropdown form",MENU:".dropdown-menu",NAVBAR_NAV:".navbar-nav",VISIBLE_ITEMS:".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)"},Tt={TOP:"top-start",TOPEND:"top-end",BOTTOM:"bottom-start",BOTTOMEND:"bottom-end",RIGHT:"right-start",RIGHTEND:"right-end",LEFT:"left-start",LEFTEND:"left-end"},St={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic"},Ct={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string"},At=function(){function l(t,e){this._element=t,this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var t=l.prototype;return t.toggle=function(){if(!this._element.disabled&&!st(this._element).hasClass(wt.DISABLED)){var t=l._getParentFromElement(this._element),e=st(this._menu).hasClass(wt.SHOW);if(l._clearMenus(),!e){var n={relatedTarget:this._element},r=st.Event(bt.SHOW,n);if(st(t).trigger(r),!r.isDefaultPrevented()){if(!this._inNavbar){if(void 0===c)throw new TypeError("Bootstrap dropdown require Popper.js (https://popper.js.org)");var i=this._element;"parent"===this._config.reference?i=t:Ue.isElement(this._config.reference)&&(i=this._config.reference,"undefined"!=typeof this._config.reference.jquery&&(i=this._config.reference[0])),"scrollParent"!==this._config.boundary&&st(t).addClass(wt.POSITION_STATIC),this._popper=new c(i,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===st(t).closest(Et.NAVBAR_NAV).length&&st(document.body).children().on("mouseover",null,st.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),st(this._menu).toggleClass(wt.SHOW),st(t).toggleClass(wt.SHOW).trigger(st.Event(
bt.SHOWN,n))}}}},t.dispose=function(){st.removeData(this._element,ct),st(this._element).off(ht),this._element=null,(this._menu=null)!==this._popper&&(this._popper.destroy(),this._popper=null)},t.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},t._addEventListeners=function(){var e=this;st(this._element).on(bt.CLICK,function(t){t.preventDefault(),t.stopPropagation(),e.toggle()})},t._getConfig=function(t){return t=s({},this.constructor.Default,st(this._element).data(),t),Ue.typeCheckConfig(lt,t,this.constructor.DefaultType),t},t._getMenuElement=function(){if(!this._menu){var t=l._getParentFromElement(this._element);this._menu=st(t).find(Et.MENU)[0]}return this._menu},t._getPlacement=function(){var t=st(this._element).parent(),e=Tt.BOTTOM;return t.hasClass(wt.DROPUP)?(e=Tt.TOP,st(this._menu).hasClass(wt.MENURIGHT)&&(e=Tt.TOPEND)):t.hasClass(wt.DROPRIGHT)?e=Tt.RIGHT:t.hasClass(wt.DROPLEFT)?e=Tt.LEFT:st(this._menu).hasClass(wt.MENURIGHT)&&(e=Tt.BOTTOMEND),e},t._detectNavbar=function(){return 0<st(this._element).closest(".navbar").length},t._getPopperConfig=function(){var e=this,t={};"function"==typeof this._config.offset?t.fn=function(t){return t.offsets=s({},t.offsets,e._config.offset(t.offsets)||{}),t}:t.offset=this._config.offset;var n={placement:this._getPlacement(),modifiers:{offset:t,flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(n.modifiers.applyStyle={enabled:!1}),n},l._jQueryInterface=function(e){return this.each(function(){var t=st(this).data(ct);if(t||(t=new l(this,"object"==typeof e?e:null),st(this).data(ct,t)),"string"==typeof e){if("undefined"==typeof t[e])throw new TypeError('No method named "'+e+'"');t[e]()}})},l._clearMenus=function(t){if(!t||t.which!==_t&&("keyup"!==t.type||t.which===gt))for(var e=st.makeArray(st(Et.DATA_TOGGLE)),n=0;n<e.length;n++){var r=l._getParentFromElement(e[n]),i=st(e[n]).data(ct),o={relatedTarget:e[n]};if(i){var a=i._menu;if(st(r).hasClass(wt.SHOW)&&!(t&&("click"===t.type&&/input|textarea/i.test(t.target.tagName)||"keyup"===t.type&&t.which===gt)&&st.contains(r,t.target))){var s=st.Event(bt.HIDE,o);st(r).trigger(s),s.isDefaultPrevented()||("ontouchstart"in document.documentElement&&st(document.body).children().off("mouseover",null,st.noop),e[n].setAttribute("aria-expanded","false"),st(a).removeClass(wt.SHOW),st(r).removeClass(wt.SHOW).trigger(st.Event(bt.HIDDEN,o)))}}}},l._getParentFromElement=function(t){var e,n=Ue.getSelectorFromElement(t);return n&&(e=st(n)[0]),e||t.parentNode},l._dataApiKeydownHandler=function(t){if((/input|textarea/i.test(t.target.tagName)?!(t.which===mt||t.which!==dt&&(t.which!==vt&&t.which!==yt||st(t.target).closest(Et.MENU).length)):xt.test(t.which))&&(t.preventDefault(),t.stopPropagation(),!this.disabled&&!st(this).hasClass(wt.DISABLED))){var e=l._getParentFromElement(this),n=st(e).hasClass(wt.SHOW);if((n||t.which===dt&&t.which===mt)&&(!n||t.which!==dt&&t.which!==mt)){var r=st(e).find(Et.VISIBLE_ITEMS).get();if(0!==r.length){var i=r.indexOf(t.target);t.which===yt&&0<i&&i--,t.which===vt&&i<r.length-1&&i++,i<0&&(i=0),r[i].focus()}}else{if(t.which===dt){var o=st(e).find(Et.DATA_TOGGLE)[0];st(o).trigger("focus")}st(this).trigger("click")}}},a(l,null,[{key:"VERSION",get:function(){return ut}},{key:"Default",get:function(){return St}},{key:"DefaultType",get:function(){return Ct}}]),l}(),st(document).on(bt.KEYDOWN_DATA_API,Et.DATA_TOGGLE,At._dataApiKeydownHandler).on(bt.KEYDOWN_DATA_API,Et.MENU,At._dataApiKeydownHandler).on(bt.CLICK_DATA_API+" "+bt.KEYUP_DATA_API,At._clearMenus).on(bt.CLICK_DATA_API,Et.DATA_TOGGLE,function(t){t.preventDefault(),t.stopPropagation(),At._jQueryInterface.call(st(this),"toggle")}).on(bt.CLICK_DATA_API,Et.FORM_CHILD,function(t){t.stopPropagation()}),st.fn[lt]=At._jQueryInterface,st.fn[lt].Constructor=At,st.fn[lt].noConflict=function(){return st.fn[lt]=ft,At._jQueryInterface},At),Xe=(Mt="modal",kt="4.1.1",zt="."+(Dt="bs.modal"),Pt=".data-api",Lt=(It=e).fn[Mt],Ot=27,Rt={backdrop:!0,keyboard:!0,focus:!0,show:!0},Bt={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},Ft={HIDE:"hide"+zt,HIDDEN:"hidden"+zt,SHOW:"show"+zt,SHOWN:"shown"+zt,FOCUSIN:"focusin"+zt,RESIZE:"resize"+zt,CLICK_DISMISS:"click.dismiss"+zt,KEYDOWN_DISMISS:"keydown.dismiss"+zt,MOUSEUP_DISMISS:"mouseup.dismiss"+zt,MOUSEDOWN_DISMISS:"mousedown.dismiss"+zt,CLICK_DATA_API:"click"+zt+Pt},Nt={SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",SHOW:"show"},jt={DIALOG:".modal-dialog",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"},Vt=function(){function i(t,e){this._config=this._getConfig(e),this._element=t,this._dialog=It(t).find(jt.DIALOG)[0],this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._scrollbarWidth=0}var t=i.prototype;return t.toggle=function(t){return this._isShown?this.hide():this.show(t)},t.show=function(t){var e=this;if(!this._isTransitioning&&!this._isShown){It(this._element).hasClass(Nt.FADE)&&(this._isTransitioning=!0);var n=It.Event(Ft.SHOW,{relatedTarget:t});It(this._element).trigger(n),this._isShown||n.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),It(document.body).addClass(Nt.OPEN),this._setEscapeEvent(),this._setResizeEvent(),It(this._element).on(Ft.CLICK_DISMISS,jt.DATA_DISMISS,function(t){return e.hide(t)}),It(this._dialog).on(Ft.MOUSEDOWN_DISMISS,function(){It(e._element).one(Ft.MOUSEUP_DISMISS,function(t){It(t.target).is(e._element)&&(e._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return e._showElement(t)}))}},t.hide=function(t){var e=this;if(t&&t.preventDefault(),!this._isTransitioning&&this._isShown){var n=It.Event(Ft.HIDE);if(It(this._element).trigger(n),this._isShown&&!n.isDefaultPrevented()){this._isShown=!1;var r=It(this._element).hasClass(Nt.FADE);if(r&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),It(document).off(Ft.FOCUSIN),It(this._element).removeClass(Nt.SHOW),It(this._element).off(Ft.CLICK_DISMISS),It(this._dialog).off(Ft.MOUSEDOWN_DISMISS),r){var i=Ue.getTransitionDurationFromElement(this._element);It(this._element).one(Ue.TRANSITION_END,function(t){return e._hideModal(t)}).emulateTransitionEnd(i)}else this._hideModal()}}},t.dispose=function(){It.removeData(this._element,Dt),It(window,document,this._element,this._backdrop).off(zt),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._scrollbarWidth=null},t.handleUpdate=function(){this._adjustDialog()},t._getConfig=function(t){return t=s({},Rt,t),Ue.typeCheckConfig(Mt,t,Bt),t},t._showElement=function(t){var e=this,n=It(this._element).hasClass(Nt.FADE);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.scrollTop=0,n&&Ue.reflow(this._element),It(this._element).addClass(Nt.SHOW),this._config.focus&&this._enforceFocus();var r=It.Event(Ft.SHOWN,{relatedTarget:t}),i=function(){e._config.focus&&e._element.focus(),e._isTransitioning=!1,It(e._element).trigger(r)};if(n){var o=Ue.getTransitionDurationFromElement(this._element);It(this._dialog).one(Ue.TRANSITION_END,i).emulateTransitionEnd(o)}else i()},t._enforceFocus=function(){var e=this;It(document).off(Ft.FOCUSIN).on(Ft.FOCUSIN,function(t){document!==t.target&&e._element!==t.target&&0===It(e._element).has(t.target).length&&e._element.focus()})},t._setEscapeEvent=function(){var e=this;this._isShown&&this._config.keyboard?It(this._element).on(Ft.KEYDOWN_DISMISS,function(t){t.which===Ot&&(t.preventDefault(),e.hide())}):this._isShown||It(this._element).off(Ft.KEYDOWN_DISMISS)},t._setResizeEvent=function(){var e=this;this._isShown?It(window).on(Ft.RESIZE,function(t){return e.handleUpdate(t)}):It(window).off(Ft.RESIZE)},t._hideModal=function(){var t=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._isTransitioning=!1,this._showBackdrop(function(){It(document.body).removeClass(Nt.OPEN),t._resetAdjustments(),t._resetScrollbar(),It(t._element).trigger(Ft.HIDDEN)})},t._removeBackdrop=function(){this._backdrop&&(It(this._backdrop).remove(),this._backdrop=null)},t._showBackdrop=function(t){var e=this,n=It(this._element).hasClass(Nt.FADE)?Nt.FADE:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className=Nt.BACKDROP,n&&It(this._backdrop).addClass(n),It(this._backdrop).appendTo(document.body),It(this._element).on(Ft.CLICK_DISMISS,function(t){e._ignoreBackdropClick?e._ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"===e._config.backdrop?e._element.focus():e.hide())}),n&&Ue.reflow(this._backdrop),It(this._backdrop).addClass(Nt.SHOW),!t)return;if(!n)return void t();var r=Ue.getTransitionDurationFromElement(this._backdrop);It(this._backdrop).one(Ue.TRANSITION_END,t).emulateTransitionEnd(r)}else if(!this._isShown&&this._backdrop){It(this._backdrop).removeClass(Nt.SHOW);var i=function(){e._removeBackdrop(),t&&t()};if(It(this._element).hasClass(Nt.FADE)){var o=Ue.getTransitionDurationFromElement(this._backdrop);It(this._backdrop).one(Ue.TRANSITION_END,i).emulateTransitionEnd(o)}else i()}else t&&t()},t._adjustDialog=function(){var t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},t._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},t._checkScrollbar=function(){var t=document.body.getBoundingClientRect();this._isBodyOverflowing=t.left+t.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},t._setScrollbar=function(){var i=this;if(this._isBodyOverflowing){It(jt.FIXED_CONTENT).each(function(t,e){var n=It(e)[0].style.paddingRight,r=It(e).css("padding-right");It(e).data("padding-right",n).css("padding-right",parseFloat(r)+i._scrollbarWidth+"px")}),It(jt.STICKY_CONTENT).each(function(t,e){var n=It(e)[0].style.marginRight,r=It(e).css("margin-right");It(e).data("margin-right",n).css("margin-right",parseFloat(r)-i._scrollbarWidth+"px")}),It(jt.NAVBAR_TOGGLER).each(function(t,e){var n=It(e)[0].style.marginRight,r=It(e).css("margin-right");It(e).data("margin-right",n).css("margin-right",parseFloat(r)+i._scrollbarWidth+"px")});var t=document.body.style.paddingRight,e=It(document.body).css("padding-right");It(document.body).data("padding-right",t).css("padding-right",parseFloat(e)+this._scrollbarWidth+"px")}},t._resetScrollbar=function(){It(jt.FIXED_CONTENT).each(function(t,e){var n=It(e).data("padding-right");void 0!==n&&It(e).css("padding-right",n).removeData("padding-right")}),It(jt.STICKY_CONTENT+", "+jt.NAVBAR_TOGGLER).each(function(t,e){var n=It(e).data("margin-right");void 0!==n&&It(e).css("margin-right",n).removeData("margin-right")});var t=It(document.body).data("padding-right");void 0!==t&&It(document.body).css("padding-right",t).removeData("padding-right")},t._getScrollbarWidth=function(){var t=document.createElement("div");t.className=Nt.SCROLLBAR_MEASURER,document.body.appendChild(t);var e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e},i._jQueryInterface=function(n,r){return this.each(function(){var t=It(this).data(Dt),e=s({},Rt,It(this).data(),"object"==typeof n&&n?n:{});if(t||(t=new i(this,e),It(this).data(Dt,t)),"string"==typeof n){if("undefined"==typeof t[n])throw new TypeError('No method named "'+n+'"');t[n](r)}else e.show&&t.show(r)})},a(i,null,[{key:"VERSION",get:function(){return kt}},{key:"Default",get:function(){return Rt}}]),i}(),It(document).on(Ft.CLICK_DATA_API,jt.DATA_TOGGLE,function(t){var e,n=this,r=Ue.getSelectorFromElement(this);r&&(e=It(r)[0]);var i=It(e).data(Dt)?"toggle":s({},It(e).data(),It(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||t.preventDefault();var o=It(e).one(Ft.SHOW,function(t){t.isDefaultPrevented()||o.one(Ft.HIDDEN,function(){It(n).is(":visible")&&n.focus()})});Vt._jQueryInterface.call(It(e),i,this)}),It.fn[Mt]=Vt._jQueryInterface,It.fn[Mt].Constructor=Vt,It.fn[Mt].noConflict=function(){return It.fn[Mt]=Lt,Vt._jQueryInterface},Vt),Ke=(qt="tooltip",Ut="4.1.1",Wt="."+(Ht="bs.tooltip"),Gt=($t=e).fn[qt],Zt="bs-tooltip",Yt=new RegExp("(^|\\s)"+Zt+"\\S+","g"),Jt={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!(Kt={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"}),selector:!(Xt={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)"}),placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent"},Qt={SHOW:"show",OUT:"out"},te={HIDE:"hide"+Wt,HIDDEN:"hidden"+Wt,SHOW:"show"+Wt,SHOWN:"shown"+Wt,INSERTED:"inserted"+Wt,CLICK:"click"+Wt,FOCUSIN:"focusin"+Wt,FOCUSOUT:"focusout"+Wt,MOUSEENTER:"mouseenter"+Wt,MOUSELEAVE:"mouseleave"+Wt},ee={FADE:"fade",SHOW:"show"},ne={TOOLTIP:".tooltip",TOOLTIP_INNER:".tooltip-inner",ARROW:".arrow"},re={HOVER:"hover",FOCUS:"focus",CLICK:"click",MANUAL:"manual"},ie=function(){function r(t,e){if(void 0===c)throw new TypeError("Bootstrap tooltips require Popper.js (https://popper.js.org)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners()}var t=r.prototype;return t.enable=function(){this._isEnabled=!0},t.disable=function(){this._isEnabled=!1},t.toggleEnabled=function(){this._isEnabled=!this._isEnabled},t.toggle=function(t){if(this._isEnabled)if(t){var e=this.constructor.DATA_KEY,n=$t(t.currentTarget).data(e);n||(n=new this.constructor(t.currentTarget,this._getDelegateConfig()),$t(t.currentTarget).data(e,n)),n._activeTrigger.click=!n._activeTrigger.click,n._isWithActiveTrigger()?n._enter(null,n):n._leave(null,n)}else{if($t(this.getTipElement()).hasClass(ee.SHOW))return void this._leave(null,this);this._enter(null,this)}},t.dispose=function(){clearTimeout(this._timeout),$t.removeData(this.element,this.constructor.DATA_KEY),$t(this.element).off(this.constructor.EVENT_KEY),$t(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&$t(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,(this._activeTrigger=null)!==this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},t.show=function(){var e=this;if("none"===$t(this.element).css("display"))throw new Error("Please use show on visible elements");var t=$t.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){$t(this.element).trigger(t);var n=$t.contains(this.element.ownerDocument.documentElement,this.element);if(t.isDefaultPrevented()||!n)return;var r=this.getTipElement(),i=Ue.getUID(this.constructor.NAME);r.setAttribute("id",i),this.element.setAttribute("aria-describedby",i),this.setContent(),this.config.animation&&$t(r).addClass(ee.FADE);var o="function"==typeof this.config.placement?this.config.placement.call(this,r,this.element):this.config.placement,a=this._getAttachment(o);this.addAttachmentClass(a);var s=!1===this.config.container?document.body:$t(this.config.container);$t(r).data(this.constructor.DATA_KEY,this),$t.contains(this.element.ownerDocument.documentElement,this.tip)||$t(r).appendTo(s),$t(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new c(this.element,r,{placement:a,modifiers:{offset:{offset:this.config.offset},flip:{behavior:this.config.fallbackPlacement},arrow:{element:ne.ARROW},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(t){t.originalPlacement!==t.placement&&e._handlePopperPlacementChange(t)},onUpdate:function(t){e._handlePopperPlacementChange(t)}}),$t(r).addClass(ee.SHOW),"ontouchstart"in document.documentElement&&$t(document.body).children().on("mouseover",null,$t.noop);var l=function(){e.config.animation&&e._fixTransition();var t=e._hoverState;e._hoverState=null,$t(e.element).trigger(e.constructor.Event.SHOWN),t===Qt.OUT&&e._leave(null,e)};if($t(this.tip).hasClass(ee.FADE)){var u=Ue.getTransitionDurationFromElement(this.tip);$t(this.tip).one(Ue.TRANSITION_END,l).emulateTransitionEnd(u)}else l()}},t.hide=function(t){var e=this,n=this.getTipElement(),r=$t.Event(this.constructor.Event.HIDE),i=function(){e._hoverState!==Qt.SHOW&&n.parentNode&&n.parentNode.removeChild(n),e._cleanTipClass(),e.element.removeAttribute("aria-describedby"),$t(e.element).trigger(e.constructor.Event.HIDDEN),null!==e._popper&&e._popper.destroy(),t&&t()};if($t(this.element).trigger(r),!r.isDefaultPrevented()){if($t(n).removeClass(ee.SHOW),"ontouchstart"in document.documentElement&&$t(document.body).children().off("mouseover",null,$t.noop),this._activeTrigger[re.CLICK]=!1,this._activeTrigger[re.FOCUS]=!1,this._activeTrigger[re.HOVER]=!1,$t(this.tip).hasClass(ee.FADE)){var o=Ue.getTransitionDurationFromElement(n);$t(n).one(Ue.TRANSITION_END,i).emulateTransitionEnd(o)}else i();this._hoverState=""}},t.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},t.isWithContent=function(){return Boolean(this.getTitle())},t.addAttachmentClass=function(t){$t(this.getTipElement()).addClass(Zt+"-"+t)},t.getTipElement=function(){return this.tip=this.tip||$t(this.config.template)[0],this.tip},t.setContent=function(){var t=$t(this.getTipElement());this.setElementContent(t.find(ne.TOOLTIP_INNER),this.getTitle()),t.removeClass(ee.FADE+" "+ee.SHOW)},t.setElementContent=function(t,e){var n=this.config.html;"object"==typeof e&&(e.nodeType||e.jquery)?n?$t(e).parent().is(t)||t.empty().append(e):t.text($t(e).text()):t[n?"html":"text"](e)},t.getTitle=function(){var t=this.element.getAttribute("data-original-title");return t||(t="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),t},t._getAttachment=function(t){return Kt[t.toUpperCase()]},t._setListeners=function(){var r=this;this.config.trigger.split(" ").forEach(function(t){if("click"===t)$t(r.element).on(r.constructor.Event.CLICK,r.config.selector,function(t){return r.toggle(t)});else if(t!==re.MANUAL){var e=t===re.HOVER?r.constructor.Event.MOUSEENTER:r.constructor.Event.FOCUSIN,n=t===re.HOVER?r.constructor.Event.MOUSELEAVE:r.constructor.Event.FOCUSOUT;$t(r.element).on(e,r.config.selector,function(t){return r._enter(t)}).on(n,r.config.selector,function(t){return r._leave(t)})}$t(r.element).closest(".modal").on("hide.bs.modal",function(){return r.hide()})}),this.config.selector?this.config=s({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},t._fixTitle=function(){var t=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==t)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},t._enter=function(t,e){var n=this.constructor.DATA_KEY;(e=e||$t(t.currentTarget).data(n))||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),$t(t.currentTarget).data(n,e)),t&&(e._activeTrigger["focusin"===t.type?re.FOCUS:re.HOVER]=!0),$t(e.getTipElement()).hasClass(ee.SHOW)||e._hoverState===Qt.SHOW?e._hoverState=Qt.SHOW:(clearTimeout(e._timeout),e._hoverState=Qt.SHOW,e.config.delay&&e.config.delay.show?e._timeout=setTimeout(function(){e._hoverState===Qt.SHOW&&e.show()},e.config.delay.show):e.show())},t._leave=function(t,e){var n=this.constructor.DATA_KEY;(e=e||$t(t.currentTarget).data(n))||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),$t(t.currentTarget).data(n,e)),t&&(e._activeTrigger["focusout"===t.type?re.FOCUS:re.HOVER]=!1),e._isWithActiveTrigger()||(clearTimeout(e._timeout),e._hoverState=Qt.OUT,e.config.delay&&e.config.delay.hide?e._timeout=setTimeout(function(){e._hoverState===Qt.OUT&&e.hide()},e.config.delay.hide):e.hide())},t._isWithActiveTrigger=function(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1},t._getConfig=function(t){return"number"==typeof(t=s({},this.constructor.Default,$t(this.element).data(),"object"==typeof t&&t?t:{})).delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),Ue.typeCheckConfig(qt,t,this.constructor.DefaultType),t},t._getDelegateConfig=function(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t},t._cleanTipClass=function(){var t=$t(this.getTipElement()),e=t.attr("class").match(Yt);null!==e&&0<e.length&&t.removeClass(e.join(""))},t._handlePopperPlacementChange=function(t){this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(t.placement))},t._fixTransition=function(){var t=this.getTipElement(),e=this.config.animation;null===t.getAttribute("x-placement")&&($t(t).removeClass(ee.FADE),this.config.animation=!1,this.hide(),this.show(),this.config.animation=e)},r._jQueryInterface=function(n){return this.each(function(){var t=$t(this).data(Ht),e="object"==typeof n&&n;if((t||!/dispose|hide/.test(n))&&(t||(t=new r(this,e),$t(this).data(Ht,t)),"string"==typeof n)){if("undefined"==typeof t[n])throw new TypeError('No method named "'+n+'"');t[n]()}})},a(r,null,[{key:"VERSION",get:function(){return Ut}},{key:"Default",get:function(){return Jt}},{key:"NAME",get:function(){return qt}},{key:"DATA_KEY",get:function(){return Ht}},{key:"Event",get:function(){return te}},{key:"EVENT_KEY",get:function(){return Wt}},{key:"DefaultType",get:function(){return Xt}}]),r}(),$t.fn[qt]=ie._jQueryInterface,$t.fn[qt].Constructor=ie,$t.fn[qt].noConflict=function(){return $t.fn[qt]=Gt,ie._jQueryInterface},ie),Je=(ae="popover",se="4.1.1",ue="."+(le="bs.popover"),ce=(oe=e).fn[ae],he="bs-popover",pe=new RegExp("(^|\\s)"+he+"\\S+","g"),fe=s({},Ke.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),de=s({},Ke.DefaultType,{content:"(string|element|function)"}),me={FADE:"fade",SHOW:"show"},ge={TITLE:".popover-header",CONTENT:".popover-body"},ye={HIDE:"hide"+ue,HIDDEN:"hidden"+ue,SHOW:"show"+ue,SHOWN:"shown"+ue,INSERTED:"inserted"+ue,CLICK:"click"+ue,FOCUSIN:"focusin"+ue,FOCUSOUT:"focusout"+ue,MOUSEENTER:"mouseenter"+ue,MOUSELEAVE:"mouseleave"+ue},ve=function(t){function r(){return t.apply(this,arguments)||this}n(r,t);var e=r.prototype;return e.isWithContent=function(){return this.getTitle()||this._getContent()},e.addAttachmentClass=function(t){oe(this.getTipElement()).addClass(he+"-"+t)},e.getTipElement=function(){return this.tip=this.tip||oe(this.config.template)[0],this.tip},e.setContent=function(){var t=oe(this.getTipElement());this.setElementContent(t.find(ge.TITLE),this.getTitle());var e=this._getContent();"function"==typeof e&&(e=e.call(this.element)),this.setElementContent(t.find(ge.CONTENT),e),t.removeClass(me.FADE+" "+me.SHOW)},e._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},e._cleanTipClass=function(){var t=oe(this.getTipElement()),e=t.attr("class").match(pe);null!==e&&0<e.length&&t.removeClass(e.join(""))},r._jQueryInterface=function(n){return this.each(function(){var t=oe(this).data(le),e="object"==typeof n?n:null;if((t||!/destroy|hide/.test(n))&&(t||(t=new r(this,e),oe(this).data(le,t)),"string"==typeof n)){if("undefined"==typeof t[n])throw new TypeError('No method named "'+n+'"');t[n]()}})},a(r,null,[{key:"VERSION",get:function(){return se}},{key:"Default",get:function(){return fe}},{key:"NAME",get:function(){return ae}},{key:"DATA_KEY",get:function(){return le}},{key:"Event",get:function(){return ye}},{key:"EVENT_KEY",get:function(){return ue}},{key:"DefaultType",get:function(){return de}}]),r}(Ke),oe.fn[ae]=ve._jQueryInterface,oe.fn[ae].Constructor=ve,oe.fn[ae].noConflict=function(){return oe.fn[ae]=ce,ve._jQueryInterface},ve),Qe=(xe="scrollspy",be="4.1.1",Ee="."+(we="bs.scrollspy"),Te=".data-api",Se=(_e=e).fn[xe],Ce={offset:10,method:"auto",target:""},Ae={offset:"number",method:"string",target:"(string|element)"},Ie={ACTIVATE:"activate"+Ee,SCROLL:"scroll"+Ee,LOAD_DATA_API:"load"+Ee+Te},Me={DROPDOWN_ITEM:"dropdown-item",DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active"},ke={DATA_SPY:'[data-spy="scroll"]',ACTIVE:".active",NAV_LIST_GROUP:".nav, .list-group",NAV_LINKS:".nav-link",NAV_ITEMS:".nav-item",LIST_ITEMS:".list-group-item",DROPDOWN:".dropdown",DROPDOWN_ITEMS:".dropdown-item",DROPDOWN_TOGGLE:".dropdown-toggle"},De={OFFSET:"offset",POSITION:"position"},ze=function(){function n(t,e){var n=this;this._element=t,this._scrollElement="BODY"===t.tagName?window:t,this._config=this._getConfig(e),this._selector=this._config.target+" "+ke.NAV_LINKS+","+this._config.target+" "+ke.LIST_ITEMS+","+this._config.target+" "+ke.DROPDOWN_ITEMS,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,_e(this._scrollElement).on(Ie.SCROLL,function(t){return n._process(t)}),this.refresh(),this._process()}var t=n.prototype;return t.refresh=function(){var e=this,t=this._scrollElement===this._scrollElement.window?De.OFFSET:De.POSITION,i="auto"===this._config.method?t:this._config.method,o=i===De.POSITION?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),_e.makeArray(_e(this._selector)).map(function(t){var e,n=Ue.getSelectorFromElement(t);if(n&&(e=_e(n)[0]),e){var r=e.getBoundingClientRect();if(r.width||r.height)return[_e(e)[i]().top+o,n]}return null}).filter(function(t){return t}).sort(function(t,e){return t[0]-e[0]}).forEach(function(t){e._offsets.push(t[0]),e._targets.push(t[1])})},t.dispose=function(){_e.removeData(this._element,we),_e(this._scrollElement).off(Ee),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},t._getConfig=function(t){if("string"!=typeof(t=s({},Ce,"object"==typeof t&&t?t:{})).target){var e=_e(t.target).attr("id");e||(e=Ue.getUID(xe),_e(t.target).attr("id",e)),t.target="#"+e}return Ue.typeCheckConfig(xe,t,Ae),t},t._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},t._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},t._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},t._process=function(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),n=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),n<=t){var r=this._targets[this._targets.length-1];this._activeTarget!==r&&this._activate(r)}else{if(this._activeTarget&&t<this._offsets[0]&&0<this._offsets[0])return this._activeTarget=null,void this._clear();for(var i=this._offsets.length;i--;){this._activeTarget!==this._targets[i]&&t>=this._offsets[i]&&("undefined"==typeof this._offsets[i+1]||t<this._offsets[i+1])&&this._activate(this._targets[i])}}},t._activate=function(e){this._activeTarget=e,this._clear();var t=this._selector.split(",");t=t.map(function(t){return t+'[data-target="'+e+'"],'+t+'[href="'+e+'"]'});var n=_e(t.join(","));n.hasClass(Me.DROPDOWN_ITEM)?(n.closest(ke.DROPDOWN).find(ke.DROPDOWN_TOGGLE).addClass(Me.ACTIVE),n.addClass(Me.ACTIVE)):(n.addClass(Me.ACTIVE),n.parents(ke.NAV_LIST_GROUP).prev(ke.NAV_LINKS+", "+ke.LIST_ITEMS).addClass(Me.ACTIVE),n.parents(ke.NAV_LIST_GROUP).prev(ke.NAV_ITEMS).children(ke.NAV_LINKS).addClass(Me.ACTIVE)),_e(this._scrollElement).trigger(Ie.ACTIVATE,{relatedTarget:e})},t._clear=function(){_e(this._selector).filter(ke.ACTIVE).removeClass(Me.ACTIVE)},n._jQueryInterface=function(e){return this.each(function(){var t=_e(this).data(we);if(t||(t=new n(this,"object"==typeof e&&e),_e(this).data(we,t)),"string"==typeof e){if("undefined"==typeof t[e])throw new TypeError('No method named "'+e+'"');t[e]()}})},a(n,null,[{key:"VERSION",get:function(){return be}},{key:"Default",get:function(){return Ce}}]),n}(),_e(window).on(Ie.LOAD_DATA_API,function(){for(var t=_e.makeArray(_e(ke.DATA_SPY)),e=t.length;e--;){var n=_e(t[e]);ze._jQueryInterface.call(n,n.data())}}),_e.fn[xe]=ze._jQueryInterface,_e.fn[xe].Constructor=ze,_e.fn[xe].noConflict=function(){return _e.fn[xe]=Se,ze._jQueryInterface},ze),tn=(Le="tab",Oe="4.1.1",Be="."+(Re="bs.tab"),Fe=".data-api",Ne=(Pe=e).fn[Le],je={HIDE:"hide"+Be,HIDDEN:"hidden"+Be,SHOW:"show"+Be,SHOWN:"shown"+Be,CLICK_DATA_API:"click"+Be+Fe},Ve={DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active",DISABLED:"disabled",FADE:"fade",SHOW:"show"},$e={DROPDOWN:".dropdown",NAV_LIST_GROUP:".nav, .list-group",ACTIVE:".active",ACTIVE_UL:"> li > .active",DATA_TOGGLE:'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',DROPDOWN_TOGGLE:".dropdown-toggle",DROPDOWN_ACTIVE_CHILD:"> .dropdown-menu .active"},qe=function(){function r(t){this._element=t}var t=r.prototype;return t.show=function(){var n=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&Pe(this._element).hasClass(Ve.ACTIVE)||Pe(this._element).hasClass(Ve.DISABLED))){var t,r,e=Pe(this._element).closest($e.NAV_LIST_GROUP)[0],i=Ue.getSelectorFromElement(this._element);if(e){var o="UL"===e.nodeName?$e.ACTIVE_UL:$e.ACTIVE;r=(r=Pe.makeArray(Pe(e).find(o)))[r.length-1]}var a=Pe.Event(je.HIDE,{relatedTarget:this._element}),s=Pe.Event(je.SHOW,{relatedTarget:r});if(r&&Pe(r).trigger(a),Pe(this._element).trigger(s),!s.isDefaultPrevented()&&!a.isDefaultPrevented()){i&&(t=Pe(i)[0]),this._activate(this._element,e);var l=function(){var t=Pe.Event(je.HIDDEN,{relatedTarget:n._element}),e=Pe.Event(je.SHOWN,{relatedTarget:r});Pe(r).trigger(t),Pe(n._element).trigger(e)};t?this._activate(t,t.parentNode,l):l()}}},t.dispose=function(){Pe.removeData(this._element,Re),this._element=null},t._activate=function(t,e,n){var r=this,i=("UL"===e.nodeName?Pe(e).find($e.ACTIVE_UL):Pe(e).children($e.ACTIVE))[0],o=n&&i&&Pe(i).hasClass(Ve.FADE),a=function(){return r._transitionComplete(t,i,n)};if(i&&o){var s=Ue.getTransitionDurationFromElement(i);Pe(i).one(Ue.TRANSITION_END,a).emulateTransitionEnd(s)}else a()},t._transitionComplete=function(t,e,n){if(e){Pe(e).removeClass(Ve.SHOW+" "+Ve.ACTIVE);var r=Pe(e.parentNode).find($e.DROPDOWN_ACTIVE_CHILD)[0];r&&Pe(r).removeClass(Ve.ACTIVE),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!1)}if(Pe(t).addClass(Ve.ACTIVE),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!0),Ue.reflow(t),Pe(t).addClass(Ve.SHOW),t.parentNode&&Pe(t.parentNode).hasClass(Ve.DROPDOWN_MENU)){var i=Pe(t).closest($e.DROPDOWN)[0];i&&Pe(i).find($e.DROPDOWN_TOGGLE).addClass(Ve.ACTIVE),t.setAttribute("aria-expanded",!0)}n&&n()},r._jQueryInterface=function(n){return this.each(function(){var t=Pe(this),e=t.data(Re);if(e||(e=new r(this),t.data(Re,e)),"string"==typeof n){if("undefined"==typeof e[n])throw new TypeError('No method named "'+n+'"');e[n]()}})},a(r,null,[{key:"VERSION",get:function(){return Oe}}]),r}(),Pe(document).on(je.CLICK_DATA_API,$e.DATA_TOGGLE,function(t){t.preventDefault(),qe._jQueryInterface.call(Pe(this),"show")}),Pe.fn[Le]=qe._jQueryInterface,Pe.fn[Le].Constructor=qe,Pe.fn[Le].noConflict=function(){return Pe.fn[Le]=Ne,qe._jQueryInterface},qe);!function(t){if(void 0===t)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var e=t.fn.jquery.split(" ")[0].split("."),n=1,r=2,i=9,o=1,a=4;if(e[0]<r&&e[1]<i||e[0]===n&&e[1]===i&&e[2]<o||e[0]>=a)throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}(e),t.Util=Ue,t.Alert=He,t.Button=We,t.Carousel=Ge,t.Collapse=Ze,t.Dropdown=Ye,t.Modal=Xe,t.Popover=Je,t.Scrollspy=Qe,t.Tab=tn,t.Tooltip=Ke,Object.defineProperty(t,"__esModule",{value:!0})}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(
):"function"==typeof define&&define.amd?define(e):t.mapboxgl=e()}(this,function(){"use strict";function t(t,e){if(i)if(o){var n="var sharedChunk = {}; ("+i+")(sharedChunk); ("+o+")(sharedChunk);",r={};i(r),(a=e(r)).workerUrl=window.URL.createObjectURL(new Blob([n],{type:"text/javascript"}))}else o=e;else i=e}var i,o,a;return t(["exports"],function(t){function e(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t["default"]:t}function r(t,e){return t(e={exports:{}},e.exports),e.exports}function i(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=n,this.p2y=r}function o(t,e){this.x=t,this.y=e}function f(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!f(t[n],e[n]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var r in t)if(!f(t[r],e[r]))return!1;return!0}return t===e}function a(t){if(t<=0)return 0;if(1<=t)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function s(t,e,n,r){var i=new Bs(t,e,n,r);return function(t){return i.solve(t)}}function y(t,e,n){return Math.min(n,Math.max(e,t))}function l(t,e,n){var r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i}function u(t,e,r){if(!t.length)return r(null,[]);var i=t.length,o=new Array(t.length),a=null;t.forEach(function(t,n){e(t,function(t,e){t&&(a=t),o[n]=e,0==--i&&r(a,o)})})}function c(t){var e=[];for(var n in t)e.push(t[n]);return e}function h(t,e){var n=[];for(var r in t)r in e||n.push(r);return n}function p(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var a in o)t[a]=o[a]}return t}function d(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r];i in t&&(n[i]=t[i])}return n}function m(){return js++}function g(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})}function v(t){for(var e=Infinity,n=Infinity,r=-Infinity,i=-Infinity,o=0;o<t.length;o++)e=Math.min(e,t[o].column),n=Math.min(n,t[o].row),r=Math.max(r,t[o].column),i=Math.max(i,t[o].row);var a=r-e,s=i-n,l=Math.max(a,s),u=Math.max(0,Math.floor(-Math.log(l)/Math.LN2));return new Rs((e+r)/2,(n+i)/2,0).zoomTo(u)}function _(t,e){return-1!==t.indexOf(e,t.length-e.length)}function x(t,e,n){var r=this,i={};for(var o in t)i[o]=e.call(n||r,t[o],o,t);return i}function b(t,e,n){var r=this,i={};for(var o in t)e.call(n||r,t[o],o,t)&&(i[o]=t[o]);return i}function w(t){return Array.isArray(t)?t.map(w):"object"==typeof t&&t?x(t,w):t}function E(t,e){for(var n=0;n<t.length;n++)if(0<=e.indexOf(t[n]))return!0;return!1}function T(t){Vs[t]||("undefined"!=typeof console&&console.warn(t),Vs[t]=!0)}function S(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function C(t){for(var e=0,n=0,r=t.length,i=r-1,o=void 0,a=void 0;n<r;i=n++)o=t[n],e+=((a=t[i]).x-o.x)*(o.y+a.y);return e}function A(t){var e=t[0],n=t[1],r=t[2];return n+=90,n*=Math.PI/180,r*=Math.PI/180,{x:e*Math.cos(n)*Math.sin(r),y:e*Math.sin(n)*Math.sin(r),z:e*Math.cos(r)}}function I(t){var e=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,o={};if(t.replace(e,function(t,e,n,r){var i=n||r;return o[e]=!i||i.toLowerCase(),""}),o["max-age"]){var n=parseInt(o["max-age"],10);isNaN(n)?delete o["max-age"]:o["max-age"]=n}return o}function M(t){var e=new self.XMLHttpRequest;for(var n in e.open("GET",t.url,!0),t.headers)e.setRequestHeader(n,t.headers[n]);return e.withCredentials="include"===t.credentials,e}function k(t){var e=self.document.createElement("a");return e.href=t,e.protocol===self.document.location.protocol&&e.host===self.document.location.host}function D(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function z(t,e,n){if(n&&n[t]){var r=n[t].indexOf(e);-1!==r&&n[t].splice(r,1)}}function P(t){var e=t.key,n=t.value;return n?[new tl(e,n,"constants have been deprecated as of v8")]:[]}function L(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var a in o)t[a]=o[a]}return t}function O(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function R(t){return Array.isArray(t)?t.map(R):O(t)}function B(t,e){return{kind:"array",itemType:t,N:e}}function F(t){if("array"===t.kind){var e=F(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}function N(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&!N(t.itemType,e.itemType)&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var n=0,r=gl;n<r.length;n+=1){if(!N(r[n],e))return null}}return"Expected "+F(t)+" but found "+F(e)+" instead."}function j(t,e,n,r){return"number"==typeof t&&0<=t&&t<=255&&"number"==typeof e&&0<=e&&e<=255&&"number"==typeof n&&0<=n&&n<=255?void 0===r||"number"==typeof r&&0<=r&&r<=1?null:"Invalid rgba value ["+[t,e,n,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[t,e,n,r]:[t,e,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function V(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof nl)return!0;if(t instanceof rl)return!0;if(Array.isArray(t)){for(var e=0,n=t;e<n.length;e+=1){if(!V(n[e]))return!1}return!0}if("object"==typeof t){for(var r in t)if(!V(t[r]))return!1;return!0}return!1}function $(t){if(null===t)return sl;if("string"==typeof t)return ul;if("boolean"==typeof t)return cl;if("number"==typeof t)return ll;if(t instanceof nl)return hl;if(t instanceof rl)return ml;if(Array.isArray(t)){for(var e,n=t.length,r=0,i=t;r<i.length;r+=1){var o=$(i[r]);if(e){if(e===o)continue;e=fl;break}e=o}return B(e||fl,n)}return ks("object"==typeof t),pl}function q(t){return Array.isArray(t)?"("+t.map(F).join(", ")+")":"("+F(t.type)+"...)"}function U(t){if(t instanceof Sl){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}var e=!0;return t.eachChild(function(t){e&&!U(t)&&(e=!1)}),e}function H(t){if(t instanceof Sl&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild(function(t){e&&!H(t)&&(e=!1)}),e}function W(t,e){if(t instanceof Sl&&0<=e.indexOf(t.name))return!1;var n=!0;return t.eachChild(function(t){n&&!W(t,e)&&(n=!1)}),n}function G(t){if(t instanceof Cl)return G(t.boundExpression);if(t instanceof Sl&&"error"===t.name)return!1;if(t instanceof il)return!1;var e=t instanceof wl||t instanceof vl||t instanceof xl,n=!0;return t.eachChild(function(t){n=e?n&&G(t):n&&t instanceof ol}),!!n&&(U(t)&&W(t,["zoom","heatmap-density","line-progress","is-supported-script"]))}function Z(t,e){for(var n,r,i=0,o=t.length-1,a=0;i<=o;){if(n=t[a=Math.floor((i+o)/2)],r=t[a+1],e===n||n<e&&e<r)return a;if(n<e)i=a+1;else{if(!(e<n))throw new al("Input is not a number.");o=a-1}}return Math.max(a-1,0)}function Y(t,e,n){return t*(1-n)+e*n}function X(t,e,n){return new nl(Y(t.r,e.r,n),Y(t.g,e.g,n),Y(t.b,e.b,n),Y(t.a,e.a,n))}function K(t,n,r){return t.map(function(t,e){return Y(t,n[e],r)})}function J(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}function Q(t){return"string"===t.kind||"number"===t.kind||"boolean"===t.kind||"null"===t.kind}function tt(t,n){return function(){function o(t,e,n){this.type=cl,this.lhs=t,this.rhs=e,this.collator=n}return o.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var n=e.parse(t[1],1,fl);if(!n)return null;var r=e.parse(t[2],2,fl);if(!r)return null;if(!Q(n.type)&&!Q(r.type))return e.error("Expected at least one argument to be a string, number, boolean, or null, but found ("+F(n.type)+", "+F(r.type)+") instead.");if(n.type.kind!==r.type.kind&&"value"!==n.type.kind&&"value"!==r.type.kind)return e.error("Cannot compare "+F(n.type)+" and "+F(r.type)+".");var i=null;if(4===t.length){if("string"!==n.type.kind&&"string"!==r.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(i=e.parse(t[3],3,ml)))return null}return new o(n,r,i)},o.prototype.evaluate=function(t){var e=this.collator?0===this.collator.evaluate(t).compare(this.lhs.evaluate(t),this.rhs.evaluate(t)):this.lhs.evaluate(t)===this.rhs.evaluate(t);return n?!e:e},o.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},o.prototype.possibleOutputs=function(){return[!0,!1]},o.prototype.serialize=function(){var e=[t];return this.eachChild(function(t){e.push(t.serialize())}),e},o}()}function et(t,e){var n=e[0],r=e[1],i=e[2],o=e[3];n=n.evaluate(t),r=r.evaluate(t),i=i.evaluate(t);var a=o?o.evaluate(t):1,s=j(n,r,i,a);if(s)throw new al(s);return new nl(n/255*a,r/255*a,i/255*a,a)}function nt(t,e){return t in e}function rt(t,e){var n=e[t];return void 0===n?null:n}function it(t,e){var n=e[0],r=e[1];return n.evaluate(t)<r.evaluate(t)}function ot(t,e){var n=e[0],r=e[1];return n.evaluate(t)>r.evaluate(t)}function at(t,e){var n=e[0],r=e[1];return n.evaluate(t)<=r.evaluate(t)}function st(t,e){var n=e[0],r=e[1];return n.evaluate(t)>=r.evaluate(t)}function lt(t,e){var n=e[0],r=e[1];return e[2].evaluate(t).compare(n.evaluate(t),r.evaluate(t))<0}function ut(t,e){var n=e[0],r=e[1];return 0<e[2].evaluate(t).compare(n.evaluate(t),r.evaluate(t))}function ct(t,e){var n=e[0],r=e[1];return e[2].evaluate(t).compare(n.evaluate(t),r.evaluate(t))<=0}function ht(t,e){var n=e[0],r=e[1];return 0<=e[2].evaluate(t).compare(n.evaluate(t),r.evaluate(t))}function pt(t,e,n,r){for(;n<=r;){var i=n+r>>1;if(e[i]===t)return!0;e[i]>t?r=i-1:n=i+1}return!1}function ft(t){return{type:t}}function dt(t){return{result:"success",value:t}}function mt(t){return{result:"error",value:t}}function gt(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function yt(t){return!!t.expression&&-1<t.expression.parameters.indexOf("zoom")}function vt(t){return!!t.expression&&t.expression.interpolated}function _t(t){return Kl<t?Math.pow(t,1/3):t/Xl+Zl}function xt(t){return Yl<t?t*t*t:Xl*(t-Zl)}function bt(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function wt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Et(t){var e=wt(t.r),n=wt(t.g),r=wt(t.b),i=_t((.4124564*e+.3575761*n+.1804375*r)/Hl),o=_t((.2126729*e+.7151522*n+.072175*r)/Wl);return{l:116*o-16,a:500*(i-o),b:200*(o-_t((.0193339*e+.119192*n+.9503041*r)/Gl)),alpha:t.a}}function Tt(t){var e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=Wl*xt(e),n=Hl*xt(n),r=Gl*xt(r),new nl(bt(3.2404542*n-1.5371385*e-.4985314*r),bt(-.969266*n+1.8760108*e+.041556*r),bt(.0556434*n-.2040259*e+1.0572252*r),t.alpha)}function St(t,e,n){return{l:Y(t.l,e.l,n),a:Y(t.a,e.a,n),b:Y(t.b,e.b,n),alpha:Y(t.alpha,e.alpha,n)}}function Ct(t){var e=Et(t),n=e.l,r=e.a,i=e.b,o=Math.atan2(i,r)*Ql;return{h:o<0?o+360:o,c:Math.sqrt(r*r+i*i),l:n,alpha:t.a}}function At(t){var e=t.h*Jl,n=t.c;return Tt({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})}function It(t,e,n){var r=e-t;return t+n*(180<r||r<-180?r-360*Math.round(r/360):r)}function Mt(t,e,n){return{h:It(t.h,e.h,n),c:Y(t.c,e.c,n),l:Y(t.l,e.l,n),alpha:Y(t.alpha,e.alpha,n)}}function kt(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Dt(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function zt(t){return t}function Pt(r,i){var o,a,s,t="color"===i.type,e=r.stops&&"object"==typeof r.stops[0][0],n=e||r.property!==undefined,l=e||!n,u=r.type||(vt(i)?"exponential":"interval");if(t&&((r=L({},r)).stops&&(r.stops=r.stops.map(function(t){return[t[0],nl.parse(t[1])]})),r["default"]?r["default"]=nl.parse(r["default"]):r["default"]=nl.parse(i["default"])),r.colorSpace&&"rgb"!==r.colorSpace&&!nu[r.colorSpace])throw new Error("Unknown color space: "+r.colorSpace);if("exponential"===u)o=Bt;else if("interval"===u)o=Rt;else if("categorical"===u){o=Ot,a=Object.create(null);for(var c=0,h=r.stops;c<h.length;c+=1){var p=h[c];a[p[0]]=p[1]}s=typeof r.stops[0][0]}else{if("identity"!==u)throw new Error('Unknown function type "'+u+'"');o=Ft}if(e){for(var f={},d=[],m=0;m<r.stops.length;m++){var g=r.stops[m],y=g[0].zoom;f[y]===undefined&&(f[y]={zoom:y,type:r.type,property:r.property,"default":r["default"],stops:[]},d.push(y)),f[y].stops.push([g[0].value,g[1]])}for(var v=[],_=0,x=d;_<x.length;_+=1){var b=x[_];v.push([f[b].zoom,Pt(f[b],i)])}return{kind:"composite",interpolationFactor:kl.interpolationFactor.bind(undefined,{name:"linear"}),zoomStops:v.map(function(t){return t[0]}),evaluate:function(t,e){var n=t.zoom;return Bt({stops:v,base:r.base},i,n).evaluate(n,e)}}}return l?{kind:"camera",interpolationFactor:"exponential"===u?kl.interpolationFactor.bind(undefined,{name:"exponential",base:r.base!==undefined?r.base:1}):function(){return 0},zoomStops:r.stops.map(function(t){return t[0]}),evaluate:function(t){var e=t.zoom;return o(r,i,e,a,s)}}:{kind:"source",evaluate:function(t,e){var n=e&&e.properties?e.properties[r.property]:undefined;return n===undefined?Lt(r["default"],i["default"]):o(r,i,n,a,s)}}}function Lt(t,e,n){return t!==undefined?t:e!==undefined?e:n!==undefined?n:void 0}function Ot(t,e,n,r,i){return Lt(typeof n===i?r[n]:undefined,t["default"],e["default"])}function Rt(t,e,n){if("number"!==kt(n))return Lt(t["default"],e["default"]);var r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];var i=Nt(t.stops,n);return t.stops[i][1]}function Bt(t,e,n){var r=t.base!==undefined?t.base:1;if("number"!==kt(n))return Lt(t["default"],e["default"]);var i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];var o=Nt(t.stops,n),a=jt(n,r,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],l=t.stops[o+1][1],u=Rl[e.type]||zt;if(t.colorSpace&&"rgb"!==t.colorSpace){var c=nu[t.colorSpace];u=function(t,e){return c.reverse(c.interpolate(c.forward(t),c.forward(e),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=s.evaluate.apply(undefined,t),r=l.evaluate.apply(undefined,t);return n===undefined||r===undefined?undefined:u(n,r,a)}}:u(s,l,a)}function Ft(t,e,n){return"color"===e.type?n=nl.parse(n):kt(n)===e.type||"enum"===e.type&&e.values[n]||(n=undefined),Lt(n,t["default"],e["default"])}function Nt(t,e){for(var n,r,i=0,o=t.length-1,a=0;i<=o;){if(n=t[a=Math.floor((i+o)/2)][0],r=t[a+1][0],e===n||n<e&&e<r)return a;n<e?i=a+1:e<n&&(o=a-1)}return Math.max(a-1,0)}function jt(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}function Vt(t){return Array.isArray(t)&&0<t.length&&"string"==typeof t[0]&&t[0]in jl}function $t(t,e){var n=new Al(jl,[],Wt(e)),r=n.parse(t);return r?dt(new Vl(r,e)):(ks(0<n.errors.length),mt(n.errors))}function qt(t,e){if("error"===(t=$t(t,e)).result)return t;var n=t.value.expression,r=U(n);if(!r&&!gt(e))return mt([new el("","data expressions not supported")]);var i=W(n,["zoom"]);if(!i&&!yt(e))return mt([new el("","zoom expressions not supported")]);var o=Ht(n);return o||i?o instanceof el?mt([o]):o instanceof kl&&!vt(e)?mt([new el("",'"interpolate" expressions cannot be used with this property')]):dt(o?new ql(r?"camera":"composite",t.value,o):new $l(r?"constant":"source",t.value)):mt([new el("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}function Ut(t,e){if(Dt(t))return new Ul(t,e);if(Vt(t)){var n=qt(t,e);if("error"===n.result)throw new Error(n.value.map(function(t){return t.key+": "+t.message}).join(", "));return n.value}var r=t;return"string"==typeof t&&"color"===e.type&&(r=nl.parse(t)),{kind:"constant",evaluate:function(){return r}}}function Ht(t){var n=null;if(t instanceof zl)n=Ht(t.result);else if(t instanceof Dl)for(var e=0,r=t.args;e<r.length;e+=1){var i=r[e];if(n=Ht(i))break}else(t instanceof Il||t instanceof kl)&&t.input instanceof Sl&&"zoom"===t.input.name&&(n=t);return n instanceof el||t.eachChild(function(t){var e=Ht(t);e instanceof el?n=e:!n&&e?n=new el("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&e&&n!==e&&(n=new el("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Wt(t){var e={color:hl,string:ul,number:ll,"enum":ul,"boolean":cl};return"array"===t.type?B(e[t.value]||fl,t.length):e[t.type]||null}function Gt(t){return"color"===t.type&&Dt(t["default"])?new nl(0,0,0,0):"color"===t.type?nl.parse(t["default"])||null:t["default"]===undefined?null:t["default"]}function Zt(t){var e=t.key,n=t.value,r=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],l=kt(n);if("object"!==l)return[new tl(e,n,"object expected, "+l+" found")];for(var u in n){var c=u.split(".")[0],h=r[c]||r["*"],p=void 0;if(i[c])p=i[c];else if(r[c])p=xe;else if(i["*"])p=i["*"];else{if(!r["*"]){s.push(new tl(e,n[u],'unknown property "'+u+'"'));continue}p=xe}s=s.concat(p({key:(e?e+".":e)+u,value:n[u],valueSpec:h,style:o,styleSpec:a,object:n,objectKey:u},n))}for(var f in r)i[f]||r[f].required&&r[f]["default"]===undefined&&n[f]===undefined&&s.push(new tl(e,n,'missing required property "'+f+'"'));return s}function Yt(t){var e=t.value,n=t.valueSpec,r=t.style,i=t.styleSpec,o=t.key,a=t.arrayElementValidator||xe;if("array"!==kt(e))return[new tl(o,e,"array expected, "+kt(e)+" found")];if(n.length&&e.length!==n.length)return[new tl(o,e,"array length "+n.length+" expected, length "+e.length+" found")];if(n["min-length"]&&e.length<n["min-length"])return[new tl(o,e,"array length at least "+n["min-length"]+" expected, length "+e.length+" found")];var s={type:n.value};i.$version<7&&(s["function"]=n["function"]),"object"===kt(n.value)&&(s=n.value);for(var l=[],u=0;u<e.length;u++)l=l.concat(a({array:e,arrayIndex:u,value:e[u],valueSpec:s,style:r,styleSpec:i,key:o+"["+u+"]"}));return l}function Xt(t){var e=t.key,n=t.value,r=t.valueSpec,i=kt(n);return"number"!==i?[new tl(e,n,"number expected, "+i+" found")]:"minimum"in r&&n<r.minimum?[new tl(e,n,n+" is less than the minimum value "+r.minimum)]:"maximum"in r&&n>r.maximum?[new tl(e,n,n+" is greater than the maximum value "+r.maximum)]:[]}function Kt(t){function e(t){if("identity"===u)return[new tl(t.key,t.value,'identity function may not have a "stops" property')];var e=[],n=t.value;return e=e.concat(Yt({key:t.key,value:n,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:r})),"array"===kt(n)&&0===n.length&&e.push(new tl(t.key,n,"array must have at least one stop")),e}function r(t){var e=[],n=t.value,r=t.key;if("array"!==kt(n))return[new tl(r,n,"array expected, "+kt(n)+" found")];if(2!==n.length)return[new tl(r,n,"array length 2 expected, length "+n.length+" found")];if(f){if("object"!==kt(n[0]))return[new tl(r,n,"object expected, "+kt(n[0])+" found")];if(n[0].zoom===undefined)return[new tl(r,n,"object stop key must have zoom")];if(n[0].value===undefined)return[new tl(r,n,"object stop key must have value")];if(o&&o>O(n[0].zoom))return[new tl(r,n[0].zoom,"stop zoom values must appear in ascending order")];O(n[0].zoom)!==o&&(o=O(n[0].zoom),s=undefined,c={}),e=e.concat(Zt({key:r+"[0]",value:n[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:Xt,value:i}}))}else e=e.concat(i({key:r+"[0]",value:n[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},n));return e.concat(xe({key:r+"[1]",value:n[1],valueSpec:l,style:t.style,styleSpec:t.styleSpec}))}function i(t,e){var n=kt(t.value),r=O(t.value),i=null!==t.value?t.value:e;if(a){if(n!==a)return[new tl(t.key,i,n+" stop domain type must match previous stop domain type "+a)]}else a=n;if("number"!==n&&"string"!==n&&"boolean"!==n)return[new tl(t.key,i,"stop domain value must be a number, string, or boolean")];if("number"!==n&&"categorical"!==u){var o="number expected, "+n+" found";return gt(l)&&u===undefined&&(o+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new tl(t.key,i,o)]}return"categorical"!==u||"number"!==n||isFinite(r)&&Math.floor(r)===r?"categorical"!==u&&"number"===n&&s!==undefined&&r<s?[new tl(t.key,i,"stop domain values must appear in ascending order")]:(s=r,"categorical"===u&&r in c?[new tl(t.key,i,"stop domain values must be unique")]:(c[r]=!0,[])):[new tl(t.key,i,"integer expected, found "+r)]}function n(t){return xe({key:t.key,value:t.value,valueSpec:l,style:t.style,styleSpec:t.styleSpec})}var a,s,o,l=t.valueSpec,u=O(t.value.type),c={},h="categorical"!==u&&t.value.property===undefined,p=!h,f="array"===kt(t.value.stops)&&"array"===kt(t.value.stops[0])&&"object"===kt(t.value.stops[0][0]),d=Zt({key:t.key,value:t.value,valueSpec:t.styleSpec["function"],style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:e,"default":n}});return"identity"===u&&h&&d.push(new tl(t.key,t.value,'missing required property "property"')),"identity"===u||t.value.stops||d.push(new tl(t.key,t.value,'missing required property "stops"')),"exponential"===u&&t.valueSpec.expression&&!vt(t.valueSpec)&&d.push(new tl(t.key,t.value,"exponential functions not supported")),8<=t.styleSpec.$version&&(p&&!gt(t.valueSpec)?d.push(new tl(t.key,t.value,"property functions not supported")):h&&!yt(t.valueSpec)&&d.push(new tl(t.key,t.value,"zoom functions not supported"))),"categorical"!==u&&!f||t.value.property!==undefined||d.push(new tl(t.key,t.value,'"property" property is required')),d}function Jt(e){var t=("property"===e.expressionContext?qt:$t)(R(e.value),e.valueSpec);return"error"===t.result?t.value.map(function(t){return new tl(""+e.key+t.key,e.value,t.message)}):"property"===e.expressionContext&&"text-font"===e.propertyKey&&-1!==t.value._styleExpression.expression.possibleOutputs().indexOf(undefined)?[new tl(e.key,e.value,'Invalid data expression for "text-font". Output values must be contained as literals within the expression.')]:"property"!==e.expressionContext||"layout"!==e.propertyType||H(t.value._styleExpression.expression)?[]:[new tl(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')]}function Qt(t){var e=t.value,n=t.key,r=kt(e);return"boolean"!==r?[new tl(n,e,"boolean expected, "+r+" found")]:[]}function te(t){var e=t.key,n=t.value,r=kt(n);return"string"!==r?[new tl(e,n,"color expected, "+r+" found")]:null===yl(n)?[new tl(e,n,'color expected, "'+n+'" found')]:[]}function ee(t){var e=t.key,n=t.value,r=t.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(O(n))&&i.push(new tl(e,n,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(r.values).indexOf(O(n))&&i.push(new tl(e,n,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(n)+" found")),i}function ne(t){if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return 2<=t.length&&"$id"!==t[1]&&"$type"!==t[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3===t.length&&(Array.isArray(t[1])||Array.isArray(t[2]));case"any":case"all":for(var e=0,n=t.slice(1);e<n.length;e+=1){var r=n[e];if(!ne(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}function re(t){if(!t)return function(){return!0};ne(t)||(t=oe(t));var n=$t(t,ru);if("error"===n.result)throw new Error(n.value.map(function(t){return t.key+": "+t.message}).join(", "));return function(t,e){return n.value.evaluate(t,e)}}function ie(t,e){return t<e?-1:e<t?1:0}function oe(t){if(!t)return!0;var e=t[0];return t.length<=1?"any"!==e:"=="===e?ae(t[1],t[2],"=="):"!="===e?ce(ae(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?ae(t[1],t[2],e):"any"===e?se(t.slice(1)):"all"===e?["all"].concat(t.slice(1).map(oe)):"none"===e?["all"].concat(t.slice(1).map(oe).map(ce)):"in"===e?le(t[1],t.slice(2)):"!in"===e?ce(le(t[1],t.slice(2))):"has"===e?ue(t[1]):"!has"!==e||ce(ue(t[1]))}function ae(t,e,n){switch(t){case"$type":return["filter-type-"+n,e];case"$id":return["filter-id-"+n,e];default:return["filter-"+n,t,e]}}function se(t){return["any"].concat(t.map(oe))}function le(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return 200<e.length&&!e.some(function(t){return typeof t!=typeof e[0]})?["filter-in-large",t,["literal",e.sort(ie)]]:["filter-in-small",t,["literal",e]]}}function ue(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function ce(t){return["!",t]}function he(t){return ne(R(t.value))?Jt(L({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):pe(t)}function pe(t){var e=t.value,n=t.key;if("array"!==kt(e))return[new tl(n,e,"array expected, "+kt(e)+" found")];var r,i=t.styleSpec,o=[];if(e.length<1)return[new tl(n,e,"filter array must have at least 1 element")];switch(o=o.concat(ee({key:n+"[0]",value:e[0],valueSpec:i.filter_operator,style:t.style,styleSpec:t.styleSpec})),O(e[0])){case"<":case"<=":case">":case">=":2<=e.length&&"$type"===O(e[1])&&o.push(new tl(n,e,'"$type" cannot be use with operator "'+e[0]+'"'));case"==":case"!=":3!==e.length&&o.push(new tl(n,e,'filter array for operator "'+e[0]+'" must have 3 elements'));case"in":case"!in":2<=e.length&&"string"!==(r=kt(e[1]))&&o.push(new tl(n+"[1]",e[1],"string expected, "+r+" found"));for(var a=2;a<e.length;a++)r=kt(e[a]),"$type"===O(e[1])?o=o.concat(ee({key:n+"["+a+"]",value:e[a],valueSpec:i.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&o.push(new tl(n+"["+a+"]",e[a],"string, number, or boolean expected, "+r+" found"));break;case"any":case"all":case"none":for(var s=1;s<e.length;s++)o=o.concat(pe({key:n+"["+s+"]",value:e[s],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":r=kt(e[1]),2!==e.length?o.push(new tl(n,e,'filter array for "'+e[0]+'" operator must have 2 elements')):"string"!==r&&o.push(new tl(n+"[1]",e[1],"string expected, "+r+" found"))}return o}function fe(t,e){var n=t.key,r=t.style,i=t.styleSpec,o=t.value,a=t.objectKey,s=i[e+"_"+t.layerType];if(!s)return[];var l=a.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return xe({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});var u,c=t.valueSpec||s[a];if(!c)return[new tl(n,o,'unknown property "'+a+'"')];if("string"===kt(o)&&gt(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o)))return[new tl(n,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(u[1])+" }`.")];var h=[];return"symbol"===t.layerType&&("text-field"===a&&r&&!r.glyphs&&h.push(new tl(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Dt(R(o))&&"identity"===O(o.type)&&h.push(new tl(n,o,'"text-font" does not support identity functions'))),h.concat(xe({key:t.key,value:o,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:a}))}function de(t){return fe(t,"paint")}function me(t){return fe(t,"layout")}function ge(t){var e=[],n=t.value,r=t.key,i=t.style,o=t.styleSpec;n.type||n.ref||e.push(new tl(r,n,'either "type" or "ref" is required'));var a,s=O(n.type),l=O(n.ref);if(n.id)for(var u=O(n.id),c=0;c<t.arrayIndex;c++){var h=i.layers[c];O(h.id)===u&&e.push(new tl(r,n.id,'duplicate layer id "'+n.id+'", previously used at line '+h.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach(function(t){t in n&&e.push(new tl(r,n[t],'"'+t+'" is prohibited for ref layers'))}),i.layers.forEach(function(t){O(t.id)===l&&(a=t)}),a?a.ref?e.push(new tl(r,n.ref,"ref cannot reference another ref layer")):s=O(a.type):e.push(new tl(r,n.ref,'ref layer "'+l+'" not found'));else if("background"!==s)if(n.source){var p=i.sources&&i.sources[n.source],f=p&&O(p.type);p?"vector"===f&&"raster"===s?e.push(new tl(r,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===f&&"raster"!==s?e.push(new tl(r,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==f||n["source-layer"]?"raster-dem"===f&&"hillshade"!==s?e.push(new tl(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===f&&p.lineMetrics||e.push(new tl(r,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new tl(r,n,'layer "'+n.id+'" must specify a "source-layer"')):e.push(new tl(r,n.source,'source "'+n.source+'" not found'))}else e.push(new tl(r,n,'missing required property "source"'));return e=e.concat(Zt({key:r,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return xe({key:r+".type",value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"})},filter:he,layout:function(t){return Zt({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return me(L({layerType:s},t))}}})},paint:function(t){return Zt({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return de(L({layerType:s},t))}}})}}}))}function ye(t){var e=t.value,n=t.key,r=t.styleSpec,i=t.style;if(!e.type)return[new tl(n,e,'"type" is required')];var o=O(e.type),a=[];switch(o){case"vector":case"raster":case"raster-dem":if(a=a.concat(Zt({key:n,value:e,valueSpec:r["source_"+o.replace("-","_")],style:t.style,styleSpec:r})),"url"in e)for(var s in e)["type","url","tileSize"].indexOf(s)<0&&a.push(new tl(n+"."+s,e[s],'a source with a "url" property may not include a "'+s+'" property'));return a;case"geojson":return Zt({key:n,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r});case"video":return Zt({key:n,value:e,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return Zt({key:n,value:e,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return a.push(new tl(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")),a;default:return ee({key:n+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function ve(t){var e=t.value,n=t.styleSpec,r=n.light,i=t.style,o=[],a=kt(e);if(e===undefined)return o;if("object"!==a)return o=o.concat([new tl("light",e,"object expected, "+a+" found")]);for(var s in e){var l=s.match(/^(.*)-transition$/);o=l&&r[l[1]]&&r[l[1]].transition?o.concat(xe({key:s,value:e[s],valueSpec:n.transition,style:i,styleSpec:n})):r[s]?o.concat(xe({key:s,value:e[s],valueSpec:r[s],style:i,styleSpec:n})):o.concat([new tl(s,e[s],'unknown property "'+s+'"')])}return o}function _e(t){var e=t.value,n=t.key,r=kt(e);return"string"!==r?[new tl(n,e,"string expected, "+r+" found")]:[]}function xe(t){var e=t.value,n=t.valueSpec,r=t.styleSpec;return n.expression&&Dt(O(e))?Kt(t):n.expression&&Vt(R(e))?Jt(t):n.type&&iu[n.type]?iu[n.type](t):Zt(L({},t,{valueSpec:n.type?r[n.type]:n}))}function be(t){var e=t.value,n=t.key,r=_e(t);return r.length||(-1===e.indexOf("{fontstack}")&&r.push(new tl(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new tl(n,e,'"glyphs" url must include a "{range}" token'))),r}function we(t,e){e=e||Qs;var n=[];return n=n.concat(xe({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:be,"*":function(){return[]}}})),t.constants&&(n=n.concat(P({key:"constants",value:t.constants,style:t,styleSpec:e}))),Ee(n)}function Ee(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function Te(t){return function(){return Ee(t.apply(this,arguments))}}function Se(t,e){var n=!1;if(e&&e.length)for(var r=0,i=e;r<i.length;r+=1){var o=i[r];t.fire(new Ks(new Error(o.message))),n=!0}return n}function Ce(t,e,n){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],e=i[1],n=i[2],this.d=e+2*n;for(var o=0;o<this.d*this.d;o++){var a=i[cu+o],s=i[cu+o+1];r.push(a===s?null:i.subarray(a,s))}var l=i[cu+r.length],u=i[cu+r.length+1];this.keys=i.subarray(l,u),this.bboxes=i.subarray(u),this.insert=this._insertReadonly
}else{this.d=e+2*n;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var h=n/e*t;this.min=-h,this.max=t+h}function Ae(t,e,n){void 0===n&&(n={}),ks(!fu[t],t+" is already registered."),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),fu[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}function Ie(t,e){if(null===t||t===undefined||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(t instanceof ArrayBuffer)return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var n=t;return e&&e.push(n.buffer),n}if(t instanceof pu)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var r=[],i=0,o=t;i<o.length;i+=1){var a=o[i];r.push(Ie(a,e))}return r}if("object"==typeof t){var s=t.constructor,l=s._classRegistryKey;if(!l)throw new Error("can't serialize object of unregistered class");ks(fu[l]);var u={};if(s.serialize)u._serialized=s.serialize(t,e);else{for(var c in t)if(t.hasOwnProperty(c)&&!(0<=fu[l].omit.indexOf(c))){var h=t[c];u[c]=0<=fu[l].shallow.indexOf(c)?h:Ie(h,e)}t instanceof Error&&(u.message=t.message)}return{name:l,properties:u}}throw new Error("can't serialize object of type "+typeof t)}function Me(t){if(null===t||t===undefined||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof ArrayBuffer||ArrayBuffer.isView(t)||t instanceof pu)return t;if(Array.isArray(t))return t.map(function(t){return Me(t)});if("object"==typeof t){var e=t,n=e.name,r=e.properties;if(!n)throw new Error("can't deserialize object of anonymous class");var i=fu[n].klass;if(!i)throw new Error("can't deserialize unregistered class "+n);if(i.deserialize)return i.deserialize(r._serialized);for(var o=Object.create(i.prototype),a=0,s=Object.keys(r);a<s.length;a+=1){var l=s[a];o[l]=0<=fu[n].shallow.indexOf(l)?r[l]:Me(r[l])}return o}throw new Error("can't deserialize object of type "+typeof t)}function ke(t){for(var e=0,n=t;e<n.length;e+=1){if(Le(n[e].charCodeAt(0)))return!0}return!1}function De(t){for(var e=0,n=t;e<n.length;e+=1){if(!ze(n[e].charCodeAt(0)))return!1}return!0}function ze(t){return!Mu.Arabic(t)&&(!Mu["Arabic Supplement"](t)&&(!Mu["Arabic Extended-A"](t)&&(!Mu["Arabic Presentation Forms-A"](t)&&!Mu["Arabic Presentation Forms-B"](t))))}function Pe(t){return!(t<11904)&&(!!Mu["Bopomofo Extended"](t)||(!!Mu.Bopomofo(t)||(!!Mu["CJK Compatibility Forms"](t)||(!!Mu["CJK Compatibility Ideographs"](t)||(!!Mu["CJK Compatibility"](t)||(!!Mu["CJK Radicals Supplement"](t)||(!!Mu["CJK Strokes"](t)||(!!Mu["CJK Symbols and Punctuation"](t)||(!!Mu["CJK Unified Ideographs Extension A"](t)||(!!Mu["CJK Unified Ideographs"](t)||(!!Mu["Enclosed CJK Letters and Months"](t)||(!!Mu["Halfwidth and Fullwidth Forms"](t)||(!!Mu.Hiragana(t)||(!!Mu["Ideographic Description Characters"](t)||(!!Mu["Kangxi Radicals"](t)||(!!Mu["Katakana Phonetic Extensions"](t)||(!!Mu.Katakana(t)||(!!Mu["Vertical Forms"](t)||(!!Mu["Yi Radicals"](t)||!!Mu["Yi Syllables"](t))))))))))))))))))))}function Le(t){return 746===t||747===t||!(t<4352)&&(!!Mu["Bopomofo Extended"](t)||(!!Mu.Bopomofo(t)||(!(!Mu["CJK Compatibility Forms"](t)||65097<=t&&t<=65103)||(!!Mu["CJK Compatibility Ideographs"](t)||(!!Mu["CJK Compatibility"](t)||(!!Mu["CJK Radicals Supplement"](t)||(!!Mu["CJK Strokes"](t)||(!(!Mu["CJK Symbols and Punctuation"](t)||12296<=t&&t<=12305||12308<=t&&t<=12319||12336===t)||(!!Mu["CJK Unified Ideographs Extension A"](t)||(!!Mu["CJK Unified Ideographs"](t)||(!!Mu["Enclosed CJK Letters and Months"](t)||(!!Mu["Hangul Compatibility Jamo"](t)||(!!Mu["Hangul Jamo Extended-A"](t)||(!!Mu["Hangul Jamo Extended-B"](t)||(!!Mu["Hangul Jamo"](t)||(!!Mu["Hangul Syllables"](t)||(!!Mu.Hiragana(t)||(!!Mu["Ideographic Description Characters"](t)||(!!Mu.Kanbun(t)||(!!Mu["Kangxi Radicals"](t)||(!!Mu["Katakana Phonetic Extensions"](t)||(!(!Mu.Katakana(t)||12540===t)||(!(!Mu["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||65306<=t&&t<=65310||65339===t||65341===t||65343===t||65371<=t&&t<=65503||65507===t||65512<=t&&t<=65519)||(!(!Mu["Small Form Variants"](t)||65112<=t&&t<=65118||65123<=t&&t<=65126)||(!!Mu["Unified Canadian Aboriginal Syllabics"](t)||(!!Mu["Unified Canadian Aboriginal Syllabics Extended"](t)||(!!Mu["Vertical Forms"](t)||(!!Mu["Yijing Hexagram Symbols"](t)||(!!Mu["Yi Syllables"](t)||!!Mu["Yi Radicals"](t))))))))))))))))))))))))))))))}function Oe(t){return!(!Mu["Latin-1 Supplement"](t)||167!==t&&169!==t&&174!==t&&177!==t&&188!==t&&189!==t&&190!==t&&215!==t&&247!==t)||(!(!Mu["General Punctuation"](t)||8214!==t&&8224!==t&&8225!==t&&8240!==t&&8241!==t&&8251!==t&&8252!==t&&8258!==t&&8263!==t&&8264!==t&&8265!==t&&8273!==t)||(!!Mu["Letterlike Symbols"](t)||(!!Mu["Number Forms"](t)||(!(!Mu["Miscellaneous Technical"](t)||!(8960<=t&&t<=8967||8972<=t&&t<=8991||8996<=t&&t<=9e3||9003===t||9085<=t&&t<=9114||9150<=t&&t<=9165||9167===t||9169<=t&&t<=9179||9186<=t&&t<=9215))||(!(!Mu["Control Pictures"](t)||9251===t)||(!!Mu["Optical Character Recognition"](t)||(!!Mu["Enclosed Alphanumerics"](t)||(!!Mu["Geometric Shapes"](t)||(!(!Mu["Miscellaneous Symbols"](t)||9754<=t&&t<=9759)||(!(!Mu["Miscellaneous Symbols and Arrows"](t)||!(11026<=t&&t<=11055||11088<=t&&t<=11097||11192<=t&&t<=11243))||(!!Mu["CJK Symbols and Punctuation"](t)||(!!Mu.Katakana(t)||(!!Mu["Private Use Area"](t)||(!!Mu["CJK Compatibility Forms"](t)||(!!Mu["Small Form Variants"](t)||(!!Mu["Halfwidth and Fullwidth Forms"](t)||(8734===t||8756===t||8757===t||9984<=t&&t<=10087||10102<=t&&t<=10131||65532===t||65533===t)))))))))))))))))}function Re(t){return!(Le(t)||Oe(t))}function Be(t,e){return!(!e&&(1424<=t&&t<=2303||Mu["Arabic Presentation Forms-A"](t)||Mu["Arabic Presentation Forms-B"](t)))&&!(2304<=t&&t<=3583||3840<=t&&t<=4255||Mu.Khmer(t))}function Fe(t,e){for(var n=0,r=t;n<r.length;n+=1){if(!Be(r[n].charCodeAt(0),e))return!1}return!0}function Ne(t,i){void 0===i&&(i=1);var o=0,a=0;return{members:t.map(function(t){ks(t.name.length);var e=je(t.type),n=o=Ve(o,Math.max(i,e)),r=t.components||1;return a=Math.max(a,e),o+=e*r,{name:t.name,type:t.type,components:r,offset:n}}),size:Ve(o,Math.max(a,i)),alignment:i}}function je(t){return $u[t].BYTES_PER_ELEMENT}function Ve(t,e){return Math.ceil(t/e)*e}function $e(t){return[Ic(255*t.r,255*t.g),Ic(255*t.b,255*t.a)]}function qe(t,e){return{"text-opacity":"opacity","icon-opacity":"opacity","text-color":"fill_color","icon-color":"fill_color","text-halo-color":"halo_color","icon-halo-color":"halo_color","text-halo-blur":"halo_blur","icon-halo-blur":"halo_blur","text-halo-width":"halo_width","icon-halo-width":"halo_width","line-gap-width":"gapwidth"}[t]||t.replace(e+"-","").replace(/-/g,"_")}function Ue(t){return{min:-1*Math.pow(2,t-1),max:Math.pow(2,t-1)-1}}function He(t){for(var e=kc/t.extent,n=t.loadGeometry(),r=0;r<n.length;r++)for(var i=n[r],o=0;o<i.length;o++){var a=i[o];a.x=Math.round(a.x*e),a.y=Math.round(a.y*e),(a.x<Dc.min||a.x>Dc.max||a.y<Dc.min||a.y>Dc.max)&&T("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function We(t,e,n,r,i){t.emplaceBack(2*e+(r+1)/2,2*n+(i+1)/2)}function Ge(t,e){for(var n=0;n<t.length;n++)if(on(e,t[n]))return!0;for(var r=0;r<e.length;r++)if(on(t,e[r]))return!0;return!!Qe(t,e)}function Ze(t,e,n){for(var r=0;r<t.length;r++){var i=t[r];if(on(i,e))return!0;if(en(e,i,n))return!0}return!1}function Ye(t,e,n){for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<i.length;o++)if(Ze(t,i[o],n))return!0;return!1}function Xe(t,e){if(1===t.length&&1===t[0].length)return rn(e,t[0][0]);for(var n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.length;i++)if(rn(t,r[i]))return!0;for(var o=0;o<t.length;o++){for(var a=t[o],s=0;s<a.length;s++)if(rn(e,a[s]))return!0;for(var l=0;l<e.length;l++)if(Qe(a,e[l]))return!0}return!1}function Ke(t,e,n){for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<t.length;o++){var a=t[o];if(3<=a.length)for(var s=0;s<i.length;s++)if(on(a,i[s]))return!0;if(Je(a,i,n))return!0}return!1}function Je(t,e,n){if(1<t.length){if(Qe(t,e))return!0;for(var r=0;r<e.length;r++)if(en(e[r],t,n))return!0}for(var i=0;i<t.length;i++)if(en(t[i],e,n))return!0;return!1}function Qe(t,e){if(0===t.length||0===e.length)return!1;for(var n=0;n<t.length-1;n++)for(var r=t[n],i=t[n+1],o=0;o<e.length-1;o++){if(tn(r,i,e[o],e[o+1]))return!0}return!1}function tn(t,e,n,r){return S(t,n,r)!==S(e,n,r)&&S(t,e,n)!==S(t,e,r)}function en(t,e,n){var r=n*n;if(1===e.length)return t.distSqr(e[0])<r;for(var i=1;i<e.length;i++){if(nn(t,e[i-1],e[i])<r)return!0}return!1}function nn(t,e,n){var r=e.distSqr(n);if(0===r)return t.distSqr(e);var i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return i<0?t.distSqr(e):1<i?t.distSqr(n):t.distSqr(n.sub(e)._mult(i)._add(e))}function rn(t,e){for(var n,r,i,o=!1,a=0;a<t.length;a++)for(var s=0,l=(n=t[a]).length-1;s<n.length;l=s++)r=n[s],i=n[l],r.y>e.y!=i.y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(o=!o);return o}function on(t,e){for(var n=!1,r=0,i=t.length-1;r<t.length;i=r++){var o=t[r],a=t[i];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function an(t,e,n){var r=e.paint.get(t).value;return"constant"===r.kind?r.value:n.programConfigurations.get(e.id).binders[t].statistics.max}function sn(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function ln(t,e,n,r,i){if(!e[0]&&!e[1])return t;var o=Fs.convert(e);"viewport"===n&&o._rotate(-r);for(var a=[],s=0;s<t.length;s++){for(var l=t[s],u=[],c=0;c<l.length;c++)u.push(l[c].sub(o._mult(i)));a.push(u)}return a}function un(){var t=new Hc(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function cn(t){var e=new Hc(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function hn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function pn(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function fn(t,e,n,r){var i=new Hc(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function dn(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function mn(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function gn(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*o-i*r;return a?(a=1/a,t[0]=o*a,t[1]=-r*a,t[2]=-i*a,t[3]=n*a,t):null}function yn(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function vn(t){return t[0]*t[3]-t[2]*t[1]}function _n(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],l=n[1],u=n[2],c=n[3];return t[0]=r*s+o*l,t[1]=i*s+a*l,t[2]=r*u+o*c,t[3]=i*u+a*c,t}function xn(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=r*l+o*s,t[1]=i*l+a*s,t[2]=r*-s+o*l,t[3]=i*-s+a*l,t}function bn(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],l=n[1];return t[0]=r*s,t[1]=i*s,t[2]=o*l,t[3]=a*l,t}function wn(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t}function En(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function Tn(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function Sn(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))}function Cn(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function An(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function In(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function Mn(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function kn(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],l=e[2],u=e[3];return Math.abs(n-a)<=Uc*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=Uc*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-l)<=Uc*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(o-u)<=Uc*Math.max(1,Math.abs(o),Math.abs(u))}function Dn(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function zn(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function Pn(){var t=new Hc(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ln(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function On(t){var e=new Hc(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Rn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Bn(t,e,n,r,i,o,a,s,l){var u=new Hc(9);return u[0]=t,u[1]=e,u[2]=n,u[3]=r,u[4]=i,u[5]=o,u[6]=a,u[7]=s,u[8]=l,u}function Fn(t,e,n,r,i,o,a,s,l,u){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=l,t[8]=u,t}function Nn(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function jn(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Vn(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=c*a-s*u,p=-c*o+s*l,f=u*o-a*l,d=n*h+r*p+i*f;return d?(d=1/d,t[0]=h*d,t[1]=(-c*r+i*u)*d,t[2]=(s*r-i*a)*d,t[3]=p*d,t[4]=(c*n-i*l)*d,t[5]=(-s*n+i*o)*d,t[6]=f*d,t[7]=(-u*n+r*l)*d,t[8]=(a*n-r*o)*d,t):null}function $n(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8];return t[0]=a*c-s*u,t[1]=i*u-r*c,t[2]=r*s-i*a,t[3]=s*l-o*c,t[4]=n*c-i*l,t[5]=i*o-n*s,t[6]=o*u-a*l,t[7]=r*l-n*u,t[8]=n*a-r*o,t}function qn(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],l=t[7],u=t[8];return e*(u*o-a*l)+n*(-u*i+a*s)+r*(l*i-o*s)}function Un(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=n[0],f=n[1],d=n[2],m=n[3],g=n[4],y=n[5],v=n[6],_=n[7],x=n[8];return t[0]=p*r+f*a+d*u,t[1]=p*i+f*s+d*c,t[2]=p*o+f*l+d*h,t[3]=m*r+g*a+y*u,t[4]=m*i+g*s+y*c,t[5]=m*o+g*l+y*h,t[6]=v*r+_*a+x*u,t[7]=v*i+_*s+x*c,t[8]=v*o+_*l+x*h,t}function Hn(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=n[0],f=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=p*r+f*a+u,t[7]=p*i+f*s+c,t[8]=p*o+f*l+h,t}function Wn(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=Math.sin(n),f=Math.cos(n);return t[0]=f*r+p*a,t[1]=f*i+p*s,t[2]=f*o+p*l,t[3]=f*a-p*r,t[4]=f*s-p*i,t[5]=f*l-p*o,t[6]=u,t[7]=c,t[8]=h,t}function Gn(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Zn(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Yn(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Xn(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Kn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function Jn(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,l=i+i,u=n*a,c=r*a,h=r*s,p=i*a,f=i*s,d=i*l,m=o*a,g=o*s,y=o*l;return t[0]=1-h-d,t[3]=c-y,t[6]=p+g,t[1]=c+y,t[4]=1-u-d,t[7]=f-m,t[2]=p-g,t[5]=f+m,t[8]=1-u-h,t}function Qn(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],p=e[10],f=e[11],d=e[12],m=e[13],g=e[14],y=e[15],v=n*s-r*a,_=n*l-i*a,x=n*u-o*a,b=r*l-i*s,w=r*u-o*s,E=i*u-o*l,T=c*m-h*d,S=c*g-p*d,C=c*y-f*d,A=h*g-p*m,I=h*y-f*m,M=p*y-f*g,k=v*M-_*I+x*A+b*C-w*S+E*T;return k?(k=1/k,t[0]=(s*M-l*I+u*A)*k,t[1]=(l*C-a*M-u*S)*k,t[2]=(a*I-s*C+u*T)*k,t[3]=(i*I-r*M-o*A)*k,t[4]=(n*M-i*C+o*S)*k,t[5]=(r*C-n*I-o*T)*k,t[6]=(m*E-g*w+y*b)*k,t[7]=(g*x-d*E-y*_)*k,t[8]=(d*w-m*x+y*v)*k,t):null}function tr(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function er(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function nr(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))}function rr(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function ir(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function or(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function ar(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function sr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function lr(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],h=e[0],p=e[1],f=e[2],d=e[3],m=e[4],g=e[5],y=e[6],v=e[7],_=e[8];return Math.abs(n-h)<=Uc*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-p)<=Uc*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(i-f)<=Uc*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(o-d)<=Uc*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-m)<=Uc*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(s-g)<=Uc*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(l-y)<=Uc*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(u-v)<=Uc*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(c-_)<=Uc*Math.max(1,Math.abs(c),Math.abs(_))}function ur(){var t=new Hc(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function cr(t){var e=new Hc(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function hr(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function pr(t,e,n,r,i,o,a,s,l,u,c,h,p,f,d,m){var g=new Hc(16);return g[0]=t,g[1]=e,g[2]=n,g[3]=r,g[4]=i,g[5]=o,g[6]=a,g[7]=s,g[8]=l,g[9]=u,g[10]=c,g[11]=h,g[12]=p,g[13]=f,g[14]=d,g[15]=m,g}function fr(t,e,n,r,i,o,a,s,l,u,c,h,p,f,d,m,g){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=l,t[8]=u,t[9]=c,t[10]=h,t[11]=p,t[12]=f,t[13]=d,t[14]=m,t[15]=g,t}function dr(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function mr(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function gr(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],p=e[10],f=e[11],d=e[12],m=e[13],g=e[14],y=e[15],v=n*s-r*a,_=n*l-i*a,x=n*u-o*a,b=r*l-i*s,w=r*u-o*s,E=i*u-o*l,T=c*m-h*d,S=c*g-p*d,C=c*y-f*d,A=h*g-p*m,I=h*y-f*m,M=p*y-f*g,k=v*M-_*I+x*A+b*C-w*S+E*T;return k?(k=1/k,t[0]=(s*M-l*I+u*A)*k,t[1]=(i*I-r*M-o*A)*k,t[2]=(m*E-g*w+y*b)*k,t[3]=(p*w-h*E-f*b)*k,t[4]=(l*C-a*M-u*S)*k,t[5]=(n*M-i*C+o*S)*k,t[6]=(g*x-d*E-y*_)*k,t[7]=(c*E-p*x+f*_)*k,t[8]=(a*I-s*C+u*T)*k,t[9]=(r*C-n*I-o*T)*k,t[10]=(d*w-m*x+y*v)*k,t[11]=(h*x-c*w-f*v)*k,t[12]=(s*S-a*A-l*T)*k,t[13]=(n*A-r*S+i*T)*k,t[14]=(m*_-d*b-g*v)*k,t[15]=(c*b-h*_+p*v)*k,t):null}function yr(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],p=e[10],f=e[11],d=e[12],m=e[13],g=e[14],y=e[15];return t[0]=s*(p*y-f*g)-h*(l*y-u*g)+m*(l*f-u*p),t[1]=-(r*(p*y-f*g)-h*(i*y-o*g)+m*(i*f-o*p)),t[2]=r*(l*y-u*g)-s*(i*y-o*g)+m*(i*u-o*l),t[3]=-(r*(l*f-u*p)-s*(i*f-o*p)+h*(i*u-o*l)),t[4]=-(a*(p*y-f*g)-c*(l*y-u*g)+d*(l*f-u*p)),t[5]=n*(p*y-f*g)-c*(i*y-o*g)+d*(i*f-o*p),t[6]=-(n*(l*y-u*g)-a*(i*y-o*g)+d*(i*u-o*l)),t[7]=n*(l*f-u*p)-a*(i*f-o*p)+c*(i*u-o*l),t[8]=a*(h*y-f*m)-c*(s*y-u*m)+d*(s*f-u*h),t[9]=-(n*(h*y-f*m)-c*(r*y-o*m)+d*(r*f-o*h)),t[10]=n*(s*y-u*m)-a*(r*y-o*m)+d*(r*u-o*s),t[11]=-(n*(s*f-u*h)-a*(r*f-o*h)+c*(r*u-o*s)),t[12]=-(a*(h*g-p*m)-c*(s*g-l*m)+d*(s*p-l*h)),t[13]=n*(h*g-p*m)-c*(r*g-i*m)+d*(r*p-i*h),t[14]=-(n*(s*g-l*m)-a*(r*g-i*m)+d*(r*l-i*s)),t[15]=n*(s*p-l*h)-a*(r*p-i*h)+c*(r*l-i*s),t}function vr(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],h=t[10],p=t[11],f=t[12],d=t[13],m=t[14],g=t[15];return(e*a-n*o)*(h*g-p*m)-(e*s-r*o)*(c*g-p*d)+(e*l-i*o)*(c*m-h*d)+(n*s-r*a)*(u*g-p*f)-(n*l-i*a)*(u*m-h*f)+(r*l-i*s)*(u*d-c*f)}function _r(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],f=e[10],d=e[11],m=e[12],g=e[13],y=e[14],v=e[15],_=n[0],x=n[1],b=n[2],w=n[3];return t[0]=_*r+x*s+b*h+w*m,t[1]=_*i+x*l+b*p+w*g,t[2]=_*o+x*u+b*f+w*y,t[3]=_*a+x*c+b*d+w*v,_=n[4],x=n[5],b=n[6],w=n[7],t[4]=_*r+x*s+b*h+w*m,t[5]=_*i+x*l+b*p+w*g,t[6]=_*o+x*u+b*f+w*y,t[7]=_*a+x*c+b*d+w*v,_=n[8],x=n[9],b=n[10],w=n[11],t[8]=_*r+x*s+b*h+w*m,t[9]=_*i+x*l+b*p+w*g,t[10]=_*o+x*u+b*f+w*y,t[11]=_*a+x*c+b*d+w*v,_=n[12],x=n[13],b=n[14],w=n[15],t[12]=_*r+x*s+b*h+w*m,t[13]=_*i+x*l+b*p+w*g,t[14]=_*o+x*u+b*f+w*y,t[15]=_*a+x*c+b*d+w*v,t}function xr(t,e,n){var r,i,o,a,s,l,u,c,h,p,f,d,m=n[0],g=n[1],y=n[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*y+e[12],t[13]=e[1]*m+e[5]*g+e[9]*y+e[13],t[14]=e[2]*m+e[6]*g+e[10]*y+e[14],t[15]=e[3]*m+e[7]*g+e[11]*y+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],f=e[10],d=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=p,t[10]=f,t[11]=d,t[12]=r*m+s*g+h*y+e[12],t[13]=i*m+l*g+p*y+e[13],t[14]=o*m+u*g+f*y+e[14],t[15]=a*m+c*g+d*y+e[15]),t}function br(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function wr(t,e,n,r){var i,o,a,s,l,u,c,h,p,f,d,m,g,y,v,_,x,b,w,E,T,S,C,A,I=r[0],M=r[1],k=r[2],D=Math.sqrt(I*I+M*M+k*k);return D<Uc?null:(I*=D=1/D,M*=D,k*=D,i=Math.sin(n),a=1-(o=Math.cos(n)),s=e[0],l=e[1],u=e[2],c=e[3],h=e[4],p=e[5],f=e[6],d=e[7],m=e[8],g=e[9],y=e[10],v=e[11],_=I*I*a+o,x=M*I*a+k*i,b=k*I*a-M*i,w=I*M*a-k*i,E=M*M*a+o,T=k*M*a+I*i,S=I*k*a+M*i,C=M*k*a-I*i,A=k*k*a+o,t[0]=s*_+h*x+m*b,t[1]=l*_+p*x+g*b,t[2]=u*_+f*x+y*b,t[3]=c*_+d*x+v*b,t[4]=s*w+h*E+m*T,t[5]=l*w+p*E+g*T,t[6]=u*w+f*E+y*T,t[7]=c*w+d*E+v*T,t[8]=s*S+h*C+m*A,t[9]=l*S+p*C+g*A,t[10]=u*S+f*C+y*A,t[11]=c*S+d*C+v*A,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function Er(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+u*r,t[5]=a*i+c*r,t[6]=s*i+h*r,t[7]=l*i+p*r,t[8]=u*i-o*r,t[9]=c*i-a*r,t[10]=h*i-s*r,t[11]=p*i-l*r,t}function Tr(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],u=e[8],c=e[9],h=e[10],p=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-u*r,t[1]=a*i-c*r,t[2]=s*i-h*r,t[3]=l*i-p*r,t[8]=o*r+u*i,t[9]=a*r+c*i,t[10]=s*r+h*i,t[11]=l*r+p*i,t}function Sr(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],u=e[4],c=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+u*r,t[1]=a*i+c*r,t[2]=s*i+h*r,t[3]=l*i+p*r,t[4]=u*i-o*r,t[5]=c*i-a*r,t[6]=h*i-s*r,t[7]=p*i-l*r,t}function Cr(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function Ar(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ir(t,e,n){var r,i,o,a=n[0],s=n[1],l=n[2],u=Math.sqrt(a*a+s*s+l*l);return u<Uc?null:(a*=u=1/u,s*=u,l*=u,r=Math.sin(e),o=1-(i=Math.cos(e)),t[0]=a*a*o+i,t[1]=s*a*o+l*r,t[2]=l*a*o-s*r,t[3]=0,t[4]=a*s*o-l*r,t[5]=s*s*o+i,t[6]=l*s*o+a*r,t[7]=0,t[8]=a*l*o+s*r,t[9]=s*l*o-a*r,t[10]=l*l*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function Mr(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function kr(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Dr(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function zr(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=r+r,l=i+i,u=o+o,c=r*s,h=r*l,p=r*u,f=i*l,d=i*u,m=o*u,g=a*s,y=a*l,v=a*u;return t[0]=1-(f+m),t[1]=h+v,t[2]=p-y,t[3]=0,t[4]=h-v,t[5]=1-(c+m),t[6]=d+g,t[7]=0,t[8]=p+y,t[9]=d-g,t[10]=1-(c+f),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Pr(t,e){var n=new Hc(3),r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=r*r+i*i+o*o+a*a;return 0<h?(n[0]=2*(s*a+c*r+l*o-u*i)/h,n[1]=2*(l*a+c*i+u*r-s*o)/h,n[2]=2*(u*a+c*o+s*i-l*r)/h):(n[0]=2*(s*a+c*r+l*o-u*i),n[1]=2*(l*a+c*i+u*r-s*o),n[2]=2*(u*a+c*o+s*i-l*r)),zr(t,e,n),t}function Lr(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Or(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],a=e[5],s=e[6],l=e[8],u=e[9],c=e[10];return t[0]=Math.sqrt(n*n+r*r+i*i),t[1]=Math.sqrt(o*o+a*a+s*s),t[2]=Math.sqrt(l*l+u*u+c*c),t}function Rr(t,e){var n=e[0]+e[5]+e[10],r=0;return 0<n?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function Br(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3],l=i+i,u=o+o,c=a+a,h=i*l,p=i*u,f=i*c,d=o*u,m=o*c,g=a*c,y=s*l,v=s*u,_=s*c,x=r[0],b=r[1],w=r[2];return t[0]=(1-(d+g))*x,t[1]=(p+_)*x,t[2]=(f-v)*x,t[3]=0,t[4]=(p-_)*b,t[5]=(1-(h+g))*b,t[6]=(m+y)*b,t[7]=0,t[8]=(f+v)*w,t[9]=(m-y)*w,t[10]=(1-(h+d))*w,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Fr(t,e,n,r,i){var o=e[0],a=e[1],s=e[2],l=e[3],u=o+o,c=a+a,h=s+s,p=o*u,f=o*c,d=o*h,m=a*c,g=a*h,y=s*h,v=l*u,_=l*c,x=l*h,b=r[0],w=r[1],E=r[2],T=i[0],S=i[1],C=i[2],A=(1-(m+y))*b,I=(f+x)*b,M=(d-_)*b,k=(f-x)*w,D=(1-(p+y))*w,z=(g+v)*w,P=(d+_)*E,L=(g-v)*E,O=(1-(p+m))*E;return t[0]=A,t[1]=I,t[2]=M,t[3]=0,t[4]=k,t[5]=D,t[6]=z,t[7]=0,t[8]=P,t[9]=L,t[10]=O,t[11]=0,t[12]=n[0]+T-(A*T+k*S+P*C),t[13]=n[1]+S-(I*T+D*S+L*C),t[14]=n[2]+C-(M*T+z*S+O*C),t[15]=1,t}function Nr(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,l=i+i,u=n*a,c=r*a,h=r*s,p=i*a,f=i*s,d=i*l,m=o*a,g=o*s,y=o*l;return t[0]=1-h-d,t[1]=c+y,t[2]=p-g,t[3]=0,t[4]=c-y,t[5]=1-u-d,t[6]=f+m,t[7]=0,t[8]=p+g,t[9]=f-m,t[10]=1-u-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function jr(t,e,n,r,i,o,a){var s=1/(n-e),l=1/(i-r),u=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*l,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*l,t[10]=(a+o)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*u,t[15]=0,t}function Vr(t,e,n,r,i){var o=1/Math.tan(e/2),a=1/(r-i);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*a,t[15]=0,t}function $r(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),l=2/(a+s),u=2/(i+o);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(a-s)*l*.5,t[9]=(i-o)*u*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function qr(t,e,n,r,i,o,a){var s=1/(e-n),l=1/(r-i),u=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*l,t[14]=(a+o)*u,t[15]=1,t}function Ur(t,e,n,r){var i,o,a,s,l,u,c,h,p,f,d=e[0],m=e[1],g=e[2],y=r[0],v=r[1],_=r[2],x=n[0],b=n[1],w=n[2];return Math.abs(d-x)<Uc&&Math.abs(m-b)<Uc&&Math.abs(g-w)<Uc?dr(t):(c=d-x,h=m-b,p=g-w,i=v*(p*=f=1/Math.sqrt(c*c+h*h+p*p))-_*(h*=f),o=_*(c*=f)-y*p,a=y*h-v*c,(f=Math.sqrt(i*i+o*o+a*a))?(i*=f=1/f,o*=f,a*=f):a=o=i=0,s=h*a-p*o,l=p*i-c*a,u=c*o-h*i,(f=Math.sqrt(s*s+l*l+u*u))?(s*=f=1/f,l*=f,u*=f):u=l=s=0,t[0]=i,t[1]=s,t[2]=c,t[3]=0,t[4]=o,t[5]=l,t[6]=h,t[7]=0,t[8]=a,t[9]=u,t[10]=p,t[11]=0,t[12]=-(i*d+o*m+a*g),t[13]=-(s*d+l*m+u*g),t[14]=-(c*d+h*m+p*g),t[15]=1,t)}function Hr(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=r[0],l=r[1],u=r[2],c=i-n[0],h=o-n[1],p=a-n[2],f=c*c+h*h+p*p;0<f&&(c*=f=1/Math.sqrt(f),h*=f,p*=f);var d=l*p-u*h,m=u*c-s*p,g=s*h-l*c;return 0<(f=d*d+m*m+g*g)&&(d*=f=1/Math.sqrt(f),m*=f,g*=f),t[0]=d,t[1]=m,t[2]=g,t[3]=0,t[4]=h*g-p*m,t[5]=p*d-c*g,t[6]=c*m-h*d,t[7]=0,t[8]=c,t[9]=h,t[10]=p,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t}function Wr(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Gr(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function Zr(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Yr(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function Xr(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function Kr(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function Jr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Qr(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],h=t[9],p=t[10],f=t[11],d=t[12],m=t[13],g=t[14],y=t[15],v=e[0],_=e[1],x=e[2],b=e[3],w=e[4],E=e[5],T=e[6],S=e[7],C=e[8],A=e[9],I=e[10],M=e[11],k=e[12],D=e[13],z=e[14],P=e[15];return Math.abs(n-v)<=Uc*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(r-_)<=Uc*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(i-x)<=Uc*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(o-b)<=Uc*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(a-w)<=Uc*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-E)<=Uc*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(l-T)<=Uc*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(u-S)<=Uc*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(c-C)<=Uc*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(h-A)<=Uc*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(p-I)<=Uc*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(f-M)<=Uc*Math.max(1,Math.abs(f),Math.abs(M))&&Math.abs(d-k)<=Uc*Math.max(1,Math.abs(d),Math.abs(k))&&Math.abs(m-D)<=Uc*Math.max(1,Math.abs(m),Math.abs(D))&&Math.abs(g-z)<=Uc*Math.max(1,Math.abs(g),Math.abs(z))&&Math.abs(y-P)<=Uc*Math.max(1,Math.abs(y),Math.abs(P))}function ti(){var t=new Hc(3);return t[0]=0,t[1]=0,t[2]=0,t}function ei(t){var e=new Hc(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function ni(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function ri(t,e,n){var r=new Hc(3);return r[0]=t,r[1]=e,r[2]=n,r}function ii(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function oi(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function ai(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function si(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function li(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function ui(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function ci(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}
function hi(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function pi(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function fi(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function di(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function mi(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function gi(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function yi(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}function vi(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function _i(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function xi(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function bi(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function wi(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return 0<o&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function Ei(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ti(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],l=n[2];return t[0]=i*l-o*s,t[1]=o*a-r*l,t[2]=r*s-i*a,t}function Si(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t}function Ci(t,e,n,r,i,o){var a=o*o,s=a*(2*o-3)+1,l=a*(o-2)+o,u=a*(o-1),c=a*(3-2*o);return t[0]=e[0]*s+n[0]*l+r[0]*u+i[0]*c,t[1]=e[1]*s+n[1]*l+r[1]*u+i[1]*c,t[2]=e[2]*s+n[2]*l+r[2]*u+i[2]*c,t}function Ai(t,e,n,r,i,o){var a=1-o,s=a*a,l=o*o,u=s*a,c=3*o*s,h=3*l*a,p=l*o;return t[0]=e[0]*u+n[0]*c+r[0]*h+i[0]*p,t[1]=e[1]*u+n[1]*c+r[1]*h+i[1]*p,t[2]=e[2]*u+n[2]*c+r[2]*h+i[2]*p,t}function Ii(t,e){e=e||1;var n=2*Wc()*Math.PI,r=2*Wc()-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t}function Mi(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}function ki(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function Di(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],l=e[1],u=e[2],c=i*u-o*l,h=o*s-r*u,p=r*l-i*s,f=i*p-o*h,d=o*c-r*p,m=r*h-i*c,g=2*a;return c*=g,h*=g,p*=g,f*=2,d*=2,m*=2,t[0]=s+c+f,t[1]=l+h+d,t[2]=u+p+m,t}function zi(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function Pi(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function Li(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function Oi(t,e){var n=ri(t[0],t[1],t[2]),r=ri(e[0],e[1],e[2]);wi(n,n),wi(r,r);var i=Ei(n,r);return 1<i?0:i<-1?Math.PI:Math.acos(i)}function Ri(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Bi(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Fi(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2];return Math.abs(n-o)<=Uc*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=Uc*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=Uc*Math.max(1,Math.abs(i),Math.abs(s))}function Ni(){var t=new Hc(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function ji(t){var e=new Hc(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Vi(t,e,n,r){var i=new Hc(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function $i(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function qi(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function Ui(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function Hi(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function Wi(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function Gi(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function Zi(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Yi(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Xi(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function Ki(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function Ji(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Qi(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function to(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function eo(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+r*r+i*i+o*o)}function no(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o}function ro(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.sqrt(e*e+n*n+r*r+i*i)}function io(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function oo(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function ao(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function so(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return 0<a&&(a=1/Math.sqrt(a),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a),t}function lo(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function uo(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t}function co(t,e){var n,r,i,o,a,s;for(e=e||1;1<=(a=(n=2*Wc()-1)*n+(r=2*Wc()-1)*r););for(;1<=(s=(i=2*Wc()-1)*i+(o=2*Wc()-1)*o););var l=Math.sqrt((1-a)/s);return t[0]=Qi*n,t[1]=Qi*r,t[2]=Qi*i*l,t[3]=Qi*o*l,t}function ho(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function po(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],l=n[2],u=n[3],c=u*r+s*o-l*i,h=u*i+l*r-a*o,p=u*o+a*i-s*r,f=-a*r-s*i-l*o;return t[0]=c*u+f*-a+h*-l-p*-s,t[1]=h*u+f*-s+p*-a-c*-l,t[2]=p*u+f*-l+c*-s-h*-a,t[3]=e[3],t}function fo(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function mo(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function go(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],l=e[2],u=e[3];return Math.abs(n-a)<=Uc*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=Uc*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-l)<=Uc*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(o-u)<=Uc*Math.max(1,Math.abs(o),Math.abs(u))}function yo(){var t=new Hc(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function vo(t,e,n){.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function _o(t,e,n,r){var i,o,a,s,l,u=e[0],c=e[1],h=e[2],p=e[3],f=n[0],d=n[1],m=n[2],g=n[3];return u*f+c*d+h*m+p*g<0&&(-o,-f,-d,-m,-g),1e-6<1-o?(Math.acos(o),Math.sin(i),Math.sin((1-r)*i)/a,Math.sin(r*i)/a):(1-r,r),t[0]=s*u+l*f,t[1]=s*c+l*d,t[2]=s*h+l*m,t[3]=s*p+l*g,t}function xo(t,e){var n,r=e[0]+e[4]+e[8];if(0<r)Math.sqrt(r+1),t[3]=.5*n,.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&1,e[8]>e[3*i+i]&&2;var o=(i+1)%3,a=(i+2)%3;Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*a+a]+1),t[i]=.5*n,.5/n,t[3]=(e[3*o+a]-e[3*a+o])*n,t[o]=(e[3*o+i]+e[3*i+o])*n,t[a]=(e[3*a+i]+e[3*i+a])*n}return t}function bo(){var t=new Hc(2);return t[0]=0,t[1]=0,t}function wo(t,e,n){var r=ho([],[t.x,t.y,0,1],e);return new Fs((r[0]/r[3]+1)*n.width*.5,(r[1]/r[3]+1)*n.height*.5)}function Eo(t,e,n){return t.map(function(t){return t.map(function(t){return wo(t,e,n)})})}function To(t,e,n,r){var i=e.width,o=e.height;if(r){if(r.length!==i*o*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*o*n);return t.width=i,t.height=o,t.data=r,t}function So(t,e,n){var r=e.width,i=e.height;if(r!==t.width||i!==t.height){var o=To({},{width:r,height:i},n);Co(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,r),height:Math.min(t.height,i)},n),t.width=r,t.height=i,t.data=o.data}}function Co(t,e,n,r,i,o){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");var a=t.data,s=e.data;ks(a!==s);for(var l=0;l<i.height;l++)for(var u=((n.y+l)*t.width+n.x)*o,c=((r.y+l)*e.width+r.x)*o,h=0;h<i.width*o;h++)s[c+h]=a[u+h];return e}function Ao(t,e){for(var n=new Uint8Array(1024),r={},i=0,o=0;i<256;i++,o+=4){r[e]=i/255;var a=t.evaluate(r);n[o+0]=Math.floor(255*a.r/a.a),n[o+1]=Math.floor(255*a.g/a.a),n[o+2]=Math.floor(255*a.b/a.a),n[o+3]=Math.floor(255*a.a)}return new $c({width:256,height:1},n)}function Io(t,e,n){n=n||2;var r,i,o,a,s,l,u,c=e&&e.length,h=c?e[0]*n:t.length,p=Mo(t,0,h,n,!0),f=[];if(!p)return f;if(c&&(p=Ro(t,e,p,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var d=n;d<h;d+=n)(s=t[d])<r&&(r=s),(l=t[d+1])<i&&(i=l),o<s&&(o=s),a<l&&(a=l);u=0!==(u=Math.max(o-r,a-i))?1/u:0}return Do(p,f,n,r,i,u),f}function Mo(t,e,n,r,i){var o,a;if(i===0<na(t,e,n,r))for(o=e;o<n;o+=r)a=Qo(o,t[o],t[o+1],a);else for(o=n-r;e<=o;o-=r)a=Qo(o,t[o],t[o+1],a);return a&&Go(a,a.next)&&(ta(a),a=a.next),a}function ko(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Go(r,r.next)&&0!==Wo(r.prev,r,r.next))r=r.next;else{if(ta(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function Do(t,e,n,r,i,o,a){if(t){!a&&o&&jo(t,r,i,o);for(var s,l,u=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?Po(t,r,i,o):zo(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),ta(t),t=l.next,u=l.next;else if((t=l)===u){a?1===a?Do(t=Lo(t,e,n),e,n,r,i,o,2):2===a&&Oo(t,e,n,r,i,o):Do(ko(t),e,n,r,i,o,1);break}}}function zo(t){var e=t.prev,n=t,r=t.next;if(0<=Wo(e,n,r))return!1;for(var i=t.next.next;i!==t.prev;){if(Uo(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&0<=Wo(i.prev,i,i.next))return!1;i=i.next}return!0}function Po(t,e,n,r){var i=t.prev,o=t,a=t.next;if(0<=Wo(i,o,a))return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,u=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=$o(s,l,e,n,r),p=$o(u,c,e,n,r),f=t.prevZ,d=t.nextZ;f&&f.z>=h&&d&&d.z<=p;){if(f!==t.prev&&f!==t.next&&Uo(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&0<=Wo(f.prev,f,f.next))return!1;if(f=f.prevZ,d!==t.prev&&d!==t.next&&Uo(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&0<=Wo(d.prev,d,d.next))return!1;d=d.nextZ}for(;f&&f.z>=h;){if(f!==t.prev&&f!==t.next&&Uo(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&0<=Wo(f.prev,f,f.next))return!1;f=f.prevZ}for(;d&&d.z<=p;){if(d!==t.prev&&d!==t.next&&Uo(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&0<=Wo(d.prev,d,d.next))return!1;d=d.nextZ}return!0}function Lo(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Go(i,o)&&Zo(i,r,r.next,o)&&Xo(i,o)&&Xo(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),ta(r),ta(r.next),r=t=o),r=r.next}while(r!==t);return r}function Oo(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Ho(a,s)){var l=Jo(a,s);return a=ko(a,a.next),l=ko(l,l.next),Do(a,e,n,r,i,o),void Do(l,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function Ro(t,e,n,r){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=Mo(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(qo(a));for(s.sort(Bo),i=0;i<s.length;i++)Fo(s[i],n),n=ko(n,n.next);return n}function Bo(t,e){return t.x-e.x}function Fo(t,e){if(e=No(t,e)){var n=Jo(e,t);ko(n,n.next)}}function No(t,e){var n,r=e,i=t.x,o=t.y,a=-Infinity;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&a<s){if((a=s)===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var l,u=n,c=n.x,h=n.y,p=Infinity;for(r=n.next;r!==u;)i>=r.x&&r.x>=c&&i!==r.x&&Uo(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&((l=Math.abs(o-r.y)/(i-r.x))<p||l===p&&r.x>n.x)&&Xo(r,t)&&(n=r,p=l),r=r.next;return n}function jo(t,e,n,r){for(var i=t;null===i.z&&(i.z=$o(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,(i=i.next)!==t;);i.prevZ.nextZ=null,i.prevZ=null,Vo(i)}function Vo(t){var e,n,r,i,o,a,s,l,u=1;do{for(n=t,o=t=null,a=0;n;){for(a++,r=n,e=s=0;e<u&&(s++,r=r.nextZ);e++);for(l=u;0<s||0<l&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(n=(i=n).nextZ,s--):(r=(i=r).nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(1<a);return t}function $o(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function qo(t){for(var e=t,n=t;e.x<n.x&&(n=e),(e=e.next)!==t;);return n}function Uo(t,e,n,r,i,o,a,s){return 0<=(i-a)*(e-s)-(t-a)*(o-s)&&0<=(t-a)*(r-s)-(n-a)*(e-s)&&0<=(n-a)*(o-s)-(i-a)*(r-s)}function Ho(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Yo(t,e)&&Xo(t,e)&&Xo(e,t)&&Ko(t,e)}function Wo(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Go(t,e){return t.x===e.x&&t.y===e.y}function Zo(t,e,n,r){return!!(Go(t,e)&&Go(n,r)||Go(t,r)&&Go(n,e))||0<Wo(t,e,n)!=0<Wo(t,e,r)&&0<Wo(n,r,t)!=0<Wo(n,r,e)}function Yo(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Zo(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Xo(t,e){return Wo(t.prev,t,t.next)<0?0<=Wo(t,e,t.next)&&0<=Wo(t,t.prev,e):Wo(t,e,t.prev)<0||Wo(t,t.next,e)<0}function Ko(t,e){for(var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),(n=n.next)!==t;);return r}function Jo(t,e){var n=new ea(t.i,t.x,t.y),r=new ea(e.i,e.x,e.y),i=t.next,o=e.prev;return(t.next=e).prev=t,(n.next=i).prev=n,(r.next=n).prev=r,(o.next=r).prev=o,r}function Qo(t,e,n,r){var i=new ea(t,e,n);return r?(i.next=r.next,(i.prev=r).next.prev=i,r.next=i):(i.prev=i).next=i,i}function ta(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function ea(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function na(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}function ra(t,e,n,r,i){ia(t,e,n||0,r||t.length-1,i||aa)}function ia(t,e,n,r,i){for(;n<r;){if(600<r-n){var o=r-n+1,a=e-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);ia(t,e,Math.max(n,Math.floor(e-a*l/o+u)),Math.min(r,Math.floor(e+(o-a)*l/o+u)),i)}var c=t[e],h=n,p=r;for(oa(t,n,e),0<i(t[r],c)&&oa(t,n,r);h<p;){for(oa(t,h,p),h++,p--;i(t[h],c)<0;)h++;for(;0<i(t[p],c);)p--}0===i(t[n],c)?oa(t,n,p):oa(t,++p,r),p<=e&&(n=p+1),e<=p&&(r=p-1)}}function oa(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function aa(t,e){return t<e?-1:e<t?1:0}function sa(t,e){var n=t.length;if(n<=1)return[t];for(var r,i,o=[],a=0;a<n;a++){var s=C(t[a]);0!==s&&(t[a].area=Math.abs(s),i===undefined&&(i=s<0),i===s<0?(r&&o.push(r),r=[t[a]]):r.push(t[a]))}if(r&&o.push(r),1<e)for(var l=0;l<o.length;l++)o[l].length<=e||(Ch(o[l],e,1,o[l].length-1,la),o[l]=o[l].slice(0,e));return o}function la(t,e){return e.area-t.area}function ua(t,e,n,r,i,o,a,s){t.emplaceBack(e,n,2*Math.floor(r*Rh)+a,i*Rh*2,o*Rh*2,Math.round(s))}function ca(t,e){return t.x===e.x&&(t.x<0||t.x>kc)||t.y===e.y&&(t.y<0||t.y>kc)}function ha(t){return t.every(function(t){return t.x<0})||t.every(function(t){return t.x>kc})||t.every(function(t){return t.y<0})||t.every(function(t){return t.y>kc})}function pa(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(fa,this,e)}function fa(t,e,n){1==t?e.id=n.readVarint():2==t?da(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function da(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}function ma(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=ga(t[o]);0!==a&&(r===undefined&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}function ga(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)e=t[i],r+=((n=t[a]).x-e.x)*(e.y+n.y);return r}function ya(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(va,this,e),this.length=this._features.length}function va(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(_a(n))}function _a(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}function xa(t,e){this.layers=t.readFields(ba,{},e)}function ba(t,e,n){if(3===t){var r=new $h(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}function wa(t,e,n,r,i,o,a){t.emplaceBack(e.x,e.y,r?1:0,i?1:-1,Math.round(Wh*n.x)+128,Math.round(Wh*n.y)+128,1+(0===o?0:o<0?-1:1)|(a*Xh&63)<<2,a*Xh>>6)}function Ea(t,e){return(t/e.tileTotal*(e.end-e.start)+e.start)*(Kh-1)}function Ta(t,e,n){for(var r,i,o=0,a=e;a<n-1;a++)r=t[a],i=t[a+1],o+=r.dist(i);return o}function Sa(t,e){return 0<e?e+2*t:t}function Ca(t,e){for(var n=[],r=new Fs(0,0),i=0;i<t.length;i++){for(var o=t[i],a=[],s=0;s<o.length;s++){var l=o[s-1],u=o[s],c=o[s+1],h=0===s?r:u.sub(l)._unit()._perp(),p=s===o.length-1?r:c.sub(u)._unit()._perp(),f=h._add(p)._unit(),d=f.x*p.x+f.y*p.y;f._mult(1/d),a.push(f._mult(e)._add(u))}n.push(a)}return n}function Aa(t,e,n){var r=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),Bu.applyArabicShaping&&(t=Bu.applyArabicShaping(t)),t}function Ia(e){function t(t){s.push(e[t]),l++}function n(t,e,n){var r=a[t];return delete a[t],a[e]=r,s[r].geometry[0].pop(),s[r].geometry[0]=s[r].geometry[0].concat(n[0]),r}function r(t,e,n){var r=o[e];return delete o[e],o[t]=r,s[r].geometry[0].shift(),s[r].geometry[0]=n[0].concat(s[r].geometry[0]),r}function i(t,e,n){var r=n?e[0][e[0].length-1]:e[0][0];return t+":"+r.x+":"+r.y}for(var o={},a={},s=[],l=0,u=0;u<e.length;u++){var c=e[u],h=c.geometry,p=c.text;if(p){var f=i(p,h),d=i(p,h,!0);if(f in a&&d in o&&a[f]!==o[d]){var m=r(f,d,h),g=n(f,d,s[m].geometry);delete o[f],delete a[d],a[i(p,s[g].geometry,!0)]=g,s[m].geometry=null}else f in a?n(f,d,h):d in o?r(f,d,h):(t(u),o[f]=l-1,a[d]=l-1)}else t(u)}return s.filter(function(t){return t.geometry})}function Ma(t){for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n+1)||null,i=t.charCodeAt(n-1)||null;(!r||!Re(r)||sp[t[n+1]])&&(!i||!Re(i)||sp[t[n-1]])&&sp[t[n]]?e+=sp[t[n]]:e+=t[n]}return e}function ka(t,e){var n=e.expression;if("constant"===n.kind)return{functionType:"constant",layoutSize:n.evaluate(new gu(t+1))};if("source"===n.kind)return{functionType:"source"};for(var r=n.zoomStops,i=0;i<r.length&&r[i]<=t;)i++;for(var o=i=Math.max(0,i-1);o<r.length&&r[o]<t+1;)o++;o=Math.min(r.length-1,o);var a={min:r[i],max:r[o]};return"composite"===n.kind?{functionType:"composite",zoomRange:a,propertyValue:e.value}:{functionType:"camera",layoutSize:n.evaluate(new gu(t+1)),zoomRange:a,sizeRange:{min:n.evaluate(new gu(a.min)),max:n.evaluate(new gu(a.max))},propertyValue:e.value}}function Da(t,e,n){var r=e;return"source"===t.functionType?n.lowerSize/10:"composite"===t.functionType?Y(n.lowerSize/10,n.upperSize/10,r.uSizeT):r.uSize}function za(t,e,n){if("constant"===t.functionType)return{uSizeT:0,uSize:t.layoutSize};if("source"===t.functionType)return{uSizeT:0,uSize:0};if("camera"===t.functionType){var r=t.propertyValue,i=t.zoomRange,o=t.sizeRange,a=y(Ut(r,n.specification).interpolationFactor(e,i.min,i.max),0,1);return{uSizeT:0,uSize:o.min+a*(o.max-o.min)}}var s=t.propertyValue,l=t.zoomRange;return{uSizeT:y(Ut(s,n.specification).interpolationFactor(e,l.min,l.max),0,1),uSize:0}}function Pa(t,e,n,r,i,o,a,s){t.emplaceBack(e,n,Math.round(32*r),Math.round(32*i),o,a,s?s[0]:0,s?s[1]:0)}function La(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}function Oa(n,t){return t.replace(/{([^{}]+)}/g,function(t,e){return e in n?String(n[e]):""})}function Ra(t){return new xp[t.type](t)}function Ba(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function Fa(t,e,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return ja(t,r,e);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return ja(t,r,e);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return ja(t,r,e);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return ja(t,r,e);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return ja(t,r,e);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return ja(t,r,e);throw new Error("Expected varint not more than 10 bytes")}function Na(t){return t.type===Ba.Bytes?t.readVarint()+t.pos:t.pos+1}function ja(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Va(t,e){var n,r;if(0<=t?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:r=r+1|(n=0)),0x10000000000000000<=t||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),$a(n,r,e),qa(r,e)}function $a(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos]=127&t}function qa(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}function Ua(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;t<=i;i--)n.buf[i+r]=n.buf[i]}function Ha(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function Wa(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function Ga(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function Za(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function Ya(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function Xa(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function Ka(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function Ja(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function Qa(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function ts(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function es(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function ns(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function rs(t,e,n){for(var r="",i=e;i<n;){var o,a,s,l=t[i],u=null,c=239<l?4:223<l?3:191<l?2:1;if(n<i+c)break;1===c?l<128&&(u=l):2===c?128==(192&(o=t[i+1]))&&(u=(31&l)<<6|63&o)<=127&&(u=null):3===c?(o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&((u=(15&l)<<12|(63&o)<<6|63&a)<=2047||55296<=u&&u<=57343)&&(u=null)):4===c&&(o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||1114112<=u)&&(u=null)),null===u?(u=65533,c=1):65535<u&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),i+=c}return r}function is(t,e,n){for(var r,i,o=0;o<e.length;o++){if(55295<(r=e.charCodeAt(o))&&r<57344){if(!i){56319<r||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}function os(t,e,n){1===t&&n.readMessage(as,e)}function as(t,e,n){if(3===t){var r=n.readMessage(ss,{}),i=r.id,o=r.bitmap,a=r.width,s=r.height,l=r.left,u=r.top,c=r.advance;e.push({id:i,bitmap:new Vc({width:a+2*Rp,height:s+2*Rp},o),metrics:{width:a,height:s,left:l,top:u,advance:c}})}}function ss(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}function ls(t){return new zp(t).readFields(os,[])}function us(t,e,n,r){(t*=2)<0&&(t=-1*t-1);var i=1<<e;return 32*(i*i*t+i*r+n)+e}function cs(t,e,n){for(var r,i="",o=t;0<o;o--)i+=(e&(r=1<<o-1)?1:0)+(n&r?2:0);return i}function hs(t,e){var n={};if(!e)return n;for(var r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.layerIds.map(function(t){return e.getLayer(t)}).filter(Boolean);if(0!==a.length){o.layers=a,o.stateDependentLayers=a.filter(function(t){return t.isStateDependent()});for(var s=0,l=a;s<l.length;s+=1){n[l[s].id]=o}}}return n}function ps(t,e){return e-t}function fs(t,e){for(var n=[],r=0,i=0,o=e;i<o.length;i+=1){var a=o[i];n.push(t.substring(r,a)),r=a}return r<t.length&&n.push(t.substring(r,t.length)),n}function ds(t,e,n,r,i,o,a,s,l,u){var c=t.trim();u===tf.vertical&&(c=Ma(c));var h=[],p={positionedGlyphs:h,text:c,top:s[1],bottom:s[1],left:s[0],right:s[0],writingMode:u},f=Bu.processBidirectionalText;return ws(p,e,f?f(c,xs(c,a,n,e)):fs(c,xs(c,a,n,e)),r,i,o,u,a,l),!!h.length&&p}function ms(t,e,n,r){for(var i=0,o=0;o<t.length;o++){var a=r[t.charCodeAt(o)];a&&(i+=a.metrics.advance+e)}return i/Math.max(1,Math.ceil(i/n))}function gs(t,e,n,r){var i=Math.pow(t-e,2);return r?t<e?i/2:2*i:i+Math.abs(n)*n}function ys(t,e){var n=0;return 10===t&&(n-=1e4),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function vs(t,e,n,r,i,o){for(var a=null,s=gs(e,n,i,o),l=0,u=r;l<u.length;l+=1){var c=u[l],h=gs(e-c.x,n,i,o)+c.badness;h<=s&&(a=c,s=h)}return{index:t,x:e,priorBreak:a,badness:s}}function _s(t){return t?_s(t.priorBreak).concat(t.index):[]}function xs(t,e,n,r){if(!n)return[];if(!t)return[];for(var i=[],o=ms(t,e,n,r),a=0,s=0;s<t.length;s++){var l=t.charCodeAt(s),u=r[l];u&&!ef[l]&&(a+=u.metrics.advance+e),s<t.length-1&&(nf[l]||Pe(l))&&i.push(vs(s+1,a,o,i,ys(l,t.charCodeAt(s+1)),!1))}return _s(vs(t.length,a,o,i,0,!0))}function bs(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function ws(t,e,n,r,i,o,a,s,l){for(var u=0,c=-17,h=0,p=t.positionedGlyphs,f="right"===o?1:"left"===o?0:.5,d=0,m=n;d<m.length;d+=1){var g=m[d];if((g=g.trim()).length){for(var y=p.length,v=0;v<g.length;v++){var _=g.charCodeAt(v),x=e[_];x&&(Le(_)&&a!==tf.horizontal?(p.push({glyph:_,x:u,y:0,vertical:!0}),u+=l+s):(p.push({glyph:_,x:u,y:c,vertical:!1}),u+=x.metrics.advance+s))}if(p.length!==y){var b=u-s;h=Math.max(b,h),Es(p,e,y,p.length-1,f)}u=0,c+=r}else c+=r}var w=bs(i),E=w.horizontalAlign,T=w.verticalAlign;Ts(p,f,E,T,h,r,n.length);var S=n.length*r;t.top+=-T*S,t.bottom=t.top+S,t.left+=-E*h,t.right=t.left+h}function Es(t,e,n,r,i){if(i){var o=e[t[r].glyph];if(o)for(var a=o.metrics.advance,s=(t[r].x+a)*i,l=n;l<=r;l++)t[l].x-=s}}function Ts(t,e,n,r,i,o,a){for(var s=(e-n)*i,l=(-r*a+.5)*o,u=0;u<t.length;u++)t[u].x+=s,t[u].y+=l}function Ss(t,e,n){var r=bs(n),i=r.horizontalAlign,o=r.verticalAlign,a=e[0],s=e[1],l=a-t.displaySize[0]*i,u=l+t.displaySize[0],c=s-t.displaySize[1]*o;return{image:t,top:c,bottom:c+t.displaySize[1],left:l,right:u}}var Cs="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},As=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8},Is=r(function(t){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}),Ms=r(function(t,p){function l(t,e,n,r){var i={seen:[],stylize:a};return 3<=arguments.length&&(i.depth=n),4<=arguments.length&&(i.colors=r),s(e)?i.showHidden=e:e&&p._extend(i,e),c(i.showHidden)&&(i.showHidden=!1),c(i.depth)&&(i.depth=2),c(i.colors)&&(i.colors=!1),c(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=o),d(i,t,i.depth)}function o(t,e){var n=l.styles[e];return n?"\x1b["+l.colors[n][0]+"m"+t+"\x1b["+l.colors[n][1]+"m":t}function a(t){return t}function f(t){var e={};return t.forEach(function(t){e[t]=!0}),e}function d(e,n,r){if(e.customInspect&&n&&S(n.inspect)&&n.inspect!==p.inspect&&(!n.constructor||n.constructor.prototype!==n)){var t=n.inspect(r,e);return b(t)||(t=d(e,t,r)),t}var i=m(e,n);if(i)return i;var o=Object.keys(n),a=f(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(n)),T(n)&&(0<=o.indexOf("message")||0<=o.indexOf("description")))return g(n);if(0===o.length){if(S(n)){var s=n.name?": "+n.name:"";return e.stylize("[Function"+s+"]","special")}if(w(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(E(n))return e.stylize(Date.prototype.toString.call(n),"date");if(T(n))return g(n)}var l,u="",c=!1,h=["{","}"];(x(n)&&(c=!0,h=["[","]"]),S(n))&&(u=" [Function"+(n.name?": "+n.name:"")+"]");return w(n)&&(u=" "+RegExp.prototype.toString.call(n)),E(n)&&(u=" "+Date.prototype.toUTCString.call(n)),T(n)&&(u=" "+g(n)),0!==o.length||c&&0!=n.length?r<0?w(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),l=c?y(e,n,r,a,o):o.map(function(t){return v(e,n,r,a,t,c)}),e.seen.pop(),_(l,u,h)):h[0]+u+h[1]}function m(t,e){if(c(e))return t.stylize("undefined","undefined");if(b(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return r(e)?t.stylize(""+e,"number"):s(e)?t.stylize(""+e,"boolean"):u(e)?t.stylize("null","null"):void 0}function g(t){return"["+Error.prototype.toString.call(t)+"]"}function y(e,n,r,i,t){for(var o=[],a=0,s=n.length;a<s;++a)M(n,String(a))?o.push(v(e,n,r,i,String(a),!0)):o.push("");return t.forEach(function(t){t.match(/^\d+$/)||o.push(v(e,n,r,i,t,!0))}),o}function v(t,e,n,r,i,o){var a,s,l;if((l=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?s=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(s=t.stylize("[Setter]","special")),M(r,i)||(a="["+i+"]"),s||(t.seen.indexOf(l.value)<0?-1<(s=u(n)?d(t,l.value,null):d(t,l.value,n-1)).indexOf("\n")&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n")):s=t.stylize("[Circular]","special")),c(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function _(t,e,n){return 60<t.reduce(function(t,e){return 0,0<=e.indexOf("\n")&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function x(t){return Array.isArray(t)}function s(t){return"boolean"==typeof t}function u(t){return null===t}function e(t){return null==t}function r(t){return"number"==typeof t}function b(t){return"string"==typeof t}function n(t){return"symbol"==typeof t}function c(t){return void 0===t}function w(t){return h(t)&&"[object RegExp]"===C(t)}function h(t){return"object"==typeof t&&null!==t}function E(t){return h(t)&&"[object Date]"===C(t)}function T(t){return h(t)&&("[object Error]"===C(t)||t instanceof Error)}function S(t){return"function"==typeof t}function i(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function C(t){return Object.prototype.toString.call(t)}function A(t){return t<10?"0"+t.toString(10):t.toString(10)}function I(){var t=new Date,e=[A(t.getHours()),A(t.getMinutes()),A(t.getSeconds())].join(":");return[t.getDate(),P[t.getMonth()],e].join(" ")}function M(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var k=/%[sdj%]/g;p.format=function(t){var e=arguments;if(!b(t)){for(var n=[],r=0;r<arguments.length;r++)n.push(l(e[r]));return n.join(" ")}r=1;for(var i=arguments,o=i.length,a=String(t).replace(k,function(t){if("%%"===t)return"%";if(o<=r)return t;switch(t){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{
return JSON.stringify(i[r++])}catch(e){return"[Circular]"}default:return t}}),s=i[r];r<o;s=i[++r])u(s)||!h(s)?a+=" "+s:a+=" "+l(s);return a},p.deprecate=function(t,e){function n(){if(!r){if(process.throwDeprecation)throw new Error(e);process.traceDeprecation?console.trace(e):console.error(e),r=!0}return t.apply(this,arguments)}if(c(Cs.process))return function(){return p.deprecate(t,e).apply(this,arguments)};if(!0===process.noDeprecation)return t;var r=!1;return n};var D,z={};p.debuglog=function(e){if(c(D)&&(D=process.env.NODE_DEBUG||""),e=e.toUpperCase(),!z[e])if(new RegExp("\\b"+e+"\\b","i").test(D)){var n=process.pid;z[e]=function(){var t=p.format.apply(p,arguments);console.error("%s %d: %s",e,n,t)}}else z[e]=function(){};return z[e]},(p.inspect=l).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},p.isArray=x,p.isBoolean=s,p.isNull=u,p.isNullOrUndefined=e,p.isNumber=r,p.isString=b,p.isSymbol=n,p.isUndefined=c,p.isRegExp=w,p.isObject=h,p.isDate=E,p.isError=T,p.isFunction=S,p.isPrimitive=i,p.isBuffer=As;var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];p.log=function(){console.log("%s - %s",I(),p.format.apply(p,arguments))},p.inherits=Is,p._extend=function(t,e){if(!e||!h(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}),ks=(Ms.format,Ms.deprecate,Ms.debuglog,Ms.inspect,Ms.isArray,Ms.isBoolean,Ms.isNull,Ms.isNullOrUndefined,Ms.isNumber,Ms.isString,Ms.isSymbol,Ms.isUndefined,Ms.isRegExp,Ms.isObject,Ms.isDate,Ms.isError,Ms.isFunction,Ms.isPrimitive,Ms.isBuffer,Ms.log,Ms.inherits,Ms._extend,r(function(t){function o(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0}function a(t){return Cs.Buffer&&"function"==typeof Cs.Buffer.isBuffer?Cs.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}function s(t){return Object.prototype.toString.call(t)}function l(t){return!a(t)&&("function"==typeof Cs.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}function u(t){if(Ms.isFunction(t)){if(x)return t.name;var e=t.toString().match(w);return e&&e[1]}}function e(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function n(t){if(x||!Ms.isFunction(t))return Ms.inspect(t);var e=u(t);return"[Function"+(e?": "+e:"")+"]"}function c(t){return e(n(t.actual),128)+" "+t.operator+" "+e(n(t.expected),128)}function h(t,e,n,r,i){throw new b.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:i})}function r(t,e){t||h(t,!0,e,"==",b.ok)}function p(t,e,n,r){if(t===e)return!0;if(a(t)&&a(e))return 0===o(t,e);if(Ms.isDate(t)&&Ms.isDate(e))return t.getTime()===e.getTime();if(Ms.isRegExp(t)&&Ms.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(l(t)&&l(e)&&s(t)===s(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===o(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(a(t)!==a(e))return!1;var i=(r=r||{actual:[],expected:[]}).actual.indexOf(t);return-1!==i&&i===r.expected.indexOf(e)||(r.actual.push(t),r.expected.push(e),d(t,e,n,r))}return n?t===e:t==e}function f(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function d(t,e,n,r){if(null===t||t===undefined||null===e||e===undefined)return!1;if(Ms.isPrimitive(t)||Ms.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=f(t),o=f(e);if(i&&!o||!i&&o)return!1;if(i)return p(t=_.call(t),e=_.call(e),n);var a,s,l=E(t),u=E(e);if(l.length!==u.length)return!1;for(l.sort(),u.sort(),s=l.length-1;0<=s;s--)if(l[s]!==u[s])return!1;for(s=l.length-1;0<=s;s--)if(!p(t[a=l[s]],e[a],n,r))return!1;return!0}function i(t,e,n){p(t,e,!0)&&h(t,e,n,"notDeepStrictEqual",i)}function m(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(n){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function g(t){var e;try{t()}catch(n){e=n}return e}function y(t,e,n,r){var i;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=g(e),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!i&&h(i,n,"Missing expected exception"+r);var o="string"==typeof r,a=!t&&i&&!n;if((!t&&Ms.isError(i)&&o&&m(i,n)||a)&&h(i,n,"Got unwanted exception"+r),t&&i&&n&&!m(i,n)||!t&&i)throw i}var v=Object.prototype.hasOwnProperty,_=Array.prototype.slice,x="foo"===function(){}.name,b=t.exports=r,w=/\s*function\s+([^\(\s]*)\s*/;b.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=c(this),this.generatedMessage=!0);var e=t.stackStartFunction||h;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var r=n.stack,i=u(e),o=r.indexOf("\n"+i);if(0<=o){var a=r.indexOf("\n",o+1);r=r.substring(a+1)}this.stack=r}}},Ms.inherits(b.AssertionError,Error),b.fail=h,b.ok=r,b.equal=function(t,e,n){t!=e&&h(t,e,n,"==",b.equal)},b.notEqual=function(t,e,n){t==e&&h(t,e,n,"!=",b.notEqual)},b.deepEqual=function(t,e,n){p(t,e,!1)||h(t,e,n,"deepEqual",b.deepEqual)},b.deepStrictEqual=function(t,e,n){p(t,e,!0)||h(t,e,n,"deepStrictEqual",b.deepStrictEqual)},b.notDeepEqual=function(t,e,n){p(t,e,!1)&&h(t,e,n,"notDeepEqual",b.notDeepEqual)},b.notDeepStrictEqual=i,b.strictEqual=function(t,e,n){t!==e&&h(t,e,n,"===",b.strictEqual)},b.notStrictEqual=function(t,e,n){t===e&&h(t,e,n,"!==",b.notStrictEqual)},b["throws"]=function(t,e,n){y(!0,t,e,n)},b.doesNotThrow=function(t,e,n){y(!1,t,e,n)},b.ifError=function(t){if(t)throw t};var E=Object.keys||function(t){var e=[];for(var n in t)v.call(t,n)&&e.push(n);return e}})),Ds=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),zs=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,Ps=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,Ls={now:Ds,frame:function(t){return zs(t)},cancelFrame:function(t){return Ps(t)},getImageData:function(t){var e=self.document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0,t.width,t.height),n.getImageData(0,0,t.width,t.height)},resolveURL:function(t){var e=self.document.createElement("a");return e.href=t,e.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},supportsWebp:!1};if(self.document){var Os=self.document.createElement("img");Os.onload=function(){Ls.supportsWebp=!0},Os.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="}var Rs,Bs=i;i.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},i.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},i.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},i.prototype.solveCurveX=function(t,e){var n,r,i,o,a,s=this;for(void 0===e&&(e=1e-6),i=t,a=0;a<8;a++){if(o=s.sampleCurveX(i)-t,Math.abs(o)<e)return i;var l=s.sampleCurveDerivativeX(i);if(Math.abs(l)<1e-6)break;i-=o/l}if((i=t)<(n=0))return n;if((r=1)<i)return r;for(;n<r;){if(o=s.sampleCurveX(i),Math.abs(o-t)<e)return i;o<t?n=i:r=i,i=.5*(r-n)+n}return i},i.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))},(Rs=function(t,e,n){this.column=t,this.row=e,this.zoom=n}).prototype.clone=function(){return new Rs(this.column,this.row,this.zoom)},Rs.prototype.zoomTo=function(t){return this.clone()._zoomTo(t)},Rs.prototype.sub=function(t){return this.clone()._sub(t)},Rs.prototype._zoomTo=function(t){var e=Math.pow(2,t-this.zoom);return this.column*=e,this.row*=e,this.zoom=t,this},Rs.prototype._sub=function(t){return t=t.zoomTo(this.zoom),this.column-=t.column,this.row-=t.row,this};var Fs=o;o.prototype={clone:function(){return new o(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=e*this.x-n*this.y,i=n*this.x+e*this.y;return this.x=r,this.y=i,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.x+n*(this.x-e.x)-r*(this.y-e.y),o=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(t){return t instanceof o?t:Array.isArray(t)?new o(t[0],t[1]):t};var Ns=s(.25,.1,.25,1),js=1,Vs={},$s={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze($s);var qs,Us,Hs=function(r){function t(t,e,n){r.call(this,t),this.status=e,this.url=n,this.name=this.constructor.name,this.message=t}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),(t.prototype.constructor=t).prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},t}(Error),Ws=function(n,r){var i=M(n);return i.setRequestHeader("Accept","application/json"),i.onerror=function(){r(new Error(i.statusText))},i.onload=function(){if(200<=i.status&&i.status<300&&i.response){var t;try{t=JSON.parse(i.response)}catch(e){return r(e)}r(null,t)}else 401===i.status&&n.url.match(/mapbox.com/)?r(new Hs(i.statusText+": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens",i.status,n.url)):r(new Hs(i.statusText,i.status,n.url))},i.send(),i},Gs=function(e,n){var r=M(e);return r.responseType="arraybuffer",r.onerror=function(){n(new Error(r.statusText))},r.onload=function(){var t=r.response;if(0===t.byteLength&&200===r.status)return n(new Error("http status 200 returned without content."));200<=r.status&&r.status<300&&r.response?n(null,{data:t,cacheControl:r.getResponseHeader("Cache-Control"),expires:r.getResponseHeader("Expires")}):n(new Hs(r.statusText,r.status,e.url))},r.send(),r},Zs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",Ys=function(t,o){return Gs(t,function(t,e){if(t)o(t);else if(e){var n=new self.Image,r=self.URL||self.webkitURL;n.onload=function(){o(null,n),r.revokeObjectURL(n.src)};var i=new self.Blob([new Uint8Array(e.data)],{type:"image/png"});n.cacheControl=e.cacheControl,n.expires=e.expires,n.src=e.data.byteLength?r.createObjectURL(i):Zs}})},Xs=function(t,e){var n=self.document.createElement("video");n.onloadstart=function(){e(null,n)};for(var r=0;r<t.length;r++){var i=self.document.createElement("source");k(t[r])||(n.crossOrigin="Anonymous"),i.src=t[r],n.appendChild(i)}return n},Ks=function(n){function t(t,e){void 0===e&&(e={}),n.call(this,"error",p({error:t},e))}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t}(qs=function(t,e){void 0===e&&(e={}),p(this,e),this.type=t});(Us=function(){}).prototype.on=function(t,e){return this._listeners=this._listeners||{},D(t,e,this._listeners),this},Us.prototype.off=function(t,e){return z(t,e,this._listeners),z(t,e,this._oneTimeListeners),this},Us.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},D(t,e,this._oneTimeListeners),this},Us.prototype.fire=function(t,e){var n=this;"string"==typeof t&&(t=new qs(t,e||{}));var r=t.type;if(this.listens(r)){for(var i=0,o=(t.target=this)._listeners&&this._listeners[r]?this._listeners[r].slice():[];i<o.length;i+=1){o[i].call(n,t)}for(var a=0,s=this._oneTimeListeners&&this._oneTimeListeners[r]?this._oneTimeListeners[r].slice():[];a<s.length;a+=1){var l=s[a];z(r,l,n._oneTimeListeners),l.call(n,t)}var u=this._eventedParent;u&&(p(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),u.fire(t))}else t instanceof Ks&&console.error(t.error);return this},Us.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&0<this._listeners[t].length||this._oneTimeListeners&&this._oneTimeListeners[t]&&0<this._oneTimeListeners[t].length||this._eventedParent&&this._eventedParent.listens(t)};var Js,Qs={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number","default":0,period:360,units:"degrees"},pitch:{type:"number","default":0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,"default":[-180,-85.0511,180,85.0511]},minzoom:{type:"number","default":0},maxzoom:{type:"number","default":22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,"default":[-180,-85.0511,180,85.0511]},minzoom:{type:"number","default":0},maxzoom:{type:"number","default":22},tileSize:{type:"number","default":512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},"default":"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,"default":[-180,-85.0511,180,85.0511]},minzoom:{type:"number","default":0},maxzoom:{type:"number","default":22},tileSize:{type:"number","default":512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},"default":"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number","default":18},attribution:{type:"string"},buffer:{type:"number","default":128,maximum:512,minimum:0},tolerance:{type:"number","default":.375},cluster:{type:"boolean","default":!(Us.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this})},clusterRadius:{type:"number","default":50,minimum:0},clusterMaxZoom:{type:"number"},lineMetrics:{type:"boolean","default":!1}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},"default":"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},"default":"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number","default":2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number","default":1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{}},"default":"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number","default":250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean","default":!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean","default":!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean","default":!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean","default":!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},"default":"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number","default":1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},"default":"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,"default":[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"string",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number","default":0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number","default":2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean","default":!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},"default":"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},"default":"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},"default":"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"string","default":"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string","default":["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number","default":16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number","default":10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number","default":1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number","default":0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{left:{},center:{},right:{}},"default":"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number","default":45,units:"degrees",requires:["text-field",{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number","default":0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number","default":2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean","default":!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},"default":"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,"default":[0,0],requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean","default":!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean","default":!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean","default":!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{"let":{group:"Variable binding"},"var":{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},"case":{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},"typeof":{group:"Types"},string:{group:"Types"},number:{group:"Types"},"boolean":{group:"Types"},object:{group:"Types"},collator:{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Heatmap"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum","default":"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array","default":[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant","default":"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant","default":.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean","default":!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-color":{type:"color","default":"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,"default":[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},"default":"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"}},paint_line:{"line-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-color":{type:"color","default":"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,"default":[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},"default":"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number","default":1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gap-width":{type:"number","default":0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-offset":{type:"number","default":0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-blur":{type:"number","default":0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number","default":5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"circle-color":{type:"color","default":"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"circle-blur":{type:"number","default":0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"circle-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",
length:2,"default":[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},"default":"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},"default":"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},"default":"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number","default":0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color","default":"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number","default":30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"heatmap-weight":{type:"number","default":1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number","default":1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-color":{type:"color","default":"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-halo-color":{type:"color","default":"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-halo-width":{type:"number","default":0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number","default":0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,"default":[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},"default":"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-color":{type:"color","default":"#000000",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-halo-color":{type:"color","default":"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-halo-width":{type:"number","default":0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-halo-blur":{type:"number","default":0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,"default":[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},"default":"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number","default":0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number","default":0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number","default":0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number","default":0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number","default":300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number","default":335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},"default":"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number","default":.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color","default":"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color","default":"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color","default":"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color","default":"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number","default":300,minimum:0,units:"milliseconds"},delay:{type:"number","default":0,minimum:0,units:"milliseconds"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},"function":{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number","default":1,minimum:0},property:{type:"string","default":"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},"default":"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},"default":"rgb"},"default":{type:"*",required:!1}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color","default":"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,"default":[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},"default":"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"fill-extrusion-height":{type:"number","default":0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number","default":0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}}},tl=function(t,e,n,r){this.message=(t?t+": ":"")+n,r&&(this.identifier=r),null!==e&&e!==undefined&&e.__line__&&(this.line=e.__line__)},el=function(n){function t(t,e){n.call(this,e),this.message=e,this.key=t}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t}(Error);(Js=function(t,e){var n=this;void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var r=0,i=e;r<i.length;r+=1){var o=i[r],a=o[0],s=o[1];n.bindings[a]=s}}).prototype.concat=function(t){return new Js(this,t)},Js.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},Js.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var nl,rl,il,ol,al,sl={kind:"null"},ll={kind:"number"},ul={kind:"string"},cl={kind:"boolean"},hl={kind:"color"},pl={kind:"object"},fl={kind:"value"},dl={kind:"error"},ml={kind:"collator"},gl=[sl,ll,ul,cl,hl,pl,B(fl)],yl=r(function(t,e){function f(t){return(t=Math.round(t))<0?0:255<t?255:t}function n(t){return t<0?0:1<t?1:t}function d(t){return"%"===t[t.length-1]?f(parseFloat(t)/100*255):f(parseInt(t))}function m(t){return"%"===t[t.length-1]?n(parseFloat(t)/100):n(parseFloat(t))}function g(t,e,n){return n<0?n+=1:1<n&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function r(t){var e,n=t.replace(/ /g,"").toLowerCase();if(n in y)return y[n].slice();if("#"===n[0])return 4===n.length?0<=(e=parseInt(n.substr(1),16))&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===n.length&&0<=(e=parseInt(n.substr(1),16))&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var r=n.indexOf("("),i=n.indexOf(")");if(-1!==r&&i+1===n.length){var o=n.substr(0,r),a=n.substr(r+1,i-(r+1)).split(","),s=1;switch(o){case"rgba":if(4!==a.length)return null;s=m(a.pop());case"rgb":return 3!==a.length?null:[d(a[0]),d(a[1]),d(a[2]),s];case"hsla":if(4!==a.length)return null;s=m(a.pop());case"hsl":if(3!==a.length)return null;var l=(parseFloat(a[0])%360+360)%360/360,u=m(a[1]),c=m(a[2]),h=c<=.5?c*(u+1):c+u-c*u,p=2*c-h;return[f(255*g(p,h,l+1/3)),f(255*g(p,h,l)),f(255*g(p,h,l-1/3)),s];default:return null}}return null}var y={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{e.parseCSSColor=r}catch(i){}}).parseCSSColor;(nl=function(t,e,n,r){void 0===r&&(r=1),this.r=t,this.g=e,this.b=n,this.a=r}).parse=function(t){if(!t)return undefined;if(t instanceof nl)return t;if("string"!=typeof t)return undefined;var e=yl(t);return e?new nl(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):undefined},nl.prototype.toString=function(){var t=this.toArray(),e=t[0],n=t[1],r=t[2],i=t[3];return"rgba("+Math.round(e)+","+Math.round(n)+","+Math.round(r)+","+i+")"},nl.prototype.toArray=function(){var t=this,e=t.r,n=t.g,r=t.b,i=t.a;return 0===i?[0,0,0,0]:[255*e/i,255*n/i,255*r/i,i]},nl.black=new nl(0,0,0,1),nl.white=new nl(1,1,1,1),nl.transparent=new nl(0,0,0,0),(rl=function(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}).prototype.compare=function(t,e){return this.collator.compare(t,e)},rl.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale},(il=function(t,e,n){this.type=ml,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e}).parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");var r=e.parse(n["case-sensitive"]!==undefined&&n["case-sensitive"],1,cl);if(!r)return null;var i=e.parse(n["diacritic-sensitive"]!==undefined&&n["diacritic-sensitive"],1,cl);if(!i)return null;var o=null;return n.locale&&!(o=e.parse(n.locale,1,ul))?null:new il(r,i,o)},il.prototype.evaluate=function(t){return new rl(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},il.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},il.prototype.possibleOutputs=function(){return[undefined]},il.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]},(ol=function(t,e){this.type=t,this.value=e}).parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!V(t[1]))return e.error("invalid value");var n=t[1],r=$(n),i=e.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new ol(r,n)},ol.prototype.evaluate=function(){return this.value},ol.prototype.eachChild=function(){},ol.prototype.possibleOutputs=function(){return[this.value]},ol.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof nl?["rgba"].concat(this.value.toArray()):(ks(null===this.value||"string"==typeof this.value||"number"==typeof this.value||"boolean"==typeof this.value),this.value)},(al=function(t){this.name="ExpressionEvaluationError",this.message=t}).prototype.toJSON=function(){return this.message};var vl,_l={string:ul,number:ll,"boolean":cl,object:pl};(vl=function(t,e){this.type=t,this.args=e}).parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n=t[0];ks(_l[n],n);for(var r=_l[n],i=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,fl);if(!a)return null;i.push(a)}return new vl(r,i)},vl.prototype.evaluate=function(t){for(var e=this,n=0;n<this.args.length;n++){var r=e.args[n].evaluate(t);if(!N(e.type,$(r)))return r;if(n===e.args.length-1)throw new al("Expected value to be of type "+F(e.type)+", but found "+F($(r))+" instead.")}return ks(!1),null},vl.prototype.eachChild=function(t){this.args.forEach(t)},vl.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},vl.prototype.serialize=function(){return[this.type.kind].concat(this.args.map(function(t){return t.serialize()}))};var xl,bl={string:ul,number:ll,"boolean":cl};(xl=function(t,e){this.type=t,this.input=e}).parse=function(t,e){if(t.length<2||4<t.length)return e.error("Expected 1, 2, or 3 arguments, but found "+(t.length-1)+" instead.");var n,r;if(2<t.length){var i=t[1];if("string"!=typeof i||!(i in bl))return e.error('The item type argument of "array" must be one of string, number, boolean',1);n=bl[i]}else n=fl;if(3<t.length){if("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2]))return e.error('The length argument to "array" must be a positive integer literal',2);r=t[2]}var o=B(n,r),a=e.parse(t[t.length-1],t.length-1,fl);return a?new xl(o,a):null},xl.prototype.evaluate=function(t){var e=this.input.evaluate(t);if(N(this.type,$(e)))throw new al("Expected value to be of type "+F(this.type)+", but found "+F($(e))+" instead.");return e},xl.prototype.eachChild=function(t){t(this.input)},xl.prototype.possibleOutputs=function(){return this.input.possibleOutputs()},xl.prototype.serialize=function(){var t=["array"],e=this.type.itemType;if("string"===e.kind||"number"===e.kind||"boolean"===e.kind){t.push(e.kind);var n=this.type.N;"number"==typeof n&&t.push(n)}return t.push(this.input.serialize()),t};var wl,El={"to-number":ll,"to-color":hl};(wl=function(t,e){this.type=t,this.args=e}).parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n=t[0];ks(El[n],n);for(var r=El[n],i=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,fl);if(!a)return null;i.push(a)}return new wl(r,i)},wl.prototype.evaluate=function(t){var e=this;if("color"===this.type.kind){for(var n,r,i=0,o=e.args;i<o.length;i+=1){if(r=null,"string"==typeof(n=o[i].evaluate(t))){var a=t.parseColor(n);if(a)return a}else if(Array.isArray(n)&&!(r=n.length<3||4<n.length?"Invalid rbga value "+JSON.stringify(n)+": expected an array containing either three or four numeric values.":j(n[0],n[1],n[2],n[3])))return new nl(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new al(r||"Could not parse color from value '"+("string"==typeof n?n:JSON.stringify(n))+"'")}for(var s=null,l=0,u=e.args;l<u.length;l+=1){if(null!==(s=u[l].evaluate(t))){var c=Number(s);if(!isNaN(c))return c}}throw new al("Could not convert "+JSON.stringify(s)+" to number.")},wl.prototype.eachChild=function(t){this.args.forEach(t)},wl.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},wl.prototype.serialize=function(){var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};var Tl,Sl,Cl,Al,Il,Ml=["Unknown","Point","LineString","Polygon"];(Tl=function(){this._parseColorCache={}}).prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Tl.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Ml[this.feature.type]:this.feature.type:null},Tl.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Tl.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=nl.parse(t)),e},(Sl=function(t,e,n,r){this.name=t,this.type=e,this._evaluate=n,this.args=r}).prototype.evaluate=function(t){return this._evaluate(t,this.args)},Sl.prototype.eachChild=function(t){this.args.forEach(t)},Sl.prototype.possibleOutputs=function(){return[undefined]},Sl.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))},Sl.parse=function(n,t){var e=n[0],r=Sl.definitions[e];if(!r)return t.error('Unknown expression "'+e+'". If you wanted a literal array, use ["literal", [...]].',0);for(var i=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=o.filter(function(t){var e=t[0];return!Array.isArray(e)||e.length===n.length-1}),s=[],l=1;l<n.length;l++){var u=n[l],c=void 0;if(1===a.length){var h=a[0][0];c=Array.isArray(h)?h[l-1]:h.type}var p=t.parse(u,1+s.length,c);if(!p)return null;s.push(p)}for(var f=null,d=0,m=a;d<m.length;d+=1){var g=m[d],y=g[0],v=g[1];if(f=new Al(t.registry,t.path,null,t.scope),Array.isArray(y)&&y.length!==s.length)f.error("Expected "+y.length+" arguments, but found "+s.length+" instead.");else{for(var _=0;_<s.length;_++){var x=Array.isArray(y)?y[_]:y.type,b=s[_];f.concat(_+1).checkSubtype(x,b.type)}if(0===f.errors.length)return new Sl(e,i,v,s)}}if(ks(!f||0<f.errors.length),1===a.length)t.errors.push.apply(t.errors,f.errors);else{var w=(a.length?a:o).map(function(t){return q(t[0])}).join(" | "),E=s.map(function(t){return F(t.type)}).join(", ");t.error("Expected arguments of type "+w+", but found ("+E+") instead.")}return null},Sl.register=function(t,e){for(var n in ks(!Sl.definitions),Sl.definitions=e)t[n]=Sl},(Cl=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e}).parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var n=t[1];return e.scope.has(n)?new Cl(n,e.scope.get(n)):e.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},Cl.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},Cl.prototype.eachChild=function(){},Cl.prototype.possibleOutputs=function(){return[undefined]},Cl.prototype.serialize=function(){return["var",this.name]},(Al=function(t,e,n,r,i){void 0===e&&(e=[]),void 0===r&&(r=new Js),void 0===i&&(i=[]),this.registry=t,this.path=e,this.key=e.map(function(t){return"["+t+"]"}).join(""),this.scope=r,this.errors=i,this.expectedType=n}).prototype.parse=function(t,e,n,r,i){return void 0===i&&(i={}),e?this.concat(e,n,r)._parse(t,i):this._parse(t,i)},Al.prototype._parse=function(t,e){if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n=t[0];if("string"!=typeof n)return this.error("Expression name must be a string, but found "+typeof n+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var r=this.registry[n];if(r){var i=r.parse(t,this);if(!i)return null;if(this.expectedType){var o=this.expectedType,a=i.type;if("string"!==o.kind&&"number"!==o.kind&&"boolean"!==o.kind&&"object"!==o.kind||"value"!==a.kind)if("array"===o.kind&&"value"===a.kind)e.omitTypeAnnotations||(i=new xl(o,i));else if("color"!==o.kind||"value"!==a.kind&&"string"!==a.kind){if(this.checkSubtype(this.expectedType,i.type))return null}else e.omitTypeAnnotations||(i=new wl(o,[i]));else e.omitTypeAnnotations||(i=new vl(o,[i]))}if(!(i instanceof ol)&&G(i)){var s=new Tl;try{i=new ol(i.type,i.evaluate(s))}catch(l){return this.error(l.message),null}}return i}return this.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"==typeof t?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof t+" instead.")},Al.prototype.concat=function(t,e,n){var r="number"==typeof t?this.path.concat(t):this.path,i=n?this.scope.concat(n):this.scope;return new Al(this.registry,r,e||null,i,this.errors)},Al.prototype.error=function(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];var r=""+this.key+e.map(function(t){return"["+t+"]"}).join("");this.errors.push(new el(r,t))},Al.prototype.checkSubtype=function(t,e){var n=N(t,e);return n&&this.error(n),n},(Il=function(t,e,n){var r=this;this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var i=0,o=n;i<o.length;i+=1){var a=o[i],s=a[0],l=a[1];r.labels.push(s),r.outputs.push(l)}}).parse=function(t,e){var n=t[1],r=t.slice(2);if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(n=e.parse(n,1,ll)))return null;var i=[],o=null;e.expectedType&&"value"!==e.expectedType.kind&&(o=e.expectedType),r.unshift(-Infinity);for(var a=0;a<r.length;a+=2){var s=r[a],l=r[a+1],u=a+1,c=a+2;if("number"!=typeof s)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(i.length&&i[i.length-1][0]>=s)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var h=e.parse(l,c,o);if(!h)return null;o=o||h.type,i.push([s,h])}return new Il(o,n,i)},Il.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;return r>=e[i-1]?n[i-1].evaluate(t):n[Z(e,r)].evaluate(t)},Il.prototype.eachChild=function(t){var e=this;t(this.input);for(var n=0,r=e.outputs;n<r.length;n+=1){t(r[n])}},Il.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}));var t},Il.prototype.serialize=function(){for(var t=this,e=["step",this.input.serialize()],n=0;n<this.labels.length;n++)0<n&&e.push(t.labels[n]),e.push(t.outputs[n].serialize());return e};var kl,Dl,zl,Pl,Ll,Ol,Rl=Object.freeze({number:Y,color:X,array:K});(kl=function(t,e,n,r){var i=this;this.type=t,this.interpolation=e,this.input=n,this.labels=[],this.outputs=[];for(var o=0,a=r;o<a.length;o+=1){var s=a[o],l=s[0],u=s[1];i.labels.push(l),i.outputs.push(u)}}).interpolationFactor=function(t,e,n,r){var i=0;if("exponential"===t.name)i=J(e,t.base,n,r);else if("linear"===t.name)i=J(e,1,n,r);else if("cubic-bezier"===t.name){var o=t.controlPoints;i=new Bs(o[0],o[1],o[2],o[3]).solve(J(e,1,n,r))}return i},kl.parse=function(t,e){var n=t[1],r=t[2],i=t.slice(3);if(!Array.isArray(n)||0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){var o=n[1];if("number"!=typeof o)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:o}}else{if("cubic-bezier"!==n[0])return e.error("Unknown interpolation type "+String(n[0]),1,0);var a=n.slice(1);if(4!==a.length||a.some(function(t){return"number"!=typeof t||t<0||1<t}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:a}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(r=e.parse(r,2,ll)))return null;var s=[],l=null;e.expectedType&&"value"!==e.expectedType.kind&&(l=e.expectedType);for(var u=0;u<i.length;u+=2){var c=i[u],h=i[u+1],p=u+3,f=u+4;if("number"!=typeof c)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',p);if(s.length&&s[s.length-1][0]>=c)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',p);var d=e.parse(h,f,l);if(!d)return null;l=l||d.type,s.push([c,d])}return"number"===l.kind||"color"===l.kind||"array"===l.kind&&"number"===l.itemType.kind&&"number"==typeof l.N?new kl(l,n,r,s):e.error("Type "+F(l)+" is not interpolatable.")},kl.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;if(r>=e[i-1])return n[i-1].evaluate(t);var o=Z(e,r),a=e[o],s=e[o+1],l=kl.interpolationFactor(this.interpolation,r,a,s),u=n[o].evaluate(t),c=n[o+1].evaluate(t);return Rl[this.type.kind.toLowerCase()](u,c,l)},kl.prototype.eachChild=function(t){var e=this;t(this.input);for(var n=0,r=e.outputs;n<r.length;n+=1){t(r[n])}},kl.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}));var t},kl.prototype.serialize=function(){for(var t=this,e=["interpolate","linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints),this.input.serialize()],n=0;n<this.labels.length;n++)e.push(t.labels[n],t.outputs[n].serialize());return e},(Dl=function(t,e){this.type=t,this.args=e}).parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var n=null,r=e.expectedType;r&&"value"!==r.kind&&(n=r);for(var i=[],o=0,a=t.slice(1);o<a.length;o+=1){var s=a[o],l=e.parse(s,1+i.length,n,undefined,{omitTypeAnnotations:!0});if(!l)return null;n=n||l.type,i.push(l)}ks(n);var u=r&&i.some(function(t){return N(r,t.type)});return new Dl(u?fl:n,i)},Dl.prototype.evaluate=function(t){for(var e=null,n=0,r=this.args;n<r.length;n+=1){if(null!==(e=r[n].evaluate(t)))break}return e},Dl.prototype.eachChild=function(t){this.args.forEach(t)},Dl.prototype.possibleOutputs=function(){return(t=[]
).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},Dl.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e},(zl=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}).prototype.evaluate=function(t){return this.result.evaluate(t)},zl.prototype.eachChild=function(t){for(var e=0,n=this.bindings;e<n.length;e+=1){t(n[e][1])}t(this.result)},zl.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var n=[],r=1;r<t.length-1;r+=2){var i=t[r];if("string"!=typeof i)return e.error("Expected string, but found "+typeof i+" instead.",r);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);var o=e.parse(t[r+1],r+1);if(!o)return null;n.push([i,o])}var a=e.parse(t[t.length-1],t.length-1,undefined,n);return a?new zl(n,a):null},zl.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},zl.prototype.serialize=function(){for(var t=["let"],e=0,n=this.bindings;e<n.length;e+=1){var r=n[e],i=r[0],o=r[1];t.push(i,o.serialize())}return t.push(this.result.serialize()),t},(Pl=function(t,e,n){this.type=t,this.index=e,this.input=n}).parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,ll),r=e.parse(t[2],2,B(e.expectedType||fl));if(!n||!r)return null;var i=r.type;return new Pl(i.itemType,n,r)},Pl.prototype.evaluate=function(t){var e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new al("Array index out of bounds: "+e+" < 0.");if(e>=n.length)throw new al("Array index out of bounds: "+e+" > "+(n.length-1)+".");if(e!==Math.floor(e))throw new al("Array index must be an integer, but found "+e+" instead.");return n[e]},Pl.prototype.eachChild=function(t){t(this.index),t(this.input)},Pl.prototype.possibleOutputs=function(){return[undefined]},Pl.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]},(Ll=function(t,e,n,r,i,o){this.inputType=t,this.type=e,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o}).parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var n,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var i={},o=[],a=2;a<t.length-1;a+=2){var s=t[a],l=t[a+1];Array.isArray(s)||(s=[s]);var u=e.concat(a);if(0===s.length)return u.error("Expected at least one branch label.");for(var c=0,h=s;c<h.length;c+=1){var p=h[c];if("number"!=typeof p&&"string"!=typeof p)return u.error("Branch labels must be numbers or strings.");if("number"==typeof p&&Math.abs(p)>Number.MAX_SAFE_INTEGER)return u.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof p&&Math.floor(p)!==p)return u.error("Numeric branch labels must be integer values.");if(n){if(u.checkSubtype(n,$(p)))return null}else n=$(p);if("undefined"!=typeof i[String(p)])return u.error("Branch labels must be unique.");i[String(p)]=o.length}var f=e.parse(l,a,r);if(!f)return null;r=r||f.type,o.push(f)}var d=e.parse(t[1],1,fl);if(!d)return null;var m=e.parse(t[t.length-1],t.length-1,r);return m?(ks(n&&r),"value"!==d.type.kind&&e.concat(1).checkSubtype(n,d.type)?null:new Ll(n,r,d,i,o,m)):null},Ll.prototype.evaluate=function(t){var e=this.input.evaluate(t);return($(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},Ll.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},Ll.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()})).concat(this.otherwise.possibleOutputs());var t},Ll.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],n=[],r={},i=0,o=Object.keys(this.cases).sort();i<o.length;i+=1){var a=o[i],s=r[e.cases[a]];s===undefined?(r[e.cases[a]]=n.length,n.push([e.cases[a],[a]])):n[s][1].push(a)}for(var l=function(t){return"number"===e.inputType.kind?Number(t):t},u=0,c=n;u<c.length;u+=1){var h=c[u],p=h[0],f=h[1];1===f.length?t.push(l(f[0])):t.push(f.map(l)),t.push(e.outputs[p].serialize())}return t.push(this.otherwise.serialize()),t},(Ol=function(t,e,n){this.type=t,this.branches=e,this.otherwise=n}).parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var r=[],i=1;i<t.length-1;i+=2){var o=e.parse(t[i],i,cl);if(!o)return null;var a=e.parse(t[i+1],i+1,n);if(!a)return null;r.push([o,a]),n=n||a.type}var s=e.parse(t[t.length-1],t.length-1,n);return s?(ks(n),new Ol(n,r,s)):null},Ol.prototype.evaluate=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[0],o=r[1];if(i.evaluate(t))return o.evaluate(t)}return this.otherwise.evaluate(t)},Ol.prototype.eachChild=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[0],o=r[1];t(i),t(o)}t(this.otherwise)},Ol.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.branches.map(function(t){t[0];return t[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs());var t};var Bl,Fl=tt("==",!(Ol.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e})),Nl=tt("!=",!0);(Bl=function(t){this.type=ll,this.input=t}).parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error("Expected argument of type string or array, but found "+F(n.type)+" instead."):new Bl(n):null},Bl.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new al("Expected value to be of type string or array, but found "+F($(e))+" instead.")},Bl.prototype.eachChild=function(t){t(this.input)},Bl.prototype.possibleOutputs=function(){return[undefined]},Bl.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var jl={"==":Fl,"!=":Nl,array:xl,at:Pl,"boolean":vl,"case":Ol,coalesce:Dl,collator:il,interpolate:kl,length:Bl,"let":zl,literal:ol,match:Ll,number:vl,object:vl,step:Il,string:vl,"to-color":wl,"to-number":wl,"var":Cl};Sl.register(jl,{error:[dl,[ul],function(t,e){var n=e[0];throw new al(n.evaluate(t))}],"typeof":[ul,[fl],function(t,e){var n=e[0];return F($(n.evaluate(t)))}],"to-string":[ul,[fl],function(t,e){var n=e[0],r=typeof(n=n.evaluate(t));return null===n?"":"string"===r||"number"===r||"boolean"===r?String(n):n instanceof nl?n.toString():JSON.stringify(n)}],"to-boolean":[cl,[fl],function(t,e){var n=e[0];return Boolean(n.evaluate(t))}],"to-rgba":[B(ll,4),[hl],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[hl,[ll,ll,ll],et],rgba:[hl,[ll,ll,ll,ll],et],has:{type:cl,overloads:[[[ul],function(t,e){var n=e[0];return nt(n.evaluate(t),t.properties())}],[[ul,pl],function(t,e){var n=e[0],r=e[1];return nt(n.evaluate(t),r.evaluate(t))}]]},get:{type:fl,overloads:[[[ul],function(t,e){var n=e[0];return rt(n.evaluate(t),t.properties())}],[[ul,pl],function(t,e){var n=e[0],r=e[1];return rt(n.evaluate(t),r.evaluate(t))}]]},"feature-state":[fl,[ul],function(t,e){var n=e[0];return rt(n.evaluate(t),t.featureState||{})}],properties:[pl,[],function(t){return t.properties()}],"geometry-type":[ul,[],function(t){return t.geometryType()}],id:[fl,[],function(t){return t.id()}],zoom:[ll,[],function(t){return t.globals.zoom}],"heatmap-density":[ll,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[ll,[],function(t){return t.globals.lineProgress||0}],"+":[ll,ft(ll),function(t,e){for(var n=0,r=0,i=e;r<i.length;r+=1){n+=i[r].evaluate(t)}return n}],"*":[ll,ft(ll),function(t,e){for(var n=1,r=0,i=e;r<i.length;r+=1){n*=i[r].evaluate(t)}return n}],"-":{type:ll,overloads:[[[ll,ll],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)-r.evaluate(t)}],[[ll],function(t,e){return-e[0].evaluate(t)}]]},"/":[ll,[ll,ll],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)/r.evaluate(t)}],"%":[ll,[ll,ll],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)%r.evaluate(t)}],ln2:[ll,[],function(){return Math.LN2}],pi:[ll,[],function(){return Math.PI}],e:[ll,[],function(){return Math.E}],"^":[ll,[ll,ll],function(t,e){var n=e[0],r=e[1];return Math.pow(n.evaluate(t),r.evaluate(t))}],sqrt:[ll,[ll],function(t,e){var n=e[0];return Math.sqrt(n.evaluate(t))}],log10:[ll,[ll],function(t,e){var n=e[0];return Math.log10(n.evaluate(t))}],ln:[ll,[ll],function(t,e){var n=e[0];return Math.log(n.evaluate(t))}],log2:[ll,[ll],function(t,e){var n=e[0];return Math.log2(n.evaluate(t))}],sin:[ll,[ll],function(t,e){var n=e[0];return Math.sin(n.evaluate(t))}],cos:[ll,[ll],function(t,e){var n=e[0];return Math.cos(n.evaluate(t))}],tan:[ll,[ll],function(t,e){var n=e[0];return Math.tan(n.evaluate(t))}],asin:[ll,[ll],function(t,e){var n=e[0];return Math.asin(n.evaluate(t))}],acos:[ll,[ll],function(t,e){var n=e[0];return Math.acos(n.evaluate(t))}],atan:[ll,[ll],function(t,e){var n=e[0];return Math.atan(n.evaluate(t))}],min:[ll,ft(ll),function(e,t){return Math.min.apply(Math,t.map(function(t){return t.evaluate(e)}))}],max:[ll,ft(ll),function(e,t){return Math.max.apply(Math,t.map(function(t){return t.evaluate(e)}))}],abs:[ll,[ll],function(t,e){var n=e[0];return Math.abs(n.evaluate(t))}],round:[ll,[ll],function(t,e){var n=e[0].evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[ll,[ll],function(t,e){var n=e[0];return Math.floor(n.evaluate(t))}],ceil:[ll,[ll],function(t,e){var n=e[0];return Math.ceil(n.evaluate(t))}],"filter-==":[cl,[ul,fl],function(t,e){var n=e[0],r=e[1];return t.properties()[n.value]===r.value}],"filter-id-==":[cl,[fl],function(t,e){var n=e[0];return t.id()===n.value}],"filter-type-==":[cl,[ul],function(t,e){var n=e[0];return t.geometryType()===n.value}],"filter-<":[cl,[ul,fl],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<o}],"filter-id-<":[cl,[fl],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[cl,[ul,fl],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&o<i}],"filter-id->":[cl,[fl],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&i<r}],"filter-<=":[cl,[ul,fl],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<=o}],"filter-id-<=":[cl,[fl],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[cl,[ul,fl],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&o<=i}],"filter-id->=":[cl,[fl],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&i<=r}],"filter-has":[cl,[fl],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[cl,[],function(t){return null!==t.id()}],"filter-type-in":[cl,[B(ul)],function(t,e){return 0<=e[0].value.indexOf(t.geometryType())}],"filter-id-in":[cl,[B(fl)],function(t,e){return 0<=e[0].value.indexOf(t.id())}],"filter-in-small":[cl,[ul,B(fl)],function(t,e){var n=e[0];return 0<=e[1].value.indexOf(t.properties()[n.value])}],"filter-in-large":[cl,[ul,B(fl)],function(t,e){var n=e[0],r=e[1];return pt(t.properties()[n.value],r.value,0,r.value.length-1)}],">":{type:cl,overloads:[[[ll,ll],ot],[[ul,ul],ot],[[ul,ul,ml],ut]]},"<":{type:cl,overloads:[[[ll,ll],it],[[ul,ul],it],[[ul,ul,ml],lt]]},">=":{type:cl,overloads:[[[ll,ll],st],[[ul,ul],st],[[ul,ul,ml],ht]]},"<=":{type:cl,overloads:[[[ll,ll],at],[[ul,ul],at],[[ul,ul,ml],ct]]},all:{type:cl,overloads:[[[cl,cl],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)&&r.evaluate(t)}],[ft(cl),function(t,e){for(var n=0,r=e;n<r.length;n+=1){if(!r[n].evaluate(t))return!1}return!0}]]},any:{type:cl,overloads:[[[cl,cl],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)||r.evaluate(t)}],[ft(cl),function(t,e){for(var n=0,r=e;n<r.length;n+=1){if(r[n].evaluate(t))return!0}return!1}]]},"!":[cl,[cl],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[cl,[ul],function(t,e){var n=e[0],r=t.globals&&t.globals.isSupportedScript;return!r||r(n.evaluate(t))}],upcase:[ul,[ul],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[ul,[ul],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[ul,ft(ul),function(e,t){return t.map(function(t){return t.evaluate(e)}).join("")}],"resolved-locale":[ul,[ml],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var Vl,$l,ql,Ul,Hl=.95047,Wl=1,Gl=1.08883,Zl=4/29,Yl=6/29,Xl=3*Yl*Yl,Kl=Yl*Yl*Yl,Jl=Math.PI/180,Ql=180/Math.PI,tu={forward:Et,reverse:Tt,interpolate:St},eu={forward:Ct,reverse:At,interpolate:Mt},nu=Object.freeze({lab:tu,hcl:eu});(Vl=function(t,e){this.expression=t,this._warningHistory={},this._defaultValue=Gt(e),"enum"===e.type&&(this._enumValues=e.values)}).prototype.evaluateWithoutErrorHandling=function(t,e,n){return this._evaluator||(this._evaluator=new Tl),this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this.expression.evaluate(this._evaluator)},Vl.prototype.evaluate=function(t,e,n){this._evaluator||(this._evaluator=new Tl),this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n;try{var r=this.expression.evaluate(this._evaluator);if(null===r||r===undefined)return this._defaultValue;if(this._enumValues&&!(r in this._enumValues))throw new al("Expected value to be one of "+Object.keys(this._enumValues).map(function(t){return JSON.stringify(t)}).join(", ")+", but found "+JSON.stringify(r)+" instead.");return r}catch(i){return this._warningHistory[i.message]||(this._warningHistory[i.message]=!0,"undefined"!=typeof console&&console.warn(i.message)),this._defaultValue}},($l=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!H(e.expression)}).prototype.evaluateWithoutErrorHandling=function(t,e,n){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n)},$l.prototype.evaluate=function(t,e,n){return this._styleExpression.evaluate(t,e,n)},(ql=function(t,e,n){this.kind=t,this.zoomStops=n.labels,this._styleExpression=e,this.isStateDependent="camera"!==t&&!H(e.expression),n instanceof kl&&(this._interpolationType=n.interpolation)}).prototype.evaluateWithoutErrorHandling=function(t,e,n){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n)},ql.prototype.evaluate=function(t,e,n){return this._styleExpression.evaluate(t,e,n)},ql.prototype.interpolationFactor=function(t,e,n){return this._interpolationType?kl.interpolationFactor(this._interpolationType,t,e,n):0},(Ul=function(t,e){this._parameters=t,this._specification=e,L(this,Pt(this._parameters,this._specification))}).deserialize=function(t){return new Ul(t._parameters,t._specification)};var ru={type:"boolean","default":!(Ul.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}}),transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},iu={"*":function(){return[]},array:Yt,"boolean":Qt,number:Xt,color:te,constants:P,"enum":ee,filter:he,"function":Kt,layer:ge,object:Zt,source:ye,light:ve,string:_e};we.source=Te(ye),we.light=Te(ve),we.layer=Te(ge),we.filter=Te(he),we.paintProperty=Te(de),we.layoutProperty=Te(me);var ou=we,au=(we.source,we.light),su=(we.filter,we.paintProperty),lu=we.layoutProperty,uu=Ce,cu=3;Ce.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Ce.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Ce.prototype._insertCell=function(t,e,n,r,i,o){this.cells[i].push(o)},Ce.prototype.query=function(t,e,n,r){var i=this.min,o=this.max;if(t<=i&&e<=i&&o<=n&&o<=r)return Array.prototype.slice.call(this.keys);var a=[],s={};return this._forEachCell(t,e,n,r,this._queryCell,a,s),a},Ce.prototype._queryCell=function(t,e,n,r,i,o,a){var s=this.cells[i];if(null!==s)for(var l=this.keys,u=this.bboxes,c=0;c<s.length;c++){var h=s[c];if(a[h]===undefined){var p=4*h;t<=u[p+2]&&e<=u[p+3]&&n>=u[p+0]&&r>=u[p+1]?(a[h]=!0,o.push(l[h])):a[h]=!1}}},Ce.prototype._forEachCell=function(t,e,n,r,i,o,a){for(var s=this,l=this._convertToCellCoord(t),u=this._convertToCellCoord(e),c=this._convertToCellCoord(n),h=this._convertToCellCoord(r),p=l;p<=c;p++)for(var f=u;f<=h;f++){var d=s.d*f+p;if(i.call(s,t,e,n,r,d,o,a))return}},Ce.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Ce.prototype.toArrayBuffer=function(){var t=this;if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,n=cu+this.cells.length+1+1,r=0,i=0;i<this.cells.length;i++)r+=t.cells[i].length;var o=new Int32Array(n+r+this.keys.length+this.bboxes.length);o[0]=this.extent,o[1]=this.n,o[2]=this.padding;for(var a=n,s=0;s<e.length;s++){var l=e[s];o[cu+s]=a,o.set(l,a),a+=l.length}return o[cu+e.length]=a,o.set(this.keys,a),a+=this.keys.length,o[cu+e.length+1]=a,o.set(this.bboxes,a),a+=this.bboxes.length,o.buffer};var hu,pu=self.ImageData,fu={};for(var du in Ae("Object",Object),uu.serialize=function(t,e){var n=t.toArrayBuffer();return e&&e.push(n),n},uu.deserialize=function(t){return new uu(t)},Ae("Grid",uu),Ae("Color",nl),Ae("Error",Error),Ae("StylePropertyFunction",Ul),Ae("StyleExpression",Vl,{omit:["_evaluator"]}),Ae("ZoomDependentExpression",ql),Ae("ZoomConstantExpression",$l),Ae("CompoundExpression",Sl,{omit:["_evaluate"]}),jl)jl[du]._classRegistryKey||Ae("Expression_"+du,jl[du]);(hu=function(){this.first=!0}).prototype.update=function(t,e){var n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))};var mu,gu,yu,vu,_u,xu,bu,wu,Eu,Tu,Su,Cu,Au,Iu,Mu={"Latin-1 Supplement":function(t){return 128<=t&&t<=255},Arabic:function(t){return 1536<=t&&t<=1791},"Arabic Supplement":function(t){return 1872<=t&&t<=1919},"Arabic Extended-A":function(t){return 2208<=t&&t<=2303},"Hangul Jamo":function(t){return 4352<=t&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return 5120<=t&&t<=5759},Khmer:function(t){return 6016<=t&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return 6320<=t&&t<=6399},"General Punctuation":function(t){return 8192<=t&&t<=8303},"Letterlike Symbols":function(t){return 8448<=t&&t<=8527},"Number Forms":function(t){return 8528<=t&&t<=8591},"Miscellaneous Technical":function(t){return 8960<=t&&t<=9215},"Control Pictures":function(t){return 9216<=t&&t<=9279},"Optical Character Recognition":function(t){return 9280<=t&&t<=9311},"Enclosed Alphanumerics":function(t){return 9312<=t&&t<=9471},"Geometric Shapes":function(t){return 9632<=t&&t<=9727},"Miscellaneous Symbols":function(t){return 9728<=t&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return 11008<=t&&t<=11263},"CJK Radicals Supplement":function(t){return 11904<=t&&t<=12031},"Kangxi Radicals":function(t){return 12032<=t&&t<=12255},"Ideographic Description Characters":function(t){return 12272<=t&&t<=12287},"CJK Symbols and Punctuation":function(t){return 12288<=t&&t<=12351},Hiragana:function(t){return 12352<=t&&t<=12447},Katakana:function(t){return 12448<=t&&t<=12543},Bopomofo:function(t){return 12544<=t&&t<=12591},"Hangul Compatibility Jamo":function(t){return 12592<=t&&t<=12687},Kanbun:function(t){return 12688<=t&&t<=12703},"Bopomofo Extended":function(t){return 12704<=t&&t<=12735},"CJK Strokes":function(t){return 12736<=t&&t<=12783},"Katakana Phonetic Extensions":function(t){return 12784<=t&&t<=12799},"Enclosed CJK Letters and Months":function(t){return 12800<=t&&t<=13055},"CJK Compatibility":function(t){return 13056<=t&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return 13312<=t&&t<=19903},"Yijing Hexagram Symbols":function(t){return 19904<=t&&t<=19967},"CJK Unified Ideographs":function(t){return 19968<=t&&t<=40959},"Yi Syllables":function(t){return 40960<=t&&t<=42127},"Yi Radicals":function(t){return 42128<=t&&t<=42191},"Hangul Jamo Extended-A":function(t){return 43360<=t&&t<=43391},"Hangul Syllables":function(t){return 44032<=t&&t<=55215},"Hangul Jamo Extended-B":function(t){return 55216<=t&&t<=55295},"Private Use Area":function(t){return 57344<=t&&t<=63743},"CJK Compatibility Ideographs":function(t){return 63744<=t&&t<=64255},"Arabic Presentation Forms-A":function(t){return 64336<=t&&t<=65023},"Vertical Forms":function(t){return 65040<=t&&t<=65055},"CJK Compatibility Forms":function(t){return 65072<=t&&t<=65103},"Small Form Variants":function(t){return 65104<=t&&t<=65135},"Arabic Presentation Forms-B":function(t){return 65136<=t&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return 65280<=t&&t<=65519}},ku=!1,Du=null,zu=!1,Pu=new Us,Lu=function(t){return Du?t({pluginURL:Du,completionCallback:mu}):Pu.once("pluginAvailable",t),t},Ou=function(){ku=!1,Du=null},Ru=function(t,e){if(ku)throw new Error("setRTLTextPlugin cannot be called multiple times.");ku=!0,Du=Ls.resolveURL(t),mu=function(t){t?(Ou(),e&&e(t)):zu=!0},Pu.fire(new qs("pluginAvailable",{pluginURL:Du,completionCallback:mu}))},Bu={applyArabicShaping:null,processBidirectionalText:null,isLoaded:function(){return zu||null!=Bu.applyArabicShaping}};(gu=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new hu,this.transition={})}).prototype.isSupportedScript=function(t){return Fe(t,Bu.isLoaded())},gu.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},(yu=function(t,e){this.property=t,this.value=e,this.expression=Ut(e===undefined?t.specification["default"]:e,t.specification)}).prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},yu.prototype.possiblyEvaluate=function(t){return this.property.possiblyEvaluate(this,t)},(vu=function(t){this.property=t,this.value=new yu(t,undefined)}).prototype.transitioned=function(t,e){return new xu(this.property,this.value,e,p({},t.transition,this.transition),t.now)},vu.prototype.untransitioned=function(){return new xu(this.property,this.value,null,{},0)},(_u=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}).prototype.getValue=function(t){return w(this._values[t].value.value)},_u.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new vu(this._values[t].property)),this._values[t].value=new yu(this._values[t].property,null===e?undefined:w(e))},_u.prototype.getTransition=function(t){return w(this._values[t].transition)},_u.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new vu(this._values[t].property)),this._values[t].transition=w(e)||undefined},_u.prototype.serialize=function(){for(var t=this,e={},n=0,r=Object.keys(t._values);n<r.length;n+=1){var i=r[n],o=t.getValue(i);o!==undefined&&(e[i]=o);var a=t.getTransition(i);a!==undefined&&(e[i+"-transition"]=a)}return e},_u.prototype.transitioned=function(t,e){for(var n=this,r=new bu(this._properties),i=0,o=Object.keys(n._values);i<o.length;i+=1){var a=o[i];r._values[a]=n._values[a].transitioned(t,e._values[a])}return r},_u.prototype.untransitioned=function(){for(var t=this,e=new bu(this._properties),n=0,r=Object.keys(t._values);n<r.length;n+=1){var i=r[n];e._values[i]=t._values[i].untransitioned()}return e},(xu=function(t,e,n,r,i){this.property=t,this.value=e,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,t.specification.transition&&(r.delay||r.duration)&&(this.prior=n)}).prototype.possiblyEvaluate=function(t){var e=t.now||0,n=this.value.possiblyEvaluate(t),r=this.prior;if(r){if(e>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(e<this.begin)return r.possiblyEvaluate(t);var i=(e-this.begin)/(this.end-this.begin);return this.property.interpolate(r.possiblyEvaluate(t),n,a(i))}return n},(bu=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}).prototype.possiblyEvaluate=function(t){for(var e=this,n=new Tu(this._properties),r=0,i=Object.keys(e._values);r<i.length;r+=1){var o=i[r];n._values[o]=e._values[o].possiblyEvaluate(t)}return n},bu.prototype.hasTransition=function(){for(var t=this,e=0,n=Object.keys(t._values);e<n.length;e+=1){var r=n[e];if(t._values[r].prior)return!0}return!1},(wu=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}).prototype.getValue=function(t){return w(this._values[t].value)},wu.prototype.setValue=function(t,e){this._values[t]=new yu(this._values[t].property,null===e?undefined:w(e))},wu.prototype.serialize=function(){for(var t=this,e={},n=0,r=Object.keys(t._values);n<r.length;n+=1){var i=r[n],o=t.getValue(i);o!==undefined&&(e[i]=o)}return e},wu.prototype.possiblyEvaluate=function(t){for(var e=this,n=new Tu(this._properties),r=0,i=Object.keys(e._values);r<i.length;r+=1){var o=i[r];n._values[o]=e._values[o].possiblyEvaluate(t)}return n},(Eu=function(t,e,n){this.property=t,this.value=e,this.globals=n}).prototype.isConstant=function(){return"constant"===this.value.kind},Eu.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},Eu.prototype.evaluate=function(t,e){return this.property.evaluate(this.value,this.globals,t,e)},(Tu=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}).prototype.get=function(t){return this._values[t]},(Su=function(t){this.specification=t}).prototype.possiblyEvaluate=function(t,e){return ks(!t.isDataDriven()),t.expression.evaluate(e)},Su.prototype.interpolate=function(t,e,n){var r=Rl[this.specification.type];return r?r(t,e,n):t},(Cu=function(t){this.specification=t}).prototype.possiblyEvaluate=function(t,e){return"constant"===t.expression.kind||"camera"===t.expression.kind?new Eu(this,{kind:"constant",value:t.expression.evaluate(e)},e):new Eu(this,t.expression,e)},Cu.prototype.interpolate=function(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(t.value.value===undefined||e.value.value===undefined)return new Eu(this,{kind:"constant",value:undefined},t.globals);var r=Rl[this.specification.type];return r?new Eu(this,{kind:"constant",value:r(t.value.value,e.value.value,n)},t.globals):t},Cu.prototype.evaluate=function(t,e,n,r){return"constant"===t.kind?t.value:t.evaluate(e,n,r)},(Au=function(t){this.specification=t}).prototype.possiblyEvaluate=function(t,e){if(t.value===undefined)return undefined;if("constant"===t.expression.kind){var n=t.expression.evaluate(e);return this._calculate(n,n,n,e)}return ks(!t.isDataDriven()),this._calculate(t.expression.evaluate(new gu(Math.floor(e.zoom-1),e)),t.expression.evaluate(new gu(Math.floor(e.zoom),e)),t.expression.evaluate(new gu(Math.floor(e.zoom+1),e)),e)},Au.prototype._calculate=function(t,e,n,r){var i=r.zoom,o=i-Math.floor(i),a=r.crossFadingFactor();return i>r.zoomHistory.lastIntegerZoom?{from:t,to:e,fromScale:2,toScale:1,t:o+(1-o)*a}:{from:n,to:e,fromScale:.5,toScale:1,t:1-(1-a)*o}},Au.prototype.interpolate=function(t){return t},(Iu=function(t){this.specification=t}).prototype.possiblyEvaluate=function(t,e){return!!t.expression.evaluate(e)},Iu.prototype.interpolate=function(){return!1};var Fu=function(t){var e=this;for(var n in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},t){var r=t[n],i=e.defaultPropertyValues[n]=new yu(r,undefined),o=e.defaultTransitionablePropertyValues[n]=new vu(r);e.defaultTransitioningPropertyValues[n]=o.untransitioned(),e.defaultPossiblyEvaluatedValues[n]=i.possiblyEvaluate({})}};Ae("DataDrivenProperty",Cu),Ae("DataConstantProperty",Su),Ae("CrossFadedProperty",Au),Ae("ColorRampProperty",Iu);var Nu,ju="-transition",Vu=function(o){function t(t,e){var n=this;for(var r in o.call(this),this.id=t.id,this.metadata=t.metadata,this.type=t.type,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,this.visibility="visible","background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),this._featureFilter=function(){return!0},e.layout&&(this._unevaluatedLayout=new wu(e.layout)),this._transitionablePaint=new _u(e.paint),t.paint)n.setPaintProperty(r,t.paint[r],{validate:!1});for(var i in t.layout)n.setLayoutProperty(i,t.layout[i],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),(t.prototype.constructor=t).prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},t.prototype.setLayoutProperty=function(t,e,n){if(null!==e&&e!==undefined){var r="layers."+this.id+".layout."+t;if(this._validate(lu,r,t,e,n))return}"visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility="none"===e?e:"visible"},t.prototype.getPaintProperty=function(t){return _(t,ju)?this._transitionablePaint.getTransition(t.slice(0,-ju.length)):this._transitionablePaint.getValue(t)},t.prototype.setPaintProperty=function(t,e,n){if(null!==e&&e!==undefined){var r="layers."+this.id+".paint."+t;if(this._validate(su,r,t,e,n))return!1}if(_(t,ju))return this._transitionablePaint.setTransition(t.slice(0,-ju.length),e||undefined),!1;var i=this._transitionablePaint._values[t].value.isDataDriven();this._transitionablePaint.setValue(t,e);var o=this._transitionablePaint._values[t].value.isDataDriven();return this._handleSpecialPaintPropertyUpdate(t),o||i},t.prototype._handleSpecialPaintPropertyUpdate=function(){},t.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||(!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility)},t.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(t){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t)),this.paint=this._transitioningPaint.possiblyEvaluate(t)},t.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return"none"===this.visibility&&(t.layout=t.layout||{},t.layout.visibility="none"),b(t,function(t,e){return!(t===undefined||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)})},t.prototype._validate=function(t,e,n,r,i){return(!i||!1!==i.validate)&&Se(this,t.call(ou,{key:e,layerType:this.type,objectKey:n,value:r,styleSpec:Qs,style:{glyphs:!0,sprite:!0}}))},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t.prototype.isStateDependent=function(){var t=this;for(var e in t.paint._values){var n=t.paint.get(e);if(n instanceof Eu&&gt(n.property.specification)&&(("source"===n.value.kind||"composite"===n.value.kind)&&n.value.isStateDependent))return!0}return!1},t}(Us),$u={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},qu=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Uu=128,Hu=5;(Nu=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}).serialize=function(t,e){return ks(!t.isTransferred),t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},Nu.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},Nu.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews(
))},Nu.prototype.clear=function(){this.length=0},Nu.prototype.resize=function(t){ks(!this.isTransferred),this.reserve(t),this.length=t},Nu.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(this.capacity*Hu),Uu),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},Nu.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Wu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var r=2*n;return this.int16[r+0]=t,this.int16[r+1]=e,n},e.prototype.emplace=function(t,e,n){var r=2*t;return this.int16[r+0]=e,this.int16[r+1]=n,t},e}(Nu);Wu.prototype.bytesPerElement=4,Ae("StructArrayLayout2i4",Wu);var Gu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;this.resize(i+1);var o=4*i;return this.int16[o+0]=t,this.int16[o+1]=e,this.int16[o+2]=n,this.int16[o+3]=r,i},e.prototype.emplace=function(t,e,n,r,i){var o=4*t;return this.int16[o+0]=e,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,t},e}(Nu);Gu.prototype.bytesPerElement=8,Ae("StructArrayLayout4i8",Gu);var Zu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;this.resize(a+1);var s=6*a;return this.int16[s+0]=t,this.int16[s+1]=e,this.int16[s+2]=n,this.int16[s+3]=r,this.int16[s+4]=i,this.int16[s+5]=o,a},e.prototype.emplace=function(t,e,n,r,i,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(Nu);Zu.prototype.bytesPerElement=12,Ae("StructArrayLayout2i4i12",Zu);var Yu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s){var l=this.length;this.resize(l+1);var u=6*l,c=12*l;return this.int16[u+0]=t,this.int16[u+1]=e,this.int16[u+2]=n,this.int16[u+3]=r,this.uint8[c+8]=i,this.uint8[c+9]=o,this.uint8[c+10]=a,this.uint8[c+11]=s,l},e.prototype.emplace=function(t,e,n,r,i,o,a,s,l){var u=6*t,c=12*t;return this.int16[u+0]=e,this.int16[u+1]=n,this.int16[u+2]=r,this.int16[u+3]=i,this.uint8[c+8]=o,this.uint8[c+9]=a,this.uint8[c+10]=s,this.uint8[c+11]=l,t},e}(Nu);Yu.prototype.bytesPerElement=12,Ae("StructArrayLayout4i4ub12",Yu);var Xu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s){var l=this.length;this.resize(l+1);var u=8*l;return this.int16[u+0]=t,this.int16[u+1]=e,this.int16[u+2]=n,this.int16[u+3]=r,this.uint16[u+4]=i,this.uint16[u+5]=o,this.uint16[u+6]=a,this.uint16[u+7]=s,l},e.prototype.emplace=function(t,e,n,r,i,o,a,s,l){var u=8*t;return this.int16[u+0]=e,this.int16[u+1]=n,this.int16[u+2]=r,this.int16[u+3]=i,this.uint16[u+4]=o,this.uint16[u+5]=a,this.uint16[u+6]=s,this.uint16[u+7]=l,t},e}(Nu);Xu.prototype.bytesPerElement=16,Ae("StructArrayLayout4i4ui16",Xu);var Ku=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;this.resize(r+1);var i=3*r;return this.float32[i+0]=t,this.float32[i+1]=e,this.float32[i+2]=n,r},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.float32[i+0]=e,this.float32[i+1]=n,this.float32[i+2]=r,t},e}(Nu);Ku.prototype.bytesPerElement=12,Ae("StructArrayLayout3f12",Ku);var Ju=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;this.resize(e+1);var n=1*e;return this.uint32[n+0]=t,e},e.prototype.emplace=function(t,e){var n=1*t;return this.uint32[n+0]=e,t},e}(Nu);Ju.prototype.bytesPerElement=4,Ae("StructArrayLayout1ul4",Ju);var Qu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,l,u,c){var h=this.length;this.resize(h+1);var p=12*h,f=6*h;return this.int16[p+0]=t,this.int16[p+1]=e,this.int16[p+2]=n,this.int16[p+3]=r,this.int16[p+4]=i,this.int16[p+5]=o,this.uint32[f+3]=a,this.uint16[p+8]=s,this.uint16[p+9]=l,this.int16[p+10]=u,this.int16[p+11]=c,h},e.prototype.emplace=function(t,e,n,r,i,o,a,s,l,u,c,h){var p=12*t,f=6*t;return this.int16[p+0]=e,this.int16[p+1]=n,this.int16[p+2]=r,this.int16[p+3]=i,this.int16[p+4]=o,this.int16[p+5]=a,this.uint32[f+3]=s,this.uint16[p+8]=l,this.uint16[p+9]=u,this.int16[p+10]=c,this.int16[p+11]=h,t},e}(Nu);Qu.prototype.bytesPerElement=24,Ae("StructArrayLayout6i1ul2ui2i24",Qu);var tc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;this.resize(a+1);var s=6*a;return this.int16[s+0]=t,this.int16[s+1]=e,this.int16[s+2]=n,this.int16[s+3]=r,this.int16[s+4]=i,this.int16[s+5]=o,a},e.prototype.emplace=function(t,e,n,r,i,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(Nu);tc.prototype.bytesPerElement=12,Ae("StructArrayLayout2i2i2i12",tc);var ec=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var r=4*n;return this.uint8[r+0]=t,this.uint8[r+1]=e,n},e.prototype.emplace=function(t,e,n){var r=4*t;return this.uint8[r+0]=e,this.uint8[r+1]=n,t},e}(Nu);ec.prototype.bytesPerElement=4,Ae("StructArrayLayout2ub4",ec);var nc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,l,u,c,h,p,f){var d=this.length;this.resize(d+1);var m=20*d,g=10*d,y=40*d;return this.int16[m+0]=t,this.int16[m+1]=e,this.uint16[m+2]=n,this.uint16[m+3]=r,this.uint32[g+2]=i,this.uint32[g+3]=o,this.uint32[g+4]=a,this.uint16[m+10]=s,this.uint16[m+11]=l,this.uint16[m+12]=u,this.float32[g+7]=c,this.float32[g+8]=h,this.uint8[y+36]=p,this.uint8[y+37]=f,d},e.prototype.emplace=function(t,e,n,r,i,o,a,s,l,u,c,h,p,f,d){var m=20*t,g=10*t,y=40*t;return this.int16[m+0]=e,this.int16[m+1]=n,this.uint16[m+2]=r,this.uint16[m+3]=i,this.uint32[g+2]=o,this.uint32[g+3]=a,this.uint32[g+4]=s,this.uint16[m+10]=l,this.uint16[m+11]=u,this.uint16[m+12]=c,this.float32[g+7]=h,this.float32[g+8]=p,this.uint8[y+36]=f,this.uint8[y+37]=d,t},e}(Nu);nc.prototype.bytesPerElement=40,Ae("StructArrayLayout2i2ui3ul3ui2f2ub40",nc);var rc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;this.resize(e+1);var n=1*e;return this.float32[n+0]=t,e},e.prototype.emplace=function(t,e){var n=1*t;return this.float32[n+0]=e,t},e}(Nu);rc.prototype.bytesPerElement=4,Ae("StructArrayLayout1f4",rc);var ic=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;this.resize(r+1);var i=3*r;return this.int16[i+0]=t,this.int16[i+1]=e,this.int16[i+2]=n,r},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.int16[i+0]=e,this.int16[i+1]=n,this.int16[i+2]=r,t},e}(Nu);ic.prototype.bytesPerElement=6,Ae("StructArrayLayout3i6",ic);var oc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;this.resize(r+1);var i=2*r,o=4*r;return this.uint32[i+0]=t,this.uint16[o+2]=e,this.uint16[o+3]=n,r},e.prototype.emplace=function(t,e,n,r){var i=2*t,o=4*t;return this.uint32[i+0]=e,this.uint16[o+2]=n,this.uint16[o+3]=r,t},e}(Nu);oc.prototype.bytesPerElement=8,Ae("StructArrayLayout1ul2ui8",oc);var ac=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;this.resize(r+1);var i=3*r;return this.uint16[i+0]=t,this.uint16[i+1]=e,this.uint16[i+2]=n,r},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,this.uint16[i+2]=r,t},e}(Nu);ac.prototype.bytesPerElement=6,Ae("StructArrayLayout3ui6",ac);var sc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var r=2*n;return this.uint16[r+0]=t,this.uint16[r+1]=e,n},e.prototype.emplace=function(t,e,n){var r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,t},e}(Nu);sc.prototype.bytesPerElement=4,Ae("StructArrayLayout2ui4",sc);var lc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var r=2*n;return this.float32[r+0]=t,this.float32[r+1]=e,n},e.prototype.emplace=function(t,e,n){var r=2*t;return this.float32[r+0]=e,this.float32[r+1]=n,t},e}(Nu);lc.prototype.bytesPerElement=8,Ae("StructArrayLayout2f8",lc);var uc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;this.resize(i+1);var o=4*i;return this.float32[o+0]=t,this.float32[o+1]=e,this.float32[o+2]=n,this.float32[o+3]=r,i},e.prototype.emplace=function(t,e,n,r,i){var o=4*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,t},e}(Nu);uc.prototype.bytesPerElement=16,Ae("StructArrayLayout4f16",uc);var cc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorPointY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.x1.set=function(t){this._structArray.int16[this._pos2+2]=t},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.y1.set=function(t){this._structArray.int16[this._pos2+3]=t},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.x2.set=function(t){this._structArray.int16[this._pos2+4]=t},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.y2.set=function(t){this._structArray.int16[this._pos2+5]=t},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.featureIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},n.radius.get=function(){return this._structArray.int16[this._pos2+10]},n.radius.set=function(t){this._structArray.int16[this._pos2+10]=t},n.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},n.signedDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+11]=t},n.anchorPoint.get=function(){return new Fs(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,n),e}(qu);cc.prototype.size=24;var hc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype.get=function(t){return ks(!this.isTransferred),new cc(this,t)},e}(Qu);Ae("CollisionBoxArray",hc);var pc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},hidden:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.glyphStartIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.numGlyphs.set=function(t){this._structArray.uint16[this._pos2+3]=t},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.vertexStartIndex.set=function(t){this._structArray.uint32[this._pos4+2]=t},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineStartIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.lineLength.set=function(t){this._structArray.uint32[this._pos4+4]=t},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.segment.set=function(t){this._structArray.uint16[this._pos2+10]=t},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.lowerSize.set=function(t){this._structArray.uint16[this._pos2+11]=t},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.upperSize.set=function(t){this._structArray.uint16[this._pos2+12]=t},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetX.set=function(t){this._structArray.float32[this._pos4+7]=t},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.lineOffsetY.set=function(t){this._structArray.float32[this._pos4+8]=t},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.writingMode.set=function(t){this._structArray.uint8[this._pos1+36]=t},n.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},n.hidden.set=function(t){this._structArray.uint8[this._pos1+37]=t},Object.defineProperties(e.prototype,n),e}(qu);pc.prototype.size=40;var fc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype.get=function(t){return ks(!this.isTransferred),new pc(this,t)},e}(nc);Ae("PlacedSymbolArray",fc);var dc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={offsetX:{configurable:!0}};return n.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},n.offsetX.set=function(t){this._structArray.float32[this._pos4+0]=t},Object.defineProperties(e.prototype,n),e}(qu);dc.prototype.size=4;var mc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype.getoffsetX=function(t){return this.float32[1*t+0]},e.prototype.get=function(t){return ks(!this.isTransferred),new dc(this,t)},e}(rc);Ae("GlyphOffsetArray",mc);var gc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return n.x.get=function(){return this._structArray.int16[this._pos2+0]},n.x.set=function(t){this._structArray.int16[this._pos2+0]=t},n.y.get=function(){return this._structArray.int16[this._pos2+1]},n.y.set=function(t){this._structArray.int16[this._pos2+1]=t},n.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},n.tileUnitDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+2]=t},Object.defineProperties(e.prototype,n),e}(qu);gc.prototype.size=6;var yc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e.prototype.get=function(t){return ks(!this.isTransferred),new gc(this,t)},e}(ic);Ae("SymbolLineVertexArray",yc);var vc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.featureIndex.set=function(t){this._structArray.uint32[this._pos4+0]=t},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},n.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+3]=t},Object.defineProperties(e.prototype,n),e}(qu);vc.prototype.size=8;var _c=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype.get=function(t){return ks(!this.isTransferred),new vc(this,t)},e}(oc);Ae("FeatureIndexArray",_c);var xc,bc=Ne([{name:"a_pos",components:2,type:"Int16"}],4),wc=bc.members;bc.size,bc.alignment;(xc=function(t){void 0===t&&(t=[]),this.segments=t}).prototype.prepareSegment=function(t,e,n){var r=this.segments[this.segments.length-1];return t>xc.MAX_VERTEX_ARRAY_LENGTH&&T("Max vertices per segment is "+xc.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!r||r.vertexLength+t>xc.MAX_VERTEX_ARRAY_LENGTH)&&(r={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},this.segments.push(r)),r},xc.prototype.get=function(){return this.segments},xc.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var n=e[t];for(var r in n.vaos)n.vaos[r].destroy()}},xc.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ae("SegmentVector",xc);var Ec,Tc,Sc,Cc,Ac,Ic=function(t,e){return 256*(t=y(Math.floor(t),0,255))+(e=y(Math.floor(e),0,255))};(Ec=function(t,e,n){this.value=t,this.name=e,this.type=n,this.statistics={max:-Infinity}}).prototype.defines=function(){return["#define HAS_UNIFORM_u_"+this.name]},Ec.prototype.populatePaintArray=function(){},Ec.prototype.updatePaintArray=function(){},Ec.prototype.upload=function(){},Ec.prototype.destroy=function(){},Ec.prototype.setUniforms=function(t,e,n,r){var i=r.constantOr(this.value),o=t.gl;"color"===this.type?o.uniform4f(e.uniforms["u_"+this.name],i.r,i.g,i.b,i.a):o.uniform1f(e.uniforms["u_"+this.name],i)},(Tc=function(t,e,n){this.expression=t,this.name=e,this.type=n,this.statistics={max:-Infinity};var r="color"===n?lc:rc;this.paintVertexAttributes=[{name:"a_"+e,type:"Float32",components:"color"===n?2:1,offset:0}],this.paintVertexArray=new r}).prototype.defines=function(){return[]},Tc.prototype.populatePaintArray=function(t,e){var n=this.paintVertexArray,r=n.length;n.reserve(t);var i=this.expression.evaluate(new gu(0),e,{});if("color"===this.type)for(var o=$e(i),a=r;a<t;a++)n.emplaceBack(o[0],o[1]);else{for(var s=r;s<t;s++)n.emplaceBack(i);this.statistics.max=Math.max(this.statistics.max,i)}},Tc.prototype.updatePaintArray=function(t,e,n,r){var i=this.paintVertexArray,o=this.expression.evaluate({zoom:0},n,r);if("color"===this.type)for(var a=$e(o),s=t;s<e;s++)i.emplace(s,a[0],a[1]);else{for(var l=t;l<e;l++)i.emplace(l,o);this.statistics.max=Math.max(this.statistics.max,o)}},Tc.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Tc.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Tc.prototype.setUniforms=function(t,e){t.gl.uniform1f(e.uniforms["a_"+this.name+"_t"],0)},(Sc=function(t,e,n,r,i){this.expression=t,this.name=e,this.type=n,this.useIntegerZoom=r,this.zoom=i,this.statistics={max:-Infinity};var o="color"===n?uc:lc;this.paintVertexAttributes=[{name:"a_"+e,type:"Float32",components:"color"===n?4:2,offset:0}],this.paintVertexArray=new o}).prototype.defines=function(){return[]},Sc.prototype.populatePaintArray=function(t,e){var n=this.paintVertexArray,r=n.length;n.reserve(t);var i=this.expression.evaluate(new gu(this.zoom),e,{}),o=this.expression.evaluate(new gu(this.zoom+1),e,{});if("color"===this.type)for(var a=$e(i),s=$e(o),l=r;l<t;l++)n.emplaceBack(a[0],a[1],s[0],s[1]);else{for(var u=r;u<t;u++)n.emplaceBack(i,o);this.statistics.max=Math.max(this.statistics.max,i,o)}},Sc.prototype.updatePaintArray=function(t,e,n,r){var i=this.paintVertexArray,o=this.expression.evaluate({zoom:this.zoom},n,r),a=this.expression.evaluate({zoom:this.zoom+1},n,r);if("color"===this.type)for(var s=$e(o),l=$e(a),u=t;u<e;u++)i.emplace(u,s[0],s[1],l[0],l[1]);else{for(var c=t;c<e;c++)i.emplace(c,o,a);this.statistics.max=Math.max(this.statistics.max,o,a)}},Sc.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Sc.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Sc.prototype.interpolationFactor=function(t){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(t),this.zoom,this.zoom+1):this.expression.interpolationFactor(t,this.zoom,this.zoom+1)},Sc.prototype.setUniforms=function(t,e,n){t.gl.uniform1f(e.uniforms["a_"+this.name+"_t"],this.interpolationFactor(n.zoom))},(Cc=function(){this.binders={},this.cacheKey="",this._buffers=[],this._idMap={},this._bufferOffset=0}).createDynamic=function(t,e,n){var r=new Cc,i=[];for(var o in t.paint._values)if(n(o)){var a=t.paint.get(o);if(a instanceof Eu&&gt(a.property.specification)){var s=qe(o,t.type),l=a.property.specification.type,u=a.property.useIntegerZoom;"constant"===a.value.kind?(r.binders[o]=new Ec(a.value,s,l),i.push("/u_"+s)):"source"===a.value.kind?(r.binders[o]=new Tc(a.value,s,l),i.push("/a_"+s)):(r.binders[o]=new Sc(a.value,s,l,u,e),i.push("/z_"+s))}}return r.cacheKey=i.sort().join(""),r},Cc.prototype.populatePaintArrays=function(t,e,n){var r=this;for(var i in r.binders)r.binders[i].populatePaintArray(t,e);if(e.id){var o=String(e.id);this._idMap[o]=this._idMap[o]||[],this._idMap[o].push({index:n,start:this._bufferOffset,end:t})}this._bufferOffset=t},Cc.prototype.updatePaintArrays=function(t,e,n){var r=this,i=!1;for(var o in t){var a=r._idMap[o];if(a)for(var s=t[o],l=0,u=a;l<u.length;l+=1){var c=u[l],h=e.feature(c.index);for(var p in r.binders){var f=r.binders[p];if(!(f instanceof Ec)&&!0===f.expression.isStateDependent){var d=n.paint.get(p);f.expression=d.value,f.updatePaintArray(c.start,c.end,h,s),i=!0}}}}return i},Cc.prototype.defines=function(){var t=this,e=[];for(var n in t.binders)e.push.apply(e,t.binders[n].defines());return e},Cc.prototype.setUniforms=function(t,e,n,r){var i=this;for(var o in i.binders){i.binders[o].setUniforms(t,e,r,n.get(o))}},Cc.prototype.getPaintVertexBuffers=function(){return this._buffers},Cc.prototype.upload=function(t){var e=this;for(var n in e.binders)e.binders[n].upload(t);var r=[];for(var i in e.binders){var o=e.binders[i];(o instanceof Tc||o instanceof Sc)&&o.paintVertexBuffer&&r.push(o.paintVertexBuffer)}this._buffers=r},Cc.prototype.destroy=function(){var t=this;for(var e in t.binders)t.binders[e].destroy()},(Ac=function(t,e,n,r){var i=this;void 0===r&&(r=function(){return!0}),this.programConfigurations={};for(var o=0,a=e;o<a.length;o+=1){var s=a[o];i.programConfigurations[s.id]=Cc.createDynamic(s,n,r),i.programConfigurations[s.id].layoutAttributes=t}this.needsUpload=!1}).prototype.populatePaintArrays=function(t,e,n){var r=this;for(var i in r.programConfigurations)r.programConfigurations[i].populatePaintArrays(t,e,n);this.needsUpload=!0},Ac.prototype.updatePaintArrays=function(t,e,n){for(var r=this,i=0,o=n;i<o.length;i+=1){var a=o[i];r.needsUpload=r.programConfigurations[a.id].updatePaintArrays(t,e,a)||r.needsUpload}},Ac.prototype.get=function(t){return this.programConfigurations[t]},Ac.prototype.upload=function(t){var e=this;if(this.needsUpload){for(var n in e.programConfigurations)e.programConfigurations[n].upload(t);this.needsUpload=!1}},Ac.prototype.destroy=function(){var t=this;for(var e in t.programConfigurations)t.programConfigurations[e].destroy()},Ae("ConstantBinder",Ec),Ae("SourceExpressionBinder",Tc),Ae("CompositeExpressionBinder",Sc),Ae("ProgramConfiguration",Cc,{omit:["_buffers"]}),Ae("ProgramConfigurationSet",Ac);var Mc,kc=8192,Dc=Ue(16);(Mc=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new Wu,this.indexArray=new ac,this.segments=new xc,this.programConfigurations=new Ac(wc,t.layers,t.zoom)}).prototype.populate=function(t,e){for(var n=this,r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.feature,s=o.index,l=o.sourceLayerIndex;if(n.layers[0]._featureFilter(new gu(n.zoom),a)){var u=He(a);n.addFeature(a,u,s),e.featureIndex.insert(a,u,s,l,n.index)}}},Mc.prototype.update=function(t,e){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers)},Mc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Mc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Mc.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,wc),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Mc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Mc.prototype.addFeature=function(t,e,n){for(var r=this,i=0,o=e;i<o.length;i+=1)for(var a=0,s=o[i];a<s.length;a+=1){var l=s[a],u=l.x,c=l.y;if(!(u<0||kc<=u||c<0||kc<=c)){var h=r.segments.prepareSegment(4,r.layoutVertexArray,r.indexArray),p=h.vertexLength;We(r.layoutVertexArray,u,c,-1,-1),We(r.layoutVertexArray,u,c,1,-1),We(r.layoutVertexArray,u,c,1,1),We(r.layoutVertexArray,u,c,-1,1),r.indexArray.emplaceBack(p,p+1,p+2),r.indexArray.emplaceBack(p,p+3,p+2),h.vertexLength+=4,h.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n)},Ae("CircleBucket",Mc,{omit:["layers"]});var zc,Pc,Lc,Oc,Rc,Bc,Fc,Nc,jc,Vc,$c,qc={paint:new Fu({"circle-radius":new Cu(Qs.paint_circle["circle-radius"]),"circle-color":new Cu(Qs.paint_circle["circle-color"]),"circle-blur":new Cu(Qs.paint_circle["circle-blur"]),"circle-opacity":new Cu(Qs.paint_circle["circle-opacity"]),"circle-translate":new Su(Qs.paint_circle["circle-translate"]),"circle-translate-anchor":new Su(Qs.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Su(Qs.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Su(Qs.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Cu(Qs.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Cu(Qs.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Cu(Qs.paint_circle["circle-stroke-opacity"])})},Uc=1e-6,Hc="undefined"!=typeof Float32Array?Float32Array:Array,Wc=Math.random,Gc=(Math.PI,_n),Zc=In,Yc=Un,Xc=ir,Kc=_r,Jc=Yr,Qc=si,th=li,eh=ui,nh=yi,rh=vi,ih=ni,oh=_i,ah=(zc=ti(),function(t,e,n,r,i,o){var a,s;for(e||(e=3),n||(n=0),s=r?Math.min(r*e+n,t.length):t.length,a=n;a<s;a+=e)zc[0]=t[a],zc[1]=t[a+1],zc[2]=t[a+2],i(zc,zc,o),t[a]=zc[0],t[a+1]=zc[1],t[a+2]=zc[2];return t}),sh=Hi,lh=Wi,uh=Gi,ch=eo,hh=no,ph=ro,fh=io,dh=(Pc=Ni(),function(t,e,n,r,i,o){var a,s;for(e||(e=4),n||(n=0),s=r?Math.min(r*e+n,t.length):t.length,a=n;a<s;a+=e)Pc[0]=t[a],Pc[1]=t[a+1],Pc[2]=t[a+2],Pc[3]=t[a+3],i(Pc,Pc,o),t[a]=Pc[0],t[a+1]=Pc[1],t[a+2]=Pc[2],t[a+3]=Pc[3];return t}),mh=so,gh=(Lc=ti(),Oc=ri(1,0,0),Rc=ri(0,1,0),Bc=yo(),Fc=yo(),Nc=Pn(),jc=bo(),function(e){function t(t){e.call(this,t,qc)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.createBucket=function(t){return new Mc(t)},t.prototype.queryRadius=function(t){var e=t;return an("circle-radius",this,e)+an("circle-stroke-width",this,e)+sn(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a,s){for(var l=this,u=ln(t,this.paint.get("circle-translate"),
this.paint.get("circle-translate-anchor"),o.angle,a),c=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n),h="map"===this.paint.get("circle-pitch-alignment"),p=h?u:Eo(u,s,o),f=h?c*a:c,d=0,m=r;d<m.length;d+=1)for(var g=0,y=m[d];g<y.length;g+=1){var v=y[g],_=h?v:wo(v,s,o),x=f,b=ho([],[v.x,v.y,0,1],s);if("viewport"===l.paint.get("circle-pitch-scale")&&"map"===l.paint.get("circle-pitch-alignment")?x*=b[3]/o.cameraToCenterDistance:"map"===l.paint.get("circle-pitch-scale")&&"viewport"===l.paint.get("circle-pitch-alignment")&&(x*=o.cameraToCenterDistance/b[3]),Ze(p,_,x))return!0}return!1},t}(Vu)),yh=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e}(Mc);Ae("HeatmapBucket",yh,{omit:["layers"]}),(Vc=function(t,e){To(this,t,1,e)}).prototype.resize=function(t){So(this,t,1)},Vc.prototype.clone=function(){return new Vc({width:this.width,height:this.height},new Uint8Array(this.data))},Vc.copy=function(t,e,n,r,i){Co(t,e,n,r,i,1)},($c=function(t,e){To(this,t,4,e)}).prototype.resize=function(t){So(this,t,4)},$c.prototype.clone=function(){return new $c({width:this.width,height:this.height},new Uint8Array(this.data))},$c.copy=function(t,e,n,r,i){Co(t,e,n,r,i,4)},Ae("AlphaImage",Vc),Ae("RGBAImage",$c);var vh={paint:new Fu({"heatmap-radius":new Cu(Qs.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Cu(Qs.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Su(Qs.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Iu(Qs.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Su(Qs.paint_heatmap["heatmap-opacity"])})},_h=function(e){function t(t){e.call(this,t,vh),this._updateColorRamp()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.createBucket=function(t){return new yh(t)},t.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){var t=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Ao(t,"heatmapDensity"),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},t}(Vu),xh={paint:new Fu({"hillshade-illumination-direction":new Su(Qs.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Su(Qs.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Su(Qs.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Su(Qs.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Su(Qs.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Su(Qs.paint_hillshade["hillshade-accent-color"])})},bh=function(e){function t(t){e.call(this,t,xh)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},t}(Vu),wh=Ne([{name:"a_pos",components:2,type:"Int16"}],4),Eh=wh.members,Th=(wh.size,wh.alignment,Io),Sh=Io;Io.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(na(t,0,o,n));if(i)for(var s=0,l=e.length;s<l;s++){var u=e[s]*n,c=s<l-1?e[s+1]*n:t.length;a-=Math.abs(na(t,u,c,n))}var h=0;for(s=0;s<r.length;s+=3){var p=r[s]*n,f=r[s+1]*n,d=r[s+2]*n;h+=Math.abs((t[p]-t[d])*(t[f+1]-t[p+1])-(t[p]-t[f])*(t[d+1]-t[p+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},Io.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);0<i&&(r+=t[i-1].length,n.holes.push(r))}return n},Th["default"]=Sh;var Ch=ra,Ah=ra;Ch["default"]=Ah;var Ih,Mh=500;(Ih=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new Wu,this.indexArray=new ac,this.indexArray2=new sc,this.programConfigurations=new Ac(Eh,t.layers,t.zoom),this.segments=new xc,this.segments2=new xc}).prototype.populate=function(t,e){for(var n=this,r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.feature,s=o.index,l=o.sourceLayerIndex;if(n.layers[0]._featureFilter(new gu(n.zoom),a)){var u=He(a);n.addFeature(a,u,s),e.featureIndex.insert(a,u,s,l,n.index)}}},Ih.prototype.update=function(t,e){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers)},Ih.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ih.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ih.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Eh),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},Ih.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Ih.prototype.addFeature=function(t,e,n){for(var r=this,i=0,o=sa(e,Mh);i<o.length;i+=1){for(var a=o[i],s=0,l=0,u=a;l<u.length;l+=1){s+=u[l].length}for(var c=r.segments.prepareSegment(s,r.layoutVertexArray,r.indexArray),h=c.vertexLength,p=[],f=[],d=0,m=a;d<m.length;d+=1){var g=m[d];if(0!==g.length){g!==a[0]&&f.push(p.length/2);var y=r.segments2.prepareSegment(g.length,r.layoutVertexArray,r.indexArray2),v=y.vertexLength;r.layoutVertexArray.emplaceBack(g[0].x,g[0].y),r.indexArray2.emplaceBack(v+g.length-1,v),p.push(g[0].x),p.push(g[0].y);for(var _=1;_<g.length;_++)r.layoutVertexArray.emplaceBack(g[_].x,g[_].y),r.indexArray2.emplaceBack(v+_-1,v+_),p.push(g[_].x),p.push(g[_].y);y.vertexLength+=g.length,y.primitiveLength+=g.length}}var x=Th(p,f);ks(x.length%3==0);for(var b=0;b<x.length;b+=3)r.indexArray.emplaceBack(h+x[b],h+x[b+1],h+x[b+2]);c.vertexLength+=s,c.primitiveLength+=x.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n)},Ae("FillBucket",Ih,{omit:["layers"]});var kh,Dh={paint:new Fu({"fill-antialias":new Su(Qs.paint_fill["fill-antialias"]),"fill-opacity":new Cu(Qs.paint_fill["fill-opacity"]),"fill-color":new Cu(Qs.paint_fill["fill-color"]),"fill-outline-color":new Cu(Qs.paint_fill["fill-outline-color"]),"fill-translate":new Su(Qs.paint_fill["fill-translate"]),"fill-translate-anchor":new Su(Qs.paint_fill["fill-translate-anchor"]),"fill-pattern":new Au(Qs.paint_fill["fill-pattern"])})},zh=function(e){function t(t){e.call(this,t,Dh)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.recalculate=function(t){this.paint=this._transitioningPaint.possiblyEvaluate(t);var e=this.paint._values["fill-outline-color"];"constant"===e.value.kind&&e.value.value===undefined&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(t){return new Ih(t)},t.prototype.queryRadius=function(){return sn(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a){return Xe(ln(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),r)},t}(Vu),Ph=Ne([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Lh=Ph.members,Oh=(Ph.size,Ph.alignment,500),Rh=Math.pow(2,13);(kh=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new Zu,this.indexArray=new ac,this.programConfigurations=new Ac(Lh,t.layers,t.zoom),this.segments=new xc}).prototype.populate=function(t,e){for(var n=this,r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.feature,s=o.index,l=o.sourceLayerIndex;if(n.layers[0]._featureFilter(new gu(n.zoom),a)){var u=He(a);n.addFeature(a,u,s),e.featureIndex.insert(a,u,s,l,n.index)}}},kh.prototype.update=function(t,e){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers)},kh.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},kh.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},kh.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Lh),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},kh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},kh.prototype.addFeature=function(t,e,n){for(var r=this,i=0,o=sa(e,Oh);i<o.length;i+=1){for(var a=o[i],s=0,l=0,u=a;l<u.length;l+=1){s+=u[l].length}for(var c=r.segments.prepareSegment(4,r.layoutVertexArray,r.indexArray),h=0,p=a;h<p.length;h+=1){var f=p[h];if(0!==f.length&&!ha(f))for(var d=0,m=0;m<f.length;m++){var g=f[m];if(1<=m){var y=f[m-1];if(!ca(g,y)){c.vertexLength+4>xc.MAX_VERTEX_ARRAY_LENGTH&&(c=r.segments.prepareSegment(4,r.layoutVertexArray,r.indexArray));var v=g.sub(y)._perp()._unit(),_=y.dist(g);32768<d+_&&(d=0),ua(r.layoutVertexArray,g.x,g.y,v.x,v.y,0,0,d),ua(r.layoutVertexArray,g.x,g.y,v.x,v.y,0,1,d),d+=_,ua(r.layoutVertexArray,y.x,y.y,v.x,v.y,0,0,d),ua(r.layoutVertexArray,y.x,y.y,v.x,v.y,0,1,d);var x=c.vertexLength;r.indexArray.emplaceBack(x,x+1,x+2),r.indexArray.emplaceBack(x+1,x+2,x+3),c.vertexLength+=4,c.primitiveLength+=2}}}}c.vertexLength+s>xc.MAX_VERTEX_ARRAY_LENGTH&&(c=r.segments.prepareSegment(s,r.layoutVertexArray,r.indexArray));for(var b=[],w=[],E=c.vertexLength,T=0,S=a;T<S.length;T+=1){var C=S[T];if(0!==C.length){C!==a[0]&&w.push(b.length/2);for(var A=0;A<C.length;A++){var I=C[A];ua(r.layoutVertexArray,I.x,I.y,0,0,1,1,0),b.push(I.x),b.push(I.y)}}}var M=Th(b,w);ks(M.length%3==0);for(var k=0;k<M.length;k+=3)r.indexArray.emplaceBack(E+M[k],E+M[k+1],E+M[k+2]);c.primitiveLength+=M.length/3,c.vertexLength+=s}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n)},Ae("FillExtrusionBucket",kh,{omit:["layers"]});var Bh={paint:new Fu({"fill-extrusion-opacity":new Su(Qs["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Cu(Qs["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Su(Qs["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Su(Qs["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Au(Qs["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Cu(Qs["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Cu(Qs["paint_fill-extrusion"]["fill-extrusion-base"])})},Fh=function(e){function t(t){e.call(this,t,Bh)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.createBucket=function(t){return new kh(t)},t.prototype.queryRadius=function(){return sn(this.paint.get("fill-extrusion-translate"))},t.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a){return Xe(ln(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,a),r)},t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},t.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},t}(Vu),Nh=Ne([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),jh=Nh.members,Vh=(Nh.size,Nh.alignment,pa);pa.types=["Unknown","Point","LineString","Polygon"],pa.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,i=0,o=0,a=0,s=[];t.pos<n;){if(i<=0){var l=t.readVarint();r=7&l,i=l>>3}if(i--,1===r||2===r)o+=t.readSVarint(),a+=t.readSVarint(),1===r&&(e&&s.push(e),e=[]),e.push(new Fs(o,a));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&s.push(e),s},pa.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,a=Infinity,s=-Infinity,l=Infinity,u=-Infinity;t.pos<e;){if(r<=0){var c=t.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)(i+=t.readSVarint())<a&&(a=i),s<i&&(s=i),(o+=t.readSVarint())<l&&(l=o),u<o&&(u=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,l,s,u]},pa.prototype.toGeoJSON=function(t,e,n){function r(t){for(var e=0;e<t.length;e++){var n=t[e],r=180-360*(n.y+l)/a;t[e]=[360*(n.x+s)/a-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}var i,o,a=this.extent*Math.pow(2,n),s=this.extent*t,l=this.extent*e,u=this.loadGeometry(),c=pa.types[this.type];switch(this.type){case 1:var h=[];for(i=0;i<u.length;i++)h[i]=u[i][0];r(u=h);break;case 2:for(i=0;i<u.length;i++)r(u[i]);break;case 3:for(u=ma(u),i=0;i<u.length;i++)for(o=0;o<u[i].length;o++)r(u[i][o])}1===u.length?u=u[0]:c="Multi"+c;var p={type:"Feature",geometry:{type:c,coordinates:u},properties:this.properties};return"id"in this&&(p.id=this.id),p};var $h=ya;ya.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Vh(this._pbf,e,this.extent,this._keys,this._values)};var qh,Uh={VectorTile:xa,VectorTileFeature:Vh,VectorTileLayer:$h},Hh=Uh.VectorTileFeature.types,Wh=63,Gh=Math.cos(Math.PI/180*37.5),Zh=15,Yh=15,Xh=.5,Kh=Math.pow(2,Yh-1)/Xh;(qh=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new Yu,this.indexArray=new ac,this.programConfigurations=new Ac(jh,t.layers,t.zoom),this.segments=new xc}).prototype.populate=function(t,e){for(var n=this,r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.feature,s=o.index,l=o.sourceLayerIndex;if(n.layers[0]._featureFilter(new gu(n.zoom),a)){var u=He(a);n.addFeature(a,u,s),e.featureIndex.insert(a,u,s,l,n.index)}}},qh.prototype.update=function(t,e){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers)},qh.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},qh.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},qh.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,jh),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},qh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},qh.prototype.addFeature=function(t,e,n){for(var r=this,i=this.layers[0].layout,o=i.get("line-join").evaluate(t,{}),a=i.get("line-cap"),s=i.get("line-miter-limit"),l=i.get("line-round-limit"),u=0,c=e;u<c.length;u+=1){var h=c[u];r.addLine(h,t,o,a,s,l,n)}},qh.prototype.addLine=function(t,e,n,r,i,o,a){var s=this,l=null;e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end")&&(l={start:e.properties.mapbox_clip_start,end:e.properties.mapbox_clip_end,tileTotal:undefined});for(var u="Polygon"===Hh[e.type],c=t.length;2<=c&&t[c-1].equals(t[c-2]);)c--;for(var h=0;h<c-1&&t[h].equals(t[h+1]);)h++;if(!(c<(u?3:2))){l&&(l.tileTotal=Ta(t,h,c)),"bevel"===n&&(i=1.05);var p,f,d,m=Zh*(kc/(512*this.overscaling)),g=t[h],y=this.segments.prepareSegment(10*c,this.layoutVertexArray,this.indexArray),v=r,_=u?"butt":r,x=!(this.distance=0),b=undefined,w=undefined,E=undefined,T=undefined;this.e1=this.e2=this.e3=-1,u&&(p=t[c-2],T=g.sub(p)._unit()._perp());for(var S=h;S<c;S++)if(!(w=u&&S===c-1?t[h+1]:t[S+1])||!t[S].equals(w)){T&&(E=T),p&&(b=p),p=t[S],T=w?w.sub(p)._unit()._perp():E;var C=(E=E||T).add(T);0===C.x&&0===C.y||C._unit();var A=C.x*T.x+C.y*T.y,I=0!==A?1/A:Infinity,M=A<Gh&&b&&w;if(M&&h<S){var k=p.dist(b);if(2*m<k){var D=p.sub(p.sub(b)._mult(m/k)._round());s.distance+=D.dist(b),s.addCurrentVertex(D,s.distance,E.mult(1),0,0,!1,y,l),b=D}}var z=b&&w,P=z?n:w?v:_;if(z&&"round"===P&&(I<o?P="miter":I<=2&&(P="fakeround")),"miter"===P&&i<I&&(P="bevel"),"bevel"===P&&(2<I&&(P="flipbevel"),I<i&&(P="miter")),b&&(s.distance+=p.dist(b)),"miter"===P)C._mult(I),s.addCurrentVertex(p,s.distance,C,0,0,!1,y,l);else if("flipbevel"===P){if(100<I)C=T.clone().mult(-1);else{var L=0<E.x*T.y-E.y*T.x?-1:1,O=I*E.add(T).mag()/E.sub(T).mag();C._perp()._mult(O*L)}s.addCurrentVertex(p,s.distance,C,0,0,!1,y,l),s.addCurrentVertex(p,s.distance,C.mult(-1),0,0,!1,y,l)}else if("bevel"===P||"fakeround"===P){var R=0<E.x*T.y-E.y*T.x,B=-Math.sqrt(I*I-1);if(R?(d=0,f=B):(f=0,d=B),x||s.addCurrentVertex(p,s.distance,E,f,d,!1,y,l),"fakeround"===P){for(var F=Math.floor(8*(.5-(A-.5))),N=void 0,j=0;j<F;j++)N=T.mult((j+1)/(F+1))._add(E)._unit(),s.addPieSliceVertex(p,s.distance,N,R,y,l);s.addPieSliceVertex(p,s.distance,C,R,y,l);for(var V=F-1;0<=V;V--)N=E.mult((V+1)/(F+1))._add(T)._unit(),s.addPieSliceVertex(p,s.distance,N,R,y,l)}w&&s.addCurrentVertex(p,s.distance,T,-f,-d,!1,y,l)}else"butt"===P?(x||s.addCurrentVertex(p,s.distance,E,0,0,!1,y,l),w&&s.addCurrentVertex(p,s.distance,T,0,0,!1,y,l)):"square"===P?(x||(s.addCurrentVertex(p,s.distance,E,1,1,!1,y,l),s.e1=s.e2=-1),w&&s.addCurrentVertex(p,s.distance,T,-1,-1,!1,y,l)):"round"===P&&(x||(s.addCurrentVertex(p,s.distance,E,0,0,!1,y,l),s.addCurrentVertex(p,s.distance,E,1,1,!0,y,l),s.e1=s.e2=-1),w&&(s.addCurrentVertex(p,s.distance,T,-1,-1,!0,y,l),s.addCurrentVertex(p,s.distance,T,0,0,!1,y,l)));if(M&&S<c-1){var $=p.dist(w);if(2*m<$){var q=p.add(w.sub(p)._mult(m/$)._round());s.distance+=q.dist(p),s.addCurrentVertex(q,s.distance,T.mult(1),0,0,!1,y,l),p=q}}x=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a)}},qh.prototype.addCurrentVertex=function(t,e,n,r,i,o,a,s){var l,u=this.layoutVertexArray,c=this.indexArray;s&&(e=Ea(e,s)),l=n.clone(),r&&l._sub(n.perp()._mult(r)),wa(u,t,l,o,!1,r,e),this.e3=a.vertexLength++,0<=this.e1&&0<=this.e2&&(c.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,l=n.mult(-1),i&&l._sub(n.perp()._mult(i)),wa(u,t,l,o,!0,-i,e),this.e3=a.vertexLength++,0<=this.e1&&0<=this.e2&&(c.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,Kh/2<e&&!s&&(this.distance=0,this.addCurrentVertex(t,this.distance,n,r,i,o,a))},qh.prototype.addPieSliceVertex=function(t,e,n,r,i,o){n=n.mult(r?-1:1);var a=this.layoutVertexArray,s=this.indexArray;o&&(e=Ea(e,o)),wa(a,t,n,!1,r,0,e),this.e3=i.vertexLength++,0<=this.e1&&0<=this.e2&&(s.emplaceBack(this.e1,this.e2,this.e3),i.primitiveLength++),r?this.e2=this.e3:this.e1=this.e3},Ae("LineBucket",qh,{omit:["layers"]});var Jh=new Fu({"line-cap":new Su(Qs.layout_line["line-cap"]),"line-join":new Cu(Qs.layout_line["line-join"]),"line-miter-limit":new Su(Qs.layout_line["line-miter-limit"]),"line-round-limit":new Su(Qs.layout_line["line-round-limit"])}),Qh={paint:new Fu({"line-opacity":new Cu(Qs.paint_line["line-opacity"]),"line-color":new Cu(Qs.paint_line["line-color"]),"line-translate":new Su(Qs.paint_line["line-translate"]),"line-translate-anchor":new Su(Qs.paint_line["line-translate-anchor"]),"line-width":new Cu(Qs.paint_line["line-width"]),"line-gap-width":new Cu(Qs.paint_line["line-gap-width"]),"line-offset":new Cu(Qs.paint_line["line-offset"]),"line-blur":new Cu(Qs.paint_line["line-blur"]),"line-dasharray":new Au(Qs.paint_line["line-dasharray"]),"line-pattern":new Au(Qs.paint_line["line-pattern"]),"line-gradient":new Iu(Qs.paint_line["line-gradient"])}),layout:Jh},tp=new(function(i){function t(){i.apply(this,arguments)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),(t.prototype.constructor=t).prototype.possiblyEvaluate=function(t,e){return e=new gu(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),i.prototype.possiblyEvaluate.call(this,t,e)},t.prototype.evaluate=function(t,e,n,r){return e=p({},e,{zoom:Math.floor(e.zoom)}),i.prototype.evaluate.call(this,t,e,n,r)},t}(Cu))(Qh.paint.properties["line-width"].specification);tp.useIntegerZoom=!0;var ep=function(e){function t(t){e.call(this,t,Qh)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&this._updateGradient()},t.prototype._updateGradient=function(){var t=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=Ao(t,"lineProgress"),this.gradientTexture=null},t.prototype.recalculate=function(t){e.prototype.recalculate.call(this,t),this.paint._values["line-floorwidth"]=tp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)},t.prototype.createBucket=function(t){return new qh(t)},t.prototype.queryRadius=function(t){var e=t,n=Sa(an("line-width",this,e),an("line-gap-width",this,e)),r=an("line-offset",this,e);return n/2+Math.abs(r)+sn(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a){var s=ln(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,a),l=a/2*Sa(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),u=this.paint.get("line-offset").evaluate(e,n);return u&&(r=Ca(r,u*a)),Ke(s,r,l)},t}(Vu),np=Ne([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),rp=Ne([{name:"a_projected_pos",components:3,type:"Float32"}],4),ip=(Ne([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Ne([{name:"a_placed",components:2,type:"Uint8"}],4)),op=(Ne([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),Ne([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),ap=Ne([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),sp=(Ne([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]),Ne([{type:"Float32",name:"offsetX"}]),Ne([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),{"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"}),lp=function(i){function t(t,e,n,r){i.call(this,t,e),this.angle=n,r!==undefined&&(this.segment=r)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),(t.prototype.constructor=t).prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(Fs);Ae("Anchor",lp);var up,cp,hp,pp=Uh.VectorTileFeature.types,fp=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];(up=function(t){this.layoutVertexArray=new Xu,this.indexArray=new ac,this.programConfigurations=t,this.segments=new xc,this.dynamicLayoutVertexArray=new Ku,this.opacityVertexArray=new Ju,this.placedSymbolArray=new fc}).prototype.upload=function(t,e,n,r){n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,np.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,rp.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,fp,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(t)},up.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Ae("SymbolBuffers",up),(cp=function(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new xc,this.collisionVertexArray=new ec}).prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,ip.members,!0)},cp.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Ae("CollisionBuffers",cp),(hp=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex;var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ka(this.zoom,e["text-size"]),this.iconSizeData=ka(this.zoom,e["icon-size"]);var n=this.layers[0].layout;this.sortFeaturesByY=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sourceID=t.sourceID}).prototype.createArrays=function(){this.text=new up(new Ac(np.members,this.layers,this.zoom,function(t){return/^text/.test(t)})),this.icon=new up(new Ac(np.members,this.layers,this.zoom,function(t){return/^icon/.test(t)})),this.collisionBox=new cp(tc,op.members,sc),this.collisionCircle=new cp(tc,ap.members,ac),this.glyphOffsetArray=new mc,this.lineVertexArray=new yc},hp.prototype.populate=function(t,e){var n=this,r=this.layers[0],i=r.layout,o=i.get("text-font"),a=i.get("text-field"),s=i.get("icon-image"),l=("constant"!==a.value.kind||0<a.value.value.length)&&("constant"!==o.value.kind||0<o.value.value.length),u="constant"!==s.value.kind||s.value.value&&0<s.value.value.length;if(this.features=[],l||u){for(var c=e.iconDependencies,h=e.glyphDependencies,p=new gu(this.zoom),f=0,d=t;f<d.length;f+=1){var m=d[f],g=m.feature,y=m.index,v=m.sourceLayerIndex;if(r._featureFilter(p,g)){var _=void 0;l&&(_=Aa(_=r.getValueAndResolveTokens("text-field",g),r,g));var x=void 0;if(u&&(x=r.getValueAndResolveTokens("icon-image",g)),_||x){var b={text:_,icon:x,index:y,sourceLayerIndex:v,geometry:He(g),properties:g.properties,type:pp[g.type]};if("undefined"!=typeof g.id&&(b.id=g.id),n.features.push(b),x&&(c[x]=!0),_)for(var w=o.evaluate(g,{}).join(","),E=h[w]=h[w]||{},T="map"===i.get("text-rotation-alignment")&&"line"===i.get("symbol-placement"),S=ke(_),C=0;C<_.length;C++)if(E[_.charCodeAt(C)]=!0,T&&S){var A=sp[_.charAt(C)];A&&(E[A.charCodeAt(0)]=!0)}}}}"line"===i.get("symbol-placement")&&(this.features=Ia(this.features))}},hp.prototype.update=function(t,e){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers))},hp.prototype.isEmpty=function(){return 0===this.symbolInstances.length},hp.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},hp.prototype.upload=function(t){this.uploaded||(this.collisionBox.upload(t),this.collisionCircle.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},hp.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},hp.prototype.addToLineVertexArray=function(t,e){var n=this,r=this.lineVertexArray.length;if(t.segment!==undefined){for(var i=t.dist(e[t.segment+1]),o=t.dist(e[t.segment]),a={},s=t.segment+1;s<e.length;s++)a[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:i},s<e.length-1&&(i+=e[s+1].dist(e[s]));for(var l=t.segment||0;0<=l;l--)a[l]={x:e[l].x,y:e[l].y,tileUnitDistanceFromAnchor:o},0<l&&(o+=e[l-1].dist(e[l]));for(var u=0;u<e.length;u++){var c=a[u];n.lineVertexArray.emplaceBack(c.x,c.y,c.tileUnitDistanceFromAnchor)}}return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}},hp.prototype.addSymbols=function(t,e,n,r,i,o,a,s,l,u){for(var c=this,h=t.indexArray,p=t.layoutVertexArray,f=t.dynamicLayoutVertexArray,d=t.segments.prepareSegment(4*e.length,t.layoutVertexArray,t.indexArray),m=this.glyphOffsetArray.length,g=d.vertexLength,y=0,v=e;y<v.length;y+=1){var _=v[y],x=_.tl,b=_.tr,w=_.bl,E=_.br,T=_.tex,S=d.vertexLength,C=_.glyphOffset[1];Pa(p,s.x,s.y,x.x,C+x.y,T.x,T.y,n),Pa(p,s.x,s.y,b.x,C+b.y,T.x+T.w,T.y,n),Pa(p,s.x,s.y,w.x,C+w.y,T.x,T.y+T.h,n),Pa(p,s.x,s.y,E.x,C+E.y,T.x+T.w,T.y+T.h,n),La(f,s,0),h.emplaceBack(S,S+1,S+2),h.emplaceBack(S+1,S+2,S+3),d.vertexLength+=4,d.primitiveLength+=2,c.glyphOffsetArray.emplaceBack(_.glyphOffset[0])}t.placedSymbolArray.emplaceBack(s.x,s.y,m,this.glyphOffsetArray.length-m,g,l,u,s.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],a,!1),t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,o,o.index)},hp.prototype._addCollisionDebugVertex=function(t,e,n,r,i){return e.emplaceBack(0,0),t.emplaceBack(n.x,n.y,r.x,r.y,Math.round(i.x),Math.round(i.y))},hp.prototype.addCollisionDebugVertices=function(t,e,n,r,i,o,a,s){var l=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),u=l.vertexLength,c=i.layoutVertexArray,h=i.collisionVertexArray;if(this._addCollisionDebugVertex(c,h,o,a.anchor,new Fs(t,e)),this._addCollisionDebugVertex(c,h,o,a.anchor,new Fs(n,e)),this._addCollisionDebugVertex(c,h,o,a.anchor,new Fs(n,r)),this._addCollisionDebugVertex(c,h,o,a.anchor,new Fs(t,r)),l.vertexLength+=4,s){var p=i.indexArray;p.emplaceBack(u,u+1,u+2),p.emplaceBack(u,u+2,u+3),l.primitiveLength+=2}else{var f=i.indexArray;f.emplaceBack(u,u+1),f.emplaceBack(u+1,u+2),f.emplaceBack(u+2,u+3),f.emplaceBack(u+3,u),l.primitiveLength+=4}},hp.prototype.generateCollisionDebugBuffers=function(){for(var t=this,e=0,n=t.symbolInstances;e<n.length;e+=1){var r=n[e];r.textCollisionFeature={boxStartIndex:r.textBoxStartIndex,boxEndIndex:r.textBoxEndIndex},r.iconCollisionFeature={boxStartIndex:r.iconBoxStartIndex,boxEndIndex:r.iconBoxEndIndex};for(var i=0;i<2;i++){var o=r[0===i?"textCollisionFeature":"iconCollisionFeature"];if(o)for(var a=o.boxStartIndex;a<o.boxEndIndex;a++){var s=t.collisionBoxArray.get(a),l=s.x1,u=s.y1,c=s.x2,h=s.y2,p=0<s.radius;t.addCollisionDebugVertices(l,u,c,h,p?t.collisionCircle:t.collisionBox,s.anchorPoint,r,p)}}}},hp.prototype.deserializeCollisionBoxes=function(t,e,n,r,i){for(var o={},a=e;a<n;a++){var s=t.get(a);if(
0===s.radius){o.textBox={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,anchorPointX:s.anchorPointX,anchorPointY:s.anchorPointY},o.textFeatureIndex=s.featureIndex;break}o.textCircles||(o.textCircles=[],o.textFeatureIndex=s.featureIndex);var l=1;o.textCircles.push(s.anchorPointX,s.anchorPointY,s.radius,s.signedDistanceFromAnchor,l)}for(var u=r;u<i;u++){var c=t.get(u);if(0===c.radius){o.iconBox={x1:c.x1,y1:c.y1,x2:c.x2,y2:c.y2,anchorPointX:c.anchorPointX,anchorPointY:c.anchorPointY},o.iconFeatureIndex=c.featureIndex;break}}return o},hp.prototype.hasTextData=function(){return 0<this.text.segments.get().length},hp.prototype.hasIconData=function(){return 0<this.icon.segments.get().length},hp.prototype.hasCollisionBoxData=function(){return 0<this.collisionBox.segments.get().length},hp.prototype.hasCollisionCircleData=function(){return 0<this.collisionCircle.segments.get().length},hp.prototype.sortFeatures=function(t){var i=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&(this.sortedAngle=t,!(1<this.text.segments.get().length||1<this.icon.segments.get().length))){for(var e=[],n=0;n<this.symbolInstances.length;n++)e.push(n);var o=Math.sin(t),a=Math.cos(t);e.sort(function(t,e){var n=i.symbolInstances[t],r=i.symbolInstances[e];return(o*n.anchor.x+a*n.anchor.y|0)-(o*r.anchor.x+a*r.anchor.y|0)||r.featureIndex-n.featureIndex}),this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var r=0,s=e;r<s.length;r+=1){var l=s[r],u=i.symbolInstances[l];i.featureSortOrder.push(u.featureIndex);for(var c=0,h=u.placedTextSymbolIndices;c<h.length;c+=1)for(var p=h[c],f=i.text.placedSymbolArray.get(p),d=f.vertexStartIndex+4*f.numGlyphs,m=f.vertexStartIndex;m<d;m+=4)i.text.indexArray.emplaceBack(m,m+1,m+2),i.text.indexArray.emplaceBack(m+1,m+2,m+3);var g=i.icon.placedSymbolArray.get(l);if(g.numGlyphs){var y=g.vertexStartIndex;i.icon.indexArray.emplaceBack(y,y+1,y+2),i.icon.indexArray.emplaceBack(y+1,y+2,y+3)}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Ae("SymbolBucket",hp,{omit:["layers","collisionBoxArray","features","compareText"],shallow:["symbolInstances"]}),hp.MAX_GLYPHS=65535,hp.addDynamicAttributes=La;var dp=new Fu({"symbol-placement":new Su(Qs.layout_symbol["symbol-placement"]),"symbol-spacing":new Su(Qs.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Su(Qs.layout_symbol["symbol-avoid-edges"]),"icon-allow-overlap":new Su(Qs.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Su(Qs.layout_symbol["icon-ignore-placement"]),"icon-optional":new Su(Qs.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Su(Qs.layout_symbol["icon-rotation-alignment"]),"icon-size":new Cu(Qs.layout_symbol["icon-size"]),"icon-text-fit":new Su(Qs.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Su(Qs.layout_symbol["icon-text-fit-padding"]),"icon-image":new Cu(Qs.layout_symbol["icon-image"]),"icon-rotate":new Cu(Qs.layout_symbol["icon-rotate"]),"icon-padding":new Su(Qs.layout_symbol["icon-padding"]),"icon-keep-upright":new Su(Qs.layout_symbol["icon-keep-upright"]),"icon-offset":new Cu(Qs.layout_symbol["icon-offset"]),"icon-anchor":new Cu(Qs.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Su(Qs.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Su(Qs.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Su(Qs.layout_symbol["text-rotation-alignment"]),"text-field":new Cu(Qs.layout_symbol["text-field"]),"text-font":new Cu(Qs.layout_symbol["text-font"]),"text-size":new Cu(Qs.layout_symbol["text-size"]),"text-max-width":new Cu(Qs.layout_symbol["text-max-width"]),"text-line-height":new Su(Qs.layout_symbol["text-line-height"]),"text-letter-spacing":new Cu(Qs.layout_symbol["text-letter-spacing"]),"text-justify":new Cu(Qs.layout_symbol["text-justify"]),"text-anchor":new Cu(Qs.layout_symbol["text-anchor"]),"text-max-angle":new Su(Qs.layout_symbol["text-max-angle"]),"text-rotate":new Cu(Qs.layout_symbol["text-rotate"]),"text-padding":new Su(Qs.layout_symbol["text-padding"]),"text-keep-upright":new Su(Qs.layout_symbol["text-keep-upright"]),"text-transform":new Cu(Qs.layout_symbol["text-transform"]),"text-offset":new Cu(Qs.layout_symbol["text-offset"]),"text-allow-overlap":new Su(Qs.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Su(Qs.layout_symbol["text-ignore-placement"]),"text-optional":new Su(Qs.layout_symbol["text-optional"])}),mp={paint:new Fu({"icon-opacity":new Cu(Qs.paint_symbol["icon-opacity"]),"icon-color":new Cu(Qs.paint_symbol["icon-color"]),"icon-halo-color":new Cu(Qs.paint_symbol["icon-halo-color"]),"icon-halo-width":new Cu(Qs.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Cu(Qs.paint_symbol["icon-halo-blur"]),"icon-translate":new Su(Qs.paint_symbol["icon-translate"]),"icon-translate-anchor":new Su(Qs.paint_symbol["icon-translate-anchor"]),"text-opacity":new Cu(Qs.paint_symbol["text-opacity"]),"text-color":new Cu(Qs.paint_symbol["text-color"]),"text-halo-color":new Cu(Qs.paint_symbol["text-halo-color"]),"text-halo-width":new Cu(Qs.paint_symbol["text-halo-width"]),"text-halo-blur":new Cu(Qs.paint_symbol["text-halo-blur"]),"text-translate":new Su(Qs.paint_symbol["text-translate"]),"text-translate-anchor":new Su(Qs.paint_symbol["text-translate-anchor"])}),layout:dp},gp=function(e){function t(t){e.call(this,t,mp)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.recalculate=function(t){e.prototype.recalculate.call(this,t),"auto"===this.layout.get("icon-rotation-alignment")&&("line"===this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("line"===this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},t.prototype.getValueAndResolveTokens=function(t,e){var n=this.layout.get(t).evaluate(e,{}),r=this._unevaluatedLayout._values[t];return r.isDataDriven()||Vt(r.value)?n:Oa(e.properties,n)},t.prototype.createBucket=function(t){return new hp(t)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return ks(!1),!1},t}(Vu),yp={paint:new Fu({"background-color":new Su(Qs.paint_background["background-color"]),"background-pattern":new Au(Qs.paint_background["background-pattern"]),"background-opacity":new Su(Qs.paint_background["background-opacity"])})},vp=function(e){function t(t){e.call(this,t,yp)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t}(Vu),_p={paint:new Fu({"raster-opacity":new Su(Qs.paint_raster["raster-opacity"]),"raster-hue-rotate":new Su(Qs.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Su(Qs.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Su(Qs.paint_raster["raster-brightness-max"]),"raster-saturation":new Su(Qs.paint_raster["raster-saturation"]),"raster-contrast":new Su(Qs.paint_raster["raster-contrast"]),"raster-fade-duration":new Su(Qs.paint_raster["raster-fade-duration"])})},xp={circle:gh,heatmap:_h,hillshade:bh,fill:zh,"fill-extrusion":Fh,line:ep,symbol:gp,background:vp,raster:function(e){function t(t){e.call(this,t,_p)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t}(Vu)},bp=r(function(t){var e;e=function(){function t(t,e,n){n=n||{},this.w=t||64,this.h=e||64,this.autoResize=!!n.autoResize,this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0}function d(t,e,n){this.x=0,this.y=t,this.w=this.free=e,this.h=n}function i(t,e,n,r,i,o,a){this.id=t,this.x=e,this.y=n,this.w=r,this.h=i,this.maxw=o||r,this.maxh=a||i,this.refcount=0}return t.prototype.pack=function(t,e){var n=this;t=[].concat(t),e=e||{};for(var r,i,o,a,s=[],l=0;l<t.length;l++)if(r=t[l].w||t[l].width,i=t[l].h||t[l].height,o=t[l].id,r&&i){if(!(a=n.packOne(r,i,o)))continue;e.inPlace&&(t[l].x=a.x,t[l].y=a.y,t[l].id=a.id),s.push(a)}return this.shrink(),s},t.prototype.packOne=function(t,e,n){var r,i,o,a,s,l,u,c,h=this,p={freebin:-1,shelf:-1,waste:Infinity},f=0;if("string"==typeof n||"number"==typeof n){if(r=this.getBin(n))return this.ref(r),r;"number"==typeof n&&(this.maxId=Math.max(n,this.maxId))}else n=++this.maxId;for(a=0;a<this.freebins.length;a++){if(e===(r=h.freebins[a]).maxh&&t===r.maxw)return h.allocFreebin(a,t,e,n);e>r.maxh||t>r.maxw||e<=r.maxh&&t<=r.maxw&&(o=r.maxw*r.maxh-t*e)<p.waste&&(p.waste=o,p.freebin=a)}for(a=0;a<this.shelves.length;a++)if(f+=(i=h.shelves[a]).h,!(t>i.free)){if(e===i.h)return h.allocShelf(a,t,e,n);e>i.h||e<i.h&&(o=(i.h-e)*t)<p.waste&&(p.freebin=-1,p.waste=o,p.shelf=a)}return-1!==p.freebin?this.allocFreebin(p.freebin,t,e,n):-1!==p.shelf?this.allocShelf(p.shelf,t,e,n):e<=this.h-f&&t<=this.w?(i=new d(f,this.w,e),this.allocShelf(this.shelves.push(i)-1,t,e,n)):this.autoResize?(s=l=this.h,((u=c=this.w)<=s||u<t)&&(c=2*Math.max(t,u)),(s<u||s<e)&&(l=2*Math.max(e,s)),this.resize(c,l),this.packOne(t,e,n)):null},t.prototype.allocFreebin=function(t,e,n,r){var i=this.freebins.splice(t,1)[0];return i.id=r,i.w=e,i.h=n,i.refcount=0,this.bins[r]=i,this.ref(i),i},t.prototype.allocShelf=function(t,e,n,r){var i=this.shelves[t].alloc(e,n,r);return this.bins[r]=i,this.ref(i),i},t.prototype.shrink=function(){var t=this;if(0<this.shelves.length){for(var e=0,n=0,r=0;r<this.shelves.length;r++){var i=t.shelves[r];n+=i.h,e=Math.max(i.w-i.free,e)}this.resize(e,n)}},t.prototype.getBin=function(t){return this.bins[t]},t.prototype.ref=function(t){if(1==++t.refcount){var e=t.h;this.stats[e]=1+(0|this.stats[e])}return t.refcount},t.prototype.unref=function(t){return 0===t.refcount?0:(0==--t.refcount&&(this.stats[t.h]--,delete this.bins[t.id],this.freebins.push(t)),t.refcount)},t.prototype.clear=function(){this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0},t.prototype.resize=function(t,e){var n=this;this.w=t,this.h=e;for(var r=0;r<this.shelves.length;r++)n.shelves[r].resize(t);return!0},d.prototype.alloc=function(t,e,n){if(t>this.free||e>this.h)return null;var r=this.x;return this.x+=t,this.free-=t,new i(n,r,this.y,t,e,t,this.h)},d.prototype.resize=function(t){return this.free+=t-this.w,this.w=t,!0},t},t.exports=e()}),wp=1,Ep=function(t,e){var n=e.pixelRatio;this.paddedRect=t,this.pixelRatio=n},Tp={tl:{configurable:!0},br:{configurable:!0},displaySize:{configurable:!0}};Tp.tl.get=function(){return[this.paddedRect.x+wp,this.paddedRect.y+wp]},Tp.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-wp,this.paddedRect.y+this.paddedRect.h-wp]},Tp.displaySize.get=function(){return[(this.paddedRect.w-2*wp)/this.pixelRatio,(this.paddedRect.h-2*wp)/this.pixelRatio]},Object.defineProperties(Ep.prototype,Tp);var Sp=function(t){var e=new $c({width:0,height:0}),n={},r=new bp(0,0,{autoResize:!0});for(var i in t){var o=t[i],a=r.packOne(o.data.width+2*wp,o.data.height+2*wp);e.resize({width:r.w,height:r.h}),$c.copy(o.data,e,{x:0,y:0},{x:a.x+wp,y:a.y+wp},o.data),n[i]=new Ep(a,o)}r.shrink(),e.resize({width:r.w,height:r.h}),this.image=e,this.positions=n};Ae("ImagePosition",Ep),Ae("ImageAtlas",Sp);var Cp,Ap=self.HTMLImageElement,Ip=self.HTMLCanvasElement,Mp=self.HTMLVideoElement,kp=self.ImageData;(Cp=function(t,e,n,r){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,r)}).prototype.update=function(t,e){var n=t.width,r=t.height,i=!this.size||this.size[0]!==n||this.size[1]!==r,o=this.context,a=o.gl;this.useMipmap=Boolean(e&&e.useMipmap),a.bindTexture(a.TEXTURE_2D,this.texture),i?(this.size=[n,r],o.pixelStoreUnpack.set(1),this.format!==a.RGBA||e&&!1===e.premultiply||o.pixelStoreUnpackPremultiplyAlpha.set(!0),t instanceof Ap||t instanceof Ip||t instanceof Mp||t instanceof kp?a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,a.UNSIGNED_BYTE,t):a.texImage2D(a.TEXTURE_2D,0,this.format,n,r,0,this.format,a.UNSIGNED_BYTE,t.data)):t instanceof Ap||t instanceof Ip||t instanceof Mp||t instanceof kp?a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,t):a.texSubImage2D(a.TEXTURE_2D,0,0,0,n,r,a.RGBA,a.UNSIGNED_BYTE,t.data),this.useMipmap&&this.isSizePowerOfTwo()&&a.generateMipmap(a.TEXTURE_2D)},Cp.prototype.bind=function(t,e,n){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)},Cp.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Cp.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Dp={read:function(t,e,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,h=n?i-1:0,p=n?-1:1,f=t[e+h];for(h+=p,o=f&(1<<-c)-1,f>>=-c,c+=s;0<c;o=256*o+t[e+h],h+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;0<c;a=256*a+t[e+h],h+=p,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:(f?-1:1)*Infinity;a+=Math.pow(2,r),o-=u}return(f?-1:1)*a*Math.pow(2,o-r)},write:function(t,e,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,h=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===Infinity?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),2<=(e+=1<=a+h?p/l:p*Math.pow(2,1-h))*l&&(a++,l/=2),c<=a+h?(s=0,a=c):1<=a+h?(s=(e*l-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));8<=i;t[n+f]=255&s,f+=d,s/=256,i-=8);for(a=a<<i|s,u+=i;0<u;t[n+f]=255&a,f+=d,a/=256,u-=8);t[n+f-d]|=128*m}},zp=Ba;Ba.Varint=0,Ba.Fixed64=1,Ba.Bytes=2,Ba.Fixed32=5;var Pp=4294967296,Lp=1/Pp;Ba.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){var r=this;for(n=n||this.length;this.pos<n;){var i=r.readVarint(),o=i>>3,a=r.pos;r.type=7&i,t(o,e,r),r.pos===a&&r.skip(i)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=ts(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=ns(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=ts(this.buf,this.pos)+ts(this.buf,this.pos+4)*Pp;return this.pos+=8,t},readSFixed64:function(){var t=ts(this.buf,this.pos)+ns(this.buf,this.pos+4)*Pp;return this.pos+=8,t},readFloat:function(){var t=Dp.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Dp.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:Fa(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=rs(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var n=this,r=Na(this);for(t=t||[];this.pos<r;)t.push(n.readVarint(e));return t},readPackedSVarint:function(t){var e=this,n=Na(this);for(t=t||[];this.pos<n;)t.push(e.readSVarint());return t},readPackedBoolean:function(t){var e=this,n=Na(this);for(t=t||[];this.pos<n;)t.push(e.readBoolean());return t},readPackedFloat:function(t){var e=this,n=Na(this);for(t=t||[];this.pos<n;)t.push(e.readFloat());return t},readPackedDouble:function(t){var e=this,n=Na(this);for(t=t||[];this.pos<n;)t.push(e.readDouble());return t},readPackedFixed32:function(t){var e=this,n=Na(this);for(t=t||[];this.pos<n;)t.push(e.readFixed32());return t},readPackedSFixed32:function(t){var e=this,n=Na(this);for(t=t||[];this.pos<n;)t.push(e.readSFixed32());return t},readPackedFixed64:function(t){var e=this,n=Na(this);for(t=t||[];this.pos<n;)t.push(e.readFixed64());return t},readPackedSFixed64:function(t){var e=this,n=Na(this);for(t=t||[];this.pos<n;)t.push(e.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Ba.Varint)for(;127<this.buf[this.pos++];);else if(e===Ba.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Ba.Fixed32)this.pos+=4;else{if(e!==Ba.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),es(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),es(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),es(this.buf,-1&t,this.pos),es(this.buf,Math.floor(t*Lp),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),es(this.buf,-1&t,this.pos),es(this.buf,Math.floor(t*Lp),this.pos+4),this.pos+=8},writeVarint:function(t){268435455<(t=+t||0)||t<0?Va(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(127<t?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(127<t?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(127<t?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=is(this.buf,t,this.pos);var n=this.pos-e;128<=n&&Ua(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),Dp.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Dp.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=this,n=t.length;this.writeVarint(n),this.realloc(n);for(var r=0;r<n;r++)e.buf[e.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;128<=r&&Ua(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,Ba.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){this.writeMessage(t,Ha,e)},writePackedSVarint:function(t,e){this.writeMessage(t,Wa,e)},writePackedBoolean:function(t,e){this.writeMessage(t,Ya,e)},writePackedFloat:function(t,e){this.writeMessage(t,Ga,e)},writePackedDouble:function(t,e){this.writeMessage(t,Za,e)},writePackedFixed32:function(t,e){this.writeMessage(t,Xa,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,Ka,e)},writePackedFixed64:function(t,e){this.writeMessage(t,Ja,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,Qa,e)},writeBytesField:function(t,e){this.writeTag(t,Ba.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Ba.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Ba.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Ba.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Ba.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Ba.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Ba.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Ba.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Ba.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Ba.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var Op,Rp=3,Bp=Rp;(Op=function(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.callbackID=0,g(["receive"],this),this.target.addEventListener("message",this.receive,!1)}).prototype.send=function(t,e,n,r){var i=n?this.mapId+":"+this.callbackID++:null;n&&(this.callbacks[i]=n);var o=[];this.target.postMessage({targetMapId:r,sourceMapId:this.mapId,type:t,id:String(i),data:Ie(e,o)},o)},Op.prototype.receive=function(t){var e,r=this,n=t.data,i=n.id;if(!n.targetMapId||this.mapId===n.targetMapId){var o=function(t,e){var n=[];r.target.postMessage({sourceMapId:r.mapId,type:"<response>",id:String(i),error:t?Ie(t):null,data:Ie(e,n)},n)};if("<response>"===n.type)e=this.callbacks[n.id],delete this.callbacks[n.id],e&&n.error?e(Me(n.error)):e&&e(null,Me(n.data));else if("undefined"!=typeof n.id&&this.parent[n.type])this.parent[n.type](n.sourceMapId,Me(n.data),o);else if("undefined"!=typeof n.id&&this.parent.getWorkerSource){var a=n.type.split("."),s=Me(n.data);this.parent.getWorkerSource(n.sourceMapId,a[0],s.source)[a[1]](s,o)}else this.parent[n.type](Me(n.data))}},Op.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)};var Fp,Np=r(function(t,e){(function(t){function e(t,e,n,r,i,o){return o=o||{},t+"?"+["bbox="+a(n,r,i),"format="+(o.format||"image/png"),"service="+(o.service||"WMS"),"version="+(o.version||"1.1.1"),"request="+(o.request||"GetMap"),"srs="+(o.srs||"EPSG:3857"),"width="+(o.width||256),"height="+(o.height||256),"layers="+e].join("&")}function a(t,e,n){var r=o(256*t,256*(e=Math.pow(2,n)-e-1),n),i=o(256*(t+1),256*(e+1),n);return r[0]+","+r[1]+","+i[0]+","+i[1]}function o(t,e,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}t.getURL=e,t.getTileBBox=a,t.getMercCoords=o,Object.defineProperty(t,"__esModule",{value:!0})})(e)}),jp=(n(Np),Np.getTileBBox);(Fp=function(t,e,n){ks(0<=t&&t<=25),ks(0<=e&&e<Math.pow(2,t)),ks(0<=n&&n<Math.pow(2,t)),this.z=t,this.x=e,this.y=n,this.key=us(0,t,e,n)}).prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},Fp.prototype.url=function(t,e){var n=jp(this.x,this.y,this.z),r=cs(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",r).replace("{bbox-epsg-3857}",n)};var Vp,$p,qp,Up=function(t,e){this.wrap=t,this.canonical=e,this.key=us(t,e.z,e.x,e.y)};(Vp=function(t,e,n,r,i){ks(n<=t),this.overscaledZ=t,this.wrap=e,this.canonical=new Fp(n,+r,+i),this.key=us(e,t,r,i)}).prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},Vp.prototype.scaledTo=function(t){ks(t<=this.overscaledZ);var e=this.canonical.z-t;return t>this.canonical.z?new Vp(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Vp(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},Vp.prototype.isChildOf=function(t){var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},Vp.prototype.children=function(t){if(this.overscaledZ>=t)return[new Vp(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new Vp(e,this.wrap,e,n,r),new Vp(e,this.wrap,e,n+1,r),new Vp(e,this.wrap,e,n,r+1),new Vp(e,this.wrap,e,n+1,r+1)]},Vp.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},Vp.prototype.wrapped=function(){return new Vp(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Vp.prototype.unwrapTo=function(t){return new Vp(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},Vp.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Vp.prototype.toUnwrapped=function(){return new Up(this.wrap,this.canonical)},Vp.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Vp.prototype.toCoordinate=function(){return new Rs(this.canonical.x+Math.pow(2,this.wrap),this.canonical.y,this.canonical.z)},Ae("CanonicalTileID",Fp),Ae("OverscaledTileID",Vp,{omit:["posMatrix"]}),($p=function(t,e,n){if(t<=0)throw new RangeError("Level must have positive dimension");this.dim=t,this.border=e,this.stride=this.dim+2*this.border,this.data=n||new Int32Array((this.dim+2*this.border)*(this.dim+2*this.border))}).prototype.set=function(t,e,n){this.data[this._idx(t,e)]=n+65536},$p.prototype.get=function(t,e){return this.data[this._idx(t,e)]-65536},$p.prototype._idx=function(t,e){if(t<-this.border||t>=this.dim+this.border||e<-this.border||e>=this.dim+this.border)throw new RangeError("out of range source coordinates for DEM data");return(e+this.border)*this.stride+(t+this.border)},Ae("Level",$p),(qp=function(t,e,n){this.uid=t,this.scale=e||1,this.level=n||new $p(256,512),this.loaded=!!n}).prototype.loadFromImage=function(t,e){if(t.height!==t.width)throw new RangeError("DEM tiles must be square");if(e&&"mapbox"!==e&&"terrarium"!==e)return T('"'+e+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');var n=this.level=new $p(t.width,t.width/2),r=t.data;this._unpackData(n,r,e||"mapbox");for(var i=0;i<n.dim;i++)n.set(-1,i,n.get(0,i)),n.set(n.dim,i,n.get(n.dim-1,i)),n.set(i,-1,n.get(i,0)),n.set(i,n.dim,n.get(i,n.dim-1));n.set(-1,-1,n.get(0,0)),n.set(n.dim,-1,n.get(n.dim-1,0)),n.set(-1,n.dim,n.get(0,n.dim-1)),n.set(n.dim,n.dim,n.get(n.dim-1,n.dim-1)),this.loaded=!0},qp.prototype._unpackMapbox=function(t,e,n){return(256*t*256+256*e+n)/10-1e4},qp.prototype._unpackTerrarium=function(t,e,n){return 256*t+e+n/256-32768},qp.prototype._unpackData=function(t,e,n){for(var r=this,i={mapbox:this._unpackMapbox,terrarium:this._unpackTerrarium}[n],o=0;o<t.dim;o++)for(var a=0;a<t.dim;a++){var s=4*(o*t.dim+a);t.set(a,o,r.scale*i(e[s],e[s+1],e[s+2]))}},qp.prototype.getPixels=function(){return new $c({width:this.level.dim+2*this.level.border,height:this.level.dim+2*this.level.border},new Uint8Array(this.level.data.buffer))},qp.prototype.backfillBorder=function(t,e,n){var r=this.level,i=t.level;if(r.dim!==i.dim)throw new Error("level mismatch (dem dimension)");var o=e*r.dim,a=e*r.dim+r.dim,s=n*r.dim,l=n*r.dim+r.dim;switch(e){case-1:o=a-1;break;case 1:a=o+1}switch(n){case-1:s=l-1;break;case 1:l=s+1}for(var u=y(o,-r.border,r.dim+r.border),c=y(a,-r.border,r.dim+r.border),h=y(s,-r.border,r.dim+r.border),p=y(l,-r.border,r.dim+r.border),f=-e*r.dim,d=-n*r.dim,m=h;m<p;m++)for(var g=u;g<c;g++)r.set(g,m,i.get(g+f,m+d))},Ae("DEMData",qp);var Hp,Wp=Ne([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);(Hp=function(t){var e=this;this._stringToNumber={},this._numberToString=[];for(var n=0;n<t.length;n++){var r=t[n];e._stringToNumber[r]=n,e._numberToString[n]=r}}).prototype.encode=function(t){return ks(t in this._stringToNumber),this._stringToNumber[t]},Hp.prototype.decode=function(t){return ks(t<this._numberToString.length),this._numberToString[t]};var Gp,Zp,Yp=function(t,e,n,r){this.type="Feature",(this._vectorTileFeature=t)._z=e,t._x=n,t._y=r,this.properties=t.properties,null!=t.id&&(this.id=t.id)},Xp={geometry:{configurable:!0}};Xp.geometry.get=function(){return this._geometry===undefined&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Xp.geometry.set=function(t){this._geometry=t},Yp.prototype.toJSON=function(){var t=this,e={geometry:this.geometry};for(var n in t)"_geometry"!==n&&"_vectorTileFeature"!==n&&(e[n]=t[n]);return e},Object.defineProperties(Yp.prototype,Xp),(Gp=function(){this.state={},this.stateChanges={}}).prototype.updateState=function(t,e,n){e=String(e),this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][e]=this.stateChanges[t][e]||{},p(this.stateChanges[t][e],n)},Gp.prototype.getState=function(t,e){e=String(e);var n=this.state[t]||{},r=this.stateChanges[t]||{};return p({},n[e],r[e])},Gp.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},Gp.prototype.coalesceChanges=function(t,e){var n=this,r={};for(var i in n.stateChanges){n.state[i]=n.state[i]||{};var o={};for(var a in n.stateChanges[i])n.state[i][a]||(n.state[i][a]={}),p(n.state[i][a],n.stateChanges[i][a]),o[a]=n.state[i][a];r[i]=o}if(this.stateChanges={},0!==Object.keys(r).length)for(var s in t){t[s].setFeatureState(r,e)}},(Zp=function(t,e,n){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=e||new uu(kc,16,0),this.featureIndexArray=n||new _c}).prototype.insert=function(t,e,n,r,i){var o=this,a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);for(var s=0;s<e.length;s++){for(var l=e[s],u=[Infinity,Infinity,-Infinity,-Infinity],c=0;c<l.length;c++){var h=l[c];u[0]=Math.min(u[0],h.x),u[1]=Math.min(u[1],h.y),u[2]=Math.max(u[2],h.x),u[3]=Math.max(u[3],h.y)}u[0]<kc&&u[1]<kc&&0<=u[2]&&0<=u[3]&&o.grid.insert(a,u[0],u[1],u[2],u[3])}},Zp.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Uh.VectorTile(new zp(this.rawTileData)).layers,this.sourceLayerCoder=new Hp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Zp.prototype.query=function(i,o,a){var s=this;this.loadVTLayers();for(var l=i.params||{},u=kc/i.tileSize/i.scale,c=re(l.filter),h=i.queryGeometry,t=i.queryPadding*u,e=Infinity,n=Infinity,r=-Infinity,p=-Infinity,f=0;f<h.length;f++)for(var d=h[f],m=0;m<d.length;m++){var g=d[m];e=Math.min(e,g.x),n=Math.min(n,g.y),r=Math.max(r,g.x),p=Math.max(p,g.y)}var y=this.grid.query(e-t,n-t,r+t,p+t);y.sort(ps);for(var v,_={},x=function(t){var e=y[t];if(e!==v){v=e;var n=s.featureIndexArray.get(e),r=null;s.loadMatchingFeature(_,n.bucketIndex,n.sourceLayerIndex,n.featureIndex,c,l.layers,o,function(t,e){r||(r=He(t));var n={};return t.id&&(n=a.getState(e.sourceLayer||"_geojsonTileLayer",String(t.id))),e.queryIntersectsFeature(h,t,n,r,s.z,i.transform,u,i.posMatrix)})}},b=0;b<y.length;b++)x(b);return _},Zp.prototype.loadMatchingFeature=function(t,e,n,r,i,o,a,s){var l=this,u=this.bucketLayerIDs[e];if(!o||E(o,u)){var c=this.sourceLayerCoder.decode(n),h=this.vtLayers[c].feature(r);if(i(new gu(this.tileID.overscaledZ),h))for(var p=0;p<u.length;p++){var f=u[p];if(!(o&&o.indexOf(f)<0)){var d=a[f];if(d&&(!s||s(h,d))){var m=new Yp(h,l.z,l.x,l.y);m.layer=d.serialize();var g=t[f];g===undefined&&(g=t[f]=[]),g.push({featureIndex:r,feature:m})}}}}},Zp.prototype.lookupSymbolFeatures=function(t,e,n,r,i,o){var a=this,s={};this.loadVTLayers();for(var l=re(r),u=0,c=t;u<c.length;u+=1){var h=c[u];a.loadMatchingFeature(s,e,n,h,l,i,o)}return s},Zp.prototype.hasLayer=function(t){for(var e=0,n=this.bucketLayerIDs;e<n.length;e+=1)for(var r=0,i=n[e];r<i.length;r+=1){if(t===i[r])return!0}return!1},Ae("FeatureIndex",Zp,{omit:["rawTileData","sourceLayerCoder"]});var Kp,Jp=3e4;(Kp=function(t,e){this.tileID=t,this.uid=m(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.expiredRequestCount=0,this.state="loading"}).prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<Ls.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},Kp.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Kp.prototype.loadVectorData=function(t,e,n){var r=this;if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){if(t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=hs(t.buckets,e.style),n)for(var i in r.buckets){var o=r.buckets[i];o instanceof hp&&(o.justReloaded=!0)}for(var a in this.queryPadding=0,r.buckets){var s=r.buckets[a];r.queryPadding=Math.max(r.queryPadding,e.style.getLayer(s.layerIds[0]).queryRadius(s))}t.iconAtlasImage&&(this.iconAtlasImage=t.iconAtlasImage),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new hc},Kp.prototype.unloadVectorData=function(){var t=this;for(var e in t.buckets)t.buckets[e].destroy();this.buckets={},
this.iconAtlasTexture&&this.iconAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Kp.prototype.unloadDEMData=function(){this.dem=null,this.neighboringTiles=null,this.state="unloaded"},Kp.prototype.getBucket=function(t){return this.buckets[t.id]},Kp.prototype.upload=function(t){var e=this;for(var n in e.buckets){var r=e.buckets[n];r.uploadPending()&&r.upload(t)}var i=t.gl;this.iconAtlasImage&&(this.iconAtlasTexture=new Cp(t,this.iconAtlasImage,i.RGBA),this.iconAtlasImage=null),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Cp(t,this.glyphAtlasImage,i.ALPHA),this.glyphAtlasImage=null)},Kp.prototype.queryRenderedFeatures=function(t,e,n,r,i,o,a,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:n,scale:r,tileSize:this.tileSize,posMatrix:s,transform:o,params:i,queryPadding:this.queryPadding*a},t,e):{}},Kp.prototype.querySourceFeatures=function(t,e){var n=this;if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var r=this.latestFeatureIndex.loadVTLayers(),i=e?e.sourceLayer:"",o=r._geojsonTileLayer||r[i];if(o)for(var a=re(e&&e.filter),s={z:this.tileID.overscaledZ,x:this.tileID.canonical.x,y:this.tileID.canonical.y},l=0;l<o.length;l++){var u=o.feature(l);if(a(new gu(n.tileID.overscaledZ),u)){var c=new Yp(u,s.z,s.x,s.y);c.tile=s,t.push(c)}}}},Kp.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},Kp.prototype.setMask=function(t,e){var n=this;if(!f(this.mask,t)&&(this.mask=t,this.clearMask(),!f(t,{0:!0}))){var r=new Gu,i=new ac;this.segments=new xc,this.segments.prepareSegment(0,r,i);for(var o=Object.keys(t),a=0;a<o.length;a++){var s=t[o[a]],l=kc>>s.z,u=new Fs(s.x*l,s.y*l),c=new Fs(u.x+l,u.y+l),h=n.segments.prepareSegment(4,r,i);r.emplaceBack(u.x,u.y,u.x,u.y),r.emplaceBack(c.x,u.y,c.x,u.y),r.emplaceBack(u.x,c.y,u.x,c.y),r.emplaceBack(c.x,c.y,c.x,c.y);var p=h.vertexLength;i.emplaceBack(p,p+1,p+2),i.emplaceBack(p+1,p+2,p+3),h.vertexLength+=4,h.primitiveLength+=2}this.maskedBoundsBuffer=e.createVertexBuffer(r,Wp.members),this.maskedIndexBuffer=e.createIndexBuffer(i)}},Kp.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Kp.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var n=I(t.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var r=Date.now(),i=!1;if(this.expirationTime>r)i=!1;else if(e)if(this.expirationTime<e)i=!0;else{var o=this.expirationTime-e;o?this.expirationTime=r+Math.max(o,Jp):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Kp.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Kp.prototype.setFeatureState=function(t,e){var n=this;if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var r=this.latestFeatureIndex.loadVTLayers();for(var i in n.buckets){var o=n.buckets[i],a=o.layers[0].sourceLayer||"_geojsonTileLayer",s=r[a],l=t[a];s&&l&&0!==Object.keys(l).length&&(o.update(l,s),e&&e.style&&(n.queryPadding=Math.max(n.queryPadding,e.style.getLayer(o.layerIds[0]).queryRadius(o))))}}};var Qp=["type","source","source-layer","minzoom","maxzoom","filter","layout"],tf={horizontal:1,vertical:2,horizontalOnly:3},ef={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},nf={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};t.commonjsGlobal=Cs,t.commonjsRequire=e,t.unwrapExports=n,t.createCommonjsModule=r,t["default"]=Fs,t.default$1=self,t.default$2=ks,t.default$3=Ls,t.getJSON=Ws,t.getImage=Ys,t.ResourceType=$s,t.RGBAImage=$c,t.default$4=bp,t.ImagePosition=Ep,t.default$5=Cp,t.getArrayBuffer=Gs,t.default$6=ls,t.default$7=Mu,t.asyncAll=u,t.AlphaImage=Vc,t.default$8=Qs,t.endsWith=_,t.extend=p,t.sphericalToCartesian=A,t.Evented=Us,t.validateStyle=ou,t.validateLight=au,t.emitValidationErrors=Se,t.default$9=nl,t.number=Y,t.Properties=Fu,t.Transitionable=_u,t.Transitioning=bu,t.PossiblyEvaluated=Tu,t.DataConstantProperty=Su,t.warnOnce=T,t.uniqueId=m,t.default$10=Op,t.pick=d,t.wrap=l,t.clamp=y,t.Event=qs,t.ErrorEvent=Ks,t.OverscaledTileID=Vp,t.default$11=kc,t.getCoordinatesCenter=v,t.CanonicalTileID=Fp,t.RasterBoundsArray=Gu,t.default$12=Wp,t.getVideo=Xs,t.default$13=tl,t.bindAll=g,t.default$14=f,t.default$15=Kp,t.default$16=Rs,t.keysDifference=h,t.default$17=Gp,t.default$18=Qp,t.create=ur,t.clone=cr,t.copy=hr,t.fromValues=pr,t.set=fr,t.identity=dr,t.transpose=mr,t.invert=gr,t.adjoint=yr,t.determinant=vr,t.multiply=_r,t.translate=xr,t.scale=br,t.rotate=wr,t.rotateX=Er,t.rotateY=Tr,t.rotateZ=Sr,t.fromTranslation=Cr,t.fromScaling=Ar,t.fromRotation=Ir,t.fromXRotation=Mr,t.fromYRotation=kr,t.fromZRotation=Dr,t.fromRotationTranslation=zr,t.fromQuat2=Pr,t.getTranslation=Lr,t.getScaling=Or,t.getRotation=Rr,t.fromRotationTranslationScale=Br,t.fromRotationTranslationScaleOrigin=Fr,t.fromQuat=Nr,t.frustum=jr,t.perspective=Vr,t.perspectiveFromFieldOfView=$r,t.ortho=qr,t.lookAt=Ur,t.targetTo=Hr,t.str=Wr,t.frob=Gr,t.add=Zr,t.subtract=Yr,t.multiplyScalar=Xr,t.multiplyScalarAndAdd=Kr,t.exactEquals=Jr,t.equals=Qr,t.mul=Kc,t.sub=Jc,t.create$1=Ni,t.clone$1=ji,t.fromValues$1=Vi,t.copy$1=$i,t.set$1=qi,t.add$1=Ui,t.subtract$1=Hi,t.multiply$1=Wi,t.divide=Gi,t.ceil=Zi,t.floor=Yi,t.min=Xi,t.max=Ki,t.round=Ji,t.scale$1=Qi,t.scaleAndAdd=to,t.distance=eo,t.squaredDistance=no,t.length=ro,t.squaredLength=io,t.negate=oo,t.inverse=ao,t.normalize=so,t.dot=lo,t.lerp=uo,t.random=co,t.transformMat4=ho,t.transformQuat=po,t.str$1=fo,t.exactEquals$1=mo,t.equals$1=go,t.sub$1=sh,t.mul$1=lh,t.div=uh,t.dist=ch,t.sqrDist=hh,t.len=ph,t.sqrLen=fh,t.forEach=dh,t.getSizeData=ka,t.evaluateSizeForFeature=Da,t.evaluateSizeForZoom=za,t.addDynamicAttributes=La,t.default$19=mp,t.WritingMode=tf,t.multiPolygonIntersectsBufferedPoint=Ze,t.multiPolygonIntersectsBufferedMultiPoint=Ye,t.multiPolygonIntersectsMultiPolygon=Xe,t.multiPolygonIntersectsBufferedMultiLine=Ke,t.polygonIntersectsPolygon=Ge,t.distToSegmentSquared=nn,t.default$20=Vu,t.default$21=Ra,t.clone$2=w,t.filterObject=b,t.mapObject=x,t.registerForPluginAvailability=Lu,t.evented=Pu,t.default$22=hu,t.createLayout=Ne,t.default$23=Cc,t.create$2=Pn,t.fromMat4=Ln,t.clone$3=On,t.copy$2=Rn,t.fromValues$2=Bn,t.set$2=Fn,t.identity$1=Nn,t.transpose$1=jn,t.invert$1=Vn,t.adjoint$1=$n,t.determinant$1=qn,t.multiply$2=Un,t.translate$1=Hn,t.rotate$1=Wn,t.scale$2=Gn,t.fromTranslation$1=Zn,t.fromRotation$1=Yn,t.fromScaling$1=Xn,t.fromMat2d=Kn,t.fromQuat$1=Jn,t.normalFromMat4=Qn,t.projection=tr,t.str$2=er,t.frob$1=nr,t.add$2=rr,t.subtract$2=ir,t.multiplyScalar$1=or,t.multiplyScalarAndAdd$1=ar,t.exactEquals$2=sr,t.equals$2=lr,t.mul$2=Yc,t.sub$2=Xc,t.create$3=ti,t.clone$4=ei,t.length$1=ni,t.fromValues$3=ri,t.copy$3=ii,t.set$3=oi,t.add$3=ai,t.subtract$3=si,t.multiply$3=li,t.divide$1=ui,t.ceil$1=ci,t.floor$1=hi,t.min$1=pi,t.max$1=fi,t.round$1=di,t.scale$3=mi,t.scaleAndAdd$1=gi,t.distance$1=yi,t.squaredDistance$1=vi,t.squaredLength$1=_i,t.negate$1=xi,t.inverse$1=bi,t.normalize$1=wi,t.dot$1=Ei,t.cross=Ti,t.lerp$1=Si,t.hermite=Ci,t.bezier=Ai,t.random$1=Ii,t.transformMat4$1=Mi,t.transformMat3=ki,t.transformQuat$1=Di,t.rotateX$1=zi,t.rotateY$1=Pi,t.rotateZ$1=Li,t.angle=Oi,t.str$3=Ri,t.exactEquals$3=Bi,t.equals$3=Fi,t.sub$3=Qc,t.mul$3=th,t.div$1=eh,t.dist$1=nh,t.sqrDist$1=rh,t.len$1=ih,t.sqrLen$1=oh,t.forEach$1=ah,t.PosArray=Wu,t.UnwrappedTileID=Up,t.create$4=un,t.clone$5=cn,t.copy$4=hn,t.identity$2=pn,t.fromValues$4=fn,t.set$4=dn,t.transpose$2=mn,t.invert$2=gn,t.adjoint$2=yn,t.determinant$2=vn,t.multiply$4=_n,t.rotate$2=xn,t.scale$4=bn,t.fromRotation$2=wn,t.fromScaling$2=En,t.str$4=Tn,t.frob$2=Sn,t.LDU=Cn,t.add$4=An,t.subtract$4=In,t.exactEquals$4=Mn,t.equals$4=kn,t.multiplyScalar$2=Dn,t.multiplyScalarAndAdd$2=zn,t.mul$4=Gc,t.sub$4=Zc,t.ease=Ns,t.bezier$1=s,t.default$24=gu,t.setRTLTextPlugin=Ru,t.values=c,t.default$25=re,t.default$26=lp,t.register=Ae,t.GLYPH_PBF_BORDER=Bp,t.shapeText=ds,t.shapeIcon=Ss,t.allowsVerticalWritingMode=ke,t.allowsLetterSpacing=De,t.default$27=sa,t.default$28=hp,t.default$29=Zp,t.CollisionBoxArray=hc,t.default$30=Hp,t.default$31=Sp,t.default$32=Uh,t.default$33=zp,t.default$34=qp,t.__moduleExports=Uh,t.default$35=Fs,t.__moduleExports$1=zp,t.plugin=Bu}),t(["./chunk1.js"],function(U){function l(t){var e=typeof t;if("number"===e||"boolean"===e||"string"===e||t===undefined||null===t)return JSON.stringify(t);if(Array.isArray(t)){for(var n="[",r=0,i=t;r<i.length;r+=1){n+=l(i[r])+","}return n+"]"}for(var o=Object.keys(t).sort(),a="{",s=0;s<o.length;s++)a+=JSON.stringify(o[s])+":"+l(t[o[s]])+",";return a+"}"}function s(t){for(var e="",n=0,r=U.default$18;n<r.length;n+=1){e+="/"+l(t[r[n]])}return e}function v(t){for(var e={},n=0;n<t.length;n++){var r=s(t[n]),i=e[r];i||(i=e[r]=[]),i.push(t[n])}var o=[];for(var a in e)o.push(e[a]);return o}function T(t,e,n,r,i){if(e.segment===undefined)return!0;for(var o=e,a=e.segment+1,s=0;-n/2<s;){if(--a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var l=[],u=0;s<n/2;){var c=t[a-1],h=t[a],p=t[a+1];if(!p)return!1;var f=c.angleTo(h)-h.angleTo(p);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:f}),u+=f;s-l[0].distance>r;)u-=l.shift().angleDelta;if(i<u)return!1;a++,s+=h.dist(p)}return!0}function H(t,e,n,r,i,o,a,s,l){var u=r?.6*o*a:0,c=Math.max(r?r.right-r.left:0,i?i.right-i.left:0),h=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-c*a<e/4&&(e=c*a+e/4),S(t,h?e/2*s%e:(c/2+2*o)*a*s%e,e,u,n,c*a,h,!1,l)}function S(t,e,n,r,i,o,a,s,l){for(var u=o/2,c=0,h=0;h<t.length-1;h++)c+=t[h].dist(t[h+1]);for(var p=0,f=e-n,d=[],m=0;m<t.length-1;m++){for(var g=t[m],y=t[m+1],v=g.dist(y),_=y.angleTo(g);f+n<p+v;){var x=((f+=n)-p)/v,b=U.number(g.x,y.x,x),w=U.number(g.y,y.y,x);if(0<=b&&b<l&&0<=w&&w<l&&0<=f-u&&f+u<=c){var E=new U.default$26(b,w,_,m);E._round(),r&&!T(t,E,o,r,i)||d.push(E)}}p+=v}return s||d.length||a||(d=S(t,p/2,n,r,i,o,a,!0,l)),d}function W(t,e,n,r,i){for(var o=[],a=0;a<t.length;a++)for(var s=t[a],l=void 0,u=0;u<s.length-1;u++){var c=s[u],h=s[u+1];c.x<e&&h.x<e||(c.x<e?c=new U["default"](e,c.y+(h.y-c.y)*((e-c.x)/(h.x-c.x)))._round():h.x<e&&(h=new U["default"](e,c.y+(h.y-c.y)*((e-c.x)/(h.x-c.x)))._round()),c.y<n&&h.y<n||(c.y<n?c=new U["default"](c.x+(h.x-c.x)*((n-c.y)/(h.y-c.y)),n)._round():h.y<n&&(h=new U["default"](c.x+(h.x-c.x)*((n-c.y)/(h.y-c.y)),n)._round()),c.x>=r&&h.x>=r||(c.x>=r?c=new U["default"](r,c.y+(h.y-c.y)*((r-c.x)/(h.x-c.x)))._round():h.x>=r&&(h=new U["default"](r,c.y+(h.y-c.y)*((r-c.x)/(h.x-c.x)))._round()),c.y>=i&&h.y>=i||(c.y>=i?c=new U["default"](c.x+(h.x-c.x)*((i-c.y)/(h.y-c.y)),i)._round():h.y>=i&&(h=new U["default"](c.x+(h.x-c.x)*((i-c.y)/(h.y-c.y)),i)._round()),l&&c.equals(l[l.length-1])||(l=[c],o.push(l)),l.push(h)))))}return o}function F(t,e,n,r,i,o){var a,s,l,u,c=e.image,h=n.layout,p=1,f=e.top-p/c.pixelRatio,d=e.left-p/c.pixelRatio,m=e.bottom+p/c.pixelRatio,g=e.right+p/c.pixelRatio;if("none"!==h.get("icon-text-fit")&&i){var y=g-d,v=m-f,_=h.get("text-size").evaluate(o,{})/24,x=i.left*_,b=i.right*_,w=i.top*_,E=b-x,T=i.bottom*_-w,S=h.get("icon-text-fit-padding")[0],C=h.get("icon-text-fit-padding")[1],A=h.get("icon-text-fit-padding")[2],I=h.get("icon-text-fit-padding")[3],M="width"===h.get("icon-text-fit")?.5*(T-v):0,k="height"===h.get("icon-text-fit")?.5*(E-y):0,D="width"===h.get("icon-text-fit")||"both"===h.get("icon-text-fit")?E:y,z="height"===h.get("icon-text-fit")||"both"===h.get("icon-text-fit")?T:v;a=new U["default"](x+k-I,w+M-S),s=new U["default"](x+k+C+D,w+M-S),l=new U["default"](x+k+C+D,w+M+A+z),u=new U["default"](x+k-I,w+M+A+z)}else a=new U["default"](d,f),s=new U["default"](g,f),l=new U["default"](g,m),u=new U["default"](d,m);var P=n.layout.get("icon-rotate").evaluate(o,{})*Math.PI/180;if(P){var L=Math.sin(P),O=Math.cos(P),R=[O,-L,L,O];a._matMult(R),s._matMult(R),u._matMult(R),l._matMult(R)}return[{tl:a,tr:s,bl:u,br:l,tex:c.paddedRect,writingMode:undefined,glyphOffset:[0,0]}]}function m(t,e,n,r,i,o){for(var a=24,s=n.layout.get("text-rotate").evaluate(i,{})*Math.PI/180,l=n.layout.get("text-offset").evaluate(i,{}).map(function(t){return t*a}),u=e.positionedGlyphs,c=[],h=0;h<u.length;h++){var p=u[h],f=o[p.glyph];if(f){var d=f.rect;if(d){var m=1,g=U.GLYPH_PBF_BORDER+m,y=f.metrics.advance/2,v=r?[p.x+y,p.y]:[0,0],_=r?[0,0]:[p.x+y+l[0],p.y+l[1]],x=f.metrics.left-g-y+_[0],b=-f.metrics.top-g+_[1],w=x+d.w,E=b+d.h,T=new U["default"](x,b),S=new U["default"](w,b),C=new U["default"](x,E),A=new U["default"](w,E);if(r&&p.vertical){var I=new U["default"](-y,y),M=-Math.PI/2,k=new U["default"](5,0);T._rotateAround(M,I)._add(k),S._rotateAround(M,I)._add(k),C._rotateAround(M,I)._add(k),A._rotateAround(M,I)._add(k)}if(s){var D=Math.sin(s),z=Math.cos(s),P=[z,-D,D,z];T._matMult(P),S._matMult(P),C._matMult(P),A._matMult(P)}c.push({tl:T,tr:S,bl:C,br:A,tex:d,writingMode:e.writingMode,glyphOffset:v})}}}return c}function i(t,e){var n=this;if(!(this instanceof i))return new i(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||o,0<this.length)for(var r=(this.length>>1)-1;0<=r;r--)n._down(r)}function o(t,e){return t<e?-1:e<t?1:0}function G(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!1);for(var r=Infinity,i=Infinity,o=-Infinity,a=-Infinity,s=t[0],l=0;l<s.length;l++){var u=s[l];(!l||u.x<r)&&(r=u.x),(!l||u.y<i)&&(i=u.y),(!l||u.x>o)&&(o=u.x),(!l||u.y>a)&&(a=u.y)}var c=o-r,h=a-i,p=Math.min(c,h),f=p/2,d=new Qt(null,x);if(0===p)return new U["default"](r,i);for(var m=r;m<o;m+=p)for(var g=i;g<a;g+=p)d.push(new b(m+f,g+f,f,t));for(var y=w(t),v=d.length;d.length;){var _=d.pop();(_.d>y.d||!y.d)&&(y=_,n&&console.log("found best %d after %d probes",Math.round(1e4*_.d)/1e4,v)),_.max-y.d<=e||(f=_.h/2,d.push(new b(_.p.x-f,_.p.y-f,f,t)),d.push(new b(_.p.x+f,_.p.y-f,f,t)),d.push(new b(_.p.x-f,_.p.y+f,f,t)),d.push(new b(_.p.x+f,_.p.y+f,f,t)),v+=4)}return n&&(console.log("num probes: "+v),console.log("best distance: "+y.d)),y.p}function x(t,e){return e.max-t.max}function b(t,e,n,r){this.p=new U["default"](t,e),this.h=n,this.d=a(this.p,r),this.max=this.d+this.h*Math.SQRT2}function a(t,e){for(var n=!1,r=Infinity,i=0;i<e.length;i++)for(var o=e[i],a=0,s=o.length,l=s-1;a<s;l=a++){var u=o[a],c=o[l];u.y>t.y!=c.y>t.y&&t.x<(c.x-u.x)*(t.y-u.y)/(c.y-u.y)+u.x&&(n=!n),r=Math.min(r,U.distToSegmentSquared(t,u,c))}return(n?1:-1)*Math.sqrt(r)}function w(t){for(var e=0,n=0,r=0,i=t[0],o=0,a=i.length,s=a-1;o<a;s=o++){var l=i[o],u=i[s],c=l.x*u.y-u.x*l.y;n+=(l.x+u.x)*c,r+=(l.y+u.y)*c,e+=3*c}return new b(n/e,r/e,0,t)}function C(t,e,n,r,i,o){t.createArrays(),t.symbolInstances=[];var a=512*t.overscaling;t.tilePixelRatio=U.default$11/a,t.compareText={},t.iconsNeedLinear=!1;var s=t.layers[0].layout,l=t.layers[0]._unevaluatedLayout._values,u={};if("composite"===t.textSizeData.functionType){var c=t.textSizeData.zoomRange,h=c.min,p=c.max;u.compositeTextSizes=[l["text-size"].possiblyEvaluate(new U.default$24(h)),l["text-size"].possiblyEvaluate(new U.default$24(p))]}if("composite"===t.iconSizeData.functionType){var f=t.iconSizeData.zoomRange,d=f.min,m=f.max;u.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new U.default$24(d)),l["icon-size"].possiblyEvaluate(new U.default$24(m))]}u.layoutTextSize=l["text-size"].possiblyEvaluate(new U.default$24(t.zoom+1)),u.layoutIconSize=l["icon-size"].possiblyEvaluate(new U.default$24(t.zoom+1)),u.textMaxSize=l["text-size"].possiblyEvaluate(new U.default$24(18));for(var g=24,y=s.get("text-line-height")*g,v="map"===s.get("text-rotation-alignment")&&"line"===s.get("symbol-placement"),_=s.get("text-keep-upright"),x=0,b=t.features;x<b.length;x+=1){var w=b[x],E=s.get("text-font").evaluate(w,{}).join(","),T=e[E]||{},S=n[E]||{},C={},A=w.text;if(A){var I=s.get("text-offset").evaluate(w,{}).map(function(t){return t*g}),M=s.get("text-letter-spacing").evaluate(w,{})*g,k=U.allowsLetterSpacing(A)?M:0,D=s.get("text-anchor").evaluate(w,{}),z=s.get("text-justify").evaluate(w,{}),P="line"!==s.get("symbol-placement")?s.get("text-max-width").evaluate(w,{})*g:0;C.horizontal=U.shapeText(A,T,P,y,D,z,k,I,g,U.WritingMode.horizontal),U.allowsVerticalWritingMode(A)&&v&&_&&(C.vertical=U.shapeText(A,T,P,y,D,z,k,I,g,U.WritingMode.vertical))}var L=void 0;if(w.icon){var O=r[w.icon];O&&(L=U.shapeIcon(i[w.icon],s.get("icon-offset").evaluate(w,{}),s.get("icon-anchor").evaluate(w,{})),t.sdfIcons===undefined?t.sdfIcons=O.sdf:t.sdfIcons!==O.sdf&&U.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),O.pixelRatio!==t.pixelRatio?t.iconsNeedLinear=!0:0!==s.get("icon-rotate").constantOr(1)&&(t.iconsNeedLinear=!0))}(C.horizontal||L)&&R(t,w,C,L,S,u)}o&&t.generateCollisionDebugBuffers()}function R(n,r,i,o,a,s){var t=s.layoutTextSize.evaluate(r,{}),e=s.layoutIconSize.evaluate(r,{}),l=s.textMaxSize.evaluate(r,{});l===undefined&&(l=t);var u=n.layers[0].layout,c=u.get("text-offset").evaluate(r,{}),h=u.get("icon-offset").evaluate(r,{}),p=24,f=t/p,d=n.tilePixelRatio*f,m=n.tilePixelRatio*l/p,g=n.tilePixelRatio*e,y=n.tilePixelRatio*u.get("symbol-spacing"),v=u.get("text-padding")*n.tilePixelRatio,_=u.get("icon-padding")*n.tilePixelRatio,x=u.get("text-max-angle")/180*Math.PI,b="map"===u.get("text-rotation-alignment")&&"line"===u.get("symbol-placement"),w="map"===u.get("icon-rotation-alignment")&&"line"===u.get("symbol-placement"),E=y/2,T=function(t,e){e.x<0||e.x>=U.default$11||e.y<0||e.y>=U.default$11||n.symbolInstances.push(Z(n,e,t,i,o,n.layers[0],n.collisionBoxArray,r.index,r.sourceLayerIndex,n.index,d,v,b,c,g,_,w,h,r,a,s))};if("line"===u.get("symbol-placement"))for(var S=0,C=W(r.geometry,0,0,U.default$11,U.default$11);S<C.length;S+=1)for(var A=C[S],I=0,M=H(A,y,x,i.vertical||i.horizontal,o,p,m,n.overscaling,U.default$11);I<M.length;I+=1){var k=M[I],D=i.horizontal;D&&Y(n,D.text,E,k)||T(A,k)}else if("Polygon"===r.type)for(var z=0,P=U.default$27(r.geometry,0);z<P.length;z+=1){var L=P[z],O=G(L,16);T(L[0],new U.default$26(O.x,O.y,0))}else if("LineString"===r.type)for(var R=0,B=r.geometry;R<B.length;R+=1){var F=B[R];T(F,new U.default$26(F[0].x,F[0].y,0))}else if("Point"===r.type)for(var N=0,j=r.geometry;N<j.length;N+=1)for(var V=0,$=j[N];V<$.length;V+=1){var q=$[V];T([q],new U.default$26(q.x,q.y,0))}}function N(t,e,n,r,i,o,a,s,l,u,c,h){var p=m(e,n,r,i,o,c),f=t.textSizeData,d=null;return"source"===f.functionType?d=[10*r.layout.get("text-size").evaluate(o,{})]:"composite"===f.functionType&&(d=[10*h.compositeTextSizes[0].evaluate(o,{}),10*h.compositeTextSizes[1].evaluate(o,{})]),t.addSymbols(t.text,p,d,a,i,o,l,e,s.lineStartIndex,s.lineLength),u.push(t.text.placedSymbolArray.length-1),4*p.length}function Z(t,e,n,r,i,o,a,s,l,u,c,h,p,f,d,m,g,y,v,_,x){var b,w,E=t.addToLineVertexArray(e,n),T=0,S=0,C=0,A=r.horizontal?r.horizontal.text:"",I=[];if(r.horizontal){var M=o.layout.get("text-rotate").evaluate(v,{});b=new Jt(a,n,e,s,l,u,r.horizontal,c,h,p,t.overscaling,M),S+=N(t,e,r.horizontal,o,p,v,f,E,r.vertical?U.WritingMode.horizontal:U.WritingMode.horizontalOnly,I,_,x),r.vertical&&(C+=N(t,e,r.vertical,o,p,v,f,E,U.WritingMode.vertical,I,_,x))}var k=b?b.boxStartIndex:t.collisionBoxArray.length,D=b?b.boxEndIndex:t.collisionBoxArray.length;if(i){var z=F(e,i,o,g,r.horizontal,v),P=o.layout.get("icon-rotate").evaluate(v,{});w=new Jt(a,n,e,s,l,u,i,d,m,!1,t.overscaling,P),T=4*z.length;var L=t.iconSizeData,O=null;"source"===L.functionType?O=[10*o.layout.get("icon-size").evaluate(v,{})]:"composite"===L.functionType&&(O=[10*x.compositeIconSizes[0].evaluate(v,{}),10*x.compositeIconSizes[1].evaluate(v,{})]),t.addSymbols(t.icon,z,O,y,g,v,!1,e,E.lineStartIndex,E.lineLength)}var R=w?w.boxStartIndex:t.collisionBoxArray.length,B=w?w.boxEndIndex:t.collisionBoxArray.length;return t.glyphOffsetArray.length>=U.default$28.MAX_GLYPHS&&U.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),{key:A,textBoxStartIndex:k,textBoxEndIndex:D,iconBoxStartIndex:R,iconBoxEndIndex:B,textOffset:f,iconOffset:y,anchor:e,line:n,featureIndex:s,feature:v,numGlyphVertices:S,numVerticalGlyphVertices:C,numIconVertices:T,textOpacityState:new Kt,iconOpacityState:new Kt,isDuplicate:!1,placedTextSymbolIndices:I,crossTileID:0}}function Y(t,e,n,r){var i=t.compareText;if(e in i){for(var o=i[e],a=o.length-1;0<=a;a--)if(r.dist(o[a])<n)return!0}else i[e]=[];return i[e].push(r),!1}function A(t,e){for(var n=new U.default$24(e),r=0,i=t;r<i.length;r+=1){i[r].recalculate(n)}}function r(t,n){var e=U.getArrayBuffer(t.request,function(t,e){t?n(t):e&&n(null,{vectorTile:new U.default$32.VectorTile(new U.default$33(e.data)),rawData:e.data,cacheControl:e.cacheControl,expires:e.expires})});return function(){e.abort(),n()}}function u(t){var e,n=0;switch(t.type){case"Polygon":return c(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=c(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(e=0;e<t.geometries.length;e++)n+=u(t.geometries[e]);return n}}function c(t){var e=0;if(t&&0<t.length){e+=Math.abs(h(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(h(t[n]))}return e}function h(t){var e,n,r,i,o,a,s=0,l=t.length;if(2<l){for(a=0;a<l;a++)a===l-2?(r=l-2,i=l-1,o=0):a===l-1?(r=l-1,i=0,o=1):(i=(r=a)+1,o=a+2),e=t[r],n=t[i],s+=(p(t[o][0])-p(e[0]))*Math.sin(p(n[1]));s=s*he.RADIUS*he.RADIUS/2}return s}function p(t){return t*Math.PI/180}function n(t,e){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.map(f(n,e)),t;case"Feature":return t.geometry=n(t.geometry,e),t;case"Polygon":case"MultiPolygon":return d(t,e);default:return t}}function f(e,n){return function(t){return e(t,n)}}function d(t,e){return"Polygon"===t.type?t.coordinates=g(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(f(g,e))),t}function g(t,e){e=!!e,t[0]=y(t[0],e);for(var n=1;n<t.length;n++)t[n]=y(t[n],!e);return t}function y(t,e){return _(t)===e?t:t.reverse()}function _(t){return 0<=pe.ring(t)}function t(t,e){this.options=e||{},this.features=t,this.length=t.length}function e(t,e){this.id="number"==typeof t.id?t.id:undefined,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}function E(t){var e=new U.__moduleExports$1;return M(t,e),e.finish()}function I(t,e){e=e||{};var n={};for(var r in t)n[r]=new ge(t[r].features,e),n[r].name=r,n[r].version=e.version,n[r].extent=e.extent;return E({layers:n})}function M(t,e){for(var n in t.layers)e.writeMessage(3,k,t.layers[n])}function k(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)r.feature=t.feature(n),e.writeMessage(2,D,r);var i=r.keys;for(n=0;n<i.length;n++)e.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)e.writeMessage(4,B,o[n])}function D(t,e){var n=t.feature;n.id!==undefined&&e.writeVarintField(1,n.id),e.writeMessage(2,z,t),e.writeVarintField(3,n.type),e.writeMessage(4,O,n)}function z(t,e){var n=t.feature,r=t.keys,i=t.values,o=t.keycache,a=t.valuecache;for(var s in n.properties){var l=o[s];void 0===l&&(r.push(s),l=r.length-1,o[s]=l),e.writeVarint(l);var u=n.properties[s],c=typeof u;"string"!==c&&"boolean"!==c&&"number"!==c&&(u=JSON.stringify(u));var h=c+":"+u,p=a[h];void 0===p&&(i.push(u),p=i.length-1,a[h]=p),e.writeVarint(p)}}function P(t,e){return(e<<3)+(7&t)}function L(t){return t<<1^t>>31}function O(t,e){for(var n=t.loadGeometry(),r=t.type,i=0,o=0,a=n.length,s=0;s<a;s++){var l=n[s],u=1;1===r&&(u=l.length),e.writeVarint(P(1,u));for(var c=3===r?l.length-1:l.length,h=0;h<c;h++){1===h&&1!==r&&e.writeVarint(P(2,c-1));var p=l[h].x-i,f=l[h].y-o;e.writeVarint(L(p)),e.writeVarint(L(f)),i+=p,o+=f}3===r&&e.writeVarint(P(7,0))}}function B(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function j(t,e,n,r,i,o){if(!(i-r<=n)){var a=Math.floor((r+i)/2);V(t,e,a,r,i,o%2),j(t,e,n,r,a-1,o+1),j(t,e,n,a+1,i,o+1)}}function V(t,e,n,r,i,o){for(;r<i;){if(600<i-r){var a=i-r+1,s=n-r+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);V(t,e,n,Math.max(r,Math.floor(n-s*u/a+c)),Math.min(i,Math.floor(n+(a-s)*u/a+c)),o)}var h=e[2*n+o],p=r,f=i;for($(t,e,r,n),e[2*i+o]>h&&$(t,e,r,i);p<f;){for($(t,e,p,f),p++,f--;e[2*p+o]<h;)p++;for(;e[2*f+o]>h;)f--}e[2*r+o]===h?$(t,e,r,f):$(t,e,++f,i),f<=n&&(r=f+1),n<=f&&(i=f-1)}}function $(t,e,n,r){q(t,n,r),q(e,2*n,2*r),q(e,2*n+1,2*r+1)}function q(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function X(t,e,n,r,i,o,a){for(var s,l,u=[0,t.length-1,0],c=[];u.length;){var h=u.pop(),p=u.pop(),f=u.pop();if(p-f<=a)for(var d=f;d<=p;d++)s=e[2*d],l=e[2*d+1],n<=s&&s<=i&&r<=l&&l<=o&&c.push(t[d]);else{var m=Math.floor((f+p)/2);s=e[2*m],l=e[2*m+1],n<=s&&s<=i&&r<=l&&l<=o&&c.push(t[m]);var g=(h+1)%2;(0===h?n<=s:r<=l)&&(u.push(f),u.push(m-1),u.push(g)),(0===h?s<=i:l<=o)&&(u.push(m+1),u.push(p),u.push(g))}}return c}function K(t,e,n,r,i,o){for(var a=[0,t.length-1,0],s=[],l=i*i;a.length;){var u=a.pop(),c=a.pop(),h=a.pop();if(c-h<=o)for(var p=h;p<=c;p++)J(e[2*p],e[2*p+1],n,r)<=l&&s.push(t[p]);else{var f=Math.floor((h+c)/2),d=e[2*f],m=e[2*f+1];J(d,m,n,r)<=l&&s.push(t[f]);var g=(u+1)%2;(0===u?n-i<=d:r-i<=m)&&(a.push(h),a.push(f-1),a.push(g)),(0===u?d<=n+i:m<=r+i)&&(a.push(f+1),a.push(c),a.push(g))}}return s}function J(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}function Q(t,e,n,r,i){return new tt(t,e,n,r,i)}function tt(t,e,n,r,i){var o=this;e=e||et,n=n||nt,i=i||Array,this.nodeSize=r||64,this.points=t,this.ids=new i(t.length),this.coords=new i(2*t.length);for(var a=0;a<t.length;a++)o.ids[a]=a,o.coords[2*a]=e(t[a]),o.coords[2*a+1]=n(t[a]);be(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function et(t){return t[0]}function nt(t){return t[1]}function rt(t){return new it(t)}function it(t){this.options=ft(Object.create(this.options),t),this.trees=new Array(this.options.maxZoom+1)}function ot(t,e,n,r,i){return{x:t,y:e,zoom:Infinity,id:r,properties:i,parentId:-1,numPoints:n}}function at(t,e){var n=t.geometry.coordinates;return{x:ut(n[0]),y:ct(n[1]),zoom:Infinity,id:e,parentId:-1}}function st(t){return{type:"Feature",properties:lt(t),geometry:{type:"Point",coordinates:[ht(t.x),pt(t.y)]}}}function lt(t){var e=t.numPoints,n=1e4<=e?Math.round(e/1e3)+"k":1e3<=e?Math.round(e/100)/10+"k":e;return ft(ft({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function ut(t){return t/360+.5}function ct(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:1<n?1:n}function ht(t){return 360*(t-.5)}function pt(t){var e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function ft(t,e){for(var n in e)t[n]=e[n];return t}function dt(t){return t.x}function mt(t){return t.y}function gt(t,e,n,r){for(var i,o=r,a=t[e],s=t[e+1],l=t[n],u=t[n+1],c=e+3;c<n;c+=3){var h=yt(t[c],t[c+1],a,s,l,u);o<h&&(i=c,o=h)}r<o&&(3<i-e&&gt(t,e,i,r),t[i+2]=o,3<n-i&&gt(t,i,n,r))}function yt(t,e,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var l=((t-n)*a+(e-r)*s)/(a*a+s*s);1<l?(n=i,r=o):0<l&&(n+=a*l,r+=s*l)}return(a=t-n)*a+(s=e-r)*s}function vt(t,e,n,r){var i={id:t||null,type:e,geometry:n,tags:r,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity};return _t(i),i}function _t(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)xt(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<e.length;r++)xt(t,e[r]);else if("MultiPolygon"===n)for(r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)xt(t,e[r][i])}function xt(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function bt(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)wt(n,t.features[r],e);else"Feature"===t.type?wt(n,t,e):wt(n,{geometry:t},e);return n}function wt(t,e,n){if(e.geometry){var r=e.geometry.coordinates,i=e.geometry.type,o=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),a=[];if("Point"===i)Et(r,a);else if("MultiPoint"===i)for(var s=0;s<r.length;s++)Et(r[s],a);else if("LineString"===i)Tt(r,a,o,!1);else if("MultiLineString"===i){if(n.lineMetrics){for(s=0;s<r.length;s++)a=[],Tt(r[s],a,o,!1),t.push(vt(e.id,"LineString",a,e.properties));return}St(r,a,o,!1)}else if("Polygon"===i)St(r,a,o,!0);else{if("MultiPolygon"!==i){if("GeometryCollection"===i){for(s=0;s<e.geometry.geometries.length;s++)wt(t,{id:e.id,geometry:e.geometry.geometries[s],properties:e.properties},n);return}throw new Error("Input data is not a valid GeoJSON object.")}for(s=0;s<r.length;s++){var l=[];St(r[s],l,o,!0),a.push(l)}}t.push(vt(e.id,i,a,e.properties))}}function Et(t,e){e.push(Ct(t[0])),e.push(At(t[1])),e.push(0)}function Tt(t,e,n,r){for(var i,o,a=0,s=0;s<t.length;s++){var l=Ct(t[s][0]),u=At(t[s][1]);e.push(l),e.push(u),e.push(0),0<s&&(a+=r?(i*u-l*o)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(u-o,2))),i=l,o=u}var c=e.length-3;e[2]=1,gt(e,0,c,n),e[c+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function St(t,e,n,r){for(var i=0;i<t.length;i++){var o=[];Tt(t[i],o,n,r),e.push(o)}}function Ct(t){return t/360+.5}function At(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:1<n?1:n}function It(t,e,n,r,i,o,a,s){if(r/=e,(n/=e)<=o&&a<r)return t;if(a<n||r<=o)return null;for(var l=[],u=0;u<t.length;u++){var c=t[u],h=c.geometry,p=c.type,f=0===i?c.minX:c.minY,d=0===i?c.maxX:c.maxY;if(n<=f&&d<r)l.push(c);else if(!(d<n||r<=f)){var m=[];if("Point"===p||"MultiPoint"===p)Mt(h,m,n,r,i);else if("LineString"===p)kt(h,m,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===p)zt(h,m,n,r,i,!1);else if("Polygon"===p)zt(h,m,n,r,i,!0);else if("MultiPolygon"===p)for(var g=0;g<h.length;g++){var y=[];zt(h[g],y,n,r,i,!0),y.length&&m.push(y)}if(m.length){if(s.lineMetrics&&"LineString"===p){for(g=0;g<m.length;g++)l.push(vt(c.id,p,m[g],c.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===m.length?(p="LineString",m=m[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===m.length?"Point":"MultiPoint"),l.push(vt(c.id,p,m,c.tags))}}}return l.length?l:null}function Mt(t,e,n,r,i){for(var o=0;o<t.length;o+=3){var a=t[o+i];n<=a&&a<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function kt(t,e,n,r,i,o,a){for(var s,l,u=Dt(t),c=0===i?Lt:Ot,h=t.start,p=0;p<t.length-3;p+=3){var f=t[p],d=t[p+1],m=t[p+2],g=t[p+3],y=t[p+4],v=0===i?f:d,_=0===i?g:y,x=!1;a&&(s=Math.sqrt(Math.pow(f-g,2)+Math.pow(d-y,2))),v<n?n<=_&&(l=c(u,f,d,g,y,n),a&&(u.start=h+s*l)):r<=v?_<r&&(l=c(u,f,d,g,y,r),a&&(u.start=h+s*l)):Pt(u,f,d,m),_<n&&n<=v&&(l=c(u,f,d,g,y,n),x=!0),r<_&&v<=r&&(l=c(u,f,d,g,y,r),x=!0),!o&&x&&(a&&(u.end=h+s*l),e.push(u),u=Dt(t)),a&&(h+=s)}var b=t.length-3;f=t[b],d=t[b+1],m=t[b+2],n<=(v=0===i?f:d)&&v<=r&&Pt(u,f,d,m),b=u.length-3,o&&3<=b&&(u[b]!==u[0]||u[b+1]!==u[1])&&Pt(u,u[0],u[1],u[2]),u.length&&e.push(u)}function Dt(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function zt(t,e,n,r,i,o){for(var a=0;a<t.length;a++)kt(t[a],e,n,r,i,o,!1)}function Pt(t,e,n,r){t.push(e),t.push(n),t.push(r)}function Lt(t,e,n,r,i,o){var a=(o-e)/(r-e);return t.push(o),t.push(n+(i-n)*a),t.push(1),a}function Ot(t,e,n,r,i,o){var a=(o-n)/(i-n);return t.push(e+(r-e)*a),t.push(o),t.push(1),a}function Rt(t,e){var n=e.buffer/e.extent,r=t,i=It(t,1,-1-n,n,0,-1,2,e),o=It(t,1,1-n,2+n,0,-1,2,e);return(i||o)&&(r=It(t,1,-n,1+n,0,-1,2,e)||[],i&&(r=Bt(i,1).concat(r)),o&&(r=r.concat(Bt(o,-1)))),r}function Bt(t,e){for(var n=[],r=0;r<t.length;r++){var i,o=t[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=Ft(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(Ft(o.geometry[s],e))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var l=[],u=0;u<o.geometry[s].length;u++)l.push(Ft(o.geometry[s][u],e));i.push(l)}n.push(vt(o.id,a,i,o.tags))}return n}function Ft(t,e){var n=[];n.size=t.size,t.start!==undefined&&(n.start=t.start,n.end=t.end);for(var r=0;r<t.length;r+=3)n.push(t[r]+e,t[r+1],t[r+2]);return n}function Nt(t,e){if(t.transformed)return t;var n,r,i,o=1<<t.z,a=t.x,s=t.y;for(n=0;n<t.features.length;n++){var l=t.features[n],u=l.geometry,c=l.type;if(l.geometry=[],1===c)for(r=0;r<u.length;r+=2
)l.geometry.push(jt(u[r],u[r+1],e,o,a,s));else for(r=0;r<u.length;r++){var h=[];for(i=0;i<u[r].length;i+=2)h.push(jt(u[r][i],u[r][i+1],e,o,a,s));l.geometry.push(h)}}return t.transformed=!0,t}function jt(t,e,n,r,i,o){return[Math.round(n*(t*r-i)),Math.round(n*(e*r-o))]}function Vt(t,e,n,r,i){for(var o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,$t(a,t[s],o,i);var l=t[s].minX,u=t[s].minY,c=t[s].maxX,h=t[s].maxY;l<a.minX&&(a.minX=l),u<a.minY&&(a.minY=u),c>a.maxX&&(a.maxX=c),h>a.maxY&&(a.maxY=h)}return a}function $t(t,e,n,r){var i=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)qt(a,i,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)qt(a,i[s],t,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<i.length;l++){var u=i[l];for(s=0;s<u.length;s++)qt(a,u[s],t,n,!0,0===s)}if(a.length){var c=e.tags||null;if("LineString"===o&&r.lineMetrics){for(var h in c={},e.tags)c[h]=e.tags[h];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var p={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==e.id&&(p.id=e.id),t.features.push(p)}}function qt(t,e,n,r,i,o){var a=r*r;if(0<r&&e.size<(i?a:r))n.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===r||e[l+2]>a)&&(n.numSimplified++,s.push(e[l]),s.push(e[l+1])),n.numPoints++;i&&Ut(s,o),t.push(s)}}function Ut(t,e){for(var n=0,r=0,i=t.length,o=i-2;r<i;o=r,r+=2)n+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(0<n===e)for(r=0,i=t.length;r<i/2;r+=2){var a=t[r],s=t[r+1];t[r]=t[i-2-r],t[r+1]=t[i-1-r],t[i-2-r]=a,t[i-1-r]=s}}function Ht(t,e){return new Wt(t,e)}function Wt(t,e){var n=(e=this.options=Zt(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||24<e.maxZoom)throw new Error("maxZoom should be in the 0-24 range");var r=bt(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=Rt(r,e)).length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Gt(t,e,n){return 32*((1<<t)*n+e)+t}function Zt(t,e){for(var n in e)t[n]=e[n];return t}function Yt(t,e){var n=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return e(null,null);var i=new ce(r.features),o=ye(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:i,rawData:o.buffer})}var Xt,Kt,Jt;(Xt=function(t){t&&this.replace(t)}).prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},Xt.prototype.update=function(t,e){for(var n=this,r=0,i=t;r<i.length;r+=1){var o=i[r];n._layerConfigs[o.id]=o;var a=n._layers[o.id]=U.default$21(o);a._featureFilter=U.default$25(a.filter)}for(var s=0,l=e;s<l.length;s+=1){var u=l[s];delete n._layerConfigs[u],delete n._layers[u]}this.familiesBySource={};for(var c=0,h=v(U.values(this._layerConfigs));c<h.length;c+=1){var p=h[c].map(function(t){return n._layers[t.id]}),f=p[0];if("none"!==f.visibility){var d=f.source||"",m=n.familiesBySource[d];m||(m=n.familiesBySource[d]={});var g=f.sourceLayer||"_geojsonTileLayer",y=m[g];y||(y=m[g]=[]),y.push(p)}}},(Kt=function(){this.opacity=0,this.targetOpacity=0,this.time=0}).prototype.clone=function(){var t=new Kt;return t.opacity=this.opacity,t.targetOpacity=this.targetOpacity,t.time=this.time,t},U.register("OpacityState",Kt),(Jt=function(t,e,n,r,i,o,a,s,l,u,c,h){var p=a.top*s-l,f=a.bottom*s+l,d=a.left*s-l,m=a.right*s+l;if(this.boxStartIndex=t.length,u){var g=f-p,y=m-d;0<g&&(g=Math.max(10*s,g),this._addLineCollisionCircles(t,e,n,n.segment,y,g,r,i,o,c))}else{if(h){var v=new U["default"](d,p),_=new U["default"](m,p),x=new U["default"](d,f),b=new U["default"](m,f),w=h*Math.PI/180;v._rotate(w),_._rotate(w),x._rotate(w),b._rotate(w),d=Math.min(v.x,_.x,x.x,b.x),m=Math.max(v.x,_.x,x.x,b.x),p=Math.min(v.y,_.y,x.y,b.y),f=Math.max(v.y,_.y,x.y,b.y)}t.emplaceBack(n.x,n.y,d,p,m,f,r,i,o,0,0)}this.boxEndIndex=t.length}).prototype._addLineCollisionCircles=function(t,e,n,r,i,o,a,s,l,u){var c=o/2,h=Math.floor(i/c),p=1+.4*Math.log(u)/Math.LN2,f=Math.floor(h*p/2),d=-o/2,m=n,g=r+1,y=d,v=-i/2,_=v-i/4;do{if(--g<0){if(v<y)return;g=0;break}y-=e[g].dist(m),m=e[g]}while(_<y);for(var x=e[g].dist(e[g+1]),b=-f;b<h+f;b++){var w=b*c,E=v+w;if(w<0&&(E+=w),i<w&&(E+=w-i),!(E<y)){for(;y+x<E;){if(y+=x,++g+1>=e.length)return;x=e[g].dist(e[g+1])}var T=E-y,S=e[g],C=e[g+1].sub(S)._unit()._mult(T)._add(S)._round(),A=Math.abs(E-d)<c?0:.8*(E-d);t.emplaceBack(C.x,C.y,-o/2,-o/2,o/2,o/2,a,s,l,o/2,A)}}};var Qt=i,te=i;i.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0===this.length)return undefined;var t=this.data[0];return this.length--,0<this.length&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];0<t;){var i=t-1>>1,o=e[i];if(0<=n(r,o))break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this,n=this.data,r=this.compare,i=this.length>>1,o=n[t];t<i;){var a=1+(t<<1),s=a+1,l=n[a];if(s<e.length&&r(n[s],l)<0&&(l=n[a=s]),0<=r(l,o))break;n[t]=l,t=a}n[t]=o}},Qt["default"]=te;var ee,ne=1,re=function(t){var e=new U.AlphaImage({width:0,height:0}),n={},r=new U.default$4(0,0,{autoResize:!0});for(var i in t){var o=t[i],a=n[i]={};for(var s in o){var l=o[+s];if(l&&0!==l.bitmap.width&&0!==l.bitmap.height){var u=r.packOne(l.bitmap.width+2*ne,l.bitmap.height+2*ne);e.resize({width:r.w,height:r.h}),U.AlphaImage.copy(l.bitmap,e,{x:0,y:0},{x:u.x+ne,y:u.y+ne},l.bitmap),a[s]={rect:u,metrics:l.metrics}}}}r.shrink(),e.resize({width:r.w,height:r.h}),this.image=e,this.positions=n};U.register("GlyphAtlas",re),(ee=function(t){this.tileID=new U.OverscaledTileID(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming}).prototype.parse=function(t,e,n,o){function r(){var t=this;if(l)return o(l);if(u&&c){var e=new re(u),n=new U.default$31(c);for(var r in h){var i=h[r];i instanceof U.default$28&&(A(i.layers,t.zoom),C(i,u,e.positions,c,n.positions,t.showCollisionBoxes))}this.status="done",o(null,{buckets:U.values(h).filter(function(t){return!t.isEmpty()}),featureIndex:s,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,iconAtlasImage:n.image})}}var i=this;this.status="parsing",this.data=t,this.collisionBoxArray=new U.CollisionBoxArray;var a=new U.default$30(Object.keys(t.layers).sort()),s=new U.default$29(this.tileID);s.bucketLayerIDs=[];var l,u,c,h={},p={featureIndex:s,iconDependencies:{},glyphDependencies:{}},f=e.familiesBySource[this.source];for(var d in f){var m=t.layers[d];if(m){1===m.version&&U.warnOnce('Vector tile source "'+i.source+'" layer "'+d+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var g=a.encode(d),y=[],v=0;v<m.length;v++){var _=m.feature(v);y.push({feature:_,index:v,sourceLayerIndex:g})}for(var x=0,b=f[d];x<b.length;x+=1){var w=b[x],E=w[0];if(U.default$2(E.source===i.source),!(E.minzoom&&i.zoom<Math.floor(E.minzoom)))if(!(E.maxzoom&&i.zoom>=E.maxzoom))if("none"!==E.visibility)A(w,i.zoom),(h[E.id]=E.createBucket({index:s.bucketLayerIDs.length,layers:w,zoom:i.zoom,pixelRatio:i.pixelRatio,overscaling:i.overscaling,collisionBoxArray:i.collisionBoxArray,sourceLayerIndex:g,sourceID:i.source})).populate(y,p),s.bucketLayerIDs.push(w.map(function(t){return t.id}))}}}var T=U.mapObject(p.glyphDependencies,function(t){return Object.keys(t).map(Number)});Object.keys(T).length?n.send("getGlyphs",{uid:this.uid,stacks:T},function(t,e){l||(l=t,u=e,r.call(i))}):u={};var S=Object.keys(p.iconDependencies);S.length?n.send("getImages",{icons:S},function(t,e){l||(l=t,c=e,r.call(i))}):c={},r.call(this)};var ie,oe,ae,se="undefined"!=typeof performance,le={getEntriesByName:function(t){return!!(se&&performance&&performance.getEntriesByName)&&performance.getEntriesByName(t)},mark:function(t){return!!(se&&performance&&performance.mark)&&performance.mark(t)},measure:function(t,e,n){return!!(se&&performance&&performance.measure)&&performance.measure(t,e,n)},clearMarks:function(t){return!!(se&&performance&&performance.clearMarks)&&performance.clearMarks(t)},clearMeasures:function(t){return!!(se&&performance&&performance.clearMeasures)&&performance.clearMeasures(t)}};(ie=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},le.mark(this._marks.start)}).prototype.finish=function(){le.mark(this._marks.end);var t=le.getEntriesByName(this._marks.measure);return 0===t.length&&(le.measure(this._marks.measure,this._marks.start,this._marks.end),t=le.getEntriesByName(this._marks.measure),le.clearMarks(this._marks.start),le.clearMarks(this._marks.end),le.clearMeasures(this._marks.measure)),t},le.Performance=ie,(oe=function(t,e,n){this.actor=t,this.layerIndex=e,this.loadVectorData=n||r,this.loading={},this.loaded={}}).prototype.loadTile=function(t,a){var s=this,l=t.uid;this.loading||(this.loading={});var u=!!(t&&t.request&&t.request.collectResourceTiming)&&new le.Performance(t.request),c=this.loading[l]=new ee(t);c.abort=this.loadVectorData(t,function(t,e){if(delete s.loading[l],t||!e)return a(t);var n=e.rawData,r={};e.expires&&(r.expires=e.expires),e.cacheControl&&(r.cacheControl=e.cacheControl);var i={};if(u){var o=u.finish();o&&(i.resourceTiming=JSON.parse(JSON.stringify(o)))}c.vectorTile=e.vectorTile,c.parse(e.vectorTile,s.layerIndex,s.actor,function(t,e){if(t||!e)return a(t);a(null,U.extend({rawTileData:n.slice(0)},e,r,i))}),s.loaded=s.loaded||{},s.loaded[l]=c})},oe.prototype.reloadTile=function(t,r){var e=this.loaded,n=t.uid,i=this;if(e&&e[n]){var o=e[n];o.showCollisionBoxes=t.showCollisionBoxes;var a=function(t,e){var n=o.reloadCallback;n&&(delete o.reloadCallback,o.parse(o.vectorTile,i.layerIndex,i.actor,n)),r(t,e)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&o.parse(o.vectorTile,this.layerIndex,this.actor,a)}},oe.prototype.abortTile=function(t,e){var n=this.loading,r=t.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),e()},oe.prototype.removeTile=function(t,e){var n=this.loaded,r=t.uid;n&&n[r]&&delete n[r],e()},(ae=function(){this.loading={},this.loaded={}}).prototype.loadTile=function(t,e){var n=t.uid,r=t.encoding,i=new U.default$34(n);(this.loading[n]=i).loadFromImage(t.rawImageData,r),delete this.loading[n],this.loaded=this.loaded||{},e(null,this.loaded[n]=i)},ae.prototype.removeTile=function(t){var e=this.loaded,n=t.uid;e&&e[n]&&delete e[n]};var ue,ce,he={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142},pe={geometry:u,ring:h},fe=n,de=U.default$32.VectorTileFeature.prototype.toGeoJSON;(ue=function(t){this._feature=t,this.extent=U.default$11,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))}).prototype.loadGeometry=function(){var t=this;if(1===this._feature.type){for(var e=[],n=0,r=t._feature.geometry;n<r.length;n+=1){var i=r[n];e.push([new U["default"](i[0],i[1])])}return e}for(var o=[],a=0,s=t._feature.geometry;a<s.length;a+=1){for(var l=[],u=0,c=s[a];u<c.length;u+=1){var h=c[u];l.push(new U["default"](h[0],h[1]))}o.push(l)}return o},ue.prototype.toGeoJSON=function(t,e,n){return de.call(this,t,e,n)},(ce=function(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=U.default$11,this.length=t.length,this._features=t}).prototype.feature=function(t){return new ue(this._features[t])};var me=U.__moduleExports.VectorTileFeature,ge=t;t.prototype.feature=function(t){return new e(this.features[t],this.options.extent)},e.prototype.loadGeometry=function(){var t=this,e=this.rawGeometry;this.geometry=[];for(var n=0;n<e.length;n++){for(var r=e[n],i=[],o=0;o<r.length;o++)i.push(new U.default$35(r[o][0],r[o][1]));t.geometry.push(i)}return this.geometry},e.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=Infinity,n=-Infinity,r=Infinity,i=-Infinity,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var l=a[s];e=Math.min(e,l.x),n=Math.max(n,l.x),r=Math.min(r,l.y),i=Math.max(i,l.y)}return[e,r,n,i]},e.prototype.toGeoJSON=me.prototype.toGeoJSON;var ye=E,ve=E,_e=I,xe=ge;ye.fromVectorTileJs=ve,ye.fromGeojsonVt=_e,ye.GeoJSONWrapper=xe;var be=j,we=X,Ee=K,Te=Q;tt.prototype={range:function(t,e,n,r){return we(this.ids,this.coords,t,e,n,r,this.nodeSize)},within:function(t,e,n){return Ee(this.ids,this.coords,t,e,n,this.nodeSize)}};var Se=rt;it.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(t){return t}},load:function(t){var e=this,n=this.options.log;n&&console.time("total time");var r="prepare "+t.length+" points";n&&console.time(r);var i=(this.points=t).map(at);n&&console.timeEnd(r);for(var o=this.options.maxZoom;o>=this.options.minZoom;o--){var a=+Date.now();e.trees[o+1]=Te(i,dt,mt,e.options.nodeSize,Float32Array),i=e._cluster(i,o),n&&console.log("z%d: %d clusters in %dms",o,i.length,+Date.now()-a)}return this.trees[this.options.minZoom]=Te(i,dt,mt,this.options.nodeSize,Float32Array),n&&console.timeEnd("total time"),this},getClusters:function(t,e){for(var n=this,r=this.trees[this._limitZoom(e)],i=r.range(ut(t[0]),ct(t[3]),ut(t[2]),ct(t[1])),o=[],a=0;a<i.length;a++){var s=r.points[i[a]];o.push(s.numPoints?st(s):n.points[s.id])}return o},getChildren:function(t,e){for(var n=this,r=this.trees[e+1].points[t],i=this.options.radius/(this.options.extent*Math.pow(2,e)),o=this.trees[e+1].within(r.x,r.y,i),a=[],s=0;s<o.length;s++){var l=n.trees[e+1].points[o[s]];l.parentId===t&&a.push(l.numPoints?st(l):n.points[l.id])}return a},getLeaves:function(t,e,n,r){n=n||10,r=r||0;var i=[];return this._appendLeaves(i,t,e,n,r,0),i},getTile:function(t,e,n){var r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),o=this.options.extent,a=this.options.radius/o,s=(n-a)/i,l=(n+1+a)/i,u={features:[]};return this._addTileFeatures(r.range((e-a)/i,s,(e+1+a)/i,l),r.points,e,n,i,u),0===e&&this._addTileFeatures(r.range(1-a/i,s,1,l),r.points,i,n,i,u),e===i-1&&this._addTileFeatures(r.range(0,s,a/i,l),r.points,-1,n,i,u),u.features.length?u:null},getClusterExpansionZoom:function(t,e){for(var n=this;e<this.options.maxZoom;){var r=n.getChildren(t,e);if(e++,1!==r.length)break;t=r[0].properties.cluster_id}return e},_appendLeaves:function(t,e,n,r,i,o){for(var a=this,s=this.getChildren(e,n),l=0;l<s.length;l++){var u=s[l].properties;if(u.cluster?o+u.point_count<=i?o+=u.point_count:o=a._appendLeaves(t,u.cluster_id,n+1,r,i,o):o<i?o++:t.push(s[l]),t.length===r)break}return o},_addTileFeatures:function(t,e,n,r,i,o){for(var a=this,s=0;s<t.length;s++){var l=e[t[s]];o.features.push({type:1,geometry:[[Math.round(a.options.extent*(l.x*i-n)),Math.round(a.options.extent*(l.y*i-r))]],tags:l.numPoints?lt(l):a.points[l.id].properties})}},_limitZoom:function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},_cluster:function(t,e){for(var n=this,r=[],i=this.options.radius/(this.options.extent*Math.pow(2,e)),o=0;o<t.length;o++){var a=t[o];if(!(a.zoom<=e)){a.zoom=e;var s=n.trees[e+1],l=s.within(a.x,a.y,i),u=a.numPoints||1,c=a.x*u,h=a.y*u,p=null;n.options.reduce&&(p=n.options.initial(),n._accumulate(p,a));for(var f=0;f<l.length;f++){var d=s.points[l[f]];if(e<d.zoom){var m=d.numPoints||1;d.zoom=e,c+=d.x*m,h+=d.y*m,u+=m,d.parentId=o,n.options.reduce&&n._accumulate(p,d)}}1===u?r.push(a):(a.parentId=o,r.push(ot(c/u,h/u,u,o,p)))}}return r},_accumulate:function(t,e){var n=e.numPoints?e.properties:this.options.map(this.points[e.id].properties);this.options.reduce(t,n)}},Wt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,debug:0},Wt.prototype.splitTile=function(t,e,n,r,i,o,a){for(var s=this,l=[t,e,n,r],u=this.options,c=u.debug;l.length;){r=l.pop(),n=l.pop(),e=l.pop(),t=l.pop();var h=1<<e,p=Gt(e,n,r),f=s.tiles[p];if(!f&&(1<c&&console.time("creation"),f=s.tiles[p]=Vt(t,e,n,r,u),s.tileCoords.push({z:e,x:n,y:r}),c)){1<c&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,f.numFeatures,f.numPoints,f.numSimplified),console.timeEnd("creation"));var d="z"+e;s.stats[d]=(s.stats[d]||0)+1,s.total++}if(f.source=t,i){if(e===u.maxZoom||e===i)continue;var m=1<<i-e;if(n!==Math.floor(o/m)||r!==Math.floor(a/m))continue}else if(e===u.indexMaxZoom||f.numPoints<=u.indexMaxPoints)continue;if(f.source=null,0!==t.length){1<c&&console.time("clipping");var g,y,v,_,x,b,w=.5*u.buffer/u.extent,E=.5-w,T=.5+w,S=1+w;g=y=v=_=null,x=It(t,h,n-w,n+T,0,f.minX,f.maxX,u),b=It(t,h,n+E,n+S,0,f.minX,f.maxX,u),t=null,x&&(g=It(x,h,r-w,r+T,1,f.minY,f.maxY,u),y=It(x,h,r+E,r+S,1,f.minY,f.maxY,u),x=null),b&&(v=It(b,h,r-w,r+T,1,f.minY,f.maxY,u),_=It(b,h,r+E,r+S,1,f.minY,f.maxY,u),b=null),1<c&&console.timeEnd("clipping"),l.push(g||[],e+1,2*n,2*r),l.push(y||[],e+1,2*n,2*r+1),l.push(v||[],e+1,2*n+1,2*r),l.push(_||[],e+1,2*n+1,2*r+1)}}},Wt.prototype.getTile=function(t,e,n){var r=this,i=this.options,o=i.extent,a=i.debug;if(t<0||24<t)return null;var s=1<<t,l=Gt(t,e=(e%s+s)%s,n);if(this.tiles[l])return Nt(this.tiles[l],o);1<a&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var u,c=t,h=e,p=n;!u&&0<c;)c--,h=Math.floor(h/2),p=Math.floor(p/2),u=r.tiles[Gt(c,h,p)];return u&&u.source?(1<a&&console.log("found parent tile z%d-%d-%d",c,h,p),1<a&&console.time("drilling down"),this.splitTile(u.source,c,h,p,t,e,n),1<a&&console.timeEnd("drilling down"),this.tiles[l]?Nt(this.tiles[l],o):null):null};var Ce=function(i){function t(t,e,n){i.call(this,t,e,Yt),n&&(this.loadGeoJSON=n)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),(t.prototype.constructor=t).prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},t.prototype._loadData=function(){var i=this;if(this._pendingCallback&&this._pendingLoadDataParams){var o=this._pendingCallback,a=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var s=!!(a&&a.request&&a.request.collectResourceTiming)&&new le.Performance(a.request);this.loadGeoJSON(a,function(t,e){if(t||!e)return o(t);if("object"!=typeof e)return o(new Error("Input data is not a valid GeoJSON object."));fe(e,!0);try{i._geoJSONIndex=a.cluster?Se(a.superclusterOptions).load(e.features):Ht(e,a.geojsonVtOptions)}catch(t){return o(t)}i.loaded={};var n={};if(s){var r=s.finish();r&&(n.resourceTiming={},n.resourceTiming[a.source]=JSON.parse(JSON.stringify(r)))}o(null,n)})}else U.default$2(!1)},t.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},t.prototype.reloadTile=function(t,e){var n=this.loaded,r=t.uid;return n&&n[r]?i.prototype.reloadTile.call(this,t,e):this.loadTile(t,e)},t.prototype.loadGeoJSON=function(t,e){if(t.request)U.getJSON(t.request,e);else{if("string"!=typeof t.data)return e(new Error("Input data is not a valid GeoJSON object."));try{return e(null,JSON.parse(t.data))}catch(n){return e(new Error("Input data is not a valid GeoJSON object."))}}},t.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},t}(oe),Ae=function(t){var n=this;this.self=t,this.actor=new U.default$10(t,this),this.layerIndexes={},this.workerSourceTypes={vector:oe,geojson:Ce},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(n.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');n.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(t){if(U.plugin.isLoaded())throw new Error("RTL text plugin already registered.");U.plugin.applyArabicShaping=t.applyArabicShaping,U.plugin.processBidirectionalText=t.processBidirectionalText}};return Ae.prototype.setLayers=function(t,e,n){this.getLayerIndex(t).replace(e),n()},Ae.prototype.updateLayers=function(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()},Ae.prototype.loadTile=function(t,e,n){U.default$2(e.type),this.getWorkerSource(t,e.type,e.source).loadTile(e,n)},Ae.prototype.loadDEMTile=function(t,e,n){this.getDEMWorkerSource(t,e.source).loadTile(e,n)},Ae.prototype.reloadTile=function(t,e,n){U.default$2(e.type),this.getWorkerSource(t,e.type,e.source).reloadTile(e,n)},Ae.prototype.abortTile=function(t,e,n){U.default$2(e.type),this.getWorkerSource(t,e.type,e.source).abortTile(e,n)},Ae.prototype.removeTile=function(t,e,n){U.default$2(e.type),this.getWorkerSource(t,e.type,e.source).removeTile(e,n)},Ae.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},Ae.prototype.removeSource=function(t,e,n){if(U.default$2(e.type),U.default$2(e.source),this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var r=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],r.removeSource!==undefined?r.removeSource(e,n):n()}},Ae.prototype.loadWorkerSource=function(t,e,n){try{this.self.importScripts(e.url),n()}catch(r){n(r.toString())}},Ae.prototype.loadRTLTextPlugin=function(t,e,n){try{U.plugin.isLoaded()||(this.self.importScripts(e),n(U.plugin.isLoaded()?null:new Error("RTL Text Plugin failed to import scripts from "+e)))}catch(r){n(r.toString())}},Ae.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new Xt),e},Ae.prototype.getWorkerSource=function(r,t,e){var i=this;if(this.workerSources[r]||(this.workerSources[r]={}),this.workerSources[r][t]||(this.workerSources[r][t]={}),!this.workerSources[r][t][e]){var n={send:function(t,e,n){i.actor.send(t,e,n,r)}};this.workerSources[r][t][e]=new this.workerSourceTypes[t](n,this.getLayerIndex(r))}return this.workerSources[r][t][e]},Ae.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new ae),this.demWorkerSources[t][e]},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&new Ae(self),Ae}),t(["./chunk1.js"],function(H){function t(t){if(!ne)return null;for(var e=0;e<t.length;e++)if(t[e]in ne)return t[e];return t[0]}function o(t,e){var n=l(ue.API_URL);if(t.protocol=n.protocol,t.authority=n.authority,"/"!==n.path&&(t.path=""+n.path+t.path),!ue.REQUIRE_ACCESS_TOKEN)return u(t);if(!(e=e||ue.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+ce);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+ce);return t.params.push("access_token="+e),u(t)}function a(t){return 0===t.indexOf("mapbox:")}function s(t){for(var e=0;e<t.length;e++)0===t[e].indexOf("access_token=tk.")&&(t[e]="access_token="+(ue.ACCESS_TOKEN||""))}function l(t){var e=t.match(ye);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function u(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function c(t,e,h){function n(){if(d)h(d);else if(p&&f){var t=H.default$3.getImageData(f),e={};for(var n in p){var r=p[n],i=r.width,o=r.height,a=r.x,s=r.y,l=r.sdf,u=r.pixelRatio,c=new H.RGBAImage({width:i,height:o});H.RGBAImage.copy(t,c,{x:a,y:s},{x:0,y:0},{width:i,height:o}),e[n]={data:c,pixelRatio:u,sdf:l}}h(null,e)}}var p,f,d,r=1<H.default$3.devicePixelRatio?"@2x":"";H.getJSON(e(de(t,r,".json"),H.ResourceType.SpriteJSON),function(t,e){d||(d=t,p=e,n())}),H.getImage(e(de(t,r,".png"),H.ResourceType.SpriteImage),function(t,e){d||(d=t,f=e,n())})}function e(t,e,n,r,a){var i=256*e,o=i+255,s=r(pe(n).replace("{fontstack}",t).replace("{range}",i+"-"+o),H.ResourceType.Glyphs);H.getArrayBuffer(s,function(t,e){if(t)a(t);else if(e){for(var n={},r=0,i=H.default$6(e.data);r<i.length;r+=1){var o=i[r];n[o.id]=o}a(null,n)}})}function n(t,e,n,r,i,o){this.fontSize=t||24,this.buffer=e===undefined?3:e,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(0<=navigator.userAgent.indexOf("Gecko/")?1.2:1))}function h(t,e,n,r,i,o,a){for(var s=0;s<e;s++){for(var l=0;l<n;l++)r[l]=t[l*e+s];for(p(r,i,o,a,n),l=0;l<n;l++)t[l*e+s]=i[l]}for(l=0;l<n;l++){for(s=0;s<e;s++)r[s]=t[l*e+s];for(p(r,i,o,a,e),s=0;s<e;s++)t[l*e+s]=Math.sqrt(i[s])}}function p(t,e,n,r,i){r[n[0]=0]=-we,r[1]=+we;for(var o=1,a=0;o<i;o++){for(var s=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);s<=r[a];)a--,s=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);n[++a]=o,r[a]=s,r[a+1]=+we}for(a=o=0;o<i;o++){for(;r[a+1]<o;)a++;e[o]=(o-n[a])*(o-n[a])+t[n[a]]}}function r(t,e,r){var n=function(t,e){if(t)return r(t);if(e){var n=H.pick(e,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);e.vector_layers&&(n.vectorLayers=e.vector_layers,n.vectorLayerIds=n.vectorLayers.map(function(t){return t.id})),r(null,n)}};t.url?H.getJSON(e(fe(t.url),H.ResourceType.Source),n):H.default$3.frame(function(){return n(null,t)})}function f(n,t,e,r,i){var o=i.maxPitchScaleFactor(),a=n.tilesIn(e,o);a.sort(y);for(var s=[],l=0,u=a;l<u.length;l+=1){var c=u[l];s.push({wrappedTileID:c.tileID.wrapped().key,queryResults:c.tile.queryRenderedFeatures(t,n._state,c.queryGeometry,c.scale,r,i,o,n.transform.calculatePosMatrix(c.tileID.toUnwrapped()))})}var h=g(s);for(var p in h)h[p].forEach(function(t){var e=n.getFeatureState(t.layer["source-layer"],t.id);t.source=t.layer.source,t.layer["source-layer"]&&(t.sourceLayer=t.layer["source-layer"]),t.state=e});return h}function d(l,i,t,u,e,n){for(var c={},h=e.queryRenderedSymbols(t),r=[],o=0,a=Object.keys(h).map(Number);o<a.length;o+=1){var s=a[o];r.push(n[s])}r.sort(y);for(var p=function(){var o=d[f],t=o.featureIndex.lookupSymbolFeatures(h[o.bucketInstanceId],o.bucketIndex,o.sourceLayerIndex,u.filter,u.layers,l);for(var e in t){var n=c[e]=c[e]||[],r=t[e];r.sort(function(t,e){var n=o.featureSortOrder;if(n){var r=n.indexOf(t.featureIndex),i=n.indexOf(e.featureIndex);return H.default$2(0<=r),H.default$2(0<=i),i-r}return e.featureIndex-t.featureIndex});for(var i=0,a=r;i<a.length;i+=1){var s=a[i];n.push(s.feature)}}},f=0,d=r;f<d.length;f+=1)p();var m=function(r){c[r].forEach(function(t){var e=l[r],n=i[e.source].getFeatureState(t.layer["source-layer"],t.id);t.source=t.layer.source,t.layer["source-layer"]&&(t.sourceLayer=t.layer["source-layer"]),t.state=n})};for(var g in c)m(g);return c}function m(e,t){for(var n=e.getRenderableIds().map(function(t){return e.getTileByID(t)}),r=[],i={},o=0;o<n.length;o++){var a=n[o],s=a.tileID.canonical.key;i[s]||(i[s]=!0,a.querySourceFeatures(r,t))}return r}function y(t,e){var n=t.tileID,r=e.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}function g(t){for(var e={},n={},r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.queryResults,s=o.wrappedTileID,l=n[s]=n[s]||{};for(var u in a)for(var c=a[u],h=l[u]=l[u]||{},p=e[u]=e[u]||[],f=0,d=c;f<d.length;f+=1){var m=d[f];h[m.featureIndex]||(h[m.featureIndex]=!0,p.push(m.feature))}}return e}function x(t,e){var n=e.zoomTo(t.canonical.z);return new H["default"]((n.column-(t.canonical.x+t.wrap*Math.pow(2,t.canonical.z)))*H.default$11,(n.row-t.canonical.y)*H.default$11)}function _(t){return"raster"===t||"image"===t||"video"===t}function i(){return new H.default$1.Worker(Pi.workerUrl)}function v(){return On||(On=new Ln),On}function b(t,e){var n={};for(var r in t)"ref"!==r&&(n[r]=t[r]);return H.default$18.forEach(function(t){t in e&&(n[t]=e[t])}),n}function w(t){t=t.slice();for(var e=Object.create(null),n=0;n<t.length;n++)e[t[n].id]=t[n];for(var r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=b(t[r],e[t[r].ref]));return t}function E(t,e,n){n.push({command:Fn.addSource,args:[t,e[t]]})}function T(t,e,n){e.push({command:Fn.removeSource,args:[t]}),n[t]=!0}function S(t,e,n,r){T(t,n,r),E(t,e,n)}function C(t,e,n){var r;for(r in t[n])if(t[n].hasOwnProperty(r)&&"data"!==r&&!H.default$14(t[n][r],e[n][r]))return!1;for(r in e[n])if(e[n].hasOwnProperty(r)&&"data"!==r&&!H.default$14(t[n][r],e[n][r]))return!1;return!0}function A(t,e,n,r){var i;for(i in e=e||{},t=t||{})t.hasOwnProperty(i)&&(e.hasOwnProperty(i)||T(i,n,r));for(i in e)e.hasOwnProperty(i)&&(t.hasOwnProperty(i)?H.default$14(t[i],e[i])||("geojson"===t[i].type&&"geojson"===e[i].type&&C(t,e,i)?n.push({command:Fn.setGeoJSONSourceData,args:[i,e[i].data]}):S(i,e,n,r)):E(i,e,n))}function I(t,e,n,r,i,o){var a;for(a in e=e||{},t=t||{})t.hasOwnProperty(a)&&(H.default$14(t[a],e[a])||n.push({command:o,args:[r,a,e[a],i]}));for(a in e)e.hasOwnProperty(a)&&!t.hasOwnProperty(a)&&(H.default$14(t[a],e[a])||n.push({command:o,args:[r,a,e[a],i]}))}function M(t){return t.id}function k(t,e){return t[e.id]=e,t}function D(t,e,n){e=e||[];var r,i,o,a,s,l,u,c=(t=t||[]).map(M),h=e.map(M),p=t.reduce(k,{}),f=e.reduce(k,{}),d=c.slice(),m=Object.create(null);for(i=r=0;r<c.length;r++)o=c[r],f.hasOwnProperty(o)?i++:(n.push({command:Fn.removeLayer,args:[o]}),d.splice(d.indexOf(o,i),1));for(i=r=0;r<h.length;r++)o=h[h.length-1-r],d[d.length-1-r]!==o&&(p.hasOwnProperty(o)?(n.push({command:Fn.removeLayer,args:[o]}),d.splice(d.lastIndexOf(o,d.length-i),1)):i++,l=d[d.length-r],n.push({command:Fn.addLayer,args:[f[o],l]}),d.splice(d.length-r,0,o),m[o]=!0);for(r=0;r<h.length;r++)if(a=p[o=h[r]],s=f[o],!m[o]&&!H.default$14(a,s))if(H.default$14(a.source,s.source)&&H.default$14(a["source-layer"],s["source-layer"])&&H.default$14(a.type,s.type)){for(u in I(a.layout,s.layout,n,o,null,Fn.setLayoutProperty),I(a.paint,s.paint,n,o,null,Fn.setPaintProperty),H.default$14(a.filter,s.filter)||n.push({command:Fn.setFilter,args:[o,s.filter]}),H.default$14(a.minzoom,s.minzoom)&&H.default$14(a.maxzoom,s.maxzoom)||n.push({command:Fn.setLayerZoomRange,args:[o,s.minzoom,s.maxzoom]}),a)a.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?I(a[u],s[u],n,o,u.slice(6),Fn.setPaintProperty):H.default$14(a[u],s[u])||n.push({command:Fn.setLayerProperty,args:[o,u,s[u]]}));for(u in s)s.hasOwnProperty(u)&&!a.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?I(a[u],s[u],n,o,u.slice(6),Fn.setPaintProperty):H.default$14(a[u],s[u])||n.push({command:Fn.setLayerProperty,args:[o,u,s[u]]}))}else n.push({command:Fn.removeLayer,args:[o]}),l=d[d.lastIndexOf(o)+1],n.push({command:Fn.addLayer,args:[s,l]})}function z(t,e){if(!t)return[{command:Fn.setStyle,args:[e]}];var n=[];try{if(!H.default$14(t.version,e.version))return[{command:Fn.setStyle,args:[e]}];H.default$14(t.center,e.center)||n.push({command:Fn.setCenter,args:[e.center]}),H.default$14(t.zoom,e.zoom)||n.push({command:Fn.setZoom,args:[e.zoom]}),H.default$14(t.bearing,e.bearing)||n.push({command:Fn.setBearing,args:[e.bearing]}),H.default$14(t.pitch,e.pitch)||n.push({command:Fn.setPitch,args:[e.pitch]}),H.default$14(t.sprite,e.sprite)||n.push({command:Fn.setSprite,args:[e.sprite]}),H.default$14(t.glyphs,e.glyphs)||n.push({command:Fn.setGlyphs,args:[e.glyphs]}),H.default$14(t.transition,e.transition)||n.push({command:Fn.setTransition,args:[e.transition]}),H.default$14(t.light,e.light)||n.push({command:Fn.setLight,args:[e.light]});var r={},i=[];A(t.sources,e.sources,i,r);var o=[];t.layers&&t.layers.forEach(function(t){r[t.source]?n.push({command:Fn.removeLayer,
args:[t.id]}):o.push(t)}),n=n.concat(i),D(o,e.layers,n)}catch(a){console.warn("Unable to compute style diff:",a),n=[{command:Fn.setStyle,args:[e]}]}return n}function P(t,e,n,r,i){var o=H.identity(new Float32Array(16));return e?(H.identity(o),H.scale(o,o,[1/i,1/i,1]),n||H.rotateZ(o,o,r.angle)):(H.scale(o,o,[r.width/2,-r.height/2,1]),H.translate(o,o,[1,-1,0]),H.multiply(o,o,t)),o}function L(t,e,n,r,i){var o=H.identity(new Float32Array(16));return e?(H.multiply(o,o,t),H.scale(o,o,[i,i,1]),n||H.rotateZ(o,o,-r.angle)):(H.scale(o,o,[1,-1,1]),H.translate(o,o,[-1,-1,0]),H.scale(o,o,[2/r.width,2/r.height,1])),o}function W(t,e){var n=[t.x,t.y,0,1];$(n,n,e);var r=n[3];return{point:new H["default"](n[0]/r,n[1]/r),signedDistanceFromCamera:r}}function O(t,e){var n=t[0]/t[3],r=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&r>=-e[1]&&r<=e[1]}function R(t,e,n,r,i,o,a,s){var l=r?t.textSizeData:t.iconSizeData,u=H.evaluateSizeForZoom(l,n.transform.zoom,jn.properties[r?"text-size":"icon-size"]),c=[256/n.width*2+1,256/n.height*2+1],h=r?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;h.clear();for(var p=t.lineVertexArray,f=r?t.text.placedSymbolArray:t.icon.placedSymbolArray,d=n.transform.width/n.transform.height,m=!1,g=0;g<f.length;g++){var y=f.get(g);if(y.hidden||y.writingMode===H.WritingMode.vertical&&!m)V(y.numGlyphs,h);else{m=!1;var v=[y.anchorX,y.anchorY,0,1];if(H.transformMat4(v,v,e),O(v,c)){var _=.5+v[3]/n.transform.cameraToCenterDistance*.5,x=H.evaluateSizeForFeature(l,u,y),b=a?x*_:x/_,w=new H["default"](y.anchorX,y.anchorY),E=W(w,i).point,T={},S=F(y,b,!1,s,e,i,o,t.glyphOffsetArray,p,h,E,w,T,d);m=S.useVertical,(S.notEnoughRoom||m||S.needsFlipping&&F(y,b,!0,s,e,i,o,t.glyphOffsetArray,p,h,E,w,T,d).notEnoughRoom)&&V(y.numGlyphs,h)}else V(y.numGlyphs,h)}}r?t.text.dynamicLayoutVertexBuffer.updateData(h):t.icon.dynamicLayoutVertexBuffer.updateData(h)}function G(t,e,n,r,i,o,a,s,l,u,c,h){var p=s.glyphStartIndex+s.numGlyphs,f=s.lineStartIndex,d=s.lineStartIndex+s.lineLength,m=e.getoffsetX(s.glyphStartIndex),g=e.getoffsetX(p-1),y=j(t*m,n,r,i,o,a,s.segment,f,d,l,u,c,h);if(!y)return null;var v=j(t*g,n,r,i,o,a,s.segment,f,d,l,u,c,h);return v?{first:y,last:v}:null}function B(t,e,n,r){if(t===H.WritingMode.horizontal){var i=Math.abs(n.y-e.y);if(Math.abs(n.x-e.x)*r<i)return{useVertical:!0}}return(t===H.WritingMode.vertical?e.y<n.y:e.x>n.x)?{needsFlipping:!0}:null}function F(t,e,n,r,i,o,a,s,l,u,c,h,p,f){var d,m=e/24,g=t.lineOffsetX*e,y=t.lineOffsetY*e;if(1<t.numGlyphs){var v=t.glyphStartIndex+t.numGlyphs,_=t.lineStartIndex,x=t.lineStartIndex+t.lineLength,b=G(m,s,g,y,n,c,h,t,l,o,p,!1);if(!b)return{notEnoughRoom:!0};var w=W(b.first.point,a).point,E=W(b.last.point,a).point;if(r&&!n){var T=B(t.writingMode,w,E,f);if(T)return T}d=[b.first];for(var S=t.glyphStartIndex+1;S<v-1;S++)d.push(j(m*s.getoffsetX(S),g,y,n,c,h,t.segment,_,x,l,o,p,!1));d.push(b.last)}else{if(r&&!n){var C=W(h,i).point,A=t.lineStartIndex+t.segment+1,I=new H["default"](l.getx(A),l.gety(A)),M=W(I,i),k=0<M.signedDistanceFromCamera?M.point:N(h,I,C,1,i),D=B(t.writingMode,C,k,f);if(D)return D}var z=j(m*s.getoffsetX(t.glyphStartIndex),g,y,n,c,h,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,l,o,p,!1);if(!z)return{notEnoughRoom:!0};d=[z]}for(var P=0,L=d;P<L.length;P+=1){var O=L[P];H.addDynamicAttributes(u,O.point,O.angle)}return{}}function N(t,e,n,r,i){var o=W(t.add(t.sub(e)._unit()),i).point,a=n.sub(o);return n.add(a._mult(r/a.mag()))}function j(t,e,n,r,i,o,a,s,l,u,c,h,p){var f=r?t-e:t+e,d=0<f?1:-1,m=0;r&&(d*=-1,m=Math.PI),d<0&&(m+=Math.PI);for(var g=0<d?s+a:s+a+1,y=g,v=i,_=i,x=0,b=0,w=Math.abs(f);x+b<=w;){if((g+=d)<s||l<=g)return null;if(_=v,(v=h[g])===undefined){var E=new H["default"](u.getx(g),u.gety(g)),T=W(E,c);if(0<T.signedDistanceFromCamera)v=h[g]=T.point;else{var S=g-d;v=N(0===x?o:new H["default"](u.getx(S),u.gety(S)),E,_,w-x+1,c)}}x+=b,b=_.dist(v)}var C=(w-x)/b,A=v.sub(_),I=A.mult(C)._add(_);return I._add(A._unit()._perp()._mult(n*d)),{point:I,angle:m+Math.atan2(v.y-_.y,v.x-_.x),tileDistance:p?{prevTileDistance:g-d===y?0:u.gettileUnitDistanceFromAnchor(g-d),lastSegmentViewportDistance:w-x}:null}}function V(t,e){for(var n=0;n<t;n++){var r=e.length;e.resize(r+4),e.float32.set(Vn,3*r)}}function $(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t[3]=n[3]*r+n[7]*i+n[15],t}function Z(t,e,n){t[e+4]=n?1:0}function q(t,e,n){return e*(H.default$11/(t.tileSize*Math.pow(2,n-t.tileID.overscaledZ)))}function U(t,e,n){t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0)}function Y(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*Jn+e*Qn+n*tr+e*er+n*nr+e*rr+n*ir+e}function X(t,e){for(var n=t.sort(function(t,e){return t.tileID.isLessThan(e.tileID)?-1:e.tileID.isLessThan(t.tileID)?1:0}),r=0;r<n.length;r++){var i={},o=n[r],a=n.slice(r+1);K(o.tileID.wrapped(),o.tileID,a,new H.OverscaledTileID(0,o.tileID.wrap+1,0,0,0),i),o.setMask(i,e)}}function K(t,e,n,r,i){for(var o=0;o<n.length;o++){var a=n[o];if(r.isLessThan(a.tileID))break;if(e.key===a.tileID.key)return;if(a.tileID.isChildOf(e)){for(var s=e.children(Infinity),l=0;l<s.length;l++){K(t,s[l],n.slice(o),r,i)}return}}var u=e.overscaledZ-t.overscaledZ,c=new H.CanonicalTileID(u,e.canonical.x-(t.canonical.x<<u),e.canonical.y-(t.canonical.y<<u));i[c.key]=i[c.key]||c}function J(t,e,n,r,i){var o=t.context,a=o.gl,s=i?t.useProgram("collisionCircle"):t.useProgram("collisionBox");o.setDepthMode(Tn.disabled),o.setStencilMode(Cn.disabled),o.setColorMode(t.colorModeForRenderPass());for(var l=0;l<r.length;l++){var u=r[l],c=e.getTile(u),h=c.getBucket(n);if(h){var p=i?h.collisionCircle:h.collisionBox;if(p){a.uniformMatrix4fv(s.uniforms.u_matrix,!1,u.posMatrix),a.uniform1f(s.uniforms.u_camera_to_center_distance,t.transform.cameraToCenterDistance);var f=q(c,1,t.transform.zoom),d=Math.pow(2,t.transform.zoom-c.tileID.overscaledZ);a.uniform1f(s.uniforms.u_pixels_to_tile_units,f),a.uniform2f(s.uniforms.u_extrude_scale,t.transform.pixelsToGLUnits[0]/(f*d),t.transform.pixelsToGLUnits[1]/(f*d)),a.uniform1f(s.uniforms.u_overscale_factor,c.tileID.overscaleFactor()),s.draw(o,i?a.TRIANGLES:a.LINES,n.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,null,p.collisionVertexBuffer,null)}}}}function Q(t,e,n,r){J(t,e,n,r,!1),J(t,e,n,r,!0)}function tt(t,e,n,r){if("translucent"===t.renderPass){var i=t.context;i.setStencilMode(Cn.disabled),i.setColorMode(t.colorModeForRenderPass()),0!==n.paint.get("icon-opacity").constantOr(1)&&et(t,e,n,r,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright")),0!==n.paint.get("text-opacity").constantOr(1)&&et(t,e,n,r,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright")),e.map.showCollisionBoxes&&Q(t,e,n,r)}}function et(t,e,n,r,i,o,a,s,l,u){var c,h=t.context,p=h.gl,f=t.transform,d="map"===s,m="map"===l,g=d&&"line"===n.layout.get("symbol-placement"),y=d&&!m&&!g,v=m;h.setDepthMode(v?t.depthModeForSublayer(0,Tn.ReadOnly):Tn.disabled);for(var _=0,x=r;_<x.length;_+=1){var b=x[_],w=e.getTile(b),E=w.getBucket(n);if(E){var T=i?E.text:E.icon;if(T&&T.segments.get().length){var S=T.programConfigurations.get(n.id),C=i||E.sdfIcons,A=i?E.textSizeData:E.iconSizeData;if(c||(c=t.useProgram(C?"symbolSDF":"symbolIcon",S),S.setUniforms(t.context,c,n.paint,{zoom:t.transform.zoom}),nt(c,t,n,i,y,m,A)),h.activeTexture.set(p.TEXTURE0),p.uniform1i(c.uniforms.u_texture,0),i)w.glyphAtlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE),p.uniform2fv(c.uniforms.u_texsize,w.glyphAtlasTexture.size);else{var I=1!==n.layout.get("icon-size").constantOr(0)||E.iconsNeedLinear,M=m||0!==f.pitch;w.iconAtlasTexture.bind(C||t.options.rotating||t.options.zooming||I||M?p.LINEAR:p.NEAREST,p.CLAMP_TO_EDGE),p.uniform2fv(c.uniforms.u_texsize,w.iconAtlasTexture.size)}p.uniformMatrix4fv(c.uniforms.u_matrix,!1,t.translatePosMatrix(b.posMatrix,w,o,a));var k=q(w,1,t.transform.zoom),D=P(b.posMatrix,m,d,t.transform,k),z=L(b.posMatrix,m,d,t.transform,k);p.uniformMatrix4fv(c.uniforms.u_gl_coord_matrix,!1,t.translatePosMatrix(z,w,o,a,!0)),g?(p.uniformMatrix4fv(c.uniforms.u_label_plane_matrix,!1,wr),R(E,b.posMatrix,t,i,D,z,m,u)):p.uniformMatrix4fv(c.uniforms.u_label_plane_matrix,!1,D),p.uniform1f(c.uniforms.u_fade_change,t.options.fadeDuration?t.symbolFadeChange:1),rt(c,S,t,n,w,T,i,C,m)}}}}function nt(t,e,n,r,i,o,a){var s=e.context.gl,l=e.transform;s.uniform1i(t.uniforms.u_pitch_with_map,o?1:0),s.uniform1f(t.uniforms.u_is_text,r?1:0),s.uniform1f(t.uniforms.u_pitch,l.pitch/360*2*Math.PI);var u="constant"===a.functionType||"source"===a.functionType,c="constant"===a.functionType||"camera"===a.functionType;s.uniform1i(t.uniforms.u_is_size_zoom_constant,u?1:0),s.uniform1i(t.uniforms.u_is_size_feature_constant,c?1:0),s.uniform1f(t.uniforms.u_camera_to_center_distance,l.cameraToCenterDistance);var h=H.evaluateSizeForZoom(a,l.zoom,Er.properties[r?"text-size":"icon-size"]);h.uSizeT!==undefined&&s.uniform1f(t.uniforms.u_size_t,h.uSizeT),h.uSize!==undefined&&s.uniform1f(t.uniforms.u_size,h.uSize),s.uniform1f(t.uniforms.u_aspect_ratio,l.width/l.height),s.uniform1i(t.uniforms.u_rotate_symbol,i?1:0)}function rt(t,e,n,r,i,o,a,s,l){var u=n.context,c=u.gl,h=n.transform;if(s){var p=0!==r.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1),f=l?Math.cos(h._pitch)*h.cameraToCenterDistance:1;c.uniform1f(t.uniforms.u_gamma_scale,f),p&&(c.uniform1f(t.uniforms.u_is_halo,1),it(o,r,u,t)),c.uniform1f(t.uniforms.u_is_halo,0)}it(o,r,u,t)}function it(t,e,n,r){r.draw(n,n.gl.TRIANGLES,e.id,t.layoutVertexBuffer,t.indexBuffer,t.segments,t.programConfigurations.get(e.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function ot(t,e,n,r){if("translucent"===t.renderPass){var i=n.paint.get("circle-opacity"),o=n.paint.get("circle-stroke-width"),a=n.paint.get("circle-stroke-opacity");if(0!==i.constantOr(1)||0!==o.constantOr(1)&&0!==a.constantOr(1)){var s=t.context,l=s.gl;s.setDepthMode(t.depthModeForSublayer(0,Tn.ReadOnly)),s.setStencilMode(Cn.disabled),s.setColorMode(t.colorModeForRenderPass());for(var u=!0,c=0;c<r.length;c++){var h=r[c],p=e.getTile(h),f=p.getBucket(n);if(f){var d=t.context.program.get(),m=f.programConfigurations.get(n.id),g=t.useProgram("circle",m);if((u||g.program!==d)&&(m.setUniforms(s,g,n.paint,{zoom:t.transform.zoom}),u=!1),l.uniform1f(g.uniforms.u_camera_to_center_distance,t.transform.cameraToCenterDistance),l.uniform1i(g.uniforms.u_scale_with_map,"map"===n.paint.get("circle-pitch-scale")?1:0),"map"===n.paint.get("circle-pitch-alignment")){l.uniform1i(g.uniforms.u_pitch_with_map,1);var y=q(p,1,t.transform.zoom);l.uniform2f(g.uniforms.u_extrude_scale,y,y)}else l.uniform1i(g.uniforms.u_pitch_with_map,0),l.uniform2fv(g.uniforms.u_extrude_scale,t.transform.pixelsToGLUnits);l.uniformMatrix4fv(g.uniforms.u_matrix,!1,t.translatePosMatrix(h.posMatrix,p,n.paint.get("circle-translate"),n.paint.get("circle-translate-anchor"))),g.draw(s,l.TRIANGLES,n.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,m)}}}}}function at(t,e,n,r){if(0!==n.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){var i=t.context,o=i.gl;i.setDepthMode(t.depthModeForSublayer(0,Tn.ReadOnly)),i.setStencilMode(Cn.disabled),st(i,t,n),i.clear({color:H.default$9.transparent}),i.setColorMode(new Mn([o.ONE,o.ONE],H.default$9.transparent,[!0,!0,!0,!0]));for(var a=!0,s=0;s<r.length;s++){var l=r[s];if(!e.hasRenderableParent(l)){var u=e.getTile(l),c=u.getBucket(n);if(c){var h=t.context.program.get(),p=c.programConfigurations.get(n.id),f=t.useProgram("heatmap",p),d=t.transform.zoom;(a||f.program!==h)&&(p.setUniforms(t.context,f,n.paint,{zoom:d}),a=!1),o.uniform1f(f.uniforms.u_extrude_scale,q(u,1,d)),o.uniform1f(f.uniforms.u_intensity,n.paint.get("heatmap-intensity")),o.uniformMatrix4fv(f.uniforms.u_matrix,!1,l.posMatrix),f.draw(i,o.TRIANGLES,n.id,c.layoutVertexBuffer,c.indexBuffer,c.segments,p)}}}i.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),ut(t,n))}function st(t,e,n){var r=t.gl;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),t.bindFramebuffer.set(i.framebuffer);else{var o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),lt(t,e,o,i=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4))}}function lt(t,e,n,r){var i=t.gl;i.texImage2D(i.TEXTURE_2D,0,i.RGBA,e.width/4,e.height/4,0,i.RGBA,t.extTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:i.UNSIGNED_BYTE,null),r.colorAttachment.set(n),t.extTextureHalfFloat&&i.checkFramebufferStatus(i.FRAMEBUFFER)!==i.FRAMEBUFFER_COMPLETE&&(t.extTextureHalfFloat=null,r.colorAttachment.setDirty(),lt(t,e,n,r))}function ut(t,e){var n=t.context,r=n.gl,i=e.heatmapFbo;if(i){n.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),n.activeTexture.set(r.TEXTURE1);var o=e.colorRampTexture;o||(o=e.colorRampTexture=new H.default$5(n,e.colorRamp,r.RGBA)),o.bind(r.LINEAR,r.CLAMP_TO_EDGE),n.setDepthMode(Tn.disabled),n.setStencilMode(Cn.disabled);var a=t.useProgram("heatmapTexture"),s=e.paint.get("heatmap-opacity");r.uniform1f(a.uniforms.u_opacity,s),r.uniform1i(a.uniforms.u_image,0),r.uniform1i(a.uniforms.u_color_ramp,1);var l=H.create();H.ortho(l,0,t.width,t.height,0,0,1),r.uniformMatrix4fv(a.uniforms.u_matrix,!1,l),r.uniform2f(a.uniforms.u_world,r.drawingBufferWidth,r.drawingBufferHeight),t.viewportVAO.bind(t.context,a,t.viewportBuffer,[]),r.drawArrays(r.TRIANGLE_STRIP,0,4)}}function ct(t,e,n,r){if("translucent"===t.renderPass){var i=n.paint.get("line-opacity"),o=n.paint.get("line-width");if(0!==i.constantOr(1)&&0!==o.constantOr(1)){var a=t.context;a.setDepthMode(t.depthModeForSublayer(0,Tn.ReadOnly)),a.setColorMode(t.colorModeForRenderPass());for(var s,l=n.paint.get("line-dasharray")?"lineSDF":n.paint.get("line-pattern")?"linePattern":n.paint.get("line-gradient")?"lineGradient":"line",u=!0,c=0,h=r;c<h.length;c+=1){var p=h[c],f=e.getTile(p),d=f.getBucket(n);if(d){var m=d.programConfigurations.get(n.id),g=t.context.program.get(),y=t.useProgram(l,m),v=u||y.program!==g,_=s!==f.tileID.overscaledZ;v&&m.setUniforms(t.context,y,n.paint,{zoom:t.transform.zoom}),ht(y,t,f,d,n,p,m,v,_),s=f.tileID.overscaledZ,u=!1}}}}}function ht(t,e,n,r,i,o,a,s,l){var u,c,h,p,f=e.context,d=f.gl,m=i.paint.get("line-dasharray"),g=i.paint.get("line-pattern");if(s||l){var y=1/q(n,1,e.transform.tileZoom);if(m){u=e.lineAtlas.getDash(m.from,"round"===i.layout.get("line-cap")),c=e.lineAtlas.getDash(m.to,"round"===i.layout.get("line-cap"));var v=u.width*m.fromScale,_=c.width*m.toScale;d.uniform2f(t.uniforms.u_patternscale_a,y/v,-u.height/2),d.uniform2f(t.uniforms.u_patternscale_b,y/_,-c.height/2),d.uniform1f(t.uniforms.u_sdfgamma,e.lineAtlas.width/(256*Math.min(v,_)*H.default$3.devicePixelRatio)/2)}else if(g){if(h=e.imageManager.getPattern(g.from),p=e.imageManager.getPattern(g.to),!h||!p)return;d.uniform2f(t.uniforms.u_pattern_size_a,h.displaySize[0]*g.fromScale/y,h.displaySize[1]),d.uniform2f(t.uniforms.u_pattern_size_b,p.displaySize[0]*g.toScale/y,p.displaySize[1]);var x=e.imageManager.getPixelSize(),b=x.width,w=x.height;d.uniform2fv(t.uniforms.u_texsize,[b,w])}d.uniform2f(t.uniforms.u_gl_units_to_pixels,1/e.transform.pixelsToGLUnits[0],1/e.transform.pixelsToGLUnits[1])}s&&(m?(d.uniform1i(t.uniforms.u_image,0),f.activeTexture.set(d.TEXTURE0),e.lineAtlas.bind(f),d.uniform1f(t.uniforms.u_tex_y_a,u.y),d.uniform1f(t.uniforms.u_tex_y_b,c.y),d.uniform1f(t.uniforms.u_mix,m.t)):g&&(d.uniform1i(t.uniforms.u_image,0),f.activeTexture.set(d.TEXTURE0),e.imageManager.bind(f),d.uniform2fv(t.uniforms.u_pattern_tl_a,h.tl),d.uniform2fv(t.uniforms.u_pattern_br_a,h.br),d.uniform2fv(t.uniforms.u_pattern_tl_b,p.tl),d.uniform2fv(t.uniforms.u_pattern_br_b,p.br),d.uniform1f(t.uniforms.u_fade,g.t))),f.setStencilMode(e.stencilModeForClipping(o));var E=e.translatePosMatrix(o.posMatrix,n,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"));if(d.uniformMatrix4fv(t.uniforms.u_matrix,!1,E),d.uniform1f(t.uniforms.u_ratio,1/q(n,1,e.transform.zoom)),i.paint.get("line-gradient")){f.activeTexture.set(d.TEXTURE0);var T=i.gradientTexture;if(!i.gradient)return;T||(T=i.gradientTexture=new H.default$5(f,i.gradient,d.RGBA)),T.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.uniform1i(t.uniforms.u_image,0)}t.draw(f,d.TRIANGLES,i.id,r.layoutVertexBuffer,r.indexBuffer,r.segments,a)}function pt(t,e,n,r){var i=n.paint.get("fill-color"),o=n.paint.get("fill-opacity");if(0!==o.constantOr(1)){var a=t.context;a.setColorMode(t.colorModeForRenderPass());var s=n.paint.get("fill-pattern")||1!==i.constantOr(H.default$9.transparent).a||1!==o.constantOr(0)?"translucent":"opaque";t.renderPass===s&&(a.setDepthMode(t.depthModeForSublayer(1,"opaque"===t.renderPass?Tn.ReadWrite:Tn.ReadOnly)),ft(t,e,n,r,dt)),"translucent"===t.renderPass&&n.paint.get("fill-antialias")&&(a.setDepthMode(t.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,Tn.ReadOnly)),ft(t,e,n,r,mt))}}function ft(t,e,n,r,i){if(!Tr(n.paint.get("fill-pattern"),t))for(var o=!0,a=0,s=r;a<s.length;a+=1){var l=s[a],u=e.getTile(l),c=u.getBucket(n);c&&(t.context.setStencilMode(t.stencilModeForClipping(l)),i(t,e,n,u,l,c,o),o=!1)}}function dt(t,e,n,r,i,o,a){var s=t.context.gl,l=o.programConfigurations.get(n.id);gt("fill",n.paint.get("fill-pattern"),t,l,n,r,i,a).draw(t.context,s.TRIANGLES,n.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,l)}function mt(t,e,n,r,i,o,a){var s=t.context.gl,l=o.programConfigurations.get(n.id),u=gt("fillOutline",n.getPaintProperty("fill-outline-color")?null:n.paint.get("fill-pattern"),t,l,n,r,i,a);s.uniform2f(u.uniforms.u_world,s.drawingBufferWidth,s.drawingBufferHeight),u.draw(t.context,s.LINES,n.id,o.layoutVertexBuffer,o.indexBuffer2,o.segments2,l)}function gt(t,e,n,r,i,o,a,s){var l,u=n.context.program.get();return e?(l=n.useProgram(t+"Pattern",r),(s||l.program!==u)&&(r.setUniforms(n.context,l,i.paint,{zoom:n.transform.zoom}),Sr(e,n,l)),Cr(o,n,l)):(l=n.useProgram(t,r),(s||l.program!==u)&&r.setUniforms(n.context,l,i.paint,{zoom:n.transform.zoom})),n.context.gl.uniformMatrix4fv(l.uniforms.u_matrix,!1,n.translatePosMatrix(a.posMatrix,o,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"))),l}function yt(t,e,n,r){if(0!==n.paint.get("fill-extrusion-opacity"))if("offscreen"===t.renderPass){vt(t,n);for(var i=!0,o=0,a=r;o<a.length;o+=1){var s=a[o],l=e.getTile(s),u=l.getBucket(n);u&&(xt(t,e,n,l,s,u,i),i=!1)}}else"translucent"===t.renderPass&&_t(t,n)}function vt(t,e){var n=t.context,r=n.gl,i=e.viewportFrame;if(t.depthRboNeedsClear&&t.setupOffscreenDepthRenderbuffer(),!i){var o=new H.default$5(n,{width:t.width,height:t.height,data:null},r.RGBA);o.bind(r.LINEAR,r.CLAMP_TO_EDGE),(i=e.viewportFrame=n.createFramebuffer(t.width,t.height)).colorAttachment.set(o.texture)}n.bindFramebuffer.set(i.framebuffer),i.depthAttachment.set(t.depthRbo),t.depthRboNeedsClear&&(n.clear({depth:1}),t.depthRboNeedsClear=!1),n.clear({color:H.default$9.transparent}),n.setStencilMode(Cn.disabled),n.setDepthMode(new Tn(r.LEQUAL,Tn.ReadWrite,[0,1])),n.setColorMode(t.colorModeForRenderPass())}function _t(t,e){var n=e.viewportFrame;if(n){var r=t.context,i=r.gl,o=t.useProgram("extrusionTexture");r.setStencilMode(Cn.disabled),r.setDepthMode(Tn.disabled),r.setColorMode(t.colorModeForRenderPass()),r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,n.colorAttachment.get()),i.uniform1f(o.uniforms.u_opacity,e.paint.get("fill-extrusion-opacity")),i.uniform1i(o.uniforms.u_image,0);var a=H.create();H.ortho(a,0,t.width,t.height,0,0,1),i.uniformMatrix4fv(o.uniforms.u_matrix,!1,a),i.uniform2f(o.uniforms.u_world,i.drawingBufferWidth,i.drawingBufferHeight),t.viewportVAO.bind(r,o,t.viewportBuffer,[]),i.drawArrays(i.TRIANGLE_STRIP,0,4)}}function xt(t,e,n,r,i,o,a){var s=t.context,l=s.gl,u=n.paint.get("fill-extrusion-pattern"),c=t.context.program.get(),h=o.programConfigurations.get(n.id),p=t.useProgram(u?"fillExtrusionPattern":"fillExtrusion",h);if((a||p.program!==c)&&h.setUniforms(s,p,n.paint,{zoom:t.transform.zoom}),u){if(Tr(u,t))return;Sr(u,t,p),Cr(r,t,p),l.uniform1f(p.uniforms.u_height_factor,-Math.pow(2,i.overscaledZ)/r.tileSize/8)}t.context.gl.uniformMatrix4fv(p.uniforms.u_matrix,!1,t.translatePosMatrix(i.posMatrix,r,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor"))),bt(p,t),p.draw(s,l.TRIANGLES,n.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,h)}function bt(t,e){var n=e.context.gl,r=e.style.light,i=r.properties.get("position"),o=[i.x,i.y,i.z],a=H.create$2();"viewport"===r.properties.get("anchor")&&H.fromRotation$1(a,-e.transform.angle),H.transformMat3(o,o,a);var s=r.properties.get("color");n.uniform3fv(t.uniforms.u_lightpos,o),n.uniform1f(t.uniforms.u_lightintensity,r.properties.get("intensity")),n.uniform3f(t.uniforms.u_lightcolor,s.r,s.g,s.b)}function wt(t,e,n,r){if("offscreen"===t.renderPass||"translucent"===t.renderPass){var i=t.context,o=e.getSource().maxzoom;i.setDepthMode(t.depthModeForSublayer(0,Tn.ReadOnly)),i.setStencilMode(Cn.disabled),i.setColorMode(t.colorModeForRenderPass());for(var a=0,s=r;a<s.length;a+=1){var l=s[a],u=e.getTile(l);u.needsHillshadePrepare&&"offscreen"===t.renderPass?Ct(t,u,o):"translucent"===t.renderPass&&St(t,u,n)}i.viewport.set([0,0,t.width,t.height])}}function Et(t,e,n){var r=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(r-=e.transform.angle),e.context.gl.uniform2f(t.uniforms.u_light,n.paint.get("hillshade-exaggeration"),r)}function Tt(t,e){var n=e.toCoordinate(),r=new H.default$16(n.column,n.row+1,n.zoom);return[t.transform.coordinateLocation(n).lat,t.transform.coordinateLocation(r).lat]}function St(t,e,n){var r=t.context,i=r.gl,o=e.fbo;if(o){var a=t.useProgram("hillshade"),s=t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),!0);Et(a,t,n);var l=Tt(t,e.tileID);r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),i.uniformMatrix4fv(a.uniforms.u_matrix,!1,s),i.uniform2fv(a.uniforms.u_latrange,l),i.uniform1i(a.uniforms.u_image,0);var u=n.paint.get("hillshade-shadow-color");i.uniform4f(a.uniforms.u_shadow,u.r,u.g,u.b,u.a);var c=n.paint.get("hillshade-highlight-color");i.uniform4f(a.uniforms.u_highlight,c.r,c.g,c.b,c.a);var h=n.paint.get("hillshade-accent-color");if(i.uniform4f(a.uniforms.u_accent,h.r,h.g,h.b,h.a),e.maskedBoundsBuffer&&e.maskedIndexBuffer&&e.segments)a.draw(r,i.TRIANGLES,n.id,e.maskedBoundsBuffer,e.maskedIndexBuffer,e.segments);else{var p=t.rasterBoundsBuffer;t.rasterBoundsVAO.bind(r,a,p,[]),i.drawArrays(i.TRIANGLE_STRIP,0,p.length)}}}function Ct(t,e,n){var r=t.context,i=r.gl;if(e.dem&&e.dem.level){var o=e.dem.level.dim,a=e.dem.getPixels();if(r.activeTexture.set(i.TEXTURE1),r.pixelStoreUnpackPremultiplyAlpha.set(!1),e.demTexture=e.demTexture||t.getTileTexture(e.tileSize),e.demTexture){var s=e.demTexture;s.update(a,{premultiply:!1}),s.bind(i.NEAREST,i.CLAMP_TO_EDGE)}else e.demTexture=new H.default$5(r,a,i.RGBA,{premultiply:!1}),e.demTexture.bind(i.NEAREST,i.CLAMP_TO_EDGE);r.activeTexture.set(i.TEXTURE0);var l=e.fbo;if(!l){var u=new H.default$5(r,{width:o,height:o,data:null},i.RGBA);u.bind(i.LINEAR,i.CLAMP_TO_EDGE),(l=e.fbo=r.createFramebuffer(o,o)).colorAttachment.set(u.texture)}r.bindFramebuffer.set(l.framebuffer),r.viewport.set([0,0,o,o]);var c=H.create();H.ortho(c,0,H.default$11,-H.default$11,0,0,1),H.translate(c,c,[0,-H.default$11,0]);var h=t.useProgram("hillshadePrepare");i.uniformMatrix4fv(h.uniforms.u_matrix,!1,c),i.uniform1f(h.uniforms.u_zoom,e.tileID.overscaledZ),i.uniform2fv(h.uniforms.u_dimension,[2*o,2*o]),i.uniform1i(h.uniforms.u_image,1),i.uniform1f(h.uniforms.u_maxzoom,n);var p=t.rasterBoundsBuffer;t.rasterBoundsVAO.bind(r,h,p,[]),i.drawArrays(i.TRIANGLE_STRIP,0,p.length),e.needsHillshadePrepare=!1}}function At(t,e,n,r){if("translucent"===t.renderPass&&0!==n.paint.get("raster-opacity")){var i=t.context,o=i.gl,a=e.getSource(),s=t.useProgram("raster");i.setStencilMode(Cn.disabled),i.setColorMode(t.colorModeForRenderPass()),o.uniform1f(s.uniforms.u_brightness_low,n.paint.get("raster-brightness-min")),o.uniform1f(s.uniforms.u_brightness_high,n.paint.get("raster-brightness-max")),o.uniform1f(s.uniforms.u_saturation_factor,kt(n.paint.get("raster-saturation"))),o.uniform1f(s.uniforms.u_contrast_factor,Mt(n.paint.get("raster-contrast"))),o.uniform3fv(s.uniforms.u_spin_weights,It(n.paint.get("raster-hue-rotate"))),o.uniform1f(s.uniforms.u_buffer_scale,1),o.uniform1i(s.uniforms.u_image0,0),o.uniform1i(s.uniforms.u_image1,1);for(var l=r.length&&r[0].overscaledZ,u=0,c=r;u<c.length;u+=1){var h=c[u];i.setDepthMode(t.depthModeForSublayer(h.overscaledZ-l,1===n.paint.get("raster-opacity")?Tn.ReadWrite:Tn.ReadOnly,o.LESS));var p=e.getTile(h),f=t.transform.calculatePosMatrix(h.toUnwrapped(),!0);p.registerFadeDuration(n.paint.get("raster-fade-duration")),o.uniformMatrix4fv(s.uniforms.u_matrix,!1,f);var d=e.findLoadedParent(h,0,{}),m=Dt(p,d,e,n,t.transform),g=void 0,y=void 0;if(i.activeTexture.set(o.TEXTURE0),p.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),i.activeTexture.set(o.TEXTURE1),d?(d.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),g=Math.pow(2,d.tileID.overscaledZ-p.tileID.overscaledZ),y=[p.tileID.canonical.x*g%1,p.tileID.canonical.y*g%1]):p.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),o.uniform2fv(s.uniforms.u_tl_parent,y||[0,0]),o.uniform1f(s.uniforms.u_scale_parent,g||1),o.uniform1f(s.uniforms.u_fade_t,m.mix),o.uniform1f(s.uniforms.u_opacity,m.opacity*n.paint.get("raster-opacity")),a instanceof Fe){var v=a.boundsBuffer;a.boundsVAO.bind(i,s,v,[]),o.drawArrays(o.TRIANGLE_STRIP,0,v.length)}else if(p.maskedBoundsBuffer&&p.maskedIndexBuffer&&p.segments)s.draw(i,o.TRIANGLES,n.id,p.maskedBoundsBuffer,p.maskedIndexBuffer,p.segments);else{var _=t.rasterBoundsBuffer;t.rasterBoundsVAO.bind(i,s,_,[]),o.drawArrays(o.TRIANGLE_STRIP,0,_.length)}}}}function It(t){t*=Math.PI/180;var e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}function Mt(t){return 0<t?1/(1-t):1+t}function kt(t){return 0<t?1-1/(1.001-t):-t}function Dt(t,e,n,r,i){var o=r.paint.get("raster-fade-duration");if(0<o){var a=H.default$3.now(),s=(a-t.timeAdded)/o,l=e?(a-e.timeAdded)/o:-1,u=n.getSource(),c=i.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),h=!e||Math.abs(e.tileID.overscaledZ-c)>Math.abs(t.tileID.overscaledZ-c),p=h&&t.refreshedUponExpiration?1:H.clamp(h?s:1-l,0,1);return t.refreshedUponExpiration&&1<=s&&(t.refreshedUponExpiration=!1),e?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}function zt(t,e,n){var r=n.paint.get("background-color"),i=n.paint.get("background-opacity");if(0!==i){var o=t.context,a=o.gl,s=t.transform,l=s.tileSize,u=n.paint.get("background-pattern"),c=u||1!==r.a||1!==i?"translucent":"opaque";if(t.renderPass===c){var h;if(o.setStencilMode(Cn.disabled),o.setDepthMode(t.depthModeForSublayer(0,"opaque"===c?Tn.ReadWrite:Tn.ReadOnly)),o.setColorMode(t.colorModeForRenderPass()),u){if(Tr(u,t))return;h=t.useProgram("backgroundPattern"),Sr(u,t,h),t.tileExtentPatternVAO.bind(o,h,t.tileExtentBuffer,[])}else h=t.useProgram("background"),a.uniform4fv(h.uniforms.u_color,[r.r,r.g,r.b,r.a]),t.tileExtentVAO.bind(o,h,t.tileExtentBuffer,[]);a.uniform1f(h.uniforms.u_opacity,i);for(var p=0,f=s.coveringTiles({tileSize:l});p<f.length;p+=1){var d=f[p];u&&Cr({tileID:d,tileSize:l},t,h),a.uniformMatrix4fv(h.uniforms.u_matrix,!1,t.transform.calculatePosMatrix(d.toUnwrapped())),a.drawArrays(a.TRIANGLE_STRIP,0,t.tileExtentBuffer.length)}}}}function Pt(t,e,n){for(var r=0;r<n.length;r++)Lt(t,e,n[r])}function Lt(t,e,n){var r=t.context,i=r.gl,o=n.posMatrix,a=t.useProgram("debug");r.setDepthMode(Tn.disabled),r.setStencilMode(Cn.disabled),r.setColorMode(t.colorModeForRenderPass()),i.uniformMatrix4fv(a.uniforms.u_matrix,!1,o),i.uniform4f(a.uniforms.u_color,1,0,0,1),t.debugVAO.bind(r,a,t.debugBuffer,[]),i.drawArrays(i.LINE_STRIP,0,t.debugBuffer.length);for(var s=Ot(n.toString(),50,200,5),l=new H.PosArray,u=0;u<s.length;u+=2)l.emplaceBack(s[u],s[u+1]);var c=r.createVertexBuffer(l,dr.members);(new De).bind(r,a,c,[]),i.uniform4f(a.uniforms.u_color,1,1,1,1);for(var h=e.getTile(n).tileSize,p=H.default$11/(Math.pow(2,t.transform.zoom-n.overscaledZ)*h),f=[[-1,-1],[-1,1],[1,-1],[1,1]],d=0;d<f.length;d++){var m=f[d];i.uniformMatrix4fv(a.uniforms.u_matrix,!1,H.translate([],o,[p*m[0],p*m[1],0])),i.drawArrays(i.LINES,0,c.length)}i.uniform4f(a.uniforms.u_color,0,0,0,1),i.uniformMatrix4fv(a.uniforms.u_matrix,!1,o),i.drawArrays(i.LINES,0,c.length)}function Ot(t,e,n,r){r=r||1;var i,o,a,s,l,u,c,h,p=[];for(i=0,o=t.length;i<o;i++)if(l=Ar[t[i]]){for(h=null,a=0,s=l[1].length;a<s;a+=2)-1===l[1][a]&&-1===l[1][a+1]?h=null:(u=e+l[1][a]*r,c=n-l[1][a+1]*r,h&&p.push(h.x,h.y,u,c),h={x:u,y:c});e+=l[0]*r}return p}function Rt(s,t,l,u){function e(t,e,n){var r,i,o,a;if(0<=n&&n<=c)for(r=t;r<e;r++)i=Math.floor(r/c),o=(r%c+c)%c,0!==i&&!0!==u||(a=new H.OverscaledTileID(l,i,s,o,n),h[a.key]=a)}u===undefined&&(u=!0);var c=1<<s,h={};return Nt(t[0],t[1],t[2],0,c,e),Nt(t[2],t[3],t[0],0,c,e),Object.keys(h).map(function(t){return h[t]})}function Bt(t,e){if(t.row>e.row){var n=t;t=e,e=n}return{x0:t.column,y0:t.row,x1:e.column,y1:e.row,dx:e.column-t.column,dy:e.row-t.row}}function Ft(t,e,n,r,i){var o=Math.max(n,Math.floor(e.y0)),a=Math.min(r,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var s=t;t=e,e=s}for(var l=t.dx/t.dy,u=e.dx/e.dy,c=0<t.dx,h=e.dx<0,p=o;p<a;p++){var f=l*Math.max(0,Math.min(t.dy,p+c-t.y0))+t.x0,d=u*Math.max(0,Math.min(e.dy,p+h-e.y0))+e.x0;i(Math.floor(d),Math.ceil(f),p)}}function Nt(t,e,n,r,i,o){var a,s=Bt(t,e),l=Bt(e,n),u=Bt(n,t);s.dy>l.dy&&(a=s,s=l,l=a),s.dy>u.dy&&(a=s,s=u,u=a),l.dy>u.dy&&(a=l,l=u,u=a),s.dy&&Ft(u,s,r,i,o),l.dy&&Ft(u,l,r,i,o)}function jt(t,e){var n=!1,r=0,i=function(){r=0,n&&(t(),r=setTimeout(i,e),n=!1)};return function(){return n=!0,r||i(),r}}function Vt(t){return t*(2-t)}function $t(n,r){function t(t){y=!0,v=ee.mousePos(m,t);var e=new Lr("mousedown",n,t);n.fire(e),e.defaultPrevented||(r.interactive&&!n.doubleClickZoom.isActive()&&n.stop(),n.boxZoom.onMouseDown(t),n.boxZoom.isActive()||n.dragPan.isActive()||n.dragRotate.onMouseDown(t),n.boxZoom.isActive()||n.dragRotate.isActive()||n.dragPan.onMouseDown(t))}function e(t){var e=n.dragRotate.isActive();g&&!e&&n.fire(new Lr("contextmenu",n,g)),g=null,y=!1,n.fire(new Lr("mouseup",n,t))}function i(t){if(!n.dragPan.isActive()&&!n.dragRotate.isActive()){for(var e=t.target;e&&e!==m;)e=e.parentNode;e===m&&n.fire(new Lr("mousemove",n,t))}}function o(t){for(var e=t.target;e&&e!==m;)e=e.parentNode;e===m&&n.fire(new Lr("mouseover",n,t))}function a(t){n.fire(new Lr("mouseout",n,t))}function s(t){var e=new Or("touchstart",n,t);n.fire(e),e.defaultPrevented||(r.interactive&&n.stop(),n.boxZoom.isActive()||n.dragRotate.isActive()||n.dragPan.onTouchStart(t),n.touchZoomRotate.onStart(t),n.doubleClickZoom.onTouchStart(e))}function l(t){n.fire(new Or("touchmove",n,t))}function u(t){n.fire(new Or("touchend",n,t))}function c(t){n.fire(new Or("touchcancel",n,t))}function h(t){ee.mousePos(m,t).equals(v)&&n.fire(new Lr("click",n,t))}function p(t){var e=new Lr("dblclick",n,t);n.fire(e),e.defaultPrevented||n.doubleClickZoom.onDblClick(e)}function f(t){var e=n.dragRotate.isActive();y||e?y&&(g=t):n.fire(new Lr("contextmenu",n,t)),t.preventDefault()}function d(t){var e=new Rr("wheel",n,t);n.fire(e),e.defaultPrevented||n.scrollZoom.onWheel(t)}var m=n.getCanvasContainer(),g=null,y=!1,v=null;for(var _ in pi)n[_]=new pi[_](n,r),r.interactive&&r[_]&&n[_].enable(r[_]);ee.addEventListener(m,"mouseout",a),ee.addEventListener(m,"mousedown",t),ee.addEventListener(m,"mouseup",e),ee.addEventListener(m,"mousemove",i),ee.addEventListener(m,"mouseover",o),ee.addEventListener(m,"touchstart",s,{passive:!1}),ee.addEventListener(m,"touchmove",l,{passive:!1}),ee.addEventListener(m,"touchend",u),ee.addEventListener(m,"touchcancel",c),ee.addEventListener(m,"click",h),ee.addEventListener(m,"dblclick",p),ee.addEventListener(m,"contextmenu",f),ee.addEventListener(m,"wheel",d,{passive:!1})}function qt(t){t.parentNode&&t.parentNode.removeChild(t)}function Ut(t,e,n){if(t=new Se(t.lng,t.lat),e){var r=new Se(t.lng-360,t.lat),
i=new Se(t.lng+360,t.lat),o=n.locationPoint(t).distSqr(e);n.locationPoint(r).distSqr(e)<o?t=r:n.locationPoint(i).distSqr(e)<o&&(t=i)}for(;180<Math.abs(t.lng-n.center.lng);){var a=n.locationPoint(t);if(0<=a.x&&0<=a.y&&a.x<=n.width&&a.y<=n.height)break;t.lng>n.center.lng?t.lng-=360:t.lng+=360}return t}function Ht(t,e,n){var r=t.classList;for(var i in Si)r.remove("mapboxgl-"+n+"-anchor-"+i);r.add("mapboxgl-"+n+"-anchor-"+e)}function Wt(e){wi!==undefined?e(wi):H.default$1.navigator.permissions!==undefined?H.default$1.navigator.permissions.query({name:"geolocation"}).then(function(t){wi="denied"!==t.state,e(wi)}):(wi=!!H.default$1.navigator.geolocation,e(wi))}function Gt(t,e,n){var r=n&&n.maxWidth||100,i=t._container.clientHeight/2,o=Yt(t.unproject([0,i]),t.unproject([r,i]));if(n&&"imperial"===n.unit){var a=3.2808*o;if(5280<a)Zt(e,r,a/5280,"mi");else Zt(e,r,a,"ft")}else if(n&&"nautical"===n.unit){Zt(e,r,o/1852,"nm")}else Zt(e,r,o,"m")}function Zt(t,e,n,r){var i=Xt(n),o=i/n;"m"===r&&1e3<=i&&(i/=1e3,r="km"),t.style.width=e*o+"px",t.innerHTML=i+r}function Yt(t,e){var n=6371e3,r=Math.PI/180,i=t.lat*r,o=e.lat*r,a=Math.sin(i)*Math.sin(o)+Math.cos(i)*Math.cos(o)*Math.cos((e.lng-t.lng)*r);return n*Math.acos(Math.min(a,1))}function Xt(t){var e=Math.pow(10,(""+Math.floor(t)).length-1),n=t/e;return e*(n=10<=n?10:5<=n?5:3<=n?3:2<=n?2:1)}function Kt(t){if(t){if("number"==typeof t){var e=Math.round(Math.sqrt(.5*Math.pow(t,2)));return{center:new H["default"](0,0),top:new H["default"](0,t),"top-left":new H["default"](e,e),"top-right":new H["default"](-e,e),bottom:new H["default"](0,-t),"bottom-left":new H["default"](e,-e),"bottom-right":new H["default"](-e,-e),left:new H["default"](t,0),right:new H["default"](-t,0)}}if(t instanceof H["default"]||Array.isArray(t)){var n=H["default"].convert(t);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:H["default"].convert(t.center||[0,0]),top:H["default"].convert(t.top||[0,0]),"top-left":H["default"].convert(t["top-left"]||[0,0]),"top-right":H["default"].convert(t["top-right"]||[0,0]),bottom:H["default"].convert(t.bottom||[0,0]),"bottom-left":H["default"].convert(t["bottom-left"]||[0,0]),"bottom-right":H["default"].convert(t["bottom-right"]||[0,0]),left:H["default"].convert(t.left||[0,0]),right:H["default"].convert(t.right||[0,0])}}return Kt(new H["default"](0,0))}var Jt,Qt=H.createCommonjsModule(function(t){function r(t){return!!(e()&&n()&&i()&&o()&&a()&&s()&&l()&&u()&&c(t&&t.failIfMajorPerformanceCaveat))}function e(){return"undefined"!=typeof window&&"undefined"!=typeof document}function n(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function i(){return Function.prototype&&Function.prototype.bind}function o(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function a(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function s(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{e=new Worker(r),t=!0}catch(i){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}function l(){return"Uint8ClampedArray"in window}function u(){return ArrayBuffer.isView}function c(t){return p[t]===undefined&&(p[t]=h(t)),p[t]}function h(t){var e=document.createElement("canvas"),n=Object.create(r.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=t,e.probablySupportsContext?e.probablySupportsContext("webgl",n)||e.probablySupportsContext("experimental-webgl",n):e.supportsContext?e.supportsContext("webgl",n)||e.supportsContext("experimental-webgl",n):e.getContext("webgl",n)||e.getContext("experimental-webgl",n)}t.exports?t.exports=r:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=r);var p={};r.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),te="0.46.0",ee={create:function(t,e,n){var r=H.default$1.document.createElement(t);return e&&(r.className=e),n&&n.appendChild(r),r},createNS:function(t,e){return H.default$1.document.createElementNS(t,e)}},ne=H.default$1.document?H.default$1.document.documentElement.style:null,re=t(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);ee.disableDrag=function(){ne&&re&&(Jt=ne[re],ne[re]="none")},ee.enableDrag=function(){ne&&re&&(ne[re]=Jt)};var ie=t(["transform","WebkitTransform"]),oe=!(ee.setTransform=function(t,e){t.style[ie]=e});try{var ae=Object.defineProperty({},"passive",{get:function(){oe=!0}});H.default$1.addEventListener("test",ae,ae),H.default$1.removeEventListener("test",ae,ae)}catch(Li){oe=!1}ee.addEventListener=function(t,e,n,r){void 0===r&&(r={}),"passive"in r&&oe?t.addEventListener(e,n,r):t.addEventListener(e,n,r.capture)},ee.removeEventListener=function(t,e,n,r){void 0===r&&(r={}),"passive"in r&&oe?t.removeEventListener(e,n,r):t.removeEventListener(e,n,r.capture)};var se=function(t){t.preventDefault(),t.stopPropagation(),H.default$1.removeEventListener("click",se,!0)};ee.suppressClick=function(){H.default$1.addEventListener("click",se,!0),H.default$1.setTimeout(function(){H.default$1.removeEventListener("click",se,!0)},0)},ee.mousePos=function(t,e){var n=t.getBoundingClientRect();return e=e.touches?e.touches[0]:e,new H["default"](e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop)},ee.touchPos=function(t,e){for(var n=t.getBoundingClientRect(),r=[],i="touchend"===e.type?e.changedTouches:e.touches,o=0;o<i.length;o++)r.push(new H["default"](i[o].clientX-n.left-t.clientLeft,i[o].clientY-n.top-t.clientTop));return r},ee.mouseButton=function(t){return H.default$2("mousedown"===t.type||"mouseup"===t.type),"undefined"!=typeof H.default$1.InstallTrigger&&2===t.button&&t.ctrlKey&&0<=H.default$1.navigator.platform.toUpperCase().indexOf("MAC")?0:t.button},ee.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var le,ue={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null},ce="See https://www.mapbox.com/api-documentation/#access-tokens",he=function(t,e){if(!a(t))return t;var n=l(t);return n.path="/styles/v1"+n.path,o(n,e)},pe=function(t,e){if(!a(t))return t;var n=l(t);return n.path="/fonts/v1"+n.path,o(n,e)},fe=function(t,e){if(!a(t))return t;var n=l(t);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),o(n,e)},de=function(t,e,n,r){var i=l(t);return a(t)?(i.path="/styles/v1"+i.path+"/sprite"+e+n,o(i,r)):(i.path+=""+e+n,u(i))},me=/(\.(png|jpg)\d*)(?=$)/,ge=function(t,e,n){if(!e||!a(e))return t;var r=l(t),i=2<=H.default$3.devicePixelRatio||512===n?"@2x":"",o=H.default$3.supportsWebp?".webp":"$1";return r.path=r.path.replace(me,""+i+o),s(r.params),u(r)},ye=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/,ve=1;(le=function(){this.images={},this.loaded=!1,this.requestors=[],this.shelfPack=new H.default$4(64,64,{autoResize:!0}),this.patterns={},this.atlasImage=new H.RGBAImage({width:64,height:64}),this.dirty=!0}).prototype.isLoaded=function(){return this.loaded},le.prototype.setLoaded=function(t){var e=this;if(this.loaded!==t&&(this.loaded=t)){for(var n=0,r=e.requestors;n<r.length;n+=1){var i=r[n],o=i.ids,a=i.callback;e._notify(o,a)}this.requestors=[]}},le.prototype.getImage=function(t){return this.images[t]},le.prototype.addImage=function(t,e){H.default$2(!this.images[t]),this.images[t]=e},le.prototype.removeImage=function(t){H.default$2(this.images[t]),delete this.images[t];var e=this.patterns[t];e&&(this.shelfPack.unref(e.bin),delete this.patterns[t])},le.prototype.listImages=function(){return Object.keys(this.images)},le.prototype.getImages=function(t,e){var n=this,r=!0;if(!this.isLoaded())for(var i=0,o=t;i<o.length;i+=1){var a=o[i];n.images[a]||(r=!1)}this.isLoaded()||r?this._notify(t,e):this.requestors.push({ids:t,callback:e})},le.prototype._notify=function(t,e){for(var n=this,r={},i=0,o=t;i<o.length;i+=1){var a=o[i],s=n.images[a];s&&(r[a]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf})}e(null,r)},le.prototype.getPixelSize=function(){return{width:this.shelfPack.w,height:this.shelfPack.h}},le.prototype.getPattern=function(t){var e=this.patterns[t];if(e)return e.position;var n=this.getImage(t);if(!n)return null;var r=n.data.width+2*ve,i=n.data.height+2*ve,o=this.shelfPack.packOne(r,i);if(!o)return null;this.atlasImage.resize(this.getPixelSize());var a=n.data,s=this.atlasImage,l=o.x+ve,u=o.y+ve,c=a.width,h=a.height;H.RGBAImage.copy(a,s,{x:0,y:0},{x:l,y:u},{width:c,height:h}),H.RGBAImage.copy(a,s,{x:0,y:h-1},{x:l,y:u-1},{width:c,height:1}),H.RGBAImage.copy(a,s,{x:0,y:0},{x:l,y:u+h},{width:c,height:1}),H.RGBAImage.copy(a,s,{x:c-1,y:0},{x:l-1,y:u},{width:1,height:h}),H.RGBAImage.copy(a,s,{x:0,y:0},{x:l+c,y:u},{width:1,height:h}),this.dirty=!0;var p=new H.ImagePosition(o,n);return this.patterns[t]={bin:o,position:p},p},le.prototype.bind=function(t){var e=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new H.default$5(t,this.atlasImage,e.RGBA),this.atlasTexture.bind(e.LINEAR,e.CLAMP_TO_EDGE)};var _e,xe,be=n,we=1e20;n.prototype.draw=function(t){var e=this;this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var n=this.ctx.getImageData(0,0,this.size,this.size),r=new Uint8ClampedArray(this.size*this.size),i=0;i<this.size*this.size;i++){var o=n.data[4*i+3]/255;e.gridOuter[i]=1===o?0:0===o?we:Math.pow(Math.max(0,.5-o),2),e.gridInner[i]=1===o?we:0===o?0:Math.pow(Math.max(0,o-.5),2)}for(h(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),h(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),i=0;i<this.size*this.size;i++){var a=e.gridOuter[i]-e.gridInner[i];r[i]=Math.max(0,Math.min(255,Math.round(255-255*(a/e.radius+e.cutoff))))}return r},(_e=function(t,e){this.requestTransform=t,this.localIdeographFontFamily=e,this.entries={}}).prototype.setURL=function(t){this.url=t},_e.prototype.getGlyphs=function(t,u){var l=this,e=[];for(var n in t)for(var r=0,i=t[n];r<i.length;r+=1){var o=i[r];e.push({stack:n,id:o})}H.asyncAll(e,function(t,n){var r=t.stack,i=t.id,o=l.entries[r];o||(o=l.entries[r]={glyphs:{},requests:{}});var e=o.glyphs[i];if(e===undefined)if(e=l._tinySDF(o,r,i))n(null,{stack:r,id:i,glyph:e});else{var a=Math.floor(i/256);if(65535<256*a)n(new Error("glyphs > 65535 not supported"));else{var s=o.requests[a];s||(s=o.requests[a]=[],_e.loadGlyphRange(r,a,l.url,l.requestTransform,function(t,e){if(e)for(var n in e)o.glyphs[+n]=e[+n];for(var r=0,i=s;r<i.length;r+=1){(0,i[r])(t,e)}delete o.requests[a]})),s.push(function(t,e){t?n(t):e&&n(null,{stack:r,id:i,glyph:e[i]||null})})}}else n(null,{stack:r,id:i,glyph:e})},function(t,e){if(t)u(t);else if(e){for(var n={},r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.stack,s=o.id,l=o.glyph;(n[a]||(n[a]={}))[s]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics}}u(null,n)}})},_e.prototype._tinySDF=function(t,e,n){var r=this.localIdeographFontFamily;if(r&&(H.default$7["CJK Unified Ideographs"](n)||H.default$7["Hangul Syllables"](n))){var i=t.tinySDF;if(!i){var o="400";/bold/i.test(e)?o="900":/medium/i.test(e)?o="500":/light/i.test(e)&&(o="200"),i=t.tinySDF=new _e.TinySDF(24,3,8,.25,r,o)}return{id:n,bitmap:new H.AlphaImage({width:30,height:30},i.draw(String.fromCharCode(n))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},_e.loadGlyphRange=e,_e.TinySDF=be,(xe=function(){this.specification=H.default$8.light.position}).prototype.possiblyEvaluate=function(t,e){return H.sphericalToCartesian(t.expression.evaluate(e))},xe.prototype.interpolate=function(t,e,n){return{x:H.number(t.x,e.x,n),y:H.number(t.y,e.y,n),z:H.number(t.z,e.z,n)}};var Ee,Te,Se,Ce,Ae,Ie=new H.Properties({anchor:new H.DataConstantProperty(H.default$8.light.anchor),position:new xe,color:new H.DataConstantProperty(H.default$8.light.color),intensity:new H.DataConstantProperty(H.default$8.light.intensity)}),Me="-transition",ke=function(e){function t(t){e.call(this),this._transitionable=new H.Transitionable(Ie),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.getLight=function(){return this._transitionable.serialize()},t.prototype.setLight=function(t){var e=this;if(!this._validate(H.validateLight,t))for(var n in t){var r=t[n];H.endsWith(n,Me)?e._transitionable.setTransition(n.slice(0,-Me.length),r):e._transitionable.setValue(n,r)}},t.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},t.prototype.hasTransition=function(){return this._transitioning.hasTransition()},t.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},t.prototype._validate=function(t,e){return H.emitValidationErrors(this,t.call(H.validateStyle,H.extend({value:e,style:{glyphs:!0,sprite:!0},styleSpec:H.default$8})))},t}(H.Evented);(Ee=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}}).prototype.getDash=function(t,e){var n=t.join(",")+String(e);return this.positions[n]||(this.positions[n]=this.addDash(t,e)),this.positions[n]},Ee.prototype.addDash=function(t,e){var n=this,r=e?7:0,i=2*r+1,o=128;if(this.nextRow+i>this.height)return H.warnOnce("LineAtlas out of space"),null;for(var a=0,s=0;s<t.length;s++)a+=t[s];for(var l=this.width/a,u=l/2,c=t.length%2==1,h=-r;h<=r;h++)for(var p=n.nextRow+r+h,f=n.width*p,d=c?-t[t.length-1]:0,m=t[0],g=1,y=0;y<this.width;y++){for(;m<y/l;)d=m,m+=t[g],c&&g===t.length-1&&(m+=t[0]),g++;var v=Math.abs(y-d*l),_=Math.abs(y-m*l),x=Math.min(v,_),b=g%2==1,w=void 0;if(e){var E=r?h/r*(u+1):0;if(b){var T=u-Math.abs(E);w=Math.sqrt(x*x+T*T)}else w=u-Math.sqrt(x*x+E*E)}else w=(b?1:-1)*x;n.data[3+4*(f+y)]=Math.max(0,Math.min(255,w+o))}var S={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:a};return this.nextRow+=i,this.dirty=!0,S},Ee.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.RGBA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,this.data))},(Te=function(t,e){var n=this;this.workerPool=t,this.actors=[],this.currentActor=0,this.id=H.uniqueId();for(var r=this.workerPool.acquire(this.id),i=0;i<r.length;i++){var o=r[i],a=new Te.Actor(o,e,n.id);a.name="Worker "+i,n.actors.push(a)}}).prototype.broadcast=function(n,r,t){t=t||function(){},H.asyncAll(this.actors,function(t,e){t.send(n,r,e)},t)},Te.prototype.send=function(t,e,n,r){return("number"!=typeof r||isNaN(r))&&(r=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[r].send(t,e,n),r},Te.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},Te.Actor=H.default$10,(Se=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,90<this.lat||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}).prototype.wrap=function(){return new Se(H.wrap(this.lng,-180,180),this.lat)},Se.prototype.toArray=function(){return[this.lng,this.lat]},Se.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Se.prototype.toBounds=function(t){var e=360*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return new Ce(new Se(this.lng-n,this.lat-e),new Se(this.lng+n,this.lat+e))},Se.convert=function(t){if(t instanceof Se)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Se(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Se(Number(t.lng),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")},(Ce=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}).prototype.setNorthEast=function(t){return this._ne=t instanceof Se?new Se(t.lng,t.lat):Se.convert(t),this},Ce.prototype.setSouthWest=function(t){return this._sw=t instanceof Se?new Se(t.lng,t.lat):Se.convert(t),this},Ce.prototype.extend=function(t){var e,n,r=this._sw,i=this._ne;if(t instanceof Se)n=e=t;else{if(!(t instanceof Ce))return Array.isArray(t)?t.every(Array.isArray)?this.extend(Ce.convert(t)):this.extend(Se.convert(t)):this;if(e=t._sw,n=t._ne,!e||!n)return this}return r||i?(r.lng=Math.min(e.lng,r.lng),r.lat=Math.min(e.lat,r.lat),i.lng=Math.max(n.lng,i.lng),i.lat=Math.max(n.lat,i.lat)):(this._sw=new Se(e.lng,e.lat),this._ne=new Se(n.lng,n.lat)),this},Ce.prototype.getCenter=function(){return new Se((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Ce.prototype.getSouthWest=function(){return this._sw},Ce.prototype.getNorthEast=function(){return this._ne},Ce.prototype.getNorthWest=function(){return new Se(this.getWest(),this.getNorth())},Ce.prototype.getSouthEast=function(){return new Se(this.getEast(),this.getSouth())},Ce.prototype.getWest=function(){return this._sw.lng},Ce.prototype.getSouth=function(){return this._sw.lat},Ce.prototype.getEast=function(){return this._ne.lng},Ce.prototype.getNorth=function(){return this._ne.lat},Ce.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Ce.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Ce.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Ce.convert=function(t){return!t||t instanceof Ce?t:new Ce(t)},(Ae=function(t,e,n){this.bounds=Ce.convert(this.validateBounds(t)),this.minzoom=e||0,this.maxzoom=n||24}).prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},Ae.prototype.contains=function(t){var e={minX:Math.floor(this.lngX(this.bounds.getWest(),t.z)),minY:Math.floor(this.latY(this.bounds.getNorth(),t.z)),maxX:Math.ceil(this.lngX(this.bounds.getEast(),t.z)),maxY:Math.ceil(this.latY(this.bounds.getSouth(),t.z))};return t.x>=e.minX&&t.x<e.maxX&&t.y>=e.minY&&t.y<e.maxY},Ae.prototype.lngX=function(t,e){return(t+180)*(Math.pow(2,e)/360)},Ae.prototype.latY=function(t,e){var n=H.clamp(Math.sin(Math.PI/180*t),-.9999,.9999),r=Math.pow(2,e)/(2*Math.PI);return Math.pow(2,e-1)+.5*Math.log((1+n)/(1-n))*-r};var De,ze=function(i){function t(t,e,n,r){if(i.call(this),this.id=t,this.dispatcher=n,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,H.extend(this,H.pick(e,["url","scheme","tileSize"])),this._options=H.extend({type:"vector"},e),this._collectResourceTiming=e.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(r)}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),(t.prototype.constructor=t).prototype.load=function(){var n=this;this.fire(new H.Event("dataloading",{dataType:"source"})),r(this._options,this.map._transformRequest,function(t,e){t?n.fire(new H.ErrorEvent(t)):e&&(H.extend(n,e),e.bounds&&(n.tileBounds=new Ae(e.bounds,n.minzoom,n.maxzoom)),n.fire(new H.Event("data",{dataType:"source",sourceDataType:"metadata"})),n.fire(new H.Event("data",{dataType:"source",sourceDataType:"content"})))})},t.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},t.prototype.onAdd=function(t){this.map=t,this.load()},t.prototype.serialize=function(){return H.extend({},this._options)},t.prototype.loadTile=function(n,r){function t(t,e){return n.aborted?r(null):t?r(t):(e&&e.resourceTiming&&(n.resourceTiming=e.resourceTiming),this.map._refreshExpiredTiles&&n.setExpiryData(e),n.loadVectorData(e,this.map.painter),r(null),void(n.reloadCallback&&(this.loadTile(n,n.reloadCallback),n.reloadCallback=null)))}var e=ge(n.tileID.canonical.url(this.tiles,this.scheme),this.url),i={request:this.map._transformRequest(e,H.ResourceType.Tile),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:H.default$3.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};i.request.collectResourceTiming=this._collectResourceTiming,n.workerID===undefined||"expired"===n.state?n.workerID=this.dispatcher.send("loadTile",i,t.bind(this)):"loading"===n.state?n.reloadCallback=r:this.dispatcher.send("reloadTile",i,t.bind(this),n.workerID)},t.prototype.abortTile=function(t){this.dispatcher.send("abortTile",{uid:t.uid,type:this.type,source:this.id},undefined,t.workerID)},t.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},undefined,t.workerID)},t.prototype.hasTransition=function(){return!1},t}(H.Evented),Pe=function(i){function t(t,e,n,r){i.call(this),this.id=t,this.dispatcher=n,this.setEventedParent(r),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=H.extend({},e),H.extend(this,H.pick(e,["url","scheme","tileSize"]))}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),(t.prototype.constructor=t).prototype.load=function(){var n=this;this.fire(new H.Event("dataloading",{dataType:"source"})),r(this._options,this.map._transformRequest,function(t,e){t?n.fire(new H.ErrorEvent(t)):e&&(H.extend(n,e),e.bounds&&(n.tileBounds=new Ae(e.bounds,n.minzoom,n.maxzoom)),n.fire(new H.Event("data",{dataType:"source",sourceDataType:"metadata"})),n.fire(new H.Event("data",{dataType:"source",sourceDataType:"content"})))})},t.prototype.onAdd=function(t){this.map=t,this.load()},t.prototype.serialize=function(){return H.extend({},this._options)},t.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},t.prototype.loadTile=function(i,o){var a=this,t=ge(i.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);i.request=H.getImage(this.map._transformRequest(t,H.ResourceType.Tile),function(t,e){if(delete i.request,i.aborted)i.state="unloaded",o(null);else if(t)i.state="errored",o(t);else if(e){a.map._refreshExpiredTiles&&i.setExpiryData(e),delete e.cacheControl,delete e.expires;var n=a.map.painter.context,r=n.gl;i.texture=a.map.painter.getTileTexture(e.width),i.texture?i.texture.update(e,{useMipmap:!0}):(i.texture=new H.default$5(n,e,r.RGBA,{useMipmap:!0}),i.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE,r.LINEAR_MIPMAP_NEAREST),n.extTextureFilterAnisotropic&&r.texParameterf(r.TEXTURE_2D,n.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,n.extTextureFilterAnisotropicMax)),i.state="loaded",o(null)}})},t.prototype.abortTile=function(t,e){t.request&&(t.request.abort(),delete t.request),e()},t.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},t.prototype.hasTransition=function(){return!1},t}(H.Evented),Le=function(i){function t(t,e,n,r){i.call(this,t,e,n,r),this.type="raster-dem",this.maxzoom=22,this._options=H.extend({},e),this.encoding=e.encoding||"mapbox"}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),(t.prototype.constructor=t).prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},t.prototype.loadTile=function(i,o){function t(t,e){if(delete i.request,i.aborted)i.state="unloaded",o(null);else if(t)i.state="errored",o(t);else if(e){this.map._refreshExpiredTiles&&i.setExpiryData(e),delete e.cacheControl,delete e.expires;var n=H.default$3.getImageData(e),r={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:n,encoding:this.encoding};i.workerID&&"expired"!==i.state||(i.workerID=this.dispatcher.send("loadDEMTile",r,a.bind(this)))}}function a(t,e){t&&(i.state="errored",o(t)),e&&(i.dem=e,i.needsHillshadePrepare=!0,i.state="loaded",o(null))}var e=ge(i.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);i.request=H.getImage(this.map._transformRequest(e,H.ResourceType.Tile),t.bind(this)),i.neighboringTiles=this._getNeighboringTiles(i.tileID)},t.prototype._getNeighboringTiles=function(t){var e=t.canonical,n=Math.pow(2,e.z),r=(e.x-1+n)%n,i=0===e.x?t.wrap-1:t.wrap,o=(e.x+1+n)%n,a=e.x+1===n?t.wrap+1:t.wrap,s={};return s[new H.OverscaledTileID(t.overscaledZ,i,e.z,r,e.y).key]={backfilled:!1},s[new H.OverscaledTileID(t.overscaledZ,a,e.z,o,e.y).key]={backfilled:!1},0<e.y&&(s[new H.OverscaledTileID(t.overscaledZ,i,e.z,r,e.y-1).key]={backfilled:!1},s[new H.OverscaledTileID(t.overscaledZ,t.wrap,e.z,e.x,e.y-1).key]={backfilled:!1},s[new H.OverscaledTileID(t.overscaledZ,a,e.z,o,e.y-1).key]={backfilled:!1}),e.y+1<n&&(s[new H.OverscaledTileID(t.overscaledZ,i,e.z,r,e.y+1).key]={backfilled:!1},s[new H.OverscaledTileID(t.overscaledZ,t.wrap,e.z,e.x,e.y+1).key]={backfilled:!1},s[new H.OverscaledTileID(t.overscaledZ,a,e.z,o,e.y+1).key]={backfilled:!1}),s},t.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",this.dispatcher.send("removeDEMTile",{uid:t.uid,source:this.id},undefined,t.workerID)},t}(Pe),Oe=function(o){function t(t,e,n,r){o.call(this),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this.dispatcher=n,this.setEventedParent(r),this._data=e.data,this._options=H.extend({},e),this._collectResourceTiming=e.collectResourceTiming,this._resourceTiming=[],e.maxzoom!==undefined&&(this.maxzoom=e.maxzoom),e.type&&(this.type=e.type),e.attribution&&(this.attribution=e.attribution);var i=H.default$11/this.tileSize;this.workerOptions=H.extend({source:this.id,cluster:e.cluster||!1,geojsonVtOptions:{buffer:(e.buffer!==undefined?e.buffer:128)*i,tolerance:(e.tolerance!==undefined?e.tolerance:.375)*i,extent:H.default$11,maxZoom:this.maxzoom,lineMetrics:e.lineMetrics||!1},superclusterOptions:{maxZoom:e.clusterMaxZoom!==undefined?Math.min(e.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:H.default$11,radius:(e.clusterRadius||50)*i,log:!1}},e.workerOptions)}return o&&(t.__proto__=o),t.prototype=Object.create(o&&o.prototype),(t.prototype.constructor=t).prototype.load=function(){var n=this;this.fire(new H.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(t){if(t)n.fire(new H.ErrorEvent(t));else{var e={dataType:"source",sourceDataType:"metadata"};n._collectResourceTiming&&n._resourceTiming&&0<n._resourceTiming.length&&(e.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new H.Event("data",e))}})},t.prototype.onAdd=function(t){this.map=t,this.load()},t.prototype.setData=function(t){var n=this;return this._data=t,this.fire(new H.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(t){if(t)return n.fire(new H.ErrorEvent(t));var e={dataType:"source",sourceDataType:"content"};n._collectResourceTiming&&n._resourceTiming&&0<n._resourceTiming.length&&(e.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new H.Event("data",e))}),this},t.prototype._updateWorkerData=function(n){var r=this,i=H.extend({},this.workerOptions),t=this._data;"string"==typeof t?(i.request=this.map._transformRequest(H.default$3.resolveURL(t),H.ResourceType.Source),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(t),this.workerID=this.dispatcher.send(this.type+".loadData",i,function(t,e){r._removed||e&&e.abandoned||(r._loaded=!0,e&&e.resourceTiming&&e.resourceTiming[r.id]&&(r._resourceTiming=e.resourceTiming[r.id].slice(0)),r.dispatcher.send(r.type+".coalesce",{source:i.source},null,r.workerID),n(t))},this.workerID)},t.prototype.loadTile=function(n,r){var i=this,o=n.workerID===undefined?"loadTile":"reloadTile",t={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:H.default$3.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};n.workerID=this.dispatcher.send(o,t,function(t,e){return n.unloadVectorData(),n.aborted?r(null):t?r(t):(n.loadVectorData(e,i.map.painter,"reloadTile"===o),r(null))},this.workerID)},t.prototype.abortTile=function(t){t.aborted=!0},t.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},null,t.workerID)},t.prototype.onRemove=function(){this._removed=!0,this.dispatcher.send("removeSource",{type:this.type,source:this.id},null,this.workerID)},t.prototype.serialize=function(){return H.extend({},this._options,{type:this.type,data:this._data})},t.prototype.hasTransition=function(){return!1},t}(H.Evented);(De=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}).prototype.bind=function(t,e,n,r,i,o,a,s){var l=this;this.context=t;for(var u=this.boundPaintVertexBuffers.length!==r.length,c=0;!u&&c<r.length;c++)l.boundPaintVertexBuffers[c]!==r[c]&&(u=!0);var h=!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==n||u||this.boundIndexBuffer!==i||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==s;!t.extVertexArrayObject||h?this.freshBind(e,n,r,i,o,a,s):(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind())},De.prototype.freshBind=function(t,e,n,r,i,o,a){var s,l=t.numAttributes,u=this.context,c=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=u.currentNumAttributes||0;for(var h=l;h<s;h++)H.default$2(0!==h),c.disableVertexAttribArray(h)}e.enableAttributes(c,t);for(var p=0,f=n;p<f.length;p+=1){f[p].enableAttributes(c,t)}o&&o.enableAttributes(c,t),a&&a.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,i);for(var d=0,m=n;d<m.length;d+=1){var g=m[d];g.bind(),g.setVertexAttribPointers(c,t,i)}o&&(o.bind(),o.setVertexAttribPointers(c,t,i)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,t,i)),u.currentNumAttributes=l},De.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Re,Be,Fe=function(i){function t(t,e,n,r){i.call(this),this.id=t,this.dispatcher=n,this.coordinates=e.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(r),this.options=e}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),(t.prototype.constructor=t).prototype.load=function(){var n=this;this.fire(new H.Event("dataloading",{dataType:"source"})),this.url=this.options.url,H.getImage(this.map._transformRequest(this.url,H.ResourceType.Image),function(t,e){t?n.fire(new H.ErrorEvent(t)):e&&(n.image=H.default$3.getImageData(e),n._finishLoading())})},t.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new H.Event("data",{dataType:"source",sourceDataType:"metadata"})))},t.prototype.onAdd=function(t){this.map=t,this.load()},t.prototype.setCoordinates=function(t){this.coordinates=t;var e=this.map,n=t.map(function(t){return e.transform.locationCoordinate(Se.convert(t)).zoomTo(0)}),r=this.centerCoord=H.getCoordinatesCenter(n);r.column=Math.floor(r.column),r.row=Math.floor(r.row),this.tileID=new H.CanonicalTileID(r.zoom,r.column,r.row),this.minzoom=this.maxzoom=r.zoom;var i=n.map(function(t){var e=t.zoomTo(r.zoom);return new H["default"](Math.round((e.column-r.column)*H.default$11),Math.round((e.row-r.row)*H.default$11))});return this._boundsArray=new H.RasterBoundsArray,this._boundsArray.emplaceBack(i[0].x,i[0].y
,0,0),this._boundsArray.emplaceBack(i[1].x,i[1].y,H.default$11,0),this._boundsArray.emplaceBack(i[3].x,i[3].y,0,H.default$11),this._boundsArray.emplaceBack(i[2].x,i[2].y,H.default$11,H.default$11),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new H.Event("data",{dataType:"source",sourceDataType:"content"})),this},t.prototype.prepare=function(){var t=this;if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,H.default$12.members)),this.boundsVAO||(this.boundsVAO=new De),this.texture||(this.texture=new H.default$5(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),t.tiles){var i=t.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=t.texture)}}},t.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t).buckets={}:t.state="errored",e(null)},t.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},t.prototype.hasTransition=function(){return!1},t}(H.Evented),Ne=function(i){function t(t,e,n,r){i.call(this,t,e,n,r),this.roundZoom=!0,this.type="video",this.options=e}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),(t.prototype.constructor=t).prototype.load=function(){var n=this,t=this.options;this.urls=[];for(var e=0,r=t.urls;e<r.length;e+=1){var i=r[e];n.urls.push(n.map._transformRequest(i,H.ResourceType.Source).url)}H.getVideo(this.urls,function(t,e){t?n.fire(new H.ErrorEvent(t)):e&&(n.video=e,n.video.loop=!0,n.video.addEventListener("playing",function(){n.map._rerender()}),n.map&&n.video.play(),n._finishLoading())})},t.prototype.getVideo=function(){return this.video},t.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},t.prototype.prepare=function(){var t=this;if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,H.default$12.members)),this.boundsVAO||(this.boundsVAO=new De),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new H.default$5(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),t.tiles){var i=t.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=t.texture)}}},t.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},t.prototype.hasTransition=function(){return this.video&&!this.video.paused},t}(Fe),je=function(i){function t(t,e,n,r){i.call(this,t,e,n,r),e.coordinates?Array.isArray(e.coordinates)&&4===e.coordinates.length&&!e.coordinates.some(function(t){return!Array.isArray(t)||2!==t.length||t.some(function(t){return"number"!=typeof t})})||this.fire(new H.ErrorEvent(new H.default$13("sources."+t,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new H.ErrorEvent(new H.default$13("sources."+t,null,'missing required property "coordinates"'))),e.animate&&"boolean"!=typeof e.animate&&this.fire(new H.ErrorEvent(new H.default$13("sources."+t,null,'optional "animate" property must be a boolean value'))),e.canvas?"string"==typeof e.canvas||e.canvas instanceof H.default$1.HTMLCanvasElement||this.fire(new H.ErrorEvent(new H.default$13("sources."+t,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new H.ErrorEvent(new H.default$13("sources."+t,null,'missing required property "canvas"'))),this.options=e,this.animate=e.animate===undefined||e.animate}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),(t.prototype.constructor=t).prototype.load=function(){this.canvas||(this.canvas=this.options.canvas instanceof H.default$1.HTMLCanvasElement?this.options.canvas:H.default$1.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new H.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map._rerender()},this.pause=function(){this._playing=!1},this._finishLoading())},t.prototype.getCanvas=function(){return this.canvas},t.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},t.prototype.onRemove=function(){this.pause()},t.prototype.prepare=function(){var t=this,e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context,r=n.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,H.default$12.members)),this.boundsVAO||(this.boundsVAO=new De),this.texture?e?this.texture.update(this.canvas):this._playing&&(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.canvas)):(this.texture=new H.default$5(n,this.canvas,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE)),t.tiles){var o=t.tiles[i];"loaded"!==o.state&&(o.state="loaded",o.texture=t.texture)}}},t.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},t.prototype.hasTransition=function(){return this._playing},t.prototype._hasInvalidDimensions=function(){for(var t=this,e=0,n=[t.canvas.width,t.canvas.height];e<n.length;e+=1){var r=n[e];if(isNaN(r)||r<=0)return!0}return!1},t}(Fe),Ve={vector:ze,raster:Pe,"raster-dem":Le,geojson:Oe,video:Ne,image:Fe,canvas:je},$e=function(t,e,n,r){var i=new Ve[e.type](t,e,n,r);if(i.id!==t)throw new Error("Expected Source id to be "+t+" instead of "+i.id);return H.bindAll(["load","abort","unload","serialize","prepare"],i),i},qe=function(t){return Ve[t]},Ue=function(t,e){Ve[t]=e};(Re=function(t,e){this.max=t,this.onRemove=e,this.reset()}).prototype.reset=function(){var t=this;for(var e in t.data)for(var n=0,r=t.data[e];n<r.length;n+=1){var i=r[n];i.timeout&&clearTimeout(i.timeout),t.onRemove(i.value)}return this.data={},this.order=[],this},Re.prototype.add=function(t,e,n){var r=this,i=t.wrapped().key;this.data[i]===undefined&&(this.data[i]=[]);var o={value:e,timeout:undefined};if(n!==undefined&&(o.timeout=setTimeout(function(){r.remove(t,o)},n)),this.data[i].push(o),this.order.push(i),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},Re.prototype.has=function(t){return t.wrapped().key in this.data},Re.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},Re.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},Re.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},Re.prototype.remove=function(t,e){if(!this.has(t))return this;var n=t.wrapped().key,r=e===undefined?0:this.data[n].indexOf(e),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this},Re.prototype.setMaxSize=function(t){var e=this;for(this.max=t;this.order.length>this.max;){var n=e._getAndRemoveByKey(e.order[0]);n&&e.onRemove(n)}return this},(Be=function(t,e,n){var r=(this.context=t).gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}).prototype.unbindVAO=function(){this.context.extVertexArrayObject&&this.context.bindVertexArrayOES.set(null)},Be.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Be.prototype.updateData=function(t){var e=this.context.gl;H.default$2(this.dynamicDraw),this.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},Be.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)};var He,We,Ge,Ze,Ye,Xe,Ke,Je,Qe,tn,en,nn,rn,on,an,sn,ln,un,cn,hn,pn,fn,dn,mn,gn,yn,vn,_n,xn={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};(He=function(t,e,n,r){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=r;var i=(this.context=t).gl;this.buffer=i.createBuffer(),t.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}).prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},He.prototype.updateData=function(t){H.default$2(t.length===this.length);var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},He.prototype.enableAttributes=function(t,e){for(var n=this,r=0;r<this.attributes.length;r++){var i=n.attributes[r],o=e.attributes[i.name];o!==undefined&&t.enableVertexAttribArray(o)}},He.prototype.setVertexAttribPointers=function(t,e,n){for(var r=this,i=0;i<this.attributes.length;i++){var o=r.attributes[i],a=e.attributes[o.name];a!==undefined&&t.vertexAttribPointer(a,o.components,t[xn[o.type]],!1,r.itemSize,o.offset+r.itemSize*(n||0))}},He.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)},(We=function(t){this.context=t,this.current=H.default$9.transparent}).prototype.get=function(){return this.current},We.prototype.set=function(t){var e=this.current;t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a||(this.context.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t)},(Ge=function(t){this.context=t,this.current=1}).prototype.get=function(){return this.current},Ge.prototype.set=function(t){this.current!==t&&(this.context.gl.clearDepth(t),this.current=t)},(Ze=function(t){this.context=t,this.current=0}).prototype.get=function(){return this.current},Ze.prototype.set=function(t){this.current!==t&&(this.context.gl.clearStencil(t),this.current=t)},(Ye=function(t){this.context=t,this.current=[!0,!0,!0,!0]}).prototype.get=function(){return this.current},Ye.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]||(this.context.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t)},(Xe=function(t){this.context=t,this.current=!0}).prototype.get=function(){return this.current},Xe.prototype.set=function(t){this.current!==t&&(this.context.gl.depthMask(t),this.current=t)},(Ke=function(t){this.context=t,this.current=255}).prototype.get=function(){return this.current},Ke.prototype.set=function(t){this.current!==t&&(this.context.gl.stencilMask(t),this.current=t)},(Je=function(t){this.context=t,this.current={func:t.gl.ALWAYS,ref:0,mask:255}}).prototype.get=function(){return this.current},Je.prototype.set=function(t){var e=this.current;t.func===e.func&&t.ref===e.ref&&t.mask===e.mask||(this.context.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t)},(Qe=function(t){this.context=t;var e=this.context.gl;this.current=[e.KEEP,e.KEEP,e.KEEP]}).prototype.get=function(){return this.current},Qe.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]||(this.context.gl.stencilOp(t[0],t[1],t[2]),this.current=t)},(tn=function(t){this.context=t,this.current=!1}).prototype.get=function(){return this.current},tn.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t}},(en=function(t){this.context=t,this.current=[0,1]}).prototype.get=function(){return this.current},en.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]||(this.context.gl.depthRange(t[0],t[1]),this.current=t)},(nn=function(t){this.context=t,this.current=!1}).prototype.get=function(){return this.current},nn.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t}},(rn=function(t){this.context=t,this.current=t.gl.LESS}).prototype.get=function(){return this.current},rn.prototype.set=function(t){this.current!==t&&(this.context.gl.depthFunc(t),this.current=t)},(on=function(t){this.context=t,this.current=!1}).prototype.get=function(){return this.current},on.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t}},(an=function(t){this.context=t;var e=this.context.gl;this.current=[e.ONE,e.ZERO]}).prototype.get=function(){return this.current},an.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]||(this.context.gl.blendFunc(t[0],t[1]),this.current=t)},(sn=function(t){this.context=t,this.current=H.default$9.transparent}).prototype.get=function(){return this.current},sn.prototype.set=function(t){var e=this.current;t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a||(this.context.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t)},(ln=function(t){this.context=t,this.current=null}).prototype.get=function(){return this.current},ln.prototype.set=function(t){this.current!==t&&(this.context.gl.useProgram(t),this.current=t)},(un=function(t){this.context=t,this.current=t.gl.TEXTURE0}).prototype.get=function(){return this.current},un.prototype.set=function(t){this.current!==t&&(this.context.gl.activeTexture(t),this.current=t)},(cn=function(t){this.context=t;var e=this.context.gl;this.current=[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}).prototype.get=function(){return this.current},cn.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]||(this.context.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t)},(hn=function(t){this.context=t,this.current=null}).prototype.get=function(){return this.current},hn.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t}},(pn=function(t){this.context=t,this.current=null}).prototype.get=function(){return this.current},pn.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t}},(fn=function(t){this.context=t,this.current=null}).prototype.get=function(){return this.current},fn.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t}},(dn=function(t){this.context=t,this.current=null}).prototype.get=function(){return this.current},dn.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t}},(mn=function(t){this.context=t,this.current=null}).prototype.get=function(){return this.current},mn.prototype.set=function(t){var e=this.context.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t},(gn=function(t){this.context=t,this.current=null}).prototype.get=function(){return this.current},gn.prototype.set=function(t){this.current!==t&&this.context.extVertexArrayObject&&(this.context.extVertexArrayObject.bindVertexArrayOES(t),this.current=t)},(yn=function(t){this.context=t,this.current=4}).prototype.get=function(){return this.current},yn.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t}},(vn=function(t){this.context=t,this.current=!1}).prototype.get=function(){return this.current},vn.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t}},(_n=function(t,e){this.context=t,this.current=null,this.parent=e}).prototype.get=function(){return this.current};var bn,wn=function(n){function t(t,e){n.call(this,t,e),this.dirty=!1}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),(t.prototype.constructor=t).prototype.set=function(t){if(this.dirty||this.current!==t){var e=this.context.gl;this.context.bindFramebuffer.set(this.parent),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},t.prototype.setDirty=function(){this.dirty=!0},t}(_n),En=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype.set=function(t){if(this.current!==t){var e=this.context.gl;this.context.bindFramebuffer.set(this.parent),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t}},e}(_n);(bn=function(t,e,n){this.context=t,this.width=e,this.height=n;var r=t.gl,i=this.framebuffer=r.createFramebuffer();this.colorAttachment=new wn(t,i),this.depthAttachment=new En(t,i)}).prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();e&&t.deleteTexture(e);var n=this.depthAttachment.get();n&&t.deleteRenderbuffer(n),t.deleteFramebuffer(this.framebuffer)};var Tn,Sn=519;(Tn=function(t,e,n){this.func=t,this.mask=e,this.range=n}).ReadOnly=!1,Tn.ReadWrite=!0,Tn.disabled=new Tn(Sn,Tn.ReadOnly,[0,1]);var Cn,An=519,In=7680;(Cn=function(t,e,n,r,i,o){this.test=t,this.ref=e,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o}).disabled=new Cn({func:An,mask:0},0,0,In,In,In);var Mn,kn,Dn=0,zn=1,Pn=771;(Mn=function(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n}).Replace=[zn,Dn],Mn.disabled=new Mn(Mn.Replace,H.default$9.transparent,[!1,!1,!1,!1]),Mn.unblended=new Mn(Mn.Replace,H.default$9.transparent,[!0,!0,!0,!0]),Mn.alphaBlended=new Mn([zn,Pn],H.default$9.transparent,[!0,!0,!0,!0]),(kn=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new We(this),this.clearDepth=new Ge(this),this.clearStencil=new Ze(this),this.colorMask=new Ye(this),this.depthMask=new Xe(this),this.stencilMask=new Ke(this),this.stencilFunc=new Je(this),this.stencilOp=new Qe(this),this.stencilTest=new tn(this),this.depthRange=new en(this),this.depthTest=new nn(this),this.depthFunc=new rn(this),this.blend=new on(this),this.blendFunc=new an(this),this.blendColor=new sn(this),this.program=new ln(this),this.activeTexture=new un(this),this.viewport=new cn(this),this.bindFramebuffer=new hn(this),this.bindRenderbuffer=new pn(this),this.bindTexture=new fn(this),this.bindVertexBuffer=new dn(this),this.bindElementBuffer=new mn(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new gn(this),this.pixelStoreUnpack=new yn(this),this.pixelStoreUnpackPremultiplyAlpha=new vn(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear")}).prototype.createIndexBuffer=function(t,e){return new Be(this,t,e)},kn.prototype.createVertexBuffer=function(t,e,n){return new He(this,t,e,n)},kn.prototype.createRenderbuffer=function(t,e,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),i},kn.prototype.createFramebuffer=function(t,e){return new bn(this,t,e)},kn.prototype.clear=function(t){var e=t.color,n=t.depth,r=this.gl,i=0;e&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(i|=r.DEPTH_BUFFER_BIT,this.clearDepth.set(n),this.depthMask.set(!0)),r.clear(i)},kn.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},kn.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},kn.prototype.setColorMode=function(t){H.default$14(t.blendFunction,Mn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)};var Ln,On,Rn=function(i){function v(t,e,n){var r=this;i.call(this),this.id=t,this.dispatcher=n,this.on("data",function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(r._sourceLoaded=!0),r._sourceLoaded&&!r._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(r.reload(),r.transform&&r.update(r.transform))}),this.on("error",function(){r._sourceErrored=!0}),this._source=$e(t,e,n,this),this._tiles={},this._cache=new Re(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._isIdRenderable=this._isIdRenderable.bind(this),this._coveredTiles={},this._state=new H.default$17}return i&&(v.__proto__=i),v.prototype=Object.create(i&&i.prototype),(v.prototype.constructor=v).prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},v.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},v.prototype.loaded=function(){var t=this;if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var e in t._tiles){var n=t._tiles[e];if("loaded"!==n.state&&"errored"!==n.state)return!1}return!0},v.prototype.getSource=function(){return this._source},v.prototype.pause=function(){this._paused=!0},v.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},v.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},v.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,function(){})},v.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,function(){})},v.prototype.serialize=function(){return this._source.serialize()},v.prototype.prepare=function(t){var e=this;for(var n in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),e._tiles)e._tiles[n].upload(t)},v.prototype.getIds=function(){var a=this,t=function(t,e){var n=a._tiles[t].tileID,r=a._tiles[e].tileID,i=new H["default"](n.canonical.x,n.canonical.y).rotate(a.transform.angle),o=new H["default"](r.canonical.x,r.canonical.y).rotate(a.transform.angle);return n.overscaledZ-r.overscaledZ||o.y-i.y||o.x-i.x};return Object.keys(this._tiles).map(Number).sort(t)},v.prototype.getRenderableIds=function(){return this.getIds().filter(this._isIdRenderable)},v.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0,{});return!!e&&this._isIdRenderable(e.tileID.key)},v.prototype._isIdRenderable=function(t){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]},v.prototype.reload=function(){var t=this;if(this._paused)this._shouldReloadOnResume=!0;else for(var e in this._cache.reset(),t._tiles)t._reloadTile(e,"reloading")},v.prototype._reloadTile=function(t,e){var n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))},v.prototype._tileLoaded=function(t,e,n,r){if(r)return t.state="errored",void(404!==r.status?this._source.fire(new H.ErrorEvent(r,{tile:t})):this.update(this.transform));t.timeAdded=H.default$3.now(),"expired"===n&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(e,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new H.Event("data",{dataType:"source",tile:t,coord:t.tileID})),this.map&&(this.map.painter.tileExtentVAO.vao=null)},v.prototype._backfillDEM=function(t){function e(t,e){t.needsHillshadePrepare=!0;var n=e.tileID.canonical.x-t.tileID.canonical.x,r=e.tileID.canonical.y-t.tileID.canonical.y,i=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0===r||1<Math.abs(r)||(1<Math.abs(n)&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,r),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}for(var n=this,r=this.getRenderableIds(),i=0;i<r.length;i++){var o=r[i];if(t.neighboringTiles&&t.neighboringTiles[o]){var a=n.getTileByID(o);e(t,a),e(a,t)}}},v.prototype.getTile=function(t){return this.getTileByID(t.key)},v.prototype.getTileByID=function(t){return this._tiles[t]},v.prototype.getZoom=function(t){return t.zoom+t.scaleZoom(t.tileSize/this._source.tileSize)},v.prototype._findLoadedChildren=function(t,e,n){var r=this,i=!1;for(var o in r._tiles){var a=r._tiles[o];if(!(n[o]||!a.hasData()||a.tileID.overscaledZ<=t.overscaledZ||a.tileID.overscaledZ>e)){var s=Math.pow(2,a.tileID.canonical.z-t.canonical.z);if(Math.floor(a.tileID.canonical.x/s)===t.canonical.x&&Math.floor(a.tileID.canonical.y/s)===t.canonical.y)for(n[o]=a.tileID,i=!0;a&&a.tileID.overscaledZ-1>t.overscaledZ;){var l=a.tileID.scaledTo(a.tileID.overscaledZ-1);if(!l)break;(a=r._tiles[l.key])&&a.hasData()&&(delete n[o],n[l.key]=l)}}}return i},v.prototype.findLoadedParent=function(t,e,n){for(var r=this,i=t.overscaledZ-1;e<=i;i--){var o=t.scaledTo(i);if(!o)return;var a=String(o.key),s=r._tiles[a];if(s&&s.hasData())return n[a]=o,s;if(r._cache.has(o))return n[a]=o,r._cache.get(o)}},v.prototype.updateCacheSize=function(t){var e=(Math.ceil(t.width/this._source.tileSize)+1)*(Math.ceil(t.height/this._source.tileSize)+1),n=5,r=Math.floor(e*n),i="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(i)},v.prototype.handleWrapJump=function(t){var e=this,n=(t-(this._prevLng===undefined?t:this._prevLng))/360,r=Math.round(n);if(this._prevLng=t,r){var i={};for(var o in e._tiles){var a=e._tiles[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+r),i[a.tileID.key]=a}for(var s in this._tiles=i,e._timers)clearTimeout(e._timers[s]),delete e._timers[s];for(var l in e._tiles){var u=e._tiles[l];e._setTileReloadTimer(l,u)}}},v.prototype.update=function(t){var e=this;if(this.transform=t,this._sourceLoaded&&!this._paused){var n;this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?n=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(t){return new H.OverscaledTileID(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y)}):(n=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(n=n.filter(function(t){return e._source.hasTile(t)}))):n=[];var r,i=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(t)),o=Math.max(i-v.maxOverzooming,this._source.minzoom),a=Math.max(i+v.maxUnderzooming,this._source.minzoom),s=this._updateRetainedTiles(n,i),l={};if(_(this._source.type))for(var u=Object.keys(s),c=0;c<u.length;c++){var h=u[c],p=s[h];H.default$2(p.key===+h);var f=e._tiles[h];if(f&&("undefined"==typeof f.fadeEndTime||f.fadeEndTime>=H.default$3.now())){e._findLoadedChildren(p,a,s)&&(s[h]=p);var d=e.findLoadedParent(p,o,l);d&&e._addTile(d.tileID)}}for(r in l)s[r]||(e._coveredTiles[r]=!0);for(r in l)s[r]=l[r];for(var m=H.keysDifference(this._tiles,s),g=0;g<m.length;g++)e._removeTile(m[g])}},v.prototype._updateRetainedTiles=function(t,e){for(var n=this,r={},i={},o=Math.max(e-v.maxOverzooming,this._source.minzoom),a=Math.max(e+v.maxUnderzooming,this._source.minzoom),s=0;s<t.length;s++){var l=t[s],u=n._addTile(l),c=!1;if(u.hasData())r[l.key]=l;else{c=u.wasRequested(),r[l.key]=l;var h=!0;if(e+1>n._source.maxzoom){var p=l.children(n._source.maxzoom)[0],f=n.getTile(p);f&&f.hasData()?r[p.key]=p:h=!1}else{n._findLoadedChildren(l,a,r);for(var d=l.children(n._source.maxzoom),m=0;m<d.length;m++)if(!r[d[m].key]){h=!1;break}}if(!h)for(var g=l.overscaledZ-1;o<=g;--g){var y=l.scaledTo(g);if(i[y.key])break;if(i[y.key]=!0,!(u=n.getTile(y))&&c&&(u=n._addTile(y)),u&&(r[y.key]=y,c=u.wasRequested(),u.hasData()))break}}}return r},v.prototype._addTile=function(t){var e=this._tiles[t.key];if(e)return e;(e=this._cache.getAndRemove(t))&&(this._setTileReloadTimer(t.key,e),e.tileID=t,this._state.initializeTileState(e,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,e)));var n=Boolean(e);return n||(e=new H.default$15(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(e,this._tileLoaded.bind(this,e,t.key,e.state))),e?(e.uses++,this._tiles[t.key]=e,n||this._source.fire(new H.Event("dataloading",{tile:e,coord:e.tileID,dataType:"source"})),e):null},v.prototype._setTileReloadTimer=function(t,e){var n=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var r=e.getExpiryTimeout();r&&(this._timers[t]=setTimeout(function(){n._reloadTile(t,"expired"),delete n._timers[t]},r))},v.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),0<e.uses||(e.hasData()?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},v.prototype.clearTiles=function(){var t=this;for(var e in this._shouldReloadOnResume=!1,this._paused=!1,t._tiles)t._removeTile(e);this._cache.reset()},v.prototype.tilesIn=function(t,e){for(var n=this,r=[],i=this.getIds(),o=Infinity,a=Infinity,s=-Infinity,l=-Infinity,u=t[0].zoom,c=0;c<t.length;c++){var h=t[c];o=Math.min(o,h.column),a=Math.min(a,h.row),s=Math.max(s,h.column),l=Math.max(l,h.row)}for(var p=0;p<i.length;p++){var f=n._tiles[i[p]],d=f.tileID,m=Math.pow(2,n.transform.zoom-f.tileID.overscaledZ),g=e*f.queryPadding*H.default$11/f.tileSize/m,y=[x(d,new H.default$16(o,a,u)),x(d,new H.default$16(s,l,u))];if(y[0].x-g<H.default$11&&y[0].y-g<H.default$11&&0<=y[1].x+g&&0<=y[1].y+g){for(var v=[],_=0;_<t.length;_++)v.push(x(d,t[_]));r.push({tile:f,tileID:d,queryGeometry:[v],scale:m})}}return r},v.prototype.getVisibleCoordinates=function(){for(var e=this,t=this.getRenderableIds().map(function(t){return e._tiles[t].tileID}),n=0,r=t;n<r.length;n+=1){var i=r[n];i.posMatrix=e.transform.calculatePosMatrix(i.toUnwrapped())}return t},v.prototype.hasTransition=function(){var t=this;if(this._source.hasTransition())return!0;if(_(this._source.type))for(var e in t._tiles){var n=t._tiles[e];if(n.fadeEndTime!==undefined&&n.fadeEndTime>=H.default$3.now())return!0}return!1},v.prototype.setFeatureState=function(t,e,n){t=t||"_geojsonTileLayer",this._state.updateState(t,e,n)},v.prototype.getFeatureState=function(t,e){return t=t||"_geojsonTileLayer",this._state.getState(t,e)},v}(H.Evented);Rn.maxOverzooming=10,Rn.maxUnderzooming=3,(Ln=function(){this.active={}}).prototype.acquire=function(t){var e=this;if(!this.workers){var n=Pi.workerCount;for(H.default$2("number"==typeof n&&n<Infinity),this.workers=[];this.workers.length<n;)e.workers.push(new i)}return this.active[t]=!0,this.workers.slice()},Ln.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)};var Bn,Fn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};(Bn=function(t,e,n){var r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0}).prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Bn.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),
this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Bn.prototype.insertCircle=function(t,e,n,r){this._forEachCell(e-r,n-r,e+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(r)},Bn.prototype._insertBoxCell=function(t,e,n,r,i,o){this.boxCells[i].push(o)},Bn.prototype._insertCircleCell=function(t,e,n,r,i,o){this.circleCells[i].push(o)},Bn.prototype._query=function(t,e,n,r,i,o){var a=this;if(n<0||t>this.width||r<0||e>this.height)return!i&&[];var s=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var l=0;l<this.boxKeys.length;l++)s.push({key:a.boxKeys[l],x1:a.bboxes[4*l],y1:a.bboxes[4*l+1],x2:a.bboxes[4*l+2],y2:a.bboxes[4*l+3]});for(var u=0;u<this.circleKeys.length;u++){var c=a.circles[3*u],h=a.circles[3*u+1],p=a.circles[3*u+2];s.push({key:a.circleKeys[u],x1:c-p,y1:h-p,x2:c+p,y2:h+p})}return o?s.filter(o):s}var f={hitTest:i,seenUids:{box:{},circle:{}}};return this._forEachCell(t,e,n,r,this._queryCell,s,f,o),i?0<s.length:s},Bn.prototype._queryCircle=function(t,e,n,r,i){var o=t-n,a=t+n,s=e-n,l=e+n;if(a<0||o>this.width||l<0||s>this.height)return!r&&[];var u=[],c={hitTest:r,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}};return this._forEachCell(o,s,a,l,this._queryCellCircle,u,c,i),r?0<u.length:u},Bn.prototype.query=function(t,e,n,r,i){return this._query(t,e,n,r,!1,i)},Bn.prototype.hitTest=function(t,e,n,r,i){return this._query(t,e,n,r,!0,i)},Bn.prototype.hitTestCircle=function(t,e,n,r){return this._queryCircle(t,e,n,!0,r)},Bn.prototype._queryCell=function(t,e,n,r,i,o,a,s){var l=this,u=a.seenUids,c=this.boxCells[i];if(null!==c)for(var h=this.bboxes,p=0,f=c;p<f.length;p+=1){var d=f[p];if(!u.box[d]){u.box[d]=!0;var m=4*d;if(t<=h[m+2]&&e<=h[m+3]&&n>=h[m+0]&&r>=h[m+1]&&(!s||s(l.boxKeys[d]))){if(a.hitTest)return o.push(!0),!0;o.push({key:l.boxKeys[d],x1:h[m],y1:h[m+1],x2:h[m+2],y2:h[m+3]})}}}var g=this.circleCells[i];if(null!==g)for(var y=this.circles,v=0,_=g;v<_.length;v+=1){var x=_[v];if(!u.circle[x]){u.circle[x]=!0;var b=3*x;if(l._circleAndRectCollide(y[b],y[b+1],y[b+2],t,e,n,r)&&(!s||s(l.circleKeys[x]))){if(a.hitTest)return o.push(!0),!0;var w=y[b],E=y[b+1],T=y[b+2];o.push({key:l.circleKeys[x],x1:w-T,y1:E-T,x2:w+T,y2:E+T})}}}},Bn.prototype._queryCellCircle=function(t,e,n,r,i,o,a,s){var l=this,u=a.circle,c=a.seenUids,h=this.boxCells[i];if(null!==h)for(var p=this.bboxes,f=0,d=h;f<d.length;f+=1){var m=d[f];if(!c.box[m]){c.box[m]=!0;var g=4*m;if(l._circleAndRectCollide(u.x,u.y,u.radius,p[g+0],p[g+1],p[g+2],p[g+3])&&(!s||s(l.boxKeys[m])))return o.push(!0),!0}}var y=this.circleCells[i];if(null!==y)for(var v=this.circles,_=0,x=y;_<x.length;_+=1){var b=x[_];if(!c.circle[b]){c.circle[b]=!0;var w=3*b;if(l._circlesCollide(v[w],v[w+1],v[w+2],u.x,u.y,u.radius)&&(!s||s(l.circleKeys[b])))return o.push(!0),!0}}},Bn.prototype._forEachCell=function(t,e,n,r,i,o,a,s){for(var l=this,u=this._convertToXCellCoord(t),c=this._convertToYCellCoord(e),h=this._convertToXCellCoord(n),p=this._convertToYCellCoord(r),f=u;f<=h;f++)for(var d=c;d<=p;d++){var m=l.xCellCount*d+f;if(i.call(l,t,e,n,r,m,o,a,s))return}},Bn.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},Bn.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},Bn.prototype._circlesCollide=function(t,e,n,r,i,o){var a=r-t,s=i-e,l=n+o;return a*a+s*s<l*l},Bn.prototype._circleAndRectCollide=function(t,e,n,r,i,o,a){var s=(o-r)/2,l=Math.abs(t-(r+s));if(s+n<l)return!1;var u=(a-i)/2,c=Math.abs(e-(i+u));if(u+n<c)return!1;if(l<=s||c<=u)return!0;var h=l-s,p=c-u;return h*h+p*p<=n*n};var Nn,jn=H.default$19.layout,Vn=new Float32Array([-Infinity,-Infinity,0,-Infinity,-Infinity,0,-Infinity,-Infinity,0,-Infinity,-Infinity,0]),$n=100;(Nn=function(t,e,n){void 0===e&&(e=new Bn(t.width+2*$n,t.height+2*$n,25)),void 0===n&&(n=new Bn(t.width+2*$n,t.height+2*$n,25)),this.transform=t,this.grid=e,this.ignoredGrid=n,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+$n,this.screenBottomBoundary=t.height+$n,this.gridRightBoundary=t.width+2*$n,this.gridBottomBoundary=t.height+2*$n}).prototype.placeCollisionBox=function(t,e,n,r,i){var o=this.projectAndGetPerspectiveRatio(r,t.anchorPointX,t.anchorPointY),a=n*o.perspectiveRatio,s=t.x1*a+o.point.x,l=t.y1*a+o.point.y,u=t.x2*a+o.point.x,c=t.y2*a+o.point.y;return!this.isInsideGrid(s,l,u,c)||!e&&this.grid.hitTest(s,l,u,c,i)?{box:[],offscreen:!1}:{box:[s,l,u,c],offscreen:this.isOffscreen(s,l,u,c)}},Nn.prototype.approximateTileDistance=function(t,e,n,r,i){var o=i?1:r/this.pitchfactor,a=t.lastSegmentViewportDistance*n;return t.prevTileDistance+a+(o-1)*a*Math.abs(Math.sin(e))},Nn.prototype.placeCollisionCircles=function(t,e,n,r,i,o,a,s,l,u,c,h,p,f){var d=this,m=[],g=this.projectAnchor(u,o.anchorX,o.anchorY),y={},v=l/24,_=o.lineOffsetX*l,x=o.lineOffsetY*l,b=new H["default"](o.anchorX,o.anchorY),w=G(v,s,_,x,!1,W(b,c).point,b,o,a,c,y,!0),E=!1,T=!1,S=!0,C=g.perspectiveRatio*r,A=1/(r*n),I=0,M=0;w&&(I=this.approximateTileDistance(w.first.tileDistance,w.first.angle,A,g.cameraDistance,p),M=this.approximateTileDistance(w.last.tileDistance,w.last.angle,A,g.cameraDistance,p));for(var k=0;k<t.length;k+=5){var D=t[k],z=t[k+1],P=t[k+2],L=t[k+3];if(!w||L<-I||M<L)Z(t,k,!1);else{var O=d.projectPoint(u,D,z),R=P*C;if(0<m.length){var B=O.x-m[m.length-4],F=O.y-m[m.length-3];if(B*B+F*F<R*R*2)if(k+8<t.length){var N=t[k+8];if(-I<N&&N<M){Z(t,k,!1);continue}}}var j=k/5;m.push(O.x,O.y,R,j),Z(t,k,!0);var V=O.x-R,$=O.y-R,q=O.x+R,U=O.y+R;if(S=S&&d.isOffscreen(V,$,q,U),T=T||d.isInsideGrid(V,$,q,U),!e&&d.grid.hitTestCircle(O.x,O.y,R,f)){if(!h)return{circles:[],offscreen:!1};E=!0}}}return{circles:E||!T?[]:m,offscreen:S}},Nn.prototype.queryRenderedSymbols=function(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var e=[],n=Infinity,r=Infinity,i=-Infinity,o=-Infinity,a=0,s=t;a<s.length;a+=1){var l=s[a],u=new H["default"](l.x+$n,l.y+$n);n=Math.min(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.x),o=Math.max(o,u.y),e.push(u)}for(var c={},h={},p=0,f=this.grid.query(n,r,i,o).concat(this.ignoredGrid.query(n,r,i,o));p<f.length;p+=1){var d=f[p],m=d.key;if(c[m.bucketInstanceId]===undefined&&(c[m.bucketInstanceId]={}),!c[m.bucketInstanceId][m.featureIndex]){var g=[new H["default"](d.x1,d.y1),new H["default"](d.x2,d.y1),new H["default"](d.x2,d.y2),new H["default"](d.x1,d.y2)];H.polygonIntersectsPolygon(e,g)&&(c[m.bucketInstanceId][m.featureIndex]=!0,h[m.bucketInstanceId]===undefined&&(h[m.bucketInstanceId]=[]),h[m.bucketInstanceId].push(m.featureIndex))}}return h},Nn.prototype.insertCollisionBox=function(t,e,n,r,i){var o={bucketInstanceId:n,featureIndex:r,collisionGroupID:i};(e?this.ignoredGrid:this.grid).insert(o,t[0],t[1],t[2],t[3])},Nn.prototype.insertCollisionCircles=function(t,e,n,r,i){for(var o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:r,collisionGroupID:i},s=0;s<t.length;s+=4)o.insertCircle(a,t[s],t[s+1],t[s+2])},Nn.prototype.projectAnchor=function(t,e,n){var r=[e,n,0,1];return $(r,r,t),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5,cameraDistance:r[3]}},Nn.prototype.projectPoint=function(t,e,n){var r=[e,n,0,1];return $(r,r,t),new H["default"]((r[0]/r[3]+1)/2*this.transform.width+$n,(-r[1]/r[3]+1)/2*this.transform.height+$n)},Nn.prototype.projectAndGetPerspectiveRatio=function(t,e,n){var r=[e,n,0,1];return $(r,r,t),{point:new H["default"]((r[0]/r[3]+1)/2*this.transform.width+$n,(-r[1]/r[3]+1)/2*this.transform.height+$n),perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5}},Nn.prototype.isOffscreen=function(t,e,n,r){return n<$n||t>=this.screenRightBoundary||r<$n||e>this.screenBottomBoundary},Nn.prototype.isInsideGrid=function(t,e,n,r){return 0<=n&&t<this.gridRightBoundary&&0<=r&&e<this.gridBottomBoundary};var qn,Un,Hn=H.default$19.layout;(qn=function(t,e,n,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&n?1:0,this.placed=n}).prototype.isHidden=function(){return 0===this.opacity&&!this.placed},(Un=function(t,e,n,r,i){this.text=new qn(t?t.text:null,e,n,i),this.icon=new qn(t?t.icon:null,e,r,i)}).prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Wn,Gn,Zn=function(t,e,n){this.text=t,this.icon=e,this.skipFade=n},Yn=function(t,e,n,r,i){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i};(Wn=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}).prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]},(Gn=function(t,e,n){this.transform=t.clone(),this.collisionIndex=new Nn(this.transform),this.placements={},this.opacities={},this.stale=!1,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new Wn(n)}).prototype.placeLayerTile=function(t,e,n,r){var i=e.getBucket(t),o=e.latestFeatureIndex;if(i&&o&&t.id===i.layerIds[0]){var a=e.collisionBoxArray,s=i.layers[0].layout,l=Math.pow(2,this.transform.zoom-e.tileID.overscaledZ),u=e.tileSize/H.default$11,c=this.transform.calculatePosMatrix(e.tileID.toUnwrapped()),h=P(c,"map"===s.get("text-pitch-alignment"),"map"===s.get("text-rotation-alignment"),this.transform,q(e,1,this.transform.zoom)),p=P(c,"map"===s.get("icon-pitch-alignment"),"map"===s.get("icon-rotation-alignment"),this.transform,q(e,1,this.transform.zoom));this.retainedQueryData[i.bucketInstanceId]=new Yn(i.bucketInstanceId,o,i.sourceLayerIndex,i.index,e.tileID),this.placeLayerBucket(i,c,h,p,l,u,n,r,a)}},Gn.prototype.placeLayerBucket=function(t,e,n,r,i,o,a,s,l){for(var u=this,c=t.layers[0].layout,h=H.evaluateSizeForZoom(t.textSizeData,this.transform.zoom,Hn.properties["text-size"]),p=!t.hasTextData()||c.get("text-optional"),f=!t.hasIconData()||c.get("icon-optional"),d=this.collisionGroups.get(t.sourceID),m=0,g=t.symbolInstances;m<g.length;m+=1){var y=g[m];if(!s[y.crossTileID]){var v=y.feature.text!==undefined,_=y.feature.icon!==undefined,x=!0,b=null,w=null,E=null,T=0,S=0;y.collisionArrays||(y.collisionArrays=t.deserializeCollisionBoxes(l,y.textBoxStartIndex,y.textBoxEndIndex,y.iconBoxStartIndex,y.iconBoxEndIndex)),y.collisionArrays.textFeatureIndex&&(T=y.collisionArrays.textFeatureIndex),y.collisionArrays.textBox&&(v=0<(b=u.collisionIndex.placeCollisionBox(y.collisionArrays.textBox,c.get("text-allow-overlap"),o,e,d.predicate)).box.length,x=x&&b.offscreen);var C=y.collisionArrays.textCircles;if(C){var A=t.text.placedSymbolArray.get(y.placedTextSymbolIndices[0]),I=H.evaluateSizeForFeature(t.textSizeData,h,A);w=u.collisionIndex.placeCollisionCircles(C,c.get("text-allow-overlap"),i,o,y.key,A,t.lineVertexArray,t.glyphOffsetArray,I,e,n,a,"map"===c.get("text-pitch-alignment"),d.predicate),v=c.get("text-allow-overlap")||0<w.circles.length,x=x&&w.offscreen}y.collisionArrays.iconFeatureIndex&&(S=y.collisionArrays.iconFeatureIndex),y.collisionArrays.iconBox&&(_=0<(E=u.collisionIndex.placeCollisionBox(y.collisionArrays.iconBox,c.get("icon-allow-overlap"),o,e,d.predicate)).box.length,x=x&&E.offscreen),p||f?f?p||(_=_&&v):v=_&&v:_=v=_&&v,v&&b&&u.collisionIndex.insertCollisionBox(b.box,c.get("text-ignore-placement"),t.bucketInstanceId,T,d.ID),_&&E&&u.collisionIndex.insertCollisionBox(E.box,c.get("icon-ignore-placement"),t.bucketInstanceId,S,d.ID),v&&w&&u.collisionIndex.insertCollisionCircles(w.circles,c.get("text-ignore-placement"),t.bucketInstanceId,T,d.ID),H.default$2(0!==y.crossTileID),H.default$2(0!==t.bucketInstanceId),u.placements[y.crossTileID]=new Zn(v,_,x||t.justReloaded),s[y.crossTileID]=!0}}t.justReloaded=!1},Gn.prototype.commit=function(t,e){var n=this;this.commitTime=e;var r=!1,i=t&&0!==this.fadeDuration?(this.commitTime-t.commitTime)/this.fadeDuration:1,o=t?t.opacities:{};for(var a in n.placements){var s=n.placements[a],l=o[a];l?(n.opacities[a]=new Un(l,i,s.text,s.icon),r=r||s.text!==l.text.placed||s.icon!==l.icon.placed):(n.opacities[a]=new Un(null,i,s.text,s.icon,s.skipFade),r=r||s.text||s.icon)}for(var u in o){var c=o[u];if(!n.opacities[u]){var h=new Un(c,i,!1,!1);h.isHidden()||(n.opacities[u]=h,r=r||c.text.placed||c.icon.placed)}}H.default$2(!t||t.lastPlacementChangeTime!==undefined),r?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)},Gn.prototype.updateLayerOpacities=function(t,e){for(var n=this,r={},i=0,o=e;i<o.length;i+=1){var a=o[i],s=a.getBucket(t);s&&a.latestFeatureIndex&&t.id===s.layerIds[0]&&n.updateBucketOpacities(s,r,a.collisionBoxArray)}},Gn.prototype.updateBucketOpacities=function(t,e,n){var r=this;t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexArray.clear(),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexArray.clear();for(var i=t.layers[0].layout,o=new Un(null,0,!1,!1,!0),a=new Un(null,0,i.get("text-allow-overlap"),i.get("icon-allow-overlap"),!0),s=0;s<t.symbolInstances.length;s++){var l=t.symbolInstances[s],u=e[l.crossTileID],c=r.opacities[l.crossTileID];u?c=o:c||(c=a,r.opacities[l.crossTileID]=c),e[l.crossTileID]=!0;var h=0<l.numGlyphVertices||0<l.numVerticalGlyphVertices,p=0<l.numIconVertices;if(h){for(var f=Y(c.text),d=(l.numGlyphVertices+l.numVerticalGlyphVertices)/4,m=0;m<d;m++)t.text.opacityVertexArray.emplaceBack(f);for(var g=0,y=l.placedTextSymbolIndices;g<y.length;g+=1){var v=y[g];t.text.placedSymbolArray.get(v).hidden=c.text.isHidden()}}if(p){for(var _=Y(c.icon),x=0;x<l.numIconVertices/4;x++)t.icon.opacityVertexArray.emplaceBack(_);t.icon.placedSymbolArray.get(s).hidden=c.icon.isHidden()}l.collisionArrays||(l.collisionArrays=t.deserializeCollisionBoxes(n,l.textBoxStartIndex,l.textBoxEndIndex,l.iconBoxStartIndex,l.iconBoxEndIndex));var b=l.collisionArrays;if(b){b.textBox&&t.hasCollisionBoxData()&&U(t.collisionBox.collisionVertexArray,c.text.placed,!1),b.iconBox&&t.hasCollisionBoxData()&&U(t.collisionBox.collisionVertexArray,c.icon.placed,!1);var w=b.textCircles;if(w&&t.hasCollisionCircleData())for(var E=0;E<w.length;E+=5){var T=u||0===w[E+4];U(t.collisionCircle.collisionVertexArray,c.text.placed,T)}}}t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexBuffer&&t.collisionBox.collisionVertexBuffer.updateData(t.collisionBox.collisionVertexArray),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexBuffer&&t.collisionCircle.collisionVertexBuffer.updateData(t.collisionCircle.collisionVertexArray),H.default$2(t.text.opacityVertexArray.length===t.text.layoutVertexArray.length/4),H.default$2(t.icon.opacityVertexArray.length===t.icon.layoutVertexArray.length/4)},Gn.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration},Gn.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},Gn.prototype.stillRecent=function(t){return"undefined"!==this.commitTime&&this.commitTime+this.fadeDuration>t},Gn.prototype.setStale=function(){this.stale=!0};var Xn,Kn,Jn=Math.pow(2,25),Qn=Math.pow(2,24),tr=Math.pow(2,17),er=Math.pow(2,16),nr=Math.pow(2,9),rr=Math.pow(2,8),ir=Math.pow(2,1);(Xn=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}}).prototype.continuePlacement=function(t,e,n,r,i){for(var o=this;this._currentTileIndex<t.length;){var a=t[o._currentTileIndex];if(e.placeLayerTile(r,a,n,o._seenCrossTileIDs),o._currentTileIndex++,i())return!0}},(Kn=function(t,e,n,r,i,o){this.placement=new Gn(t,i,o),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1}).prototype.isDone=function(){return this._done},Kn.prototype.continuePlacement=function(t,e,n){for(var r=this,i=H.default$3.now(),o=function(){var t=H.default$3.now()-i;return!r._forceFullPlacement&&2<t};0<=this._currentPlacementIndex;){var a=e[t[r._currentPlacementIndex]],s=r.placement.collisionIndex.transform.zoom;if("symbol"===a.type&&(!a.minzoom||a.minzoom<=s)&&(!a.maxzoom||a.maxzoom>s)){if(r._inProgressLayer||(r._inProgressLayer=new Xn),r._inProgressLayer.continuePlacement(n[a.source],r.placement,r._showCollisionBoxes,a,o))return;delete r._inProgressLayer}r._currentPlacementIndex--}this._done=!0},Kn.prototype.commit=function(t,e){return this.placement.commit(t,e),this.placement};var or,ar,sr,lr,ur=512/H.default$11/2;(or=function(t,e,n){var r=this;this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var i=0,o=e;i<o.length;i+=1){var a=o[i],s=a.key;r.indexedSymbolInstances[s]||(r.indexedSymbolInstances[s]=[]),r.indexedSymbolInstances[s].push({crossTileID:a.crossTileID,coord:r.getScaledCoordinates(a,t)})}}).prototype.getScaledCoordinates=function(t,e){var n=e.canonical.z-this.tileID.canonical.z,r=ur/Math.pow(2,n),i=t.anchor;return{x:Math.floor((e.canonical.x*H.default$11+i.x)*r),y:Math.floor((e.canonical.y*H.default$11+i.y)*r)}},or.prototype.findMatches=function(t,e,n){for(var r=this,i=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),o=0,a=t;o<a.length;o+=1){var s=a[o];if(!s.crossTileID){var l=r.indexedSymbolInstances[s.key];if(l)for(var u=r.getScaledCoordinates(s,e),c=0,h=l;c<h.length;c+=1){var p=h[c];if(Math.abs(p.coord.x-u.x)<=i&&Math.abs(p.coord.y-u.y)<=i&&!n[p.crossTileID]){n[p.crossTileID]=!0,s.crossTileID=p.crossTileID;break}}}}},(ar=function(){this.maxCrossTileID=0}).prototype.generate=function(){return++this.maxCrossTileID},(sr=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}).prototype.handleWrapJump=function(t){var e=this,n=Math.round((t-this.lng)/360);if(0!==n)for(var r in e.indexes){var i=e.indexes[r],o={};for(var a in i){var s=i[a];s.tileID=s.tileID.unwrapTo(s.tileID.wrap+n),o[s.tileID.key]=s}e.indexes[r]=o}this.lng=t},sr.prototype.addBucket=function(t,e,n){var r=this;if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var i=0,o=e.symbolInstances;i<o.length;i+=1){o[i].crossTileID=0}this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var a=this.usedCrossTileIDs[t.overscaledZ];for(var s in r.indexes){var l=r.indexes[s];if(Number(s)>t.overscaledZ)for(var u in l){var c=l[u];c.tileID.isChildOf(t)&&c.findMatches(e.symbolInstances,t,a)}else{var h=l[t.scaledTo(Number(s)).key];h&&h.findMatches(e.symbolInstances,t,a)}}for(var p=0,f=e.symbolInstances;p<f.length;p+=1){var d=f[p];d.crossTileID||(d.crossTileID=n.generate(),a[d.crossTileID]=!0)}return this.indexes[t.overscaledZ]===undefined&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new or(t,e.symbolInstances,e.bucketInstanceId),!0},sr.prototype.removeBucketCrossTileIDs=function(t,e){var n=this;for(var r in e.indexedSymbolInstances)for(var i=0,o=e.indexedSymbolInstances[r];i<o.length;i+=1){var a=o[i];delete n.usedCrossTileIDs[t][a.crossTileID]}},sr.prototype.removeStaleBuckets=function(t){var e=this,n=!1;for(var r in e.indexes){var i=e.indexes[r];for(var o in i)t[i[o].bucketInstanceId]||(e.removeBucketCrossTileIDs(r,i[o]),delete i[o],n=!0)}return n},(lr=function(){this.layerIndexes={},this.crossTileIDs=new ar,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}).prototype.addLayer=function(t,e,n){var r=this,i=this.layerIndexes[t.id];i===undefined&&(i=this.layerIndexes[t.id]=new sr);var o=!1,a={};i.handleWrapJump(n);for(var s=0,l=e;s<l.length;s+=1){var u=l[s],c=u.getBucket(t);c&&t.id===c.layerIds[0]&&(c.bucketInstanceId||(c.bucketInstanceId=++r.maxBucketInstanceId),i.addBucket(u.tileID,c,r.crossTileIDs)&&(o=!0),a[c.bucketInstanceId]=!0)}return i.removeStaleBuckets(a)&&(o=!0),o},lr.prototype.pruneUnusedLayers=function(t){var e=this,n={};for(var r in t.forEach(function(t){n[t]=!0}),e.layerIndexes)n[r]||delete e.layerIndexes[r]};var cr=function(t,e){return H.emitValidationErrors(t,e&&e.filter(function(t){return"source.canvas"!==t.identifier}))},hr=H.pick(Fn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),pr=H.pick(Fn,["setCenter","setZoom","setBearing","setPitch"]),fr=function(r){function i(t,e){var o=this;void 0===e&&(e={}),r.call(this),this.map=t,this.dispatcher=new Te(v(),this),this.imageManager=new le,this.glyphManager=new _e(t._transformRequest,e.localIdeographFontFamily),this.lineAtlas=new Ee(256,512),this.crossTileSymbolIndex=new lr,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new H.default$22,this._loaded=!1,this._resetUpdates();var n=this;this._rtlTextPluginCallback=i.registerForPluginAvailability(function(t){for(var e in n.dispatcher.broadcast("loadRTLTextPlugin",t.pluginURL,t.completionCallback),n.sourceCaches)n.sourceCaches[e].reload()}),this.on("data",function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=o.sourceCaches[t.sourceId];if(e){var n=e.getSource();if(n&&n.vectorLayerIds)for(var r in o._layers){var i=o._layers[r];i.source===n.id&&o._validateLayer(i)}}}})}return r&&(i.__proto__=r),i.prototype=Object.create(r&&r.prototype),(i.prototype.constructor=i).prototype.loadURL=function(t,e){var n=this;void 0===e&&(e={}),this.fire(new H.Event("dataloading",{dataType:"style"}));var r="boolean"==typeof e.validate?e.validate:!a(t);t=he(t,e.accessToken);var i=this.map._transformRequest(t,H.ResourceType.Style);H.getJSON(i,function(t,e){t?n.fire(new H.ErrorEvent(t)):e&&n._load(e,r)})},i.prototype.loadJSON=function(t,e){var n=this;void 0===e&&(e={}),this.fire(new H.Event("dataloading",{dataType:"style"})),H.default$3.frame(function(){n._load(t,!1!==e.validate)})},i.prototype._load=function(t,e){var r=this;if(!e||!cr(this,H.validateStyle(t))){for(var n in this._loaded=!0,(this.stylesheet=t).sources)r.addSource(n,t.sources[n],{validate:!1});t.sprite?c(t.sprite,this.map._transformRequest,function(t,e){if(t)r.fire(new H.ErrorEvent(t));else if(e)for(var n in e)r.imageManager.addImage(n,e[n]);r.imageManager.setLoaded(!0),r.fire(new H.Event("data",{dataType:"style"}))}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs);var i=w(this.stylesheet.layers);this._order=i.map(function(t){return t.id}),this._layers={};for(var o=0,a=i;o<a.length;o+=1){var s=a[o];(s=H.default$21(s)).setEventedParent(r,{layer:{id:s.id}}),r._layers[s.id]=s}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ke(this.stylesheet.light),this.fire(new H.Event("data",{dataType:"style"})),this.fire(new H.Event("style.load"))}},i.prototype._validateLayer=function(t){var e=this.sourceCaches[t.source];if(e){var n=t.sourceLayer;if(n){var r=e.getSource();("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(n))&&this.fire(new H.ErrorEvent(new Error('Source layer "'+n+'" does not exist on source "'+r.id+'" as specified by style layer "'+t.id+'"')))}}},i.prototype.loaded=function(){var t=this;if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in t.sourceCaches)if(!t.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()},i.prototype._serializeLayers=function(t){var e=this;return t.map(function(t){return e._layers[t].serialize()})},i.prototype.hasTransitions=function(){var t=this;if(this.light&&this.light.hasTransition())return!0;for(var e in t.sourceCaches)if(t.sourceCaches[e].hasTransition())return!0;for(var n in t._layers)if(t._layers[n].hasTransition())return!0;return!1},i.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},i.prototype.update=function(t){var e=this;if(this._loaded){if(this._changed){var n=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);for(var i in(n.length||r.length)&&this._updateWorkerLayers(n,r),e._updatedSources){var o=e._updatedSources[i];H.default$2("reload"===o||"clear"===o),"reload"===o?e._reloadSource(i):"clear"===o&&e._clearSource(i)}for(var a in e._updatedPaintProps)e._layers[a].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates(),this.fire(new H.Event("data",{dataType:"style"}))}for(var s in e.sourceCaches)e.sourceCaches[s].used=!1;for(var l=0,u=e._order;l<u.length;l+=1){var c=u[l],h=e._layers[c];h.recalculate(t),!h.isHidden(t.zoom)&&h.source&&(e.sourceCaches[h.source].used=!0)}this.light.recalculate(t),this.z=t.zoom}},i.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},i.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},i.prototype.setState=function(t){var e=this;if(this._checkLoaded(),cr(this,H.validateStyle(t)))return!1;(t=H.clone$2(t)).layers=w(t.layers);var n=z(this.serialize(),t).filter(function(t){return!(t.command in pr)});if(0===n.length)return!1;var r=n.filter(function(t){return!(t.command in hr)});if(0<r.length)throw new Error("Unimplemented: "+r.map(function(t){return t.command}).join(", ")+".");return n.forEach(function(t){"setTransition"!==t.command&&e[t.command].apply(e,t.args)}),this.stylesheet=t,!0},i.prototype.addImage=function(t,e){if(this.getImage(t))return this.fire(new H.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(t,e),this.fire(new H.Event("data",{dataType:"style"}))},i.prototype.getImage=function(t){return this.imageManager.getImage(t)},i.prototype.removeImage=function(t){if(!this.getImage(t))return this.fire(new H.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(t),this.fire(new H.Event("data",{dataType:"style"}))},i.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},i.prototype.addSource=function(t,e,n){var r=this;if(this._checkLoaded(),this.sourceCaches[t]!==undefined)throw new Error("There is already a source with this ID");if(!e.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(e).join(", ")+".");if(!(0<=["vector","raster","geojson","video","image"].indexOf(e.type))||!this._validate(H.validateStyle.source,"sources."+t,e,null,n)){this.map&&this.map._collectResourceTiming&&(e.collectResourceTiming=!0);var i=this.sourceCaches[t]=new Rn(t,e,this.dispatcher);i.style=this,i.setEventedParent(this,function(){return{isSourceLoaded:r.loaded(),source:i.serialize(),sourceId:t}}),i.onAdd(this.map),this._changed=!0}},i.prototype.removeSource=function(t){var e=this;if(this._checkLoaded(),this.sourceCaches[t]===undefined)throw new Error("There is no source with this ID");for(var n in e._layers)if(e._layers[n].source===t)return e.fire(new H.ErrorEvent(new Error('Source "'+t+'" cannot be removed while layer "'+n+'" is using it.')));var r=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],r.fire(new H.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},i.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),H.default$2(this.sourceCaches[t]!==undefined,"There is no source with this ID");var n=this.sourceCaches[t].getSource();H.default$2("geojson"===n.type),n.setData(e),this._changed=!0},i.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},i.prototype.addLayer=function(t,e,n){this._checkLoaded();var r=t.id;if(this.getLayer(r))this.fire(new H.ErrorEvent(new Error('Layer with id "'+r+'" already exists on this map')));else if("object"==typeof t.source&&(this.addSource(r,t.source),t=H.clone$2(t),t=H.extend(t,{source:r})),!this._validate(H.validateStyle.layer,"layers."+r,t,{arrayIndex:-1},n)){var i=H.default$21(t);this._validateLayer(i),i.setEventedParent(this,{layer:{id:r}});var o=e?this._order.indexOf(e):this._order.length;if(e&&-1===o)this.fire(new H.ErrorEvent(new Error('Layer with id "'+e+'" does not exist on this map.')));else{if(this._order.splice(o,0,r),this._layerOrderChanged=!0,this._layers[r]=i,this._removedLayers[r]&&i.source){var a=this._removedLayers[r];delete this._removedLayers[r],a.type!==i.type?this._updatedSources[i.source]="clear":(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause())}this._updateLayer(i)}}},i.prototype.moveLayer=function(t,e){if(this._checkLoaded(),this._changed=!0,this._layers[t]){if(t!==e){var n=this._order.indexOf(t);this._order.splice(n,1);var r=e?this._order.indexOf(e):this._order.length;e&&-1===r?this.fire(new H.ErrorEvent(new Error('Layer with id "'+e+'" does not exist on this map.'))):(this._order.splice(r,0,t),this._layerOrderChanged=!0)}}else this.fire(new H.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be moved.")))},i.prototype.removeLayer=function(t){this._checkLoaded();var e=this._layers[t];if(e){e.setEventedParent(null);var n=this._order.indexOf(t);this._order.splice(n,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=e,delete this._layers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t]}else this.fire(new H.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be removed.")))},i.prototype.getLayer=function(t){return this._layers[t]},i.prototype.setLayerZoomRange=function(t,e,n){this._checkLoaded();var r=this.getLayer(t);r?r.minzoom===e&&r.maxzoom===n||(null!=e&&(r.minzoom=e),null!=n&&(r.maxzoom=n),this._updateLayer(r)):this.fire(new H.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot have zoom extent.")))},i.prototype.setFilter=function(t,e){this._checkLoaded();var n=this.getLayer(t);if(n){if(!H.default$14(n.filter,e))return null===e||e===undefined?(n.filter=undefined,void this._updateLayer(n)):void(this._validate(H.validateStyle.filter,"layers."+n.id+".filter",e)||(n.filter=H.clone$2(e),this._updateLayer(n)))}else this.fire(new H.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be filtered.")))},i.prototype.getFilter=function(t){return H.clone$2(this.getLayer(t).filter)},i.prototype.setLayoutProperty=function(t,e,n){this._checkLoaded();var r=this.getLayer(t);r?H.default$14(r.getLayoutProperty(e),n)||(r.setLayoutProperty(e,n),this._updateLayer(r)):this.fire(new H.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getLayoutProperty=function(t,e){return this.getLayer(t).getLayoutProperty(e)},i.prototype.setPaintProperty=function(t,e,n){this._checkLoaded();var r=this.getLayer(t);r?H.default$14(r.getPaintProperty(e),n)||(r.setPaintProperty(e,n)&&this._updateLayer(r),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new H.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},i.prototype.setFeatureState=function(t,e){this._checkLoaded();var n=t.source,r=t.sourceLayer,i=this.sourceCaches[n];i!==undefined?"vector"!==i.getSource().type||r?i.setFeatureState(r,t.id,e):this.fire(new H.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types."))):this.fire(new H.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},i.prototype.getFeatureState=function(t){this._checkLoaded();var e=t.source,n=t.sourceLayer,r=this.sourceCaches[e];if(r!==undefined){if("vector"!==r.getSource().type||n)return r.getFeatureState(n,t.id);this.fire(new H.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new H.ErrorEvent(new Error("The source '"+e+"' does not exist in the map's style.")))},i.prototype.getTransition=function(){return H.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},i.prototype.serialize=function(){var e=this;return H.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,
center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:H.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._order.map(function(t){return e._layers[t].serialize()})},function(t){return t!==undefined})},i.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},i.prototype._flattenRenderedFeatures=function(t){for(var e=this,n=[],r=this._order.length-1;0<=r;r--)for(var i=e._order[r],o=0,a=t;o<a.length;o+=1){var s=a[o][i];if(s)for(var l=0,u=s;l<u.length;l+=1){var c=u[l];n.push(c)}}return n},i.prototype.queryRenderedFeatures=function(t,e,n){var r=this;e&&e.filter&&this._validate(H.validateStyle.filter,"queryRenderedFeatures.filter",e.filter);var i={};if(e&&e.layers){if(!Array.isArray(e.layers))return this.fire(new H.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var o=0,a=e.layers;o<a.length;o+=1){var s=a[o],l=r._layers[s];if(!l)return r.fire(new H.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];i[l.source]=!0}}var u=[];for(var c in r.sourceCaches)e.layers&&!i[c]||u.push(f(r.sourceCaches[c],r._layers,t.worldCoordinate,e,n));return this.placement&&u.push(d(this._layers,this.sourceCaches,t.viewport,e,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenRenderedFeatures(u)},i.prototype.querySourceFeatures=function(t,e){e&&e.filter&&this._validate(H.validateStyle.filter,"querySourceFeatures.filter",e.filter);var n=this.sourceCaches[t];return n?m(n,e):[]},i.prototype.addSourceType=function(t,e,n){return i.getSourceType(t)?n(new Error('A source type called "'+t+'" already exists.')):(i.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))},i.prototype.getLight=function(){return this.light.getLight()},i.prototype.setLight=function(t){this._checkLoaded();var e=this.light.getLight(),n=!1;for(var r in t)if(!H.default$14(t[r],e[r])){n=!0;break}if(n){var i={now:H.default$3.now(),transition:H.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t),this.light.updateTransitions(i)}},i.prototype._validate=function(t,e,n,r,i){return(!i||!1!==i.validate)&&cr(this,t.call(H.validateStyle,H.extend({key:e,style:this.serialize(),value:n,styleSpec:H.default$8},r)))},i.prototype._remove=function(){var t=this;for(var e in H.evented.off("pluginAvailable",this._rtlTextPluginCallback),t.sourceCaches)t.sourceCaches[e].clearTiles();this.dispatcher.remove()},i.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},i.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},i.prototype._updateSources=function(t){var e=this;for(var n in e.sourceCaches)e.sourceCaches[n].update(t)},i.prototype._generateCollisionBoxes=function(){var t=this;for(var e in t.sourceCaches)t._reloadSource(e)},i.prototype._updatePlacement=function(t,e,n,r){for(var i=this,o=!1,a=!1,s={},l=0,u=i._order;l<u.length;l+=1){var c=u[l],h=i._layers[c];if("symbol"===h.type){if(!s[h.source]){var p=i.sourceCaches[h.source];s[h.source]=p.getRenderableIds().map(function(t){return p.getTileByID(t)}).sort(function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)})}var f=i.crossTileSymbolIndex.addLayer(h,s[h.source],t.center.lng);o=o||f}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var d=this._layerOrderChanged;if((d||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(H.default$3.now()))&&(this.pauseablePlacement=new Kn(t,this._order,d,e,n,r),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(this.placement,H.default$3.now()),a=!0),o&&this.pauseablePlacement.placement.setStale()),a||o)for(var m=0,g=i._order;m<g.length;m+=1){var y=g[m],v=i._layers[y];"symbol"===v.type&&i.placement.updateLayerOpacities(v,s[v.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(H.default$3.now())},i.prototype.getImages=function(t,e,n){this.imageManager.getImages(e.icons,n)},i.prototype.getGlyphs=function(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)},i}(H.Evented);fr.getSourceType=qe,fr.setSourceType=Ue,fr.registerForPluginAvailability=H.registerForPluginAvailability;var dr=H.createLayout([{name:"a_pos",type:"Int16",components:2}]),mr={prelude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue = floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue = int(packedValue);\n    int v0 = packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec2 unpack_opacity(const float packedOpacity) {\n    int intOpacity = int(packedOpacity) / 2;\n    return vec2(float(intOpacity) / 127.0, mod(packedOpacity, 2.0));\n}\n\n// To minimize the number of attributes needed, we encode a 4-component\n// color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_vec4(const vec4 packedColors, const float t) {\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"},background:{fragmentSource:"uniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main() {\n    gl_FragColor = u_color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},backgroundPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\nuniform float u_opacity;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},circle:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    vec2 extrude = v_data.xy;\n    float extrude_length = length(extrude);\n\n    lowp float antialiasblur = v_data.z;\n    float antialiased_blur = -max(blur, antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform bool u_pitch_with_map;\nuniform vec2 u_extrude_scale;\nuniform highp float u_camera_to_center_distance;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec2 circle_center = floor(a_pos * 0.5);\n    if (u_pitch_with_map) {\n        vec2 corner_position = circle_center;\n        if (u_scale_with_map) {\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale;\n        } else {\n            // Pitching the circle with the map effectively scales it with the map\n            // To counteract the effect for pitch-scale: viewport, we rescale the\n            // whole circle based on the pitch scaling effect at its central point\n            vec4 projected_center = u_matrix * vec4(circle_center, 0, 1);\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale * (projected_center.w / u_camera_to_center_distance);\n        }\n\n        gl_Position = u_matrix * vec4(corner_position, 0, 1);\n    } else {\n        gl_Position = u_matrix * vec4(circle_center, 0, 1);\n\n        if (u_scale_with_map) {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * u_camera_to_center_distance;\n        } else {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * gl_Position.w;\n        }\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    lowp float antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n\n    v_data = vec3(extrude.x, extrude.y, antialiasblur);\n}\n"},clippingMask:{fragmentSource:"void main() {\n    gl_FragColor = vec4(1.0);\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},heatmap:{fragmentSource:"#pragma mapbox: define highp float weight\n\nuniform highp float u_intensity;\nvarying vec2 v_extrude;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main() {\n    #pragma mapbox: initialize highp float weight\n\n    // Kernel density estimation with a Gaussian kernel of size 5x5\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = weight * u_intensity * GAUSS_COEF * exp(d);\n\n    gl_FragColor = vec4(val, 1.0, 1.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\n\nuniform mat4 u_matrix;\nuniform float u_extrude_scale;\nuniform float u_opacity;\nuniform float u_intensity;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_extrude;\n\n// Effective \"0\" in the kernel density texture to adjust the kernel size to;\n// this empirically chosen number minimizes artifacts on overlapping kernels\n// for typical heatmap cases (assuming clustered source)\nconst highp float ZERO = 1.0 / 255.0 / 16.0;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main(void) {\n    #pragma mapbox: initialize highp float weight\n    #pragma mapbox: initialize mediump float radius\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 unscaled_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // This 'extrude' comes in ranging from [-1, -1], to [1, 1].  We'll use\n    // it to produce the vertices of a square mesh framing the point feature\n    // we're adding to the kernel density texture.  We'll also pass it as\n    // a varying, so that the fragment shader can determine the distance of\n    // each fragment from the point feature.\n    // Before we do so, we need to scale it up sufficiently so that the\n    // kernel falls effectively to zero at the edge of the mesh.\n    // That is, we want to know S such that\n    // weight * u_intensity * GAUSS_COEF * exp(-0.5 * 3.0^2 * S^2) == ZERO\n    // Which solves to:\n    // S = sqrt(-2.0 * log(ZERO / (weight * u_intensity * GAUSS_COEF))) / 3.0\n    float S = sqrt(-2.0 * log(ZERO / weight / u_intensity / GAUSS_COEF)) / 3.0;\n\n    // Pass the varying in units of radius\n    v_extrude = S * unscaled_extrude;\n\n    // Scale by radius and the zoom-based scale factor to produce actual\n    // mesh position\n    vec2 extrude = v_extrude * radius * u_extrude_scale;\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec4 pos = vec4(floor(a_pos * 0.5) + extrude, 0, 1);\n\n    gl_Position = u_matrix * pos;\n}\n"},heatmapTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform sampler2D u_color_ramp;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    float t = texture2D(u_image, v_pos).r;\n    vec4 color = texture2D(u_color_ramp, vec2(t, 0.5));\n    gl_FragColor = color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},collisionBox:{fragmentSource:"\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        gl_FragColor *= .1;\n    }\n}",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field boxes in pitched/overzoomed tiles\n        4.0);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n    gl_Position.xy += a_extrude * u_extrude_scale * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n}\n"},collisionCircle:{fragmentSource:"uniform float u_overscale_factor;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    vec4 color = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        color = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        color *= .2;\n    }\n\n    float extrude_scale_length = length(v_extrude_scale);\n    float extrude_length = length(v_extrude) * extrude_scale_length;\n    float stroke_width = 15.0 * extrude_scale_length / u_overscale_factor;\n    float radius = v_radius * extrude_scale_length;\n\n    float distance_to_edge = abs(extrude_length - radius);\n    float opacity_t = smoothstep(-stroke_width, 0.0, -distance_to_edge);\n\n    gl_FragColor = opacity_t * color;\n}\n",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\n\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field circles in pitched/overzoomed tiles\n        4.0);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n\n    highp float padding_factor = 1.2; // Pad the vertices slightly to make room for anti-alias blur\n    gl_Position.xy += a_extrude * u_extrude_scale * padding_factor * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n    v_radius = abs(a_extrude.y); // We don't pitch the circles, so both units of the extrusion vector are equal in magnitude to the radius\n\n    v_extrude = a_extrude * padding_factor;\n    v_extrude_scale = u_extrude_scale * u_camera_to_center_distance * collision_perspective_ratio;\n}\n"},debug:{fragmentSource:"uniform highp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fill:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fillOutline:{fragmentSource:"#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillOutlinePattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},fillExtrusion:{fragmentSource:"varying vec4 v_color;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    gl_FragColor = v_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    vec3 normal = a_normal_ed.xyz;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"},fillExtrusionPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_mix);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\nuniform float u_height_factor;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\nvarying float v_directional;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec3 normal = a_normal_ed.xyz;\n    float edgedistance = a_normal_ed.w;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = normal.x == 1.0 && normal.y == 0.0 && normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},extrusionTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_image, v_pos) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},hillshadePrepare:{
fragmentSource:"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D u_image;\nvarying vec2 v_pos;\nuniform vec2 u_dimension;\nuniform float u_zoom;\nuniform float u_maxzoom;\n\nfloat getElevation(vec2 coord, float bias) {\n    // Convert encoded elevation value to meters\n    vec4 data = texture2D(u_image, coord) * 255.0;\n    return (data.r + data.g * 256.0 + data.b * 256.0 * 256.0) / 4.0;\n}\n\nvoid main() {\n    vec2 epsilon = 1.0 / u_dimension;\n\n    // queried pixels:\n    // +-----------+\n    // |   |   |   |\n    // | a | b | c |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | d | e | f |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | g | h | i |\n    // |   |   |   |\n    // +-----------+\n\n    float a = getElevation(v_pos + vec2(-epsilon.x, -epsilon.y), 0.0);\n    float b = getElevation(v_pos + vec2(0, -epsilon.y), 0.0);\n    float c = getElevation(v_pos + vec2(epsilon.x, -epsilon.y), 0.0);\n    float d = getElevation(v_pos + vec2(-epsilon.x, 0), 0.0);\n    float e = getElevation(v_pos, 0.0);\n    float f = getElevation(v_pos + vec2(epsilon.x, 0), 0.0);\n    float g = getElevation(v_pos + vec2(-epsilon.x, epsilon.y), 0.0);\n    float h = getElevation(v_pos + vec2(0, epsilon.y), 0.0);\n    float i = getElevation(v_pos + vec2(epsilon.x, epsilon.y), 0.0);\n\n    // here we divide the x and y slopes by 8 * pixel size\n    // where pixel size (aka meters/pixel) is:\n    // circumference of the world / (pixels per tile * number of tiles)\n    // which is equivalent to: 8 * 40075016.6855785 / (512 * pow(2, u_zoom))\n    // which can be reduced to: pow(2, 19.25619978527 - u_zoom)\n    // we want to vertically exaggerate the hillshading though, because otherwise\n    // it is barely noticeable at low zooms. to do this, we multiply this by some\n    // scale factor pow(2, (u_zoom - u_maxzoom) * a) where a is an arbitrary value\n    // Here we use a=0.3 which works out to the expression below. see \n    // nickidlugash's awesome breakdown for more info\n    // https://github.com/mapbox/mapbox-gl-js/pull/5286#discussion_r148419556\n    float exaggeration = u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;\n\n    vec2 deriv = vec2(\n        (c + f + f + i) - (a + d + d + g),\n        (g + h + h + i) - (a + b + b + c)\n    ) /  pow(2.0, (u_zoom - u_maxzoom) * exaggeration + 19.2562 - u_zoom);\n\n    gl_FragColor = clamp(vec4(\n        deriv.x / 2.0 + 0.5,\n        deriv.y / 2.0 + 0.5,\n        1.0,\n        1.0), 0.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (a_texture_pos / 8192.0) / 2.0 + 0.25;\n}\n"},hillshade:{fragmentSource:"uniform sampler2D u_image;\nvarying vec2 v_pos;\n\nuniform vec2 u_latrange;\nuniform vec2 u_light;\nuniform vec4 u_shadow;\nuniform vec4 u_highlight;\nuniform vec4 u_accent;\n\n#define PI 3.141592653589793\n\nvoid main() {\n    vec4 pixel = texture2D(u_image, v_pos);\n\n    vec2 deriv = ((pixel.rg * 2.0) - 1.0);\n\n    // We divide the slope by a scale factor based on the cosin of the pixel's approximate latitude\n    // to account for mercator projection distortion. see #4807 for details\n    float scaleFactor = cos(radians((u_latrange[0] - u_latrange[1]) * (1.0 - v_pos.y) + u_latrange[1]));\n    // We also multiply the slope by an arbitrary z-factor of 1.25\n    float slope = atan(1.25 * length(deriv) / scaleFactor);\n    float aspect = deriv.x != 0.0 ? atan(deriv.y, -deriv.x) : PI / 2.0 * (deriv.y > 0.0 ? 1.0 : -1.0);\n\n    float intensity = u_light.x;\n    // We add PI to make this property match the global light object, which adds PI/2 to the light's azimuthal\n    // position property to account for 0deg corresponding to north/the top of the viewport in the style spec\n    // and the original shader was written to accept (-illuminationDirection - 90) as the azimuthal.\n    float azimuth = u_light.y + PI;\n\n    // We scale the slope exponentially based on intensity, using a calculation similar to\n    // the exponential interpolation function in the style spec:\n    // https://github.com/mapbox/mapbox-gl-js/blob/master/src/style-spec/expression/definitions/interpolate.js#L217-L228\n    // so that higher intensity values create more opaque hillshading.\n    float base = 1.875 - intensity * 1.75;\n    float maxValue = 0.5 * PI;\n    float scaledSlope = intensity != 0.5 ? ((pow(base, slope) - 1.0) / (pow(base, maxValue) - 1.0)) * maxValue : slope;\n\n    // The accent color is calculated with the cosine of the slope while the shade color is calculated with the sine\n    // so that the accent color's rate of change eases in while the shade color's eases out.\n    float accent = cos(scaledSlope);\n    // We multiply both the accent and shade color by a clamped intensity value\n    // so that intensities >= 0.5 do not additionally affect the color values\n    // while intensity values < 0.5 make the overall color more transparent.\n    vec4 accent_color = (1.0 - accent) * u_accent * clamp(intensity * 2.0, 0.0, 1.0);\n    float shade = abs(mod((aspect + azimuth) / PI + 0.5, 2.0) - 1.0);\n    vec4 shade_color = mix(u_shadow, u_highlight, shade) * sin(scaledSlope) * clamp(intensity * 2.0, 0.0, 1.0);\n    gl_FragColor = accent_color * (1.0 - shade_color.a) + shade_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = a_texture_pos / 8192.0;\n}\n"},line:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp float v_linesofar;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    v_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * 2.0;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},lineGradient:{fragmentSource:"\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nuniform sampler2D u_image;\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\nvarying highp float v_lineprogress;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    // For gradient lines, v_lineprogress is the ratio along the entire line,\n    // scaled to [0, 2^15), and the gradient ramp is stored in a texture.\n    vec4 color = texture2D(u_image, vec2(v_lineprogress, 0.5));\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n// the attribute conveying progress along a line is scaled to [0, 2^15)\n#define MAX_LINE_DISTANCE 32767.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp float v_lineprogress;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    v_lineprogress = (floor(a_data.z / 4.0) + a_data.w * 64.0) * 2.0 / MAX_LINE_DISTANCE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},linePattern:{fragmentSource:"uniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n\n    // v_normal.y is 0 at the midpoint of the line, -1 at the lower edge, 1 at the upper edge\n    // we clamp the line width outset to be between 0 and half the pattern height plus padding (2.0)\n    // to ensure we don't sample outside the designated symbol on the sprite sheet.\n    // 0.5 is added to shift the component to be bounded between 0 and 1 for interpolation of\n    // the texture coordinate\n    float y_a = 0.5 + (v_normal.y * clamp(v_width2.s, 0.0, (u_pattern_size_a.y + 2.0) / 2.0) / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * clamp(v_width2.s, 0.0, (u_pattern_size_b.y + 2.0) / 2.0) / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n"},lineSDF:{fragmentSource:"\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma / floorwidth, 0.5 + u_sdfgamma / floorwidth, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x / floorwidth, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x / floorwidth, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n"},raster:{fragmentSource:"uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    if (color0.a > 0.0) {\n        color0.rgb = color0.rgb / color0.a;\n    }\n    if (color1.a > 0.0) {\n        color1.rgb = color1.rgb / color1.a;\n    }\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    // We are using Int16 for texture position coordinates to give us enough precision for\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\n    // as an arbitrarily high number to preserve adequate precision when rendering.\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\n    // so math for modifying either is consistent.\n    v_pos0 = (((a_texture_pos / 8192.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},symbolIcon:{fragmentSource:"uniform sampler2D u_texture;\n\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha = opacity * v_fade_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform highp float u_camera_to_center_distance;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform float u_fade_change;\n\n#pragma mapbox: define lowp float opacity\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n\n    float size;\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // See comments in symbol_sdf.vertex\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n            0.5 + 0.5 * distance_ratio,\n            0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n            4.0);\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // See comments in symbol_sdf.vertex\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 32.0 * fontScale), 0.0, 1.0);\n\n    v_tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    v_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n}\n"},symbolSDF:{
fragmentSource:"#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\n\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform sampler2D u_texture;\nuniform highp float u_gamma_scale;\nuniform bool u_is_text;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 tex = v_data0.xy;\n    float gamma_scale = v_data1.x;\n    float size = v_data1.y;\n    float fade_opacity = v_data1[2];\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, tex).a;\n    highp float gamma_scaled = gamma * gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n    gl_FragColor = color * (alpha * opacity * fade_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform float u_fade_change;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn't pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n        0.5 + 0.5 * distance_ratio,\n        0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n        4.0);\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 32.0 * fontScale), 0.0, 1.0);\n    float gamma_scale = gl_Position.w;\n\n    vec2 tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    float interpolated_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n\n    v_data0 = vec2(tex.x, tex.y);\n    v_data1 = vec3(gamma_scale, size, interpolated_fade_opacity);\n}\n"}},gr=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,yr=function(t){var e=mr[t],a={};e.fragmentSource=e.fragmentSource.replace(gr,function(t,e,n,r,i){return a[i]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+i+"\nvarying "+n+" "+r+" "+i+";\n#else\nuniform "+n+" "+r+" u_"+i+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+i+"\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n"}),e.vertexSource=e.vertexSource.replace(gr,function(t,e,n,r,i){var o="float"===r?"vec2":"vec4";return a[i]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float a_"+i+"_t;\nattribute "+n+" "+o+" a_"+i+";\nvarying "+n+" "+r+" "+i+";\n#else\nuniform "+n+" "+r+" u_"+i+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+i+" = unpack_mix_"+o+"(a_"+i+", a_"+i+"_t);\n#else\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float a_"+i+"_t;\nattribute "+n+" "+o+" a_"+i+";\n#else\nuniform "+n+" "+r+" u_"+i+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+n+" "+r+" "+i+" = unpack_mix_"+o+"(a_"+i+", a_"+i+"_t);\n#else\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n"})};for(var vr in mr)yr(vr);var _r=mr,xr=function(t,e,n,r){var i=this,o=t.gl;this.program=o.createProgram();var a=n.defines().concat("#define DEVICE_PIXEL_RATIO "+H.default$3.devicePixelRatio.toFixed(1));r&&a.push("#define OVERDRAW_INSPECTOR;");var s=a.concat(_r.prelude.fragmentSource,e.fragmentSource).join("\n"),l=a.concat(_r.prelude.vertexSource,e.vertexSource).join("\n"),u=o.createShader(o.FRAGMENT_SHADER);o.shaderSource(u,s),o.compileShader(u),H.default$2(o.getShaderParameter(u,o.COMPILE_STATUS),o.getShaderInfoLog(u)),o.attachShader(this.program,u);var c=o.createShader(o.VERTEX_SHADER);o.shaderSource(c,l),o.compileShader(c),H.default$2(o.getShaderParameter(c,o.COMPILE_STATUS),o.getShaderInfoLog(c)),o.attachShader(this.program,c);for(var h=n.layoutAttributes||[],p=0;p<h.length;p++)o.bindAttribLocation(i.program,p,h[p].name);o.linkProgram(this.program),H.default$2(o.getProgramParameter(this.program,o.LINK_STATUS),o.getProgramInfoLog(this.program)),this.numAttributes=o.getProgramParameter(this.program,o.ACTIVE_ATTRIBUTES),this.attributes={},this.uniforms={};for(var f=0;f<this.numAttributes;f++){var d=o.getActiveAttrib(i.program,f);d&&(i.attributes[d.name]=o.getAttribLocation(i.program,d.name))}for(var m=o.getProgramParameter(this.program,o.ACTIVE_UNIFORMS),g=0;g<m;g++){var y=o.getActiveUniform(i.program,g);y&&(i.uniforms[y.name]=o.getUniformLocation(i.program,y.name))}};xr.prototype.draw=function(t,e,n,r,i,o,a,s,l){for(var u,c=this,h=t.gl,p=(u={},u[h.LINES]=2,u[h.TRIANGLES]=3,u)[e],f=0,d=o.get();f<d.length;f+=1){var m=d[f],g=m.vaos||(m.vaos={});(g[n]||(g[n]=new De)).bind(t,c,r,a?a.getPaintVertexBuffers():[],i,m.vertexOffset,s,l),h.drawElements(e,m.primitiveLength*p,h.UNSIGNED_SHORT,m.primitiveOffset*p*2)}};var br,wr=H.identity(new Float32Array(16)),Er=H.default$19.layout,Tr=function(t,e){if(!t)return!1;var n=e.imageManager.getPattern(t.from),r=e.imageManager.getPattern(t.to);return!n||!r},Sr=function(t,e,n){var r=e.context,i=r.gl,o=e.imageManager.getPattern(t.from),a=e.imageManager.getPattern(t.to);H.default$2(o&&a),i.uniform1i(n.uniforms.u_image,0),i.uniform2fv(n.uniforms.u_pattern_tl_a,o.tl),i.uniform2fv(n.uniforms.u_pattern_br_a,o.br),i.uniform2fv(n.uniforms.u_pattern_tl_b,a.tl),i.uniform2fv(n.uniforms.u_pattern_br_b,a.br);var s=e.imageManager.getPixelSize(),l=s.width,u=s.height;i.uniform2fv(n.uniforms.u_texsize,[l,u]),i.uniform1f(n.uniforms.u_mix,t.t),i.uniform2fv(n.uniforms.u_pattern_size_a,o.displaySize),i.uniform2fv(n.uniforms.u_pattern_size_b,a.displaySize),i.uniform1f(n.uniforms.u_scale_a,t.fromScale),i.uniform1f(n.uniforms.u_scale_b,t.toScale),r.activeTexture.set(i.TEXTURE0),e.imageManager.bind(e.context)},Cr=function(t,e,n){var r=e.context.gl;r.uniform1f(n.uniforms.u_tile_units_to_pixels,1/q(t,1,e.transform.tileZoom));var i=Math.pow(2,t.tileID.overscaledZ),o=t.tileSize*Math.pow(2,e.transform.tileZoom)/i,a=o*(t.tileID.canonical.x+t.tileID.wrap*i),s=o*t.tileID.canonical.y;r.uniform2f(n.uniforms.u_pixel_coord_upper,a>>16,s>>16),r.uniform2f(n.uniforms.u_pixel_coord_lower,65535&a,65535&s)},Ar={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},Ir={symbol:tt,circle:ot,heatmap:at,line:ct,fill:pt,"fill-extrusion":yt,hillshade:wt,raster:At,background:zt,debug:Pt};(br=function(t,e){this.context=new kn(t),this.transform=e,this._tileTextures={},this.setup(),this.numSublayers=Rn.maxUnderzooming+Rn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new H.default$23,this.crossTileSymbolIndex=new lr}).prototype.resize=function(t,e){var n=this,r=this.context.gl;if(this.width=t*H.default$3.devicePixelRatio,this.height=e*H.default$3.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var i=0,o=n.style._order;i<o.length;i+=1){var a=o[i];n.style._layers[a].resize()}this.depthRbo&&(r.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},br.prototype.setup=function(){var t=this.context,e=new H.PosArray;e.emplaceBack(0,0),e.emplaceBack(H.default$11,0),e.emplaceBack(0,H.default$11),e.emplaceBack(H.default$11,H.default$11),this.tileExtentBuffer=t.createVertexBuffer(e,dr.members),this.tileExtentVAO=new De,this.tileExtentPatternVAO=new De;var n=new H.PosArray;n.emplaceBack(0,0),n.emplaceBack(H.default$11,0),n.emplaceBack(H.default$11,H.default$11),n.emplaceBack(0,H.default$11),n.emplaceBack(0,0),this.debugBuffer=t.createVertexBuffer(n,dr.members),this.debugVAO=new De;var r=new H.RasterBoundsArray;r.emplaceBack(0,0,0,0),r.emplaceBack(H.default$11,0,H.default$11,0),r.emplaceBack(0,H.default$11,0,H.default$11),r.emplaceBack(H.default$11,H.default$11,H.default$11,H.default$11),this.rasterBoundsBuffer=t.createVertexBuffer(r,H.default$12.members),this.rasterBoundsVAO=new De;var i=new H.PosArray;i.emplaceBack(0,0),i.emplaceBack(1,0),i.emplaceBack(0,1),i.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(i,dr.members),this.viewportVAO=new De},br.prototype.clearStencil=function(){var t=this.context,e=t.gl;t.setColorMode(Mn.disabled),t.setDepthMode(Tn.disabled),t.setStencilMode(new Cn({func:e.ALWAYS,mask:0},0,255,e.ZERO,e.ZERO,e.ZERO));var n=H.create();H.ortho(n,0,this.width,this.height,0,0,1),H.scale(n,n,[e.drawingBufferWidth,e.drawingBufferHeight,0]);var r=this.useProgram("clippingMask");e.uniformMatrix4fv(r.uniforms.u_matrix,!1,n),this.viewportVAO.bind(t,r,this.viewportBuffer,[]),e.drawArrays(e.TRIANGLE_STRIP,0,4)},br.prototype._renderTileClippingMasks=function(t){var e=this,n=this.context,r=n.gl;n.setColorMode(Mn.disabled),n.setDepthMode(Tn.disabled);var i=1;this._tileClippingMaskIDs={};for(var o=0,a=t;o<a.length;o+=1){var s=a[o],l=e._tileClippingMaskIDs[s.key]=i++;n.setStencilMode(new Cn({func:r.ALWAYS,mask:0},l,255,r.KEEP,r.KEEP,r.REPLACE));var u=e.useProgram("clippingMask");r.uniformMatrix4fv(u.uniforms.u_matrix,!1,s.posMatrix),e.tileExtentVAO.bind(e.context,u,e.tileExtentBuffer,[]),r.drawArrays(r.TRIANGLE_STRIP,0,e.tileExtentBuffer.length)}},br.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new Cn({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},br.prototype.colorModeForRenderPass=function(){var t=this.context.gl;if(this._showOverdrawInspector){var e=1/8;return new Mn([t.CONSTANT_COLOR,t.ONE],new H.default$9(e,e,e,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?Mn.unblended:Mn.alphaBlended},br.prototype.depthModeForSublayer=function(t,e,n){var r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon,i=r-1+this.depthRange;return new Tn(n||this.context.gl.LEQUAL,e,[i,r])},br.prototype.render=function(t,e){var n=this;for(var r in this.style=t,this.options=e,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(H.default$3.now()),t.sourceCaches){var i=n.style.sourceCaches[r];i.used&&i.prepare(n.context)}var o=this.style._order,a=H.filterObject(this.style.sourceCaches,function(t){return"raster"===t.getSource().type||"raster-dem"===t.getSource().type}),s=function(t){var e=a[t];X(e.getVisibleCoordinates().map(function(t){return e.getTile(t)}),n.context)};for(var l in a)s(l);this.renderPass="offscreen";var u,c=[];this.depthRboNeedsClear=!0;for(var h=0;h<o.length;h++){var p=n.style._layers[o[h]];p.hasOffscreenPass()&&!p.isHidden(n.transform.zoom)&&(p.source!==(u&&u.id)&&(c=[],(u=n.style.sourceCaches[p.source])&&(c=u.getVisibleCoordinates()).reverse()),c.length&&n.renderLayer(n,u,p,c))}this.context.bindFramebuffer.set(null),this.context.clear({color:e.showOverdrawInspector?H.default$9.black:H.default$9.transparent,depth:1}),this._showOverdrawInspector=e.showOverdrawInspector,this.depthRange=(t._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque";var f,d=[];for(this.currentLayer=o.length-1,this.currentLayer;0<=this.currentLayer;this.currentLayer--){var m=n.style._layers[o[n.currentLayer]];m.source!==(f&&f.id)&&(d=[],(f=n.style.sourceCaches[m.source])&&(n.clearStencil(),d=f.getVisibleCoordinates(),f.getSource().isTileClipped&&n._renderTileClippingMasks(d))),n.renderLayer(n,f,m,d)}this.renderPass="translucent";var g,y=[];for(this.currentLayer=0,this.currentLayer;this.currentLayer<o.length;this.currentLayer++){var v=n.style._layers[o[n.currentLayer]];v.source!==(g&&g.id)&&(y=[],(g=n.style.sourceCaches[v.source])&&(n.clearStencil(),y=g.getVisibleCoordinates(),g.getSource().isTileClipped&&n._renderTileClippingMasks(y)),y.reverse()),n.renderLayer(n,g,v,y)}if(this.options.showTileBoundaries){var _=this.style.sourceCaches[Object.keys(this.style.sourceCaches)[0]];_&&Ir.debug(this,_,_.getVisibleCoordinates())}},br.prototype.setupOffscreenDepthRenderbuffer=function(){var t=this.context;this.depthRbo||(this.depthRbo=t.createRenderbuffer(t.gl.DEPTH_COMPONENT16,this.width,this.height))},br.prototype.renderLayer=function(t,e,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||r.length)&&(this.id=n.id,Ir[n.type](t,e,n,r))},br.prototype.translatePosMatrix=function(t,e,n,r,i){if(!n[0]&&!n[1])return t;var o=i?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(o){var a=Math.sin(o),s=Math.cos(o);n=[n[0]*s-n[1]*a,n[0]*a+n[1]*s]}var l=[i?n[0]:q(e,n[0],this.transform.zoom),i?n[1]:q(e,n[1],this.transform.zoom),0],u=new Float32Array(16);return H.translate(u,t,l),u},br.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},br.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&0<e.length?e.pop():null},br.prototype._createProgramCached=function(t,e){this.cache=this.cache||{};var n=""+t+(e.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new xr(this.context,_r[t],e,this._showOverdrawInspector)),this.cache[n]},br.prototype.useProgram=function(t,e){var n=this._createProgramCached(t,e||this.emptyProgramConfiguration);return this.context.program.set(n.program),n};var Mr,kr,Dr={minZoom:{configurable:!0},maxZoom:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},x:{configurable:!0},y:{configurable:!0},point:{configurable:!0}};(Mr=function(t,e,n){this.tileSize=512,this._renderWorldCopies=n===undefined||n,this._minZoom=t||0,this._maxZoom=e||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new Se(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}}).prototype.clone=function(){var t=new Mr(this._minZoom,this._maxZoom,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._calcMatrices(),t},Dr.minZoom.get=function(){return this._minZoom},Dr.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},Dr.maxZoom.get=function(){return this._maxZoom},Dr.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},Dr.renderWorldCopies.get=function(){return this._renderWorldCopies},Dr.renderWorldCopies.set=function(t){t===undefined?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},Dr.worldSize.get=function(){return this.tileSize*this.scale},Dr.centerPoint.get=function(){return this.size._div(2)},Dr.size.get=function(){return new H["default"](this.width,this.height)},Dr.bearing.get=function(){return-this.angle/Math.PI*180},Dr.bearing.set=function(t){var e=-H.wrap(t,-180,180)*Math.PI/180;this.angle!==e&&(this._unmodified=!1,this.angle=e,this._calcMatrices(),this.rotationMatrix=H.create$4(),H.rotate$2(this.rotationMatrix,this.rotationMatrix,this.angle))},Dr.pitch.get=function(){return this._pitch/Math.PI*180},Dr.pitch.set=function(t){var e=H.clamp(t,0,60)/180*Math.PI;this._pitch!==e&&(this._unmodified=!1,this._pitch=e,this._calcMatrices())},Dr.fov.get=function(){return this._fov/Math.PI*180},Dr.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},Dr.zoom.get=function(){return this._zoom},Dr.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},Dr.center.get=function(){return this._center},Dr.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},Mr.prototype.coveringZoomLevel=function(t){return(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize))},Mr.prototype.getVisibleUnwrappedCoordinates=function(t){var e=this.pointCoordinate(new H["default"](0,0),0),n=this.pointCoordinate(new H["default"](this.width,0),0),r=Math.floor(e.column),i=Math.floor(n.column),o=[new H.UnwrappedTileID(0,t)];if(this._renderWorldCopies)for(var a=r;a<=i;a++)0!==a&&o.push(new H.UnwrappedTileID(a,t));return o},Mr.prototype.coveringTiles=function(t){var e=this.coveringZoomLevel(t),n=e;if(t.minzoom!==undefined&&e<t.minzoom)return[];t.maxzoom!==undefined&&e>t.maxzoom&&(e=t.maxzoom);var r=this.pointCoordinate(this.centerPoint,e),i=new H["default"](r.column-.5,r.row-.5);return Rt(e,[this.pointCoordinate(new H["default"](0,0),e),this.pointCoordinate(new H["default"](this.width,0),e),this.pointCoordinate(new H["default"](this.width,this.height),e),this.pointCoordinate(new H["default"](0,this.height),e)],t.reparseOverscaled?n:e,this._renderWorldCopies).sort(function(t,e){return i.dist(t.canonical)-i.dist(e.canonical)})},Mr.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},Dr.unmodified.get=function(){return this._unmodified},Mr.prototype.zoomScale=function(t){return Math.pow(2,t)},Mr.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},Mr.prototype.project=function(t){return new H["default"](this.lngX(t.lng),this.latY(t.lat))},Mr.prototype.unproject=function(t){return new Se(this.xLng(t.x),this.yLat(t.y))},Dr.x.get=function(){return this.lngX(this.center.lng)},Dr.y.get=function(){return this.latY(this.center.lat)},Dr.point.get=function(){return new H["default"](this.x,this.y)},Mr.prototype.lngX=function(t){return(180+t)*this.worldSize/360},Mr.prototype.latY=function(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))*this.worldSize/360},Mr.prototype.xLng=function(t){return 360*t/this.worldSize-180},Mr.prototype.yLat=function(t){var e=180-360*t/this.worldSize;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90},Mr.prototype.setLocationAtPoint=function(t,e){var n=this.pointCoordinate(e)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(t)._sub(n)),this._renderWorldCopies&&(this.center=this.center.wrap())},Mr.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},Mr.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},Mr.prototype.locationCoordinate=function(t){return new H.default$16(this.lngX(t.lng)/this.tileSize,this.latY(t.lat)/this.tileSize,this.zoom).zoomTo(this.tileZoom)},Mr.prototype.coordinateLocation=function(t){var e=t.zoomTo(this.zoom);return new Se(this.xLng(e.column*this.tileSize),this.yLat(e.row*this.tileSize))},Mr.prototype.pointCoordinate=function(t,e){e===undefined&&(e=this.tileZoom);var n=0,r=[t.x,t.y,0,1],i=[t.x,t.y,1,1];H.transformMat4(r,r,this.pixelMatrixInverse),H.transformMat4(i,i,this.pixelMatrixInverse);var o=r[3],a=i[3],s=r[0]/o,l=i[0]/a,u=r[1]/o,c=i[1]/a,h=r[2]/o,p=i[2]/a,f=h===p?0:(n-h)/(p-h);return new H.default$16(H.number(s,l,f)/this.tileSize,H.number(u,c,f)/this.tileSize,this.zoom)._zoomTo(e)},Mr.prototype.coordinatePoint=function(t){var e=t.zoomTo(this.zoom),n=[e.column*this.tileSize,e.row*this.tileSize,0,1];return H.transformMat4(n,n,this.pixelMatrix),new H["default"](n[0]/n[3],n[1]/n[3])},Mr.prototype.calculatePosMatrix=function(t,e){void 0===e&&(e=!1);var n=t.key,r=e?this._alignedPosMatrixCache:this._posMatrixCache;if(r[n])return r[n];var i=t.canonical,o=this.worldSize/this.zoomScale(i.z),a=i.x+Math.pow(2,i.z)*t.wrap,s=H.identity(new Float64Array(16));return H.translate(s,s,[a*o,i.y*o,0]),H.scale(s,s,[o/H.default$11,o/H.default$11,1]),H.multiply(s,e?this.alignedProjMatrix:this.projMatrix,s),r[n]=new Float32Array(s),r[n]},Mr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,e,n,r,i=-90,o=90,a=-180,s=180,l=this.size,u=this._unmodified;if(this.latRange){var c=this.latRange;i=this.latY(c[1]),t=(o=this.latY(c[0]))-i<l.y?l.y/(o-i):0}if(this.lngRange){var h=this.lngRange;a=this.lngX(h[0]),e=(s=this.lngX(h[1]))-a<l.x?l.x/(s-a):0}var p=Math.max(e||0,t||0);if(p)return this.center=this.unproject(new H["default"](e?(s+a)/2:this.x,t?(o+i)/2:this.y)),this.zoom+=this.scaleZoom(p),this._unmodified=u,void(this._constraining=!1);if(this.latRange){var f=this.y,d=l.y/2;f-d<i&&(r=i+d),o<f+d&&(r=o-d)}if(this.lngRange){var m=this.x,g=l.x/2;m-g<a&&(n=a+g),s<m+g&&(n=s-g)}n===undefined&&r===undefined||(this.center=this.unproject(new H["default"](n!==undefined?n:this.x,r!==undefined?r:this.y))),this._unmodified=u,this._constraining=!1}},Mr.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var t=this._fov/2,e=Math.PI/2+this._pitch,n=Math.sin(t)*this.cameraToCenterDistance/Math.sin(Math.PI-e-t),r=this.x,i=this.y,o=1.01*(Math.cos(Math.PI/2-this._pitch)*n+this.cameraToCenterDistance),a=new Float64Array(16);H.perspective(a,this._fov,this.width/this.height,1,o),H.scale(a,a,[1,-1,1]),H.translate(a,a,[0,0,-this.cameraToCenterDistance]),H.rotateX(a,a,this._pitch),H.rotateZ(a,a,this.angle),H.translate(a,a,[-r,-i,0])
;var s=this.worldSize/(2*Math.PI*6378137*Math.abs(Math.cos(this.center.lat*(Math.PI/180))));H.scale(a,a,[1,1,s,1]),this.projMatrix=a;var l=this.width%2/2,u=this.height%2/2,c=Math.cos(this.angle),h=Math.sin(this.angle),p=r-Math.round(r)+c*l+h*u,f=i-Math.round(i)+c*u+h*l,d=new Float64Array(a);if(H.translate(d,d,[.5<p?p-1:p,.5<f?f-1:f,0]),this.alignedProjMatrix=d,a=H.create(),H.scale(a,a,[this.width/2,-this.height/2,1]),H.translate(a,a,[1,-1,0]),this.pixelMatrix=H.multiply(new Float64Array(16),a,this.projMatrix),!(a=H.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=a,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Mr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var t=this.pointCoordinate(new H["default"](0,0)).zoomTo(this.zoom),e=[t.column*this.tileSize,t.row*this.tileSize,0,1];return H.transformMat4(e,e,this.pixelMatrix)[3]/this.cameraToCenterDistance},Object.defineProperties(Mr.prototype,Dr),(kr=function(){H.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=jt(this._updateHashUnthrottled.bind(this),300)}).prototype.addTo=function(t){return this._map=t,H.default$1.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},kr.prototype.remove=function(){return H.default$1.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},kr.prototype.getHashString=function(t){var e=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,r),o=Math.round(e.lng*i)/i,a=Math.round(e.lat*i)/i,s=this._map.getBearing(),l=this._map.getPitch(),u="";return u+=t?"#/"+o+"/"+a+"/"+n:"#"+n+"/"+a+"/"+o,(s||l)&&(u+="/"+Math.round(10*s)/10),l&&(u+="/"+Math.round(l)),u},kr.prototype._onHashChange=function(){var t=H.default$1.location.hash.replace("#","").split("/");return 3<=t.length&&(this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:+(t[3]||0),pitch:+(t[4]||0)}),!0)},kr.prototype._updateHashUnthrottled=function(){var t=this.getHashString();H.default$1.history.replaceState(H.default$1.history.state,"",t)};var zr,Pr,Lr=function(a){function t(t,e,n,r){void 0===r&&(r={});var i=ee.mousePos(e.getCanvasContainer(),n),o=e.unproject(i);a.call(this,t,H.extend({point:i,lngLat:o,originalEvent:n},r)),this._defaultPrevented=!1,this.target=e}a&&(t.__proto__=a),t.prototype=Object.create(a&&a.prototype);var e={defaultPrevented:{configurable:!0}};return(t.prototype.constructor=t).prototype.preventDefault=function(){this._defaultPrevented=!0},e.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(t.prototype,e),t}(H.Event),Or=function(s){function t(t,e,n){var r=ee.touchPos(e.getCanvasContainer(),n),i=r.map(function(t){return e.unproject(t)}),o=r.reduce(function(t,e,n,r){return t.add(e.div(r.length))},new H["default"](0,0)),a=e.unproject(o);s.call(this,t,{points:r,point:o,lngLats:i,lngLat:a,originalEvent:n}),this._defaultPrevented=!1}s&&(t.__proto__=s),t.prototype=Object.create(s&&s.prototype);var e={defaultPrevented:{configurable:!0}};return(t.prototype.constructor=t).prototype.preventDefault=function(){this._defaultPrevented=!0},e.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(t.prototype,e),t}(H.Event),Rr=function(r){function t(t,e,n){r.call(this,t,{originalEvent:n}),this._defaultPrevented=!1}r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype);var e={defaultPrevented:{configurable:!0}};return(t.prototype.constructor=t).prototype.preventDefault=function(){this._defaultPrevented=!0},e.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(t.prototype,e),t}(H.Event),Br=4.000244140625,Fr=.01,Nr=1/450,jr=2;(zr=function(t){this._map=t,this._el=t.getCanvasContainer(),this._delta=0,H.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)}).prototype.isEnabled=function(){return!!this._enabled},zr.prototype.isActive=function(){return!!this._active},zr.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},zr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},zr.prototype.onWheel=function(t){if(this.isEnabled()){var e=t.deltaMode===H.default$1.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,n=H.default$3.now(),r=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==e&&e%Br==0?this._type="wheel":0!==e&&Math.abs(e)<4?this._type="trackpad":400<r?(this._type=null,this._lastValue=e,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(r*e)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,e+=this._lastValue)),t.shiftKey&&e&&(e/=4),this._type&&(this._lastWheelEvent=t,this._delta-=e,this.isActive()||this._start(t)),t.preventDefault()}},zr.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(t)},zr.prototype._start=function(t){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this._map.fire(new H.Event("movestart",{originalEvent:t})),this._map.fire(new H.Event("zoomstart",{originalEvent:t})),this._finishTimeout&&clearTimeout(this._finishTimeout);var e=ee.mousePos(this._el,t);this._around=Se.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(e)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},zr.prototype._onScrollFrame=function(){var t=this;if(this._frameId=null,this.isActive()){var e=this._map.transform;if(0!==this._delta){var n="wheel"===this._type&&Math.abs(this._delta)>Br?Nr:Fr,r=jr/(1+Math.exp(-Math.abs(this._delta*n)));this._delta<0&&0!==r&&(r=1/r);var i="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(i*r))),"wheel"===this._type&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var o=!1;if("wheel"===this._type){var a=Math.min((H.default$3.now()-this._lastWheelEventTime)/200,1),s=this._easing(a);e.zoom=H.number(this._startZoom,this._targetZoom,s),a<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):o=!0}else e.zoom=this._targetZoom,o=!0;e.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new H.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new H.Event("zoom",{originalEvent:this._lastWheelEvent})),o&&(this._active=!1,this._finishTimeout=setTimeout(function(){t._map.fire(new H.Event("zoomend",{originalEvent:t._lastWheelEvent})),t._map.fire(new H.Event("moveend",{originalEvent:t._lastWheelEvent})),delete t._targetZoom},200))}},zr.prototype._smoothOutEasing=function(t){var e=H.ease;if(this._prevEase){var n=this._prevEase,r=(H.default$3.now()-n.start)/n.duration,i=n.easing(r+.01)-n.easing(r),o=.27/Math.sqrt(i*i+1e-4)*.01,a=Math.sqrt(.0729-o*o);e=H.bezier$1(o,a,.25,1)}return this._prevEase={start:H.default$3.now(),duration:t,easing:e},e},(Pr=function(t){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),H.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)}).prototype.isEnabled=function(){return!!this._enabled},Pr.prototype.isActive=function(){return!!this._active},Pr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Pr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Pr.prototype.onMouseDown=function(t){this.isEnabled()&&t.shiftKey&&0===t.button&&(H.default$1.document.addEventListener("mousemove",this._onMouseMove,!1),H.default$1.document.addEventListener("keydown",this._onKeyDown,!1),H.default$1.document.addEventListener("mouseup",this._onMouseUp,!1),ee.disableDrag(),this._startPos=this._lastPos=ee.mousePos(this._el,t),this._active=!0)},Pr.prototype._onMouseMove=function(t){var e=ee.mousePos(this._el,t);if(!this._lastPos.equals(e)){var n=this._startPos;this._lastPos=e,this._box||(this._box=ee.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var r=Math.min(n.x,e.x),i=Math.max(n.x,e.x),o=Math.min(n.y,e.y),a=Math.max(n.y,e.y);ee.setTransform(this._box,"translate("+r+"px,"+o+"px)"),this._box.style.width=i-r+"px",this._box.style.height=a-o+"px"}},Pr.prototype._onMouseUp=function(t){if(0===t.button){var e=this._startPos,n=ee.mousePos(this._el,t),r=(new Ce).extend(this._map.unproject(e)).extend(this._map.unproject(n));this._finish(),ee.suppressClick(),e.x===n.x&&e.y===n.y?this._fireEvent("boxzoomcancel",t):this._map.fitBounds(r,{linear:!0}).fire(new H.Event("boxzoomend",{originalEvent:t,boxZoomBounds:r}))}},Pr.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},Pr.prototype._finish=function(){this._active=!1,H.default$1.document.removeEventListener("mousemove",this._onMouseMove,!1),H.default$1.document.removeEventListener("keydown",this._onKeyDown,!1),H.default$1.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(ee.remove(this._box),this._box=null),ee.enableDrag(),delete this._startPos,delete this._lastPos},Pr.prototype._fireEvent=function(t,e){return this._map.fire(new H.Event(t,{originalEvent:e}))};var Vr,$r=.25,qr=H.bezier$1(0,0,$r,1),Ur=180,Hr=720;(Vr=function(t,e){this._map=t,this._el=e.element||t.getCanvasContainer(),this._state="disabled",this._button=e.button||"right",this._bearingSnap=e.bearingSnap||0,this._pitchWithRotate=!1!==e.pitchWithRotate,H.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)}).prototype.isEnabled=function(){return"disabled"!==this._state},Vr.prototype.isActive=function(){return"active"===this._state},Vr.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},Vr.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},Vr.prototype.onMouseDown=function(t){if("enabled"===this._state){if("right"===this._button){if(this._eventButton=ee.mouseButton(t),this._eventButton!==(t.ctrlKey?0:2))return}else{if(t.ctrlKey||0!==ee.mouseButton(t))return;this._eventButton=0}ee.disableDrag(),H.default$1.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),H.default$1.document.addEventListener("mouseup",this._onMouseUp),H.default$1.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[H.default$3.now(),this._map.getBearing()]],this._startPos=this._lastPos=ee.mousePos(this._el,t),this._center=this._map.transform.centerPoint,t.preventDefault()}},Vr.prototype._onMouseMove=function(t){var e=ee.mousePos(this._el,t);this._lastPos.equals(e)||(this._lastMoveEvent=t,this._lastPos=e,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},Vr.prototype._onDragFrame=function(){this._frameId=null;var t=this._lastMoveEvent;if(t){var e=this._map.transform,n=this._startPos,r=this._lastPos,i=.8*(n.x-r.x),o=-.5*(n.y-r.y),a=e.bearing-i,s=e.pitch-o,l=this._inertia,u=l[l.length-1];this._drainInertiaBuffer(),l.push([H.default$3.now(),this._map._normalizeBearing(a,u[1])]),e.bearing=a,this._pitchWithRotate&&(this._fireEvent("pitch",t),e.pitch=s),this._fireEvent("rotate",t),this._fireEvent("move",t),delete this._lastMoveEvent,this._startPos=this._lastPos}},Vr.prototype._onMouseUp=function(t){if(ee.mouseButton(t)===this._eventButton)switch(this._state){case"active":this._state="enabled",ee.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(t);break;case"pending":this._state="enabled",this._unbind();break;default:H.default$2(!1)}},Vr.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",t),this._pitchWithRotate&&this._fireEvent("pitchend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind();break;default:H.default$2(!1)}},Vr.prototype._unbind=function(){H.default$1.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),H.default$1.document.removeEventListener("mouseup",this._onMouseUp),H.default$1.removeEventListener("blur",this._onBlur),ee.enableDrag()},Vr.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._lastPos},Vr.prototype._inertialRotate=function(t){var e=this;this._fireEvent("rotateend",t),this._drainInertiaBuffer();var n=this._map,r=n.getBearing(),i=this._inertia,o=function(){Math.abs(r)<e._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:t}):e._fireEvent("moveend",t),e._pitchWithRotate&&e._fireEvent("pitchend",t)};if(i.length<2)o();else{var a=i[0],s=i[i.length-1],l=i[i.length-2],u=n._normalizeBearing(r,l[1]),c=s[1]-a[1],h=c<0?-1:1,p=(s[0]-a[0])/1e3;if(0!==c&&0!==p){var f=Math.abs(c*($r/p));Ur<f&&(f=Ur);var d=f/(Hr*$r);u+=h*f*(d/2),Math.abs(n._normalizeBearing(u,0))<this._bearingSnap&&(u=n._normalizeBearing(0,u)),n.rotateTo(u,{duration:1e3*d,easing:qr,noMoveStart:!0},{originalEvent:t})}else o()}},Vr.prototype._fireEvent=function(t,e){return this._map.fire(new H.Event(t,e?{originalEvent:e}:{}))},Vr.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=H.default$3.now(),n=160;0<t.length&&e-t[0][0]>n;)t.shift()};var Wr,Gr=.3,Zr=H.bezier$1(0,0,Gr,1),Yr=1400,Xr=2500;(Wr=function(t){this._map=t,this._el=t.getCanvasContainer(),this._state="disabled",H.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)}).prototype.isEnabled=function(){return"disabled"!==this._state},Wr.prototype.isActive=function(){return"active"===this._state},Wr.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled")},Wr.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},Wr.prototype.onMouseDown=function(t){"enabled"===this._state&&(t.ctrlKey||0!==ee.mouseButton(t)||(ee.addEventListener(H.default$1.document,"mousemove",this._onMove,{capture:!0}),ee.addEventListener(H.default$1.document,"mouseup",this._onMouseUp),this._start(t)))},Wr.prototype.onTouchStart=function(t){"enabled"===this._state&&(1<t.touches.length||(ee.addEventListener(H.default$1.document,"touchmove",this._onMove,{capture:!0,passive:!1}),ee.addEventListener(H.default$1.document,"touchend",this._onTouchEnd),this._start(t)))},Wr.prototype._start=function(t){H.default$1.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._lastPos=ee.mousePos(this._el,t),this._inertia=[[H.default$3.now(),this._startPos]]},Wr.prototype._onMove=function(t){t.preventDefault();var e=ee.mousePos(this._el,t);this._lastPos.equals(e)||(this._lastMoveEvent=t,this._lastPos=e,this._drainInertiaBuffer(),this._inertia.push([H.default$3.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._fireEvent("dragstart",t),this._fireEvent("movestart",t)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},Wr.prototype._onDragFrame=function(){this._frameId=null;var t=this._lastMoveEvent;if(t){var e=this._map.transform;e.setLocationAtPoint(e.pointLocation(this._startPos),this._lastPos),this._fireEvent("drag",t),this._fireEvent("move",t),this._startPos=this._lastPos,delete this._lastMoveEvent}},Wr.prototype._onMouseUp=function(t){if(0===ee.mouseButton(t))switch(this._state){case"active":this._state="enabled",ee.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind();break;default:H.default$2(!1)}},Wr.prototype._onTouchEnd=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind();break;default:H.default$2(!1)}},Wr.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("dragend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind();break;default:H.default$2(!1)}},Wr.prototype._unbind=function(){ee.removeEventListener(H.default$1.document,"touchmove",this._onMove,{capture:!0,passive:!1}),ee.removeEventListener(H.default$1.document,"touchend",this._onTouchEnd),ee.removeEventListener(H.default$1.document,"mousemove",this._onMove,{capture:!0}),ee.removeEventListener(H.default$1.document,"mouseup",this._onMouseUp),ee.removeEventListener(H.default$1,"blur",this._onBlur)},Wr.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._lastPos},Wr.prototype._inertialPan=function(t){this._fireEvent("dragend",t),this._drainInertiaBuffer();var e=this._inertia;if(e.length<2)this._fireEvent("moveend",t);else{var n=e[e.length-1],r=e[0],i=n[1].sub(r[1]),o=(n[0]-r[0])/1e3;if(0===o||n[1].equals(r[1]))this._fireEvent("moveend",t);else{var a=i.mult(Gr/o),s=a.mag();Yr<s&&(s=Yr,a._unit()._mult(s));var l=s/(Xr*Gr),u=a.mult(-l/2);this._map.panBy(u,{duration:1e3*l,easing:Zr,noMoveStart:!0},{originalEvent:t})}}},Wr.prototype._fireEvent=function(t,e){return this._map.fire(new H.Event(t,e?{originalEvent:e}:{}))},Wr.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=H.default$3.now(),n=160;0<t.length&&e-t[0][0]>n;)t.shift()};var Kr,Jr,Qr=100,ti=15,ei=10;(Kr=function(t){this._map=t,this._el=t.getCanvasContainer(),H.bindAll(["_onKeyDown"],this)}).prototype.isEnabled=function(){return!!this._enabled},Kr.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},Kr.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},Kr.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,n=0,r=0,i=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),i=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),i=1);break;case 38:t.shiftKey?r=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?r=-1:(o=1,t.preventDefault());break;default:return}var a=this._map,s=a.getZoom(),l={duration:300,delayEndEvents:500,easing:Vt,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:a.getBearing()+n*ti,pitch:a.getPitch()+r*ei,offset:[-i*Qr,-o*Qr],center:a.getCenter()};a.easeTo(l,{originalEvent:t})}},(Jr=function(t){this._map=t,H.bindAll(["_onDblClick","_onZoomEnd"],this)}).prototype.isEnabled=function(){return!!this._enabled},Jr.prototype.isActive=function(){return!!this._active},Jr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Jr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Jr.prototype.onTouchStart=function(t){var e=this;this.isEnabled()&&(1<t.points.length||(this._tapped?(clearTimeout(this._tapped),this._tapped=null,this._zoom(t)):this._tapped=setTimeout(function(){e._tapped=null},300)))},Jr.prototype.onDblClick=function(t){this.isEnabled()&&(t.originalEvent.preventDefault(),this._zoom(t))},Jr.prototype._zoom=function(t){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},Jr.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var ni,ri=.15,ii=H.bezier$1(0,0,ri,1),oi=12,ai=2.5,si=.15,li=10;(ni=function(t){this._map=t,this._el=t.getCanvasContainer(),H.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)}).prototype.isEnabled=function(){return!!this._enabled},ni.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around)},ni.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},ni.prototype.disableRotation=function(){this._rotationDisabled=!0},ni.prototype.enableRotation=function(){this._rotationDisabled=!1},ni.prototype.onStart=function(t){if(this.isEnabled()&&2===t.touches.length){var e=ee.mousePos(this._el,t.touches[0]),n=ee.mousePos(this._el,t.touches[1]);this._startVec=e.sub(n),this._gestureIntent=undefined,this._inertia=[],ee.addEventListener(H.default$1.document,"touchmove",this._onMove,{passive:!1}),ee.addEventListener(H.default$1.document,"touchend",this._onEnd)}},ni.prototype._getTouchEventData=function(t){var e=ee.mousePos(this._el,t.touches[0]),n=ee.mousePos(this._el,t.touches[1]),r=e.sub(n);return{vec:r,center:e.add(n).div(2),scale:r.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*r.angleWith(this._startVec)/Math.PI}},ni.prototype._onMove=function(t){if(2===t.touches.length){var e=this._getTouchEventData(t),n=e.vec,r=e.scale,i=e.bearing;if(!this._gestureIntent){var o=Math.abs(1-r)>si;Math.abs(i)>li?this._gestureIntent="rotate":o&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new H.Event(this._gestureIntent+"start",{originalEvent:t})),this._map.fire(new H.Event("movestart",{originalEvent:t})),this._startVec=n)}this._lastTouchEvent=t,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),t.preventDefault()}},ni.prototype._onTouchFrame=function(){this._frameId=null;var t=this._gestureIntent;if(t){var e=this._map.transform;this._startScale||(this._startScale=e.scale,this._startBearing=e.bearing);var n=this._getTouchEventData(this._lastTouchEvent),r=n.center,i=n.bearing,o=n.scale,a=e.pointLocation(r),s=e.locationPoint(a);"rotate"===t&&(e.bearing=this._startBearing+i),e.zoom=e.scaleZoom(this._startScale*o),e.setLocationAtPoint(a,s),this._map.fire(new H.Event(t,{originalEvent:this._lastTouchEvent})),this._map.fire(new H.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([H.default$3.now(),o,r])}},ni.prototype._onEnd=function(t){ee.removeEventListener(H.default$1.document,"touchmove",this._onMove,{passive:!1}),ee.removeEventListener(H.default$1.document,"touchend",this._onEnd);var e=this._gestureIntent,n=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,e){this._map.fire(new H.Event(e+"end",{originalEvent:t})),this._drainInertiaBuffer();var r=this._inertia,i=this._map;if(r.length<2)i.snapToNorth({},{originalEvent:t});else{var o=r[r.length-1],a=r[0],s=i.transform.scaleZoom(n*o[1]),l=i.transform.scaleZoom(n*a[1]),u=s-l,c=(o[0]-a[0])/1e3,h=o[2];if(0!==c&&s!==l){var p=u*ri/c;Math.abs(p)>ai&&(p=0<p?ai:-ai);var f=1e3*Math.abs(p/(oi*ri)),d=s+p*f/2e3;d<0&&(d=0),i.easeTo({zoom:d,duration:f,easing:ii,around:this._aroundCenter?i.getCenter():i.unproject(h),noMoveStart:!0},{originalEvent:t})}else i.snapToNorth({},{originalEvent:t})}}},ni.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=H.default$3.now(),n=160;2<t.length&&e-t[0][0]>n;)t.shift()};var ui,ci,hi,pi={scrollZoom:zr,boxZoom:Pr,dragRotate:Vr,dragPan:Wr,keyboard:Kr,doubleClickZoom:Jr,touchZoomRotate:ni},fi=function(n){function t(t,e){n.call(this),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=e.bearingSnap,H.bindAll(["_renderFrameCallback"],this)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),(t.prototype.constructor=t).prototype.getCenter=function(){return this.transform.center},t.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},t.prototype.panBy=function(t,e,n){return t=H["default"].convert(t).mult(-1),this.panTo(this.transform.center,H.extend({offset:t},e),n)},t.prototype.panTo=function(t,e,n){return this.easeTo(H.extend({center:t},e),n)},t.prototype.getZoom=function(){return this.transform.zoom},t.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},t.prototype.zoomTo=function(t,e,n){return this.easeTo(H.extend({zoom:t},e),n)},t.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},t.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},t.prototype.getBearing=function(){return this.transform.bearing},t.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},t.prototype.rotateTo=function(t,e,n){return this.easeTo(H.extend({bearing:t},e),n)},t.prototype.resetNorth=function(t,e){return this.rotateTo(0,H.extend({duration:1e3},t),e),this},t.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},t.prototype.getPitch=function(){return this.transform.pitch},t.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},t.prototype.cameraForBounds=function(t,e){if("number"==typeof(e=H.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},e)).padding){var n=e.padding;e.padding={top:n,bottom:n,right:n,left:n}}if(H.default$14(Object.keys(e.padding).sort(function(t,e){return t<e?-1:e<t?1:0}),["bottom","left","right","top"])){t=Ce.convert(t);var r=[(e.padding.left-e.padding.right)/2,(e.padding.top-e.padding.bottom)/2],i=Math.min(e.padding.right,e.padding.left),o=Math.min(e.padding.top,e.padding.bottom);e.offset=[e.offset[0]+r[0],e.offset[1]+r[1]];var a=H["default"].convert(e.offset),s=this.transform,l=s.project(t.getNorthWest()),u=s.project(t.getSouthEast()),c=u.sub(l),h=(s.width-2*i-2*Math.abs(a.x))/c.x,p=(s.height-2*o-2*Math.abs(a.y))/c.y;if(!(p<0||h<0))return e.center=s.unproject(l.add(u).div(2)),e.zoom=Math.min(s.scaleZoom(s.scale*Math.min(h,p)),e.maxZoom),e.bearing=0,e;H.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}else H.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")},t.prototype.fitBounds=function(t,e,n){var r=this.cameraForBounds(t,e);return r?(e=H.extend(r,e)).linear?this.easeTo(e,n):this.flyTo(e,n):this},t.prototype.jumpTo=function(t,e){this.stop();var n=this.transform,r=!1,i=!1,o=!1;return"zoom"in t&&n.zoom!==+t.zoom&&(r=!0,n.zoom=+t.zoom),t.center!==undefined&&(n.center=Se.convert(t.center)),"bearing"in t&&n.bearing!==+t.bearing&&(i=!0,n.bearing=+t.bearing),"pitch"in t&&n.pitch!==+t.pitch&&(o=!0,n.pitch=+t.pitch),this.fire(new H.Event("movestart",e)).fire(new H.Event("move",e)),r&&this.fire(new H.Event("zoomstart",e)).fire(new H.Event("zoom",e)).fire(new H.Event("zoomend",e)),i&&this.fire(new H.Event("rotatestart",e)).fire(new H.Event("rotate",e)).fire(new H.Event("rotateend",e)),o&&this.fire(new H.Event("pitchstart",e)).fire(new H.Event("pitch",e)).fire(new H.Event("pitchend",e)),this.fire(new H.Event("moveend",e))},t.prototype.easeTo=function(t,o){var a=this;this.stop(),!1===(t=H.extend({offset:[0,0],duration:500,easing:H.ease},t)).animate&&(t.duration=0);var s=this.transform,l=this.getZoom(),u=this.getBearing(),c=this.getPitch(),h="zoom"in t?+t.zoom:l,p="bearing"in t?this._normalizeBearing(t.bearing,u):u,f="pitch"in t?+t.pitch:c,d=s.centerPoint.add(H["default"].convert(t.offset)),e=s.pointLocation(d),n=Se.convert(t.center||e);this._normalizeCenter(n);var m,g,y=s.project(e),v=s.project(n).sub(y),_=s.zoomScale(h-l);return t.around&&(m=Se.convert(t.around),g=s.locationPoint(m)),this._zooming=h!==l,this._rotating=u!==p,this._pitching=f!==c,this._prepareEase(o,t.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(t){if(a._zooming&&(s.zoom=H.number(l,h,t)),a._rotating&&(s.bearing=H.number(u,p,t)),a._pitching&&(s.pitch=H.number(c,f,t)),m)s.setLocationAtPoint(m,g);else{var e=s.zoomScale(s.zoom-l),n=l<h?Math.min(2,_):Math.max(.5,_),r=Math.pow(n,1-t),i=s.unproject(y.add(v.mult(t*r)).mult(e));s.setLocationAtPoint(s.renderWorldCopies?i.wrap():i,d)}a._fireMoveEvents(o)},function(){t.delayEndEvents?a._easeEndTimeoutID=setTimeout(function(){return a._afterEase(o)},t.delayEndEvents):a._afterEase(o)},t),this},t.prototype._prepareEase=function(t,e){this._moving=!0,e||this.fire(new H.Event("movestart",t)),this._zooming&&this.fire(new H.Event("zoomstart",t)),this._rotating&&this.fire(new H.Event("rotatestart",t)),this._pitching&&this.fire(new H.Event("pitchstart",t))},t.prototype._fireMoveEvents=function(t){this.fire(new H.Event("move",t)),this._zooming&&this.fire(new H.Event("zoom",t)),this._rotating&&this.fire(new H.Event("rotate",t)),this._pitching&&this.fire(new H.Event("pitch",t))},t.prototype._afterEase=function(t){var e=this._zooming,n=this._rotating,r=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,e&&this.fire(new H.Event("zoomend",t)),n&&this.fire(new H.Event("rotateend",t)),r&&this.fire(new H.Event("pitchend",t)),this.fire(new H.Event("moveend",t))},t.prototype.flyTo=function(t,i){function e(t){var e=(w*w-b*b+(t?-1:1)*C*C*E*E)/(2*(t?w:b)*C*E);return Math.log(Math.sqrt(e*e+1)-e)}function n(t){return(Math.exp(t)-Math.exp(-t))/2}function r(t){return(Math.exp(t)+Math.exp(-t))/2}function o(t){return n(t)/r(t)}var a=this;this.stop(),t=H.extend({offset:[0,0],speed:1.2,curve:1.42,easing:H.ease},t);var s=this.transform,l=this.getZoom(),u=this.getBearing(),c=this.getPitch(),h="zoom"in t?H.clamp(+t.zoom,s.minZoom,s.maxZoom):l,p="bearing"in t?this._normalizeBearing(t.bearing,u):u,f="pitch"in t?+t.pitch:c,d=s.zoomScale(h-l),m=s.centerPoint.add(H["default"].convert(t.offset)),g=s.pointLocation(m),y=Se.convert(t.center||g);this._normalizeCenter(y);var v=s.project(g),_=s.project(y).sub(v),x=t.curve,b=Math.max(s.width,s.height),w=b/d,E=_.mag();if("minZoom"in t){var T=H.clamp(Math.min(t.minZoom,l,h),s.minZoom,s.maxZoom),S=b/s.zoomScale(T-l);x=Math.sqrt(S/E*2)}var C=x*x,A=e(0),I=function(t){return r(A)/r(A+x*t)},M=function(t){return b*((r(A)*o(A+x*t)-n(A))/C)/E},k=(e(1)-A)/x;if(Math.abs(E)<1e-6||!isFinite(k)){if(Math.abs(b-w)<1e-6)return this.easeTo(t,i);var D=w<b?-1:1;k=Math.abs(Math.log(w/b))/x,M=function(){return 0},I=function(t){return Math.exp(D*x*t)}}if("duration"in t)t.duration=+t.duration;else{var z="screenSpeed"in t?+t.screenSpeed/x:+t.speed;t.duration=1e3*k/z}return t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=u!==p,this._pitching=f!==c,this._prepareEase(i,!1),this._ease(function(t){var e=t*k,n=1/I(e);s.zoom=l+s.scaleZoom(n),a._rotating&&(s.bearing=H.number(u,p,t)),a._pitching&&(s.pitch=H.number(c,f,t));var r=s.unproject(v.add(_.mult(M(e))).mult(n));s.setLocationAtPoint(s.renderWorldCopies?r.wrap():r,m),a._fireMoveEvents(i)},function(){return a._afterEase(i)},t),this},t.prototype.isEasing=function(){return!!this._easeFrameId},t.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var t=this._onEaseEnd;delete this._onEaseEnd,t.call(this)}return this},t.prototype._ease=function(t,e,n){!1===n.animate||0===n.duration?(t(1),e()):(this._easeStart=H.default$3.now(),this._easeOptions=n,this._onEaseFrame=t,this._onEaseEnd=e,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},t.prototype._renderFrameCallback=function(){var t=Math.min((H.default$3.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},t.prototype._normalizeBearing=function(t,e){t=H.wrap(t,-180,180);var n=Math.abs(t-e);return Math.abs(t-360-e)<n&&(t-=360),Math.abs(t+360-e)<n&&(t+=360),t},t.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var n=t.lng-e.center.lng;t.lng+=180<n?-360:n<-180?360:0}},t}(H.Evented);(ui=function(t){void 0===t&&(t={}),this.options=t,H.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)}).prototype.getDefaultPosition=function(){return"bottom-right"},ui.prototype.onAdd=function(t){
var e=this.options&&this.options.compact;return this._map=t,this._container=ee.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),e===undefined&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},ui.prototype.onRemove=function(){ee.remove(this._container),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=undefined},ui.prototype._updateEditLink=function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));var r=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:ue.ACCESS_TOKEN}];if(t){var e=r.reduce(function(t,e,n){return e.value&&(t+=e.key+"="+e.value+(n<r.length-1?"&":"")),t},"?");t.href="https://www.mapbox.com/feedback/"+e+(this._map._hash?this._map._hash.getHashString(!0):"")}},ui.prototype._updateData=function(t){t&&"metadata"===t.sourceDataType&&(this._updateAttributions(),this._updateEditLink())},ui.prototype._updateAttributions=function(){if(this._map.style){var r=[];if(this._map.style.stylesheet){var t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}var e=this._map.style.sourceCaches;for(var n in e){var i=e[n].getSource();i.attribution&&r.indexOf(i.attribution)<0&&r.push(i.attribution)}r.sort(function(t,e){return t.length-e.length}),(r=r.filter(function(t,e){for(var n=e+1;n<r.length;n++)if(0<=r[n].indexOf(t))return!1;return!0})).length?(this._container.innerHTML=r.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null}},ui.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")},(ci=function(){H.bindAll(["_updateLogo"],this),H.bindAll(["_updateCompact"],this)}).prototype.onAdd=function(t){this._map=t,this._container=ee.create("div","mapboxgl-ctrl");var e=ee.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.href="https://www.mapbox.com/",e.setAttribute("aria-label","Mapbox logo"),e.setAttribute("rel","noopener"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ci.prototype.onRemove=function(){ee.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ci.prototype.getDefaultPosition=function(){return"bottom-left"},ci.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},ci.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t){if(t[e].getSource().mapbox_logo)return!0}return!1}},ci.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}},(hi=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}).prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},hi.prototype.remove=function(t){for(var e=this._currentlyRunning,n=0,r=e?this._queue.concat(e):this._queue;n<r.length;n+=1){var i=r[n];if(i.id===t)return void(i.cancelled=!0)}},hi.prototype.run=function(){var t=this;H.default$2(!this._currentlyRunning);var e=this._currentlyRunning=this._queue;this._queue=[];for(var n=0,r=e;n<r.length;n+=1){var i=r[n];if(!i.cancelled&&(i.callback(),t._cleared))break}this._cleared=!1,this._currentlyRunning=!1},hi.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var di,mi=H.default$1.HTMLImageElement,gi=H.default$1.HTMLElement,yi=0,vi=22,_i={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:yi,maxZoom:vi,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},xi=function(h){function t(t){if(null!=(t=H.extend({},_i,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than minZoom");var e=new Mr(t.minZoom,t.maxZoom,t.renderWorldCopies);h.call(this,e,t),this._interactive=t.interactive,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._crossSourceCollisions=t.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=t.collectResourceTiming,this._renderTaskQueue=new hi;var n=t.transformRequest;if(this._transformRequest=n?function(t,e){return n(t,e)||{url:t}}:function(t){return{url:t}},"string"==typeof t.container){var r=H.default$1.document.getElementById(t.container);if(!r)throw new Error("Container '"+t.container+"' not found.");this._container=r}else{if(!(t.container instanceof gi))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(t.maxBounds&&this.setMaxBounds(t.maxBounds),H.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored","_update","_render","_onData","_onDataLoading"],this),this._setupContainer(),this._setupPainter(),this.painter===undefined)throw new Error("Failed to initialize WebGL.");this.on("move",this._update.bind(this,!1)),this.on("zoom",this._update.bind(this,!0)),"undefined"!=typeof H.default$1&&(H.default$1.addEventListener("online",this._onWindowOnline,!1),H.default$1.addEventListener("resize",this._onWindowResize,!1)),$t(this,t),this._hash=t.hash&&(new kr).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),this.resize(),t.style&&this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&this.addControl(new ui),this.addControl(new ci,t.logoPosition),this.on("style.load",function(){this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",this._onData),this.on("dataloading",this._onDataLoading)}h&&(t.__proto__=h),t.prototype=Object.create(h&&h.prototype);var e={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0}};return(t.prototype.constructor=t).prototype.addControl=function(t,e){e===undefined&&t.getDefaultPosition&&(e=t.getDefaultPosition()),e===undefined&&(e="top-right");var n=t.onAdd(this),r=this._controlPositions[e];return-1!==e.indexOf("bottom")?r.insertBefore(n,r.firstChild):r.appendChild(n),this},t.prototype.removeControl=function(t){return t.onRemove(this),this},t.prototype.resize=function(t){var e=this._containerDimensions(),n=e[0],r=e[1];return this._resizeCanvas(n,r),this.transform.resize(n,r),this.painter.resize(n,r),this.fire(new H.Event("movestart",t)).fire(new H.Event("move",t)).fire(new H.Event("resize",t)).fire(new H.Event("moveend",t))},t.prototype.getBounds=function(){var t=new Ce(this.transform.pointLocation(new H["default"](0,this.transform.height)),this.transform.pointLocation(new H["default"](this.transform.width,0)));return(this.transform.angle||this.transform.pitch)&&(t.extend(this.transform.pointLocation(new H["default"](this.transform.size.x,0))),t.extend(this.transform.pointLocation(new H["default"](0,this.transform.size.y)))),t},t.prototype.getMaxBounds=function(){return this.transform.latRange&&2===this.transform.latRange.length&&this.transform.lngRange&&2===this.transform.lngRange.length?new Ce([this.transform.lngRange[0],this.transform.latRange[0]],[this.transform.lngRange[1],this.transform.latRange[1]]):null},t.prototype.setMaxBounds=function(t){if(t){var e=Ce.convert(t);this.transform.lngRange=[e.getWest(),e.getEast()],this.transform.latRange=[e.getSouth(),e.getNorth()],this.transform._constrain(),this._update()}else null!==t&&t!==undefined||(this.transform.lngRange=null,this.transform.latRange=null,this._update());return this},t.prototype.setMinZoom=function(t){if(t=null===t||t===undefined?yi:t,yi<=t&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between "+yi+" and the current maxZoom, inclusive")},t.prototype.getMinZoom=function(){return this.transform.minZoom},t.prototype.setMaxZoom=function(t){if((t=null===t||t===undefined?vi:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},t.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},t.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update(),this},t.prototype.getMaxZoom=function(){return this.transform.maxZoom},t.prototype.project=function(t){return this.transform.locationPoint(Se.convert(t))},t.prototype.unproject=function(t){return this.transform.pointLocation(H["default"].convert(t))},t.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},t.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isActive()},t.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},t.prototype.on=function(a,s,l){var u,c=this;if(l===undefined)return h.prototype.on.call(this,a,s);var t=function(){if("mouseenter"===a||"mouseover"===a){var n=!1,t=function(t){var e=c.getLayer(s)?c.queryRenderedFeatures(t.point,{layers:[s]}):[];e.length?n||(n=!0,l.call(c,new Lr(a,c,t.originalEvent,{features:e}))):n=!1};return{layer:s,listener:l,delegates:{mousemove:t,mouseout:function(){n=!1}}}}if("mouseleave"===a||"mouseout"===a){var e=!1,r=function(t){(c.getLayer(s)?c.queryRenderedFeatures(t.point,{layers:[s]}):[]).length?e=!0:e&&(e=!1,l.call(c,new Lr(a,c,t.originalEvent)))},i=function(t){e&&(e=!1,l.call(c,new Lr(a,c,t.originalEvent)))};return{layer:s,listener:l,delegates:{mousemove:r,mouseout:i}}}var o=function(t){var e=c.getLayer(s)?c.queryRenderedFeatures(t.point,{layers:[s]}):[];e.length&&(t.features=e,l.call(c,t),delete t.features)};return{layer:s,listener:l,delegates:(u={},u[a]=o,u)}}();for(var e in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[a]=this._delegatedListeners[a]||[],this._delegatedListeners[a].push(t),t.delegates)c.on(e,t.delegates[e]);return this},t.prototype.off=function(t,e,n){var r=this;if(n===undefined)return h.prototype.off.call(this,t,e);if(this._delegatedListeners&&this._delegatedListeners[t])for(var i=this._delegatedListeners[t],o=0;o<i.length;o++){var a=i[o];if(a.layer===e&&a.listener===n){for(var s in a.delegates)r.off(s,a.delegates[s]);return i.splice(o,1),r}}return this},t.prototype.queryRenderedFeatures=function(t,e){function n(t){return t instanceof H["default"]||Array.isArray(t)}return 2===arguments.length?(t=arguments[0],e=arguments[1]):1===arguments.length&&n(arguments[0])?(t=arguments[0],e={}):1===arguments.length?(t=undefined,e=arguments[0]):(t=undefined,e={}),this.style?this.style.queryRenderedFeatures(this._makeQueryGeometry(t),e,this.transform):[]},t.prototype._makeQueryGeometry=function(t){var e,n=this;if(t===undefined&&(t=[H["default"].convert([0,0]),H["default"].convert([this.transform.width,this.transform.height])]),t instanceof H["default"]||"number"==typeof t[0]){e=[H["default"].convert(t)]}else{var r=[H["default"].convert(t[0]),H["default"].convert(t[1])];e=[r[0],new H["default"](r[1].x,r[0].y),r[1],new H["default"](r[0].x,r[1].y),r[0]]}return{viewport:e,worldCoordinate:e.map(function(t){return n.transform.pointCoordinate(t)})}},t.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},t.prototype.setStyle=function(t,e){if((!e||!1!==e.diff&&!e.localIdeographFontFamily)&&this.style&&t&&"object"==typeof t)try{return this.style.setState(t)&&this._update(!0),this}catch(n){H.warnOnce("Unable to perform style diff: "+(n.message||n.error||n)+".  Rebuilding the style from scratch.")}return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new fr(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t)):delete this.style,this},t.prototype.getStyle=function(){if(this.style)return this.style.serialize()},t.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():H.warnOnce("There is no style added to the map.")},t.prototype.addSource=function(t,e){return this.style.addSource(t,e),this._update(!0),this},t.prototype.isSourceLoaded=function(t){var e=this.style&&this.style.sourceCaches[t];if(e!==undefined)return e.loaded();this.fire(new H.ErrorEvent(new Error("There is no source with ID '"+t+"'")))},t.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var n=t[e]._tiles;for(var r in n){var i=n[r];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0},t.prototype.addSourceType=function(t,e,n){return this.style.addSourceType(t,e,n)},t.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0),this},t.prototype.getSource=function(t){return this.style.getSource(t)},t.prototype.addImage=function(t,e,n){void 0===n&&(n={});var r=n.pixelRatio;void 0===r&&(r=1);var i=n.sdf;if(void 0===i&&(i=!1),e instanceof mi){var o=H.default$3.getImageData(e),a=o.width,s=o.height,l=o.data;this.style.addImage(t,{data:new H.RGBAImage({width:a,height:s},l),pixelRatio:r,sdf:i})}else{if(e.width===undefined||e.height===undefined)return this.fire(new H.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var u=e.width,c=e.height,h=e.data;this.style.addImage(t,{data:new H.RGBAImage({width:u,height:c},new Uint8Array(h)),pixelRatio:r,sdf:i})}},t.prototype.hasImage=function(t){return t?!!this.style.getImage(t):(this.fire(new H.ErrorEvent(new Error("Missing required image id"))),!1)},t.prototype.removeImage=function(t){this.style.removeImage(t)},t.prototype.loadImage=function(t,e){H.getImage(this._transformRequest(t,H.ResourceType.Image),e)},t.prototype.listImages=function(){return this.style.listImages()},t.prototype.addLayer=function(t,e){return this.style.addLayer(t,e),this._update(!0),this},t.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0),this},t.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0),this},t.prototype.getLayer=function(t){return this.style.getLayer(t)},t.prototype.setFilter=function(t,e){return this.style.setFilter(t,e),this._update(!0),this},t.prototype.setLayerZoomRange=function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0),this},t.prototype.getFilter=function(t){return this.style.getFilter(t)},t.prototype.setPaintProperty=function(t,e,n){return this.style.setPaintProperty(t,e,n),this._update(!0),this},t.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},t.prototype.setLayoutProperty=function(t,e,n){return this.style.setLayoutProperty(t,e,n),this._update(!0),this},t.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},t.prototype.setLight=function(t){return this.style.setLight(t),this._update(!0),this},t.prototype.getLight=function(){return this.style.getLight()},t.prototype.setFeatureState=function(t,e){this.style.setFeatureState(t,e),this._update()},t.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},t.prototype.getContainer=function(){return this._container},t.prototype.getCanvasContainer=function(){return this._canvasContainer},t.prototype.getCanvas=function(){return this._canvas},t.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.offsetWidth||400,e=this._container.offsetHeight||300),[t,e]},t.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==H.default$1.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&H.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},t.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=ee.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=ee.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=ee.create("canvas","mapboxgl-canvas",e),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);var r=this._controlContainer=ee.create("div","mapboxgl-control-container",t),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){i[t]=ee.create("div","mapboxgl-ctrl-"+t,r)})},t.prototype._resizeCanvas=function(t,e){var n=H.default$1.devicePixelRatio||1;this._canvas.width=n*t,this._canvas.height=n*e,this._canvas.style.width=t+"px",this._canvas.style.height=e+"px"},t.prototype._setupPainter=function(){var t=H.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},Qt.webGLContextAttributes),e=this._canvas.getContext("webgl",t)||this._canvas.getContext("experimental-webgl",t);e?this.painter=new br(e,this.transform):this.fire(new H.ErrorEvent(new Error("Failed to initialize WebGL")))},t.prototype._contextLost=function(t){t.preventDefault(),this._frameId&&(H.default$3.cancelFrame(this._frameId),this._frameId=null),this.fire(new H.Event("webglcontextlost",{originalEvent:t}))},t.prototype._contextRestored=function(t){this._setupPainter(),this.resize(),this._update(),this.fire(new H.Event("webglcontextrestored",{originalEvent:t}))},t.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!(!this.style||!this.style.loaded())},t.prototype._update=function(t){this.style&&(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this._rerender())},t.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},t.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},t.prototype._render=function(){this._renderTaskQueue.run();var t=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var e=this.transform.zoom,n=H.default$3.now();this.style.zoomHistory.update(e,n);var r=new H.default$24(e,{now:n,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),i=r.crossFadingFactor();1===i&&i===this._crossFadingFactor||(t=!0,this._crossFadingFactor=i),this.style.update(r)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),fadeDuration:this._fadeDuration}),this.fire(new H.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new H.Event("load"))),this.style&&(this.style.hasTransitions()||t)&&(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty)&&this._rerender(),this},t.prototype.remove=function(){this._hash&&this._hash.remove(),H.default$3.cancelFrame(this._frameId),this._renderTaskQueue.clear(),this._frameId=null,this.setStyle(null),"undefined"!=typeof H.default$1&&(H.default$1.removeEventListener("resize",this._onWindowResize,!1),H.default$1.removeEventListener("online",this._onWindowOnline,!1));var t=this.painter.context.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),qt(this._canvasContainer),qt(this._controlContainer),qt(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new H.Event("remove"))},t.prototype._rerender=function(){var t=this;this.style&&!this._frameId&&(this._frameId=H.default$3.frame(function(){t._frameId=null,t._render()}))},t.prototype._onWindowOnline=function(){this._update()},t.prototype._onWindowResize=function(){this._trackResize&&this.stop().resize()._update()},e.showTileBoundaries.get=function(){return!!this._showTileBoundaries},e.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},e.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},e.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&((this._showCollisionBoxes=t)?this.style._generateCollisionBoxes():this._update())},e.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},e.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},e.repaint.get=function(){return!!this._repaint},e.repaint.set=function(t){this._repaint=t,this._update()},e.vertices.get=function(){return!!this._vertices},e.vertices.set=function(t){this._vertices=t,this._update()},t.prototype._onData=function(t){this._update("style"===t.dataType),this.fire(new H.Event(t.dataType+"data",t))},t.prototype._onDataLoading=function(t){this.fire(new H.Event(t.dataType+"dataloading",t))},Object.defineProperties(t.prototype,e),t}(fi),bi={showCompass:!0,showZoom:!0};(di=function(t){var e=this;this.options=H.extend({},bi,t),this._container=ee.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this.options.showZoom&&(this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom In",function(){return e._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom Out",function(){return e._map.zoomOut()})),this.options.showCompass&&(H.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset North",function(){return e._map.resetNorth()}),this._compassArrow=ee.create("span","mapboxgl-ctrl-compass-arrow",this._compass))}).prototype._rotateCompassArrow=function(){var t="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=t},di.prototype.onAdd=function(t){return this._map=t,this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Vr(t,{button:"left",element:this._compass}),ee.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.enable()),this._container},di.prototype.onRemove=function(){ee.remove(this._container),this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),ee.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.disable(),delete this._handler),delete this._map},di.prototype._createButton=function(t,e,n){var r=ee.create("button",t,this._container);return r.type="button",r.setAttribute("aria-label",e),r.addEventListener("click",n),r};var wi,Ei,Ti,Si={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},Ci=function(v){function t(t,e){if(v.call(this),(arguments[0]instanceof H.default$1.HTMLElement||2===arguments.length)&&(t=H.extend({element:t},e)),H.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._draggable=t&&t.draggable||!1,this._state="inactive",t&&t.element)this._element=t.element,this._offset=H["default"].convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=ee.create("div");var n=ee.createNS("http://www.w3.org/2000/svg","svg");n.setAttributeNS(null,"height","41px"),n.setAttributeNS(null,"width","27px"),n.setAttributeNS(null,"viewBox","0 0 27 41");var r=ee.createNS("http://www.w3.org/2000/svg","g");r.setAttributeNS(null,"stroke","none"),r.setAttributeNS(null,"stroke-width","1"),r.setAttributeNS(null,"fill","none"),r.setAttributeNS(null,"fill-rule","evenodd");var i=ee.createNS("http://www.w3.org/2000/svg","g");i.setAttributeNS(null,"fill-rule","nonzero");var o=ee.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"transform","translate(3.0, 29.0)"),o.setAttributeNS(null,"fill","#000000");for(var a=0,s=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];a<s.length;a+=1){var l=s[a],u=ee.createNS("http://www.w3.org/2000/svg","ellipse");u.setAttributeNS(null,"opacity","0.04"),u.setAttributeNS(null,"cx","10.5"),u.setAttributeNS(null,"cy","5.80029008"),u.setAttributeNS(null,"rx",l.rx),u.setAttributeNS(null,"ry",l.ry),o.appendChild(u)}var c=ee.createNS("http://www.w3.org/2000/svg","g");c.setAttributeNS(null,"fill",this._color);var h=ee.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),c.appendChild(h);var p=ee.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"opacity","0.25"),p.setAttributeNS(null,"fill","#000000");var f=ee.createNS("http://www.w3.org/2000/svg","path");f.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),p.appendChild(f);var d=ee.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"transform","translate(6.0, 7.0)"),d.setAttributeNS(null,"fill","#FFFFFF");var m=ee.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(8.0, 8.0)");var g=ee.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#000000"),g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962");var y=ee.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#FFFFFF"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962"),m.appendChild(g),m.appendChild(y),i.appendChild(o),i.appendChild(c),i.appendChild(p),i.appendChild(d),i.appendChild(m),n.appendChild(i),this._element.appendChild(n),this._offset=H["default"].convert(t&&t.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._popup=null}return v&&(t.__proto__=v),t.prototype=Object.create(v&&v.prototype),(t.prototype.constructor=t).prototype.addTo=function(t){return this.remove(),(this._map=t).getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},t.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),delete this._map),ee.remove(this._element),this._popup&&this._popup.remove(),this},t.prototype.getLngLat=function(){return this._lngLat},t.prototype.setLngLat=function(t){return this._lngLat=Se.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},t.prototype.getElement=function(){return this._element},t.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null),t){if(!("offset"in t.options)){var e=38.1,n=13.5,r=Math.sqrt(Math.pow(n,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-e],"bottom-left":[r,-1*(e-n+r)],"bottom-right":[-r,-1*(e-n+r)],left:[n,-1*(e-n)],right:[-n,-1*(e-n)]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat)}return this},t.prototype._onMapClick=function(t){var e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()},t.prototype.getPopup=function(){return this._popup},t.prototype.togglePopup=function(){var t=this._popup;return t&&(t.isOpen()?t.remove():t.addTo(this._map)),this},t.prototype._update=function(t){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=Ut(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),t&&"moveend"!==t.type||(this._pos=this._pos.round()),ee.setTransform(this._element,Si[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px)"),Ht(this._element,this._anchor,"marker"))},t.prototype.getOffset=function(){return this._offset},t.prototype.setOffset=function(t){return this._offset=H["default"].convert(t),this._update(),this},t.prototype._onMove=function(t){this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new H.Event("dragstart"))),this.fire(new H.Event("drag"))},t.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new H.Event("dragend")),this._state="inactive"},t.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},t.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},t.prototype.isDraggable=function(){return this._draggable},t}(H.Evented),Ai={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},Ii="mapboxgl-ctrl",Mi=function(e){function t(t){e.call(this),this.options=H.extend({},Ai,t),H.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.onAdd=function(t){return this._map=t,this._container=ee.create("div",Ii+" "+Ii+"-group"),Wt(this._setupUI),this._container},t.prototype.onRemove=function(){this._geolocationWatchID!==undefined&&(H.default$1.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=undefined),
this.options.showUserLocation&&this._userLocationDotMarker.remove(),ee.remove(this._container),this._map=undefined},t.prototype._onSuccess=function(t){if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;default:H.default$2(!1,"Unexpected watchState "+this._watchState)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new H.Event("geolocate",t)),this._finish()},t.prototype._updateCamera=function(t){var e=new Se(t.coords.longitude,t.coords.latitude),n=t.coords.accuracy;this._map.fitBounds(e.toBounds(n),this.options.fitBoundsOptions,{geolocateSource:!0})},t.prototype._updateMarker=function(t){t?this._userLocationDotMarker.setLngLat([t.coords.longitude,t.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},t.prototype._onError=function(t){if(this.options.trackUserLocation)if(1===t.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocationWatchID!==undefined&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:H.default$2(!1,"Unexpected watchState "+this._watchState)}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new H.Event("error",t)),this._finish()},t.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=undefined},t.prototype._setupUI=function(t){var e=this;!1!==t&&(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=ee.create("button",Ii+"-icon "+Ii+"-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=ee.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ci(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(t){t.geolocateSource||"ACTIVE_LOCK"!==e._watchState||(e._watchState="BACKGROUND",e._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),e._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),e.fire(new H.Event("trackuserlocationend")))}))},t.prototype.trigger=function(){if(!this._setup)return H.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new H.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new H.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new H.Event("trackuserlocationstart"));break;default:H.default$2(!1,"Unexpected watchState "+this._watchState)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break;case"OFF":break;default:H.default$2(!1,"Unexpected watchState "+this._watchState)}"OFF"===this._watchState&&this._geolocationWatchID!==undefined?this._clearWatch():this._geolocationWatchID===undefined&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=H.default$1.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else H.default$1.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},t.prototype._clearWatch=function(){H.default$1.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=undefined,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},t}(H.Evented),ki={maxWidth:100,unit:"metric"};(Ei=function(t){this.options=H.extend({},ki,t),H.bindAll(["_onMove","setUnit"],this)}).prototype.getDefaultPosition=function(){return"bottom-left"},Ei.prototype._onMove=function(){Gt(this._map,this._container,this.options)},Ei.prototype.onAdd=function(t){return this._map=t,this._container=ee.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ei.prototype.onRemove=function(){ee.remove(this._container),this._map.off("move",this._onMove),this._map=undefined},Ei.prototype.setUnit=function(t){this.options.unit=t,Gt(this._map,this._container,this.options)},(Ti=function(){this._fullscreen=!1,H.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in H.default$1.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in H.default$1.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in H.default$1.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in H.default$1.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"}).prototype.onAdd=function(t){return this._map=t,this._mapContainer=this._map.getContainer(),this._container=ee.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._container.style.display="none",H.warnOnce("This device does not support fullscreen mode.")),this._container},Ti.prototype.onRemove=function(){ee.remove(this._container),this._map=null,H.default$1.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ti.prototype._checkFullscreenSupport=function(){return!!(H.default$1.document.fullscreenEnabled||H.default$1.document.mozFullScreenEnabled||H.default$1.document.msFullscreenEnabled||H.default$1.document.webkitFullscreenEnabled)},Ti.prototype._setupUI=function(){var t=this._fullscreenButton=ee.create("button",this._className+"-icon "+this._className+"-fullscreen",this._container);t.setAttribute("aria-label","Toggle fullscreen"),t.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),H.default$1.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ti.prototype._isFullscreen=function(){return this._fullscreen},Ti.prototype._changeIcon=function(){(H.default$1.document.fullscreenElement||H.default$1.document.mozFullScreenElement||H.default$1.document.webkitFullscreenElement||H.default$1.document.msFullscreenElement)===this._mapContainer!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))},Ti.prototype._onClickFullscreen=function(){this._isFullscreen()?H.default$1.document.exitFullscreen?H.default$1.document.exitFullscreen():H.default$1.document.mozCancelFullScreen?H.default$1.document.mozCancelFullScreen():H.default$1.document.msExitFullscreen?H.default$1.document.msExitFullscreen():H.default$1.document.webkitCancelFullScreen&&H.default$1.document.webkitCancelFullScreen():this._mapContainer.requestFullscreen?this._mapContainer.requestFullscreen():this._mapContainer.mozRequestFullScreen?this._mapContainer.mozRequestFullScreen():this._mapContainer.msRequestFullscreen?this._mapContainer.msRequestFullscreen():this._mapContainer.webkitRequestFullscreen&&this._mapContainer.webkitRequestFullscreen()};var Di={closeButton:!0,closeOnClick:!0,className:""},zi=function(e){function t(t){e.call(this),this.options=H.extend(Object.create(Di),t),H.bindAll(["_update","_onClickClose"],this)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),(t.prototype.constructor=t).prototype.addTo=function(t){return this._map=t,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this.fire(new H.Event("open")),this},t.prototype.isOpen=function(){return!!this._map},t.prototype.remove=function(){return this._content&&ee.remove(this._content),this._container&&(ee.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire(new H.Event("close")),this},t.prototype.getLngLat=function(){return this._lngLat},t.prototype.setLngLat=function(t){return this._lngLat=Se.convert(t),this._pos=null,this._update(),this},t.prototype.setText=function(t){return this.setDOMContent(H.default$1.document.createTextNode(t))},t.prototype.setHTML=function(t){var e,n=H.default$1.document.createDocumentFragment(),r=H.default$1.document.createElement("body");for(r.innerHTML=t;e=r.firstChild;)n.appendChild(e);return this.setDOMContent(n)},t.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},t.prototype._createContent=function(){this._content&&ee.remove(this._content),this._content=ee.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=ee.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},t.prototype._update=function(){var e=this;if(this._map&&this._lngLat&&this._content){this._container||(this._container=ee.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=ee.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(t){return e._container.classList.add(t)})),this._map.transform.renderWorldCopies&&(this._lngLat=Ut(this._lngLat,this._pos,this._map.transform));var t=this._pos=this._map.project(this._lngLat),n=this.options.anchor,r=Kt(this.options.offset);if(!n){var i,o=this._container.offsetWidth,a=this._container.offsetHeight;i=t.y+r.bottom.y<a?["top"]:t.y>this._map.transform.height-a?["bottom"]:[],t.x<o/2?i.push("left"):t.x>this._map.transform.width-o/2&&i.push("right"),n=0===i.length?"bottom":i.join("-")}var s=t.add(r[n]).round();ee.setTransform(this._container,Si[n]+" translate("+s.x+"px,"+s.y+"px)"),Ht(this._container,n,"popup")}},t.prototype._onClickClose=function(){this.remove()},t}(H.Evented),Pi={version:te,supported:Qt,workerCount:Math.max(Math.floor(H.default$3.hardwareConcurrency/2),1),setRTLTextPlugin:H.setRTLTextPlugin,Map:xi,NavigationControl:di,GeolocateControl:Mi,AttributionControl:ui,ScaleControl:Ei,FullscreenControl:Ti,Popup:zi,Marker:Ci,Style:fr,LngLat:Se,LngLatBounds:Ce,Point:H["default"],Evented:H.Evented,config:ue,get accessToken(){return ue.ACCESS_TOKEN},set accessToken(t){ue.ACCESS_TOKEN=t},workerUrl:""};return H.default$2(!0,"canary assert"),Pi}),a});